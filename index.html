<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://cookieseventeen.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Ben Hsieh">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">任何一件事做到極致都值得敬佩</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜尋"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜尋"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://cookieseventeen.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-eslint-configuration-best-practices-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/eslint-configuration-best-practices-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T06:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/eslint-configuration-best-practices-guide/">ESLint 9.x 革命性配置與前端開發最佳化實戰指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="📋-核心懶人包"><a href="#📋-核心懶人包" class="headerlink" title="📋 核心懶人包"></a>📋 核心懶人包</h2><ol>
<li><strong>ESLint 9.x 革命</strong>：Flat Config 取代複雜層級配置，單一檔案管理所有規則</li>
<li><strong>命名規範科學</strong>：TypeScript Interface PascalCase 降低認知負荷</li>
<li><strong>–no-warn-ignored 優化</strong>：消除噪音提醒，專注真正需要修正的問題</li>
<li><strong>專案重構思維</strong>：系統性檢查影響域，自動化驗證確保一致性</li>
<li><strong>Observable $ 後綴</strong>：現代匈牙利命名法，視覺化類型系統</li>
</ol>
<h2 id="🛠️-專案概述"><a href="#🛠️-專案概述" class="headerlink" title="🛠️ 專案概述"></a>🛠️ 專案概述</h2><p>本文深度分析了 ESLint 9.x 在能源管理系統 Angular 前端專案中的配置實戰，展示如何透過現代化工具鏈提升開發體驗：</p>
<ul>
<li>⚡ <strong>ESLint 9.x 升級</strong>：Flat Config 簡化配置管理</li>
<li>🎯 <strong>命名規範優化</strong>：TypeScript 和 Angular 最佳實踐</li>
<li>🔧 <strong>開發體驗改善</strong>：減少噪音，提升 CI&#x2F;CD 效率</li>
<li>🔄 <strong>重構策略</strong>：系統性方法處理專案改名和架構調整</li>
<li>📊 <strong>效果評估</strong>：配置即文檔的團隊協作哲學</li>
</ul>
<h2 id="🏗️-ESLint-9-x-配置架構"><a href="#🏗️-ESLint-9-x-配置架構" class="headerlink" title="🏗️ ESLint 9.x 配置架構"></a>🏗️ ESLint 9.x 配置架構</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ESLint 9.x] --&gt; B[Flat Config]</span><br><span class="line">    B --&gt; C[單一配置檔案]</span><br><span class="line">    B --&gt; D[檔案類型分離]</span><br><span class="line">    B --&gt; E[內建忽略規則]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[eslint.config.js]</span><br><span class="line">    D --&gt; D1[TypeScript 檔案]</span><br><span class="line">    D --&gt; D2[HTML 模板]</span><br><span class="line">    D --&gt; D3[測試檔案]</span><br><span class="line">    </span><br><span class="line">    E --&gt; E1[取代 .eslintignore]</span><br><span class="line">    E --&gt; E2[ignores 屬性]</span><br><span class="line">    </span><br><span class="line">    C1 --&gt; F[配置物件陣列]</span><br><span class="line">    F --&gt; F1[檔案匹配規則]</span><br><span class="line">    F --&gt; F2[語言選項設定]</span><br><span class="line">    F --&gt; F3[插件和規則]</span><br><span class="line">    </span><br><span class="line">    F1 --&gt; G[針對性配置]</span><br><span class="line">    F2 --&gt; G</span><br><span class="line">    F3 --&gt; G</span><br><span class="line">    G --&gt; H[最佳化開發體驗]</span><br></pre></td></tr></table></figure>



<h2 id="🚀-ESLint-9-x-革命性變化"><a href="#🚀-ESLint-9-x-革命性變化" class="headerlink" title="🚀 ESLint 9.x 革命性變化"></a>🚀 ESLint 9.x 革命性變化</h2><h3 id="💡-核心改變"><a href="#💡-核心改變" class="headerlink" title="💡 核心改變"></a>💡 核心改變</h3><ul>
<li><strong>Flat Config</strong>: 告別複雜的層級配置，擁抱扁平化</li>
<li><strong>單一配置文件</strong>: <code>eslint.config.js</code> 取代多個 <code>.eslintrc.*</code> 文件</li>
<li><strong>更強的 TypeScript 整合</strong>: 原生支援 ES 模組</li>
</ul>
<h3 id="🎯-實戰配置"><a href="#🎯-實戰配置" class="headerlink" title="🎯 實戰配置"></a>🎯 實戰配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint.config.js - 新時代的配置方式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&#x27;src/**/*.ts&#x27;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parser</span>: typescriptParser,</span><br><span class="line">      <span class="attr">parserOptions</span>: &#123; <span class="attr">project</span>: <span class="string">&#x27;./tsconfig.json&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123; <span class="string">&#x27;@typescript-eslint&#x27;</span>: typescriptEslint &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123; <span class="comment">/* 針對性規則 */</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&#x27;src/**/*.html&#x27;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123; <span class="attr">parser</span>: angularTemplateParser &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123; <span class="string">&#x27;@angular-eslint/template&#x27;</span>: angularTemplateEslint &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">ignores</span>: [<span class="string">&#x27;dist/**&#x27;</span>, <span class="string">&#x27;node_modules/**&#x27;</span>] <span class="comment">// 直接內建忽略</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="🔧-遷移要點"><a href="#🔧-遷移要點" class="headerlink" title="🔧 遷移要點"></a>🔧 遷移要點</h3><ul>
<li>❌ <code>.eslintignore</code> 不再支援</li>
<li>✅ <code>ignores</code> 直接寫在配置中</li>
<li>✅ 多檔案類型可獨立配置</li>
<li>✅ 更清晰的依賴關係</li>
</ul>
<hr>
<h2 id="🎨-命名規範的科學化管理"><a href="#🎨-命名規範的科學化管理" class="headerlink" title="🎨 命名規範的科學化管理"></a>🎨 命名規範的科學化管理</h2><h3 id="💡-TypeScript-Interface-PascalCase-的威力"><a href="#💡-TypeScript-Interface-PascalCase-的威力" class="headerlink" title="💡 TypeScript Interface - PascalCase 的威力"></a>💡 TypeScript Interface - PascalCase 的威力</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ❌ 舊思維 - 隨意命名</span></span><br><span class="line"><span class="keyword">interface</span> energyData &#123; <span class="attr">id</span>: <span class="built_in">string</span>; &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ✅ 新標準 - 語義化命名</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">EnergyConsumptionData</span> &#123;</span><br><span class="line">  <span class="attr">sensorId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">powerUsage</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">timestamp</span>: <span class="title class_">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">consumptionData</span>: <span class="title class_">EnergyConsumptionData</span>[];</span><br></pre></td></tr></table></figure>

<h3 id="🎯-ESLint-強制執行"><a href="#🎯-ESLint-強制執行" class="headerlink" title="🎯 ESLint 強制執行"></a>🎯 ESLint 強制執行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;@typescript-eslint/naming-convention&#x27;</span>: [</span><br><span class="line">  <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;interface&#x27;</span>,</span><br><span class="line">    <span class="attr">format</span>: [<span class="string">&#x27;PascalCase&#x27;</span>]  <span class="comment">// 強制大駝峰</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;variable&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: &#123; <span class="attr">regex</span>: <span class="string">&#x27;\\$$&#x27;</span>, <span class="attr">match</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    <span class="attr">format</span>: [<span class="string">&#x27;camelCase&#x27;</span>],</span><br><span class="line">    <span class="attr">suffix</span>: [<span class="string">&#x27;$&#x27;</span>]  <span class="comment">// Observable 強制 $ 後綴</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="🧠-認知負荷優化"><a href="#🧠-認知負荷優化" class="headerlink" title="🧠 認知負荷優化"></a>🧠 認知負荷優化</h3><ul>
<li><strong>一眼識別類型</strong>: <code>EnergyData</code> vs <code>energydata</code></li>
<li><strong>減少誤解</strong>: <code>powerLevel$</code> 立即知道是 Observable</li>
<li><strong>團隊協作</strong>: 統一標準減少溝通成本</li>
</ul>
<hr>
<h2 id="🔕-no-warn-ignored-的深層邏輯"><a href="#🔕-no-warn-ignored-的深層邏輯" class="headerlink" title="🔕 --no-warn-ignored 的深層邏輯"></a>🔕 <code>--no-warn-ignored</code> 的深層邏輯</h2><h3 id="💡-ESLint-忽略的兩層結構"><a href="#💡-ESLint-忽略的兩層結構" class="headerlink" title="💡 ESLint 忽略的兩層結構"></a>💡 ESLint 忽略的兩層結構</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一層：忽略檢查，但提醒你「我忽略了這個文件」</span></span><br><span class="line">npx eslint src/**/*.ts</span><br><span class="line"><span class="comment"># 輸出: ⚠️ File ignored because of a matching ignore pattern</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二層：連提醒都不要，完全靜默</span></span><br><span class="line">npx eslint src/**/*.ts --no-warn-ignored</span><br><span class="line"><span class="comment"># 輸出: 乾淨的結果，專注於真正的問題</span></span><br></pre></td></tr></table></figure>

<h3 id="🎯-開發體驗優化"><a href="#🎯-開發體驗優化" class="headerlink" title="🎯 開發體驗優化"></a>🎯 開發體驗優化</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src/**/*.ts --no-warn-ignored&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src/**/*.ts --fix --no-warn-ignored&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:ci&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src/**/*.ts --max-warnings 0 --no-warn-ignored&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="🚀-CI-CD-友善"><a href="#🚀-CI-CD-友善" class="headerlink" title="🚀 CI&#x2F;CD 友善"></a>🚀 CI&#x2F;CD 友善</h3><ul>
<li><strong>乾淨的建置日誌</strong>: 不被「噪音」干擾</li>
<li><strong>專注問題本質</strong>: 只看需要修正的程式碼</li>
<li><strong>零容忍模式</strong>: <code>--max-warnings 0</code> 確保品質</li>
</ul>
<hr>
<h2 id="🔄-專案重構的系統性思維"><a href="#🔄-專案重構的系統性思維" class="headerlink" title="🔄 專案重構的系統性思維"></a>🔄 專案重構的系統性思維</h2><h3 id="💡-重命名不是改一個名字"><a href="#💡-重命名不是改一個名字" class="headerlink" title="💡 重命名不是改一個名字"></a>💡 重命名不是改一個名字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">taiwansteelunion_carscheduled_frontend</span><br><span class="line">↓ 需要檢查的影響域 ↓</span><br><span class="line">✅ package.json - 專案名稱</span><br><span class="line">✅ angular.json - 建置路徑、專案配置  </span><br><span class="line">✅ index.html - 網頁標題</span><br><span class="line">✅ 環境變數 - API 端點</span><br><span class="line">✅ 文檔 - README、註解</span><br><span class="line">✅ Git 分支 - 命名策略</span><br></pre></td></tr></table></figure>

<h3 id="🎯-自動化檢查流程"><a href="#🎯-自動化檢查流程" class="headerlink" title="🎯 自動化檢查流程"></a>🎯 自動化檢查流程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 全域搜尋舊名稱</span></span><br><span class="line">grep -r <span class="string">&quot;taiwansteelunion_carscheduled&quot;</span> .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 批量替換</span></span><br><span class="line">sed -i <span class="string">&#x27;s/taiwansteelunion_carscheduled/energy_management/g&#x27;</span> **/*.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ESLint 驗證新名稱符合規範</span></span><br><span class="line">npm run lint:check</span><br></pre></td></tr></table></figure>

<h3 id="🧠-重構策略"><a href="#🧠-重構策略" class="headerlink" title="🧠 重構策略"></a>🧠 重構策略</h3><ul>
<li><strong>影響域分析</strong>: 先找出所有需要改的地方</li>
<li><strong>原子化提交</strong>: 每次 commit 只改一類文件</li>
<li><strong>自動化驗證</strong>: 用工具確保一致性</li>
</ul>
<hr>
<h2 id="🎭-Observable-後綴的設計哲學"><a href="#🎭-Observable-後綴的設計哲學" class="headerlink" title="🎭 Observable $ 後綴的設計哲學"></a>🎭 Observable $ 後綴的設計哲學</h2><h3 id="💡-視覺化類型系統"><a href="#💡-視覺化類型系統" class="headerlink" title="💡 視覺化類型系統"></a>💡 視覺化類型系統</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ✅ 一眼就知道這是什麼</span></span><br><span class="line">energyData$ = <span class="variable language_">this</span>.<span class="property">service</span>.<span class="title function_">getEnergyData</span>();</span><br><span class="line">loading$ = <span class="keyword">new</span> <span class="title class_">BehaviorSubject</span>&lt;<span class="built_in">boolean</span>&gt;(<span class="literal">false</span>);</span><br><span class="line">errors$ = <span class="keyword">new</span> <span class="title class_">Subject</span>&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用時的心智模型</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">energyData$</span>.<span class="title function_">pipe</span>(</span><br><span class="line">  <span class="title function_">takeUntil</span>(<span class="variable language_">this</span>.<span class="property">destroy$</span>),  <span class="comment">// 一看就知道生命週期管理</span></span><br><span class="line">  <span class="title function_">map</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">transform</span>(data))</span><br><span class="line">).<span class="title function_">subscribe</span>();</span><br></pre></td></tr></table></figure>

<h3 id="🎯-團隊認知統一"><a href="#🎯-團隊認知統一" class="headerlink" title="🎯 團隊認知統一"></a>🎯 團隊認知統一</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ESLint 規則強制執行</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;variable&#x27;</span>,</span><br><span class="line">  <span class="attr">filter</span>: &#123; <span class="attr">regex</span>: <span class="string">&#x27;\\$$&#x27;</span>, <span class="attr">match</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  <span class="attr">format</span>: [<span class="string">&#x27;camelCase&#x27;</span>],</span><br><span class="line">  <span class="attr">suffix</span>: [<span class="string">&#x27;$&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="🧠-現代匈牙利命名法"><a href="#🧠-現代匈牙利命名法" class="headerlink" title="🧠 現代匈牙利命名法"></a>🧠 現代匈牙利命名法</h3><ul>
<li><strong>React</strong>: <code>useEffect</code>, <code>useState</code> - 用前綴表示 Hook</li>
<li><strong>Angular</strong>: <code>ngOnInit</code>, <code>ngOnDestroy</code> - 用前綴表示生命週期</li>
<li><strong>RxJS</strong>: <code>data$</code>, <code>loading$</code> - 用後綴表示 Observable</li>
</ul>
<hr>
<h2 id="📊-配置即文檔的哲學"><a href="#📊-配置即文檔的哲學" class="headerlink" title="📊 配置即文檔的哲學"></a>📊 配置即文檔的哲學</h2><h3 id="💡-ESLint-配置-團隊編碼約定"><a href="#💡-ESLint-配置-團隊編碼約定" class="headerlink" title="💡 ESLint 配置 &#x3D; 團隊編碼約定"></a>💡 ESLint 配置 &#x3D; 團隊編碼約定</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 這個配置文件告訴新人：</span></span><br><span class="line"><span class="comment">// 1. 我們重視類型安全 (@typescript-eslint/no-explicit-any)</span></span><br><span class="line"><span class="comment">// 2. 我們在意命名一致性 (naming-convention)</span></span><br><span class="line"><span class="comment">// 3. 我們關注 Angular 最佳實踐 (@angular-eslint/*)</span></span><br><span class="line"><span class="comment">// 4. 我們追求程式碼品質 (no-console, no-debugger)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [&#123;</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-explicit-any&#x27;</span>: <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/naming-convention&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@angular-eslint/component-class-suffix&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;warn&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

<h3 id="🎯-自動化品質把關"><a href="#🎯-自動化品質把關" class="headerlink" title="🎯 自動化品質把關"></a>🎯 自動化品質把關</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 開發階段：友善提醒</span></span><br><span class="line">npm run lint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交階段：自動修正</span></span><br><span class="line">npm run lint:fix</span><br><span class="line"></span><br><span class="line"><span class="comment"># CI 階段：零容忍</span></span><br><span class="line">npm run lint:check</span><br></pre></td></tr></table></figure>

<h3 id="🚀-團隊成長軌跡"><a href="#🚀-團隊成長軌跡" class="headerlink" title="🚀 團隊成長軌跡"></a>🚀 團隊成長軌跡</h3><ul>
<li><strong>新手</strong>: 依賴 ESLint 學習最佳實踐</li>
<li><strong>熟手</strong>: 透過配置傳授經驗</li>
<li><strong>專家</strong>: 制定規則引導團隊</li>
</ul>
<hr>
<h2 id="🎯-核心洞察"><a href="#🎯-核心洞察" class="headerlink" title="🎯 核心洞察"></a>🎯 核心洞察</h2><h3 id="1-工具不是負擔，是放大器"><a href="#1-工具不是負擔，是放大器" class="headerlink" title="1. 工具不是負擔，是放大器"></a>1. <strong>工具不是負擔，是放大器</strong></h3><ul>
<li>ESLint 不是在「挑毛病」，而是在「自動化最佳實踐」</li>
<li>好的配置讓新人快速成長，讓專家專注創新</li>
</ul>
<h3 id="2-規範不是限制，是溝通語言"><a href="#2-規範不是限制，是溝通語言" class="headerlink" title="2. 規範不是限制，是溝通語言"></a>2. <strong>規範不是限制，是溝通語言</strong></h3><ul>
<li>統一的命名讓程式碼自說明</li>
<li>一致的結構降低理解成本</li>
</ul>
<h3 id="3-配置是活的文檔"><a href="#3-配置是活的文檔" class="headerlink" title="3. 配置是活的文檔"></a>3. <strong>配置是活的文檔</strong></h3><ul>
<li>規則反映團隊價值觀</li>
<li>工具配置承載知識傳承</li>
</ul>
<hr>
<h2 id="📝-實踐檢查清單"><a href="#📝-實踐檢查清單" class="headerlink" title="📝 實踐檢查清單"></a>📝 實踐檢查清單</h2><h3 id="ESLint-9-x-遷移"><a href="#ESLint-9-x-遷移" class="headerlink" title="ESLint 9.x 遷移"></a>ESLint 9.x 遷移</h3><ul>
<li><input disabled="" type="checkbox"> 安裝最新版本 ESLint 和相關插件</li>
<li><input disabled="" type="checkbox"> 創建 <code>eslint.config.js</code> 扁平配置</li>
<li><input disabled="" type="checkbox"> 移除舊的 <code>.eslintrc.*</code> 和 <code>.eslintignore</code></li>
<li><input disabled="" type="checkbox"> 測試所有 npm scripts 正常運作</li>
</ul>
<h3 id="命名規範實施"><a href="#命名規範實施" class="headerlink" title="命名規範實施"></a>命名規範實施</h3><ul>
<li><input disabled="" type="checkbox"> 配置 <code>@typescript-eslint/naming-convention</code> 規則</li>
<li><input disabled="" type="checkbox"> 修正現有程式碼中的命名問題  </li>
<li><input disabled="" type="checkbox"> 設定 Observable $ 後綴強制規則</li>
<li><input disabled="" type="checkbox"> 建立團隊命名規範文檔</li>
</ul>
<h3 id="開發流程優化"><a href="#開發流程優化" class="headerlink" title="開發流程優化"></a>開發流程優化</h3><ul>
<li><input disabled="" type="checkbox"> 配置 <code>--no-warn-ignored</code> 讓輸出更乾淨</li>
<li><input disabled="" type="checkbox"> 設定 <code>--max-warnings 0</code> 的嚴格模式</li>
<li><input disabled="" type="checkbox"> 整合 Git hooks 自動執行 lint</li>
<li><input disabled="" type="checkbox"> 建立 CI&#x2F;CD 的程式碼品質把關</li>
</ul>
<h2 id="💡-ESLint-配置決策流程圖"><a href="#💡-ESLint-配置決策流程圖" class="headerlink" title="💡 ESLint 配置決策流程圖"></a>💡 ESLint 配置決策流程圖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[新專案/升級需求] --&gt; B&#123;ESLint 版本?&#125;</span><br><span class="line">    B --&gt;|&lt; 9.0| C[考慮升級到 9.x]</span><br><span class="line">    B --&gt;|&gt;= 9.0| D[使用 Flat Config]</span><br><span class="line">    </span><br><span class="line">    C --&gt; E&#123;升級風險評估&#125;</span><br><span class="line">    E --&gt;|高| F[保持現有配置]</span><br><span class="line">    E --&gt;|低| D</span><br><span class="line">    </span><br><span class="line">    D --&gt; G[設計檔案類型配置]</span><br><span class="line">    G --&gt; H[TypeScript 檔案規則]</span><br><span class="line">    G --&gt; I[模板檔案規則]</span><br><span class="line">    G --&gt; J[測試檔案規則]</span><br><span class="line">    </span><br><span class="line">    H --&gt; K[命名規範設定]</span><br><span class="line">    K --&gt; L[Interface PascalCase]</span><br><span class="line">    K --&gt; M[Observable $ 後綴]</span><br><span class="line">    </span><br><span class="line">    L --&gt; N[團隊培訓]</span><br><span class="line">    M --&gt; N</span><br><span class="line">    N --&gt; O[CI/CD 整合]</span><br><span class="line">    O --&gt; P[效果監控]</span><br></pre></td></tr></table></figure>

<h2 id="🎯-核心洞察總結"><a href="#🎯-核心洞察總結" class="headerlink" title="🎯 核心洞察總結"></a>🎯 核心洞察總結</h2><h3 id="1-工具不是負擔，是放大器-1"><a href="#1-工具不是負擔，是放大器-1" class="headerlink" title="1. 工具不是負擔，是放大器"></a>1. <strong>工具不是負擔，是放大器</strong></h3><p>ESLint 9.x 的革命性改進體現在：</p>
<ul>
<li><strong>配置簡化</strong>：Flat Config 降低學習和維護成本</li>
<li><strong>精準控制</strong>：針對不同檔案類型的客製化規則</li>
<li><strong>開發體驗</strong>：–no-warn-ignored 等參數優化工作流程</li>
</ul>
<h3 id="2-規範不是限制，是溝通語言-1"><a href="#2-規範不是限制，是溝通語言-1" class="headerlink" title="2. 規範不是限制，是溝通語言"></a>2. <strong>規範不是限制，是溝通語言</strong></h3><p>統一的命名和配置標準：</p>
<ul>
<li><strong>認知負荷降低</strong>：PascalCase Interface 一眼識別類型</li>
<li><strong>團隊協作效率</strong>：Observable $ 後綴明確表達意圖</li>
<li><strong>知識傳承</strong>：配置即文檔，新人快速上手</li>
</ul>
<h3 id="3-配置是活的文檔-1"><a href="#3-配置是活的文檔-1" class="headerlink" title="3. 配置是活的文檔"></a>3. <strong>配置是活的文檔</strong></h3><p>ESLint 配置反映團隊價值觀：</p>
<ul>
<li><strong>技術債務管理</strong>：透過規則強制執行最佳實踐</li>
<li><strong>品質把關</strong>：自動化程式碼審查減少人工負擔</li>
<li><strong>持續改進</strong>：配置隨專案成長而演進</li>
</ul>
<h2 id="🚀-進階配置策略"><a href="#🚀-進階配置策略" class="headerlink" title="🚀 進階配置策略"></a>🚀 進階配置策略</h2><h3 id="漸進式升級路徑"><a href="#漸進式升級路徑" class="headerlink" title="漸進式升級路徑"></a>漸進式升級路徑</h3><ol>
<li><strong>評估現有配置</strong>：分析當前 ESLint 規則的覆蓋範圍</li>
<li><strong>分階段遷移</strong>：優先處理高影響、低風險的規則</li>
<li><strong>團隊培訓</strong>：確保團隊理解新配置的意圖和價值</li>
<li><strong>效果監控</strong>：追蹤程式碼品質和開發效率指標</li>
</ol>
<h3 id="企業級最佳實踐"><a href="#企業級最佳實踐" class="headerlink" title="企業級最佳實踐"></a>企業級最佳實踐</h3><ul>
<li><strong>配置共享</strong>：建立組織級的 ESLint 配置包</li>
<li><strong>自動化工具</strong>：整合 Husky、lint-staged 等工具</li>
<li><strong>指標監控</strong>：追蹤技術債務和程式碼品質趨勢</li>
</ul>
<h2 id="📞-技術支援與參考資源"><a href="#📞-技術支援與參考資源" class="headerlink" title="📞 技術支援與參考資源"></a>📞 技術支援與參考資源</h2><h3 id="官方文件"><a href="#官方文件" class="headerlink" title="官方文件"></a>官方文件</h3><ul>
<li><a target="_blank" rel="noopener" href="https://eslint.org/docs/latest/">ESLint 9.x 官方文件</a></li>
<li><a target="_blank" rel="noopener" href="https://eslint.org/docs/latest/use/configure/migration-guide">Flat Config 遷移指南</a></li>
<li><a target="_blank" rel="noopener" href="https://typescript-eslint.io/rules/">TypeScript ESLint 規則</a></li>
</ul>
<h3 id="實用工具"><a href="#實用工具" class="headerlink" title="實用工具"></a>實用工具</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/eslint/config-inspector">ESLint Config Inspector</a></li>
<li><a target="_blank" rel="noopener" href="https://eslint.style/">ESLint Stylistic</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/angular-eslint/angular-eslint">Angular ESLint</a></li>
</ul>
<h3 id="社群資源"><a href="#社群資源" class="headerlink" title="社群資源"></a>社群資源</h3><ul>
<li>ESLint Discord 社群</li>
<li>TypeScript ESLint 討論區</li>
<li>Angular ESLint GitHub Issues</li>
</ul>
<h3 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h3><ul>
<li>《Clean Code》by Robert C. Martin</li>
<li>《The Pragmatic Programmer》by Andrew Hunt</li>
<li>《Building Maintainable Software》by Joost Visser</li>
</ul>
<blockquote>
<p><strong>作者</strong>：前端工具鏈團隊<br><strong>更新日期</strong>：2025年6月29日<br><strong>版本</strong>：v2.0<br><strong>適用範圍</strong>：ESLint 9.x + TypeScript + Angular 專案</p>
</blockquote>
<hr>
<p><em>技術債務就是未來的利息，ESLint 配置是最划算的投資！</em> 🚀 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/eslint-configuration-best-practices-guide/" data-id="cmcj9gyyo000369mzga2u53a2" data-title="ESLint 9.x 革命性配置與前端開發最佳化實戰指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Code-Quality/" rel="tag">Code Quality</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Developer-Experience/" rel="tag">Developer Experience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ESLint-9-x/" rel="tag">ESLint 9.x</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flat-Config/" rel="tag">Flat Config</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Frontend-Tooling/" rel="tag">Frontend Tooling</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linting-Rules/" rel="tag">Linting Rules</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Naming-Convention/" rel="tag">Naming Convention</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ssr-prerender-technical-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-ssr-prerender-technical-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T05:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-ssr-prerender-technical-guide/">Angular 19 SSR/Prerender 深度技術分析與實戰指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="📋-核心懶人包"><a href="#📋-核心懶人包" class="headerlink" title="📋 核心懶人包"></a>📋 核心懶人包</h2><ol>
<li><strong>雙軌架構設計</strong>：<code>.server</code> 檔案分工處理客戶端與伺服器端需求</li>
<li><strong>智能渲染策略</strong>：Prerender 用於靜態內容，Dynamic 用於需認證頁面</li>
<li><strong>水合作用機制</strong>：無縫銜接 SSR 預渲染內容與客戶端互動功能</li>
<li><strong>路由守衛兼容</strong>：設計 SSR 友善的守衛，避免預渲染階段問題</li>
<li><strong>效能優化策略</strong>：程式碼分割與選擇性預渲染的最佳實踐</li>
</ol>
<h2 id="🏗️-專案概述"><a href="#🏗️-專案概述" class="headerlink" title="🏗️ 專案概述"></a>🏗️ 專案概述</h2><p>本文深度分析了 Angular 19 SSR&#x2F;Prerender 技術的完整架構與實戰應用，涵蓋從建構到部署的全流程優化：</p>
<ul>
<li>🎯 <strong>架構分析</strong>：<code>.server</code> 檔案架構的技術細節和設計原理</li>
<li>🔄 <strong>渲染策略</strong>：Prerender 與 Dynamic 模式的選擇和配置</li>
<li>⚡ <strong>效能優化</strong>：程式碼分割、資料預取與快取策略</li>
<li>🛡️ <strong>安全考量</strong>：前後端安全分工和 SSR 環境配置</li>
<li>📊 <strong>監控部署</strong>：效能指標監控和建構最佳化</li>
</ul>
<h2 id="🏗️-Angular-SSR-完整架構流程"><a href="#🏗️-Angular-SSR-完整架構流程" class="headerlink" title="🏗️ Angular SSR 完整架構流程"></a>🏗️ Angular SSR 完整架構流程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ng build] --&gt; B[客戶端建構]</span><br><span class="line">    A --&gt; C[伺服器端建構]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[main.ts 啟動點]</span><br><span class="line">    B --&gt; B2[app.config.ts 客戶端配置]</span><br><span class="line">    B --&gt; B3[app.routes.ts 基礎路由]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[main.server.ts 伺服器啟動]</span><br><span class="line">    C --&gt; C2[app.config.server.ts 合併配置]</span><br><span class="line">    C --&gt; C3[app.routes.server.ts SSR 路由]</span><br><span class="line">    C --&gt; C4[server.ts Express 設定]</span><br><span class="line">    </span><br><span class="line">    C2 --&gt; D[mergeApplicationConfig]</span><br><span class="line">    D --&gt; E[統一應用配置]</span><br><span class="line">    </span><br><span class="line">    E --&gt; F&#123;渲染模式判斷&#125;</span><br><span class="line">    F --&gt;|Prerender| G[靜態 HTML 生成]</span><br><span class="line">    F --&gt;|Dynamic| H[即時伺服器渲染]</span><br><span class="line">    </span><br><span class="line">    G --&gt; I[預建構 HTML 檔案]</span><br><span class="line">    H --&gt; J[執行期 HTML 生成]</span><br><span class="line">    </span><br><span class="line">    I --&gt; K[客戶端水合作用]</span><br><span class="line">    J --&gt; K</span><br><span class="line">    K --&gt; L[完整互動應用]</span><br></pre></td></tr></table></figure>

<h2 id="架構分析與技術原理"><a href="#架構分析與技術原理" class="headerlink" title="架構分析與技術原理"></a>架構分析與技術原理</h2><h3 id="1-server-檔案架構的技術細節"><a href="#1-server-檔案架構的技術細節" class="headerlink" title="1. .server 檔案架構的技術細節"></a>1. <code>.server</code> 檔案架構的技術細節</h3><p>Angular 19 的 SSR 架構採用雙軌設計，分別處理客戶端與伺服器端的需求：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 架構分工示意</span></span><br><span class="line">├── src/</span><br><span class="line">│   ├── app/</span><br><span class="line">│   │   ├── app.<span class="property">config</span>.<span class="property">ts</span>          <span class="comment">// 客戶端設定</span></span><br><span class="line">│   │   ├── app.<span class="property">config</span>.<span class="property">server</span>.<span class="property">ts</span>   <span class="comment">// 伺服器端設定合併</span></span><br><span class="line">│   │   ├── app.<span class="property">routes</span>.<span class="property">ts</span>           <span class="comment">// 共用路由定義</span></span><br><span class="line">│   │   └── app.<span class="property">routes</span>.<span class="property">server</span>.<span class="property">ts</span>    <span class="comment">// SSR 路由配置</span></span><br><span class="line">│   ├── main.<span class="property">ts</span>                     <span class="comment">// 客戶端啟動點</span></span><br><span class="line">│   ├── main.<span class="property">server</span>.<span class="property">ts</span>              <span class="comment">// 伺服器端啟動點</span></span><br><span class="line">│   └── server.<span class="property">ts</span>                   <span class="comment">// Express 伺服器設定</span></span><br></pre></td></tr></table></figure>

<h4 id="mergeApplicationConfig-運作機制"><a href="#mergeApplicationConfig-運作機制" class="headerlink" title="mergeApplicationConfig 運作機制"></a><code>mergeApplicationConfig</code> 運作機制</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.server.ts 的深度分析</span></span><br><span class="line"><span class="keyword">import</span> &#123; mergeApplicationConfig, <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),          <span class="comment">// 啟用伺服器端渲染</span></span><br><span class="line">    <span class="title function_">provideServerRouting</span>(serverRoutes) <span class="comment">// 提供 SSR 路由配置</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mergeApplicationConfig 的合併邏輯：</span></span><br><span class="line"><span class="comment">// 1. 保留 appConfig 中的所有 providers</span></span><br><span class="line"><span class="comment">// 2. 添加 serverConfig 中的 providers</span></span><br><span class="line"><span class="comment">// 3. 如有衝突，serverConfig 優先級較高</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h3 id="2-路由配置的完整運作流程"><a href="#2-路由配置的完整運作流程" class="headerlink" title="2. 路由配置的完整運作流程"></a>2. 路由配置的完整運作流程</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.routes.ts - 基礎路由定義</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: <span class="title class_">HomeComponent</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">AboutComponent</span> &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>, </span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dashboard/dashboard.routes&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">routes</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>] <span class="comment">// 路由守衛</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;products&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./products/products.component&#x27;</span>) &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.routes.server.ts - SSR 配置</span></span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; routes &#125;; <span class="comment">// 重新匯出基礎路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,           <span class="comment">// 首頁預渲染</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>,      <span class="comment">// 關於頁面預渲染</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="comment">// 需登入頁面動態渲染</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;products&#x27;</span>,   <span class="comment">// 產品頁面預渲染</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-Angular-SSR-完整架構流程"><a href="#3-Angular-SSR-完整架構流程" class="headerlink" title="3. Angular SSR 完整架構流程"></a>3. Angular SSR 完整架構流程</h3><p>透過以下圖表可以清楚了解 Angular SSR 從建構到執行的完整流程：</p>
<h4 id="建構與執行階段流程圖"><a href="#建構與執行階段流程圖" class="headerlink" title="建構與執行階段流程圖"></a>建構與執行階段流程圖</h4><p><img src="/%E5%B7%B2%E5%9C%A8%E4%B8%8A%E6%96%B9%E9%A1%AF%E7%A4%BA" alt="Angular SSR 架構流程"></p>
<h4 id="渲染策略決策流程圖"><a href="#渲染策略決策流程圖" class="headerlink" title="渲染策略決策流程圖"></a>渲染策略決策流程圖</h4><p><img src="/%E5%B7%B2%E5%9C%A8%E4%B8%8A%E6%96%B9%E9%A1%AF%E7%A4%BA" alt="渲染策略決策"></p>
<h3 id="4-預渲染與水合作用技術細節"><a href="#4-預渲染與水合作用技術細節" class="headerlink" title="4. 預渲染與水合作用技術細節"></a>4. 預渲染與水合作用技術細節</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 水合作用的關鍵時機</span></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-root&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;!-- 預渲染內容立即可見 --&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      &lt;!-- 需要水合作用才能互動 --&gt;</span></span><br><span class="line"><span class="string">      &lt;button (click)=&quot;handleClick()&quot;&gt;點擊我&lt;/button&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      &lt;!-- 條件渲染避免水合作用錯誤 --&gt;</span></span><br><span class="line"><span class="string">      &lt;div *ngIf=&quot;isBrowser&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;這段內容只在瀏覽器顯示&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppComponent</span> &#123;</span><br><span class="line">  title = <span class="string">&#x27;預渲染標題&#x27;</span>;</span><br><span class="line">  isBrowser = <span class="title function_">isPlatformBrowser</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="meta">@Inject</span>(PLATFORM_ID) <span class="keyword">private</span> <span class="attr">platformId</span>: <span class="title class_">Object</span></span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 水合作用完成後才能正常執行</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;按鈕被點擊&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-延遲載入與-SSR-兼容性詳解"><a href="#5-延遲載入與-SSR-兼容性詳解" class="headerlink" title="5. 延遲載入與 SSR 兼容性詳解"></a>5. 延遲載入與 SSR 兼容性詳解</h3><p>延遲載入與 SSR 完全兼容，不會產生額外的關注點：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 延遲載入模組的 SSR 處理</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/feature.routes&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">routes</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./admin/admin.component&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">AdminComponent</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>] <span class="comment">// 搭配路由守衛</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// SSR 階段的處理邏輯：</span></span><br><span class="line"><span class="comment">// 1. 預渲染時：Angular 會分析所有路由，包括延遲載入的模組</span></span><br><span class="line"><span class="comment">// 2. 建構階段：會載入所有必要的模組來生成靜態 HTML</span></span><br><span class="line"><span class="comment">// 3. 執行階段：JavaScript bundle 仍然會按需延遲載入</span></span><br><span class="line"><span class="comment">// 4. 水合作用：不影響延遲載入的正常運作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 app.routes.server.ts 中可以針對延遲載入的路由設定不同策略</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature/**&#x27;</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> <span class="comment">// 延遲載入模組也可預渲染</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;admin/**&#x27;</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span>   <span class="comment">// 需認證的延遲載入模組用動態渲染</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><strong>重要結論</strong>：延遲載入與 SSR 可以完美搭配，不需要特殊考量。Angular 的架構已經處理好了兩者的整合。</p>
<h2 id="效能優化策略"><a href="#效能優化策略" class="headerlink" title="效能優化策略"></a>效能優化策略</h2><h3 id="1-選擇性預渲染配置"><a href="#1-選擇性預渲染配置" class="headerlink" title="1. 選擇性預渲染配置"></a>1. 選擇性預渲染配置</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根據頁面特性選擇渲染模式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  <span class="comment">// 公開頁面 - 預渲染</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;contact&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 動態內容 - 動態渲染</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;news/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 需要認證 - 動態渲染</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;profile/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="2-程式碼分割最佳實踐"><a href="#2-程式碼分割最佳實踐" class="headerlink" title="2. 程式碼分割最佳實踐"></a>2. 程式碼分割最佳實踐</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 元件層級的延遲載入</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;heavy-component&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./heavy/heavy.component&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">HeavyComponent</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/feature.routes&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">routes</span>)</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-資料預取策略"><a href="#3-資料預取策略" class="headerlink" title="3. 資料預取策略"></a>3. 資料預取策略</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 SSR 階段預取資料</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataResolver</span> <span class="keyword">implements</span> <span class="title class_">Resolve</span>&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(): <span class="title class_">Observable</span>&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// 在伺服器端執行時會預取資料</span></span><br><span class="line">    <span class="comment">// 注入到 HTML 中，客戶端可直接使用</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dataService</span>.<span class="title function_">getData</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;data-page&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">DataPageComponent</span>,</span><br><span class="line">    <span class="attr">resolve</span>: &#123; <span class="attr">data</span>: <span class="title class_">DataResolver</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="路由守衛與-SSR-的實務處理"><a href="#路由守衛與-SSR-的實務處理" class="headerlink" title="路由守衛與 SSR 的實務處理"></a>路由守衛與 SSR 的實務處理</h2><h3 id="1-守衛對預渲染的影響"><a href="#1-守衛對預渲染的影響" class="headerlink" title="1. 守衛對預渲染的影響"></a>1. 守衛對預渲染的影響</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AuthGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> | <span class="title class_">Observable</span>&lt;<span class="built_in">boolean</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// 在預渲染階段，通常沒有認證資訊</span></span><br><span class="line">    <span class="comment">// 可能導致：</span></span><br><span class="line">    <span class="comment">// 1. 頁面被重導向到登入頁</span></span><br><span class="line">    <span class="comment">// 2. 頁面顯示為空白或載入中狀態</span></span><br><span class="line">    <span class="comment">// 3. 無法取得需要認證的資料</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isPlatformServer</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>)) &#123;</span><br><span class="line">      <span class="comment">// 伺服器端渲染時的處理邏輯</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 或特殊處理</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">authService</span>.<span class="title function_">isAuthenticated</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-SSR-友善的守衛設計"><a href="#2-SSR-友善的守衛設計" class="headerlink" title="2. SSR 友善的守衛設計"></a>2. SSR 友善的守衛設計</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SSRFriendlyGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isPlatformServer</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>)) &#123;</span><br><span class="line">      <span class="comment">// 伺服器端允許渲染基本結構</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 客戶端才進行實際權限檢查</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">authService</span>.<span class="title function_">isAuthenticated</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="安全性考量與最佳實踐"><a href="#安全性考量與最佳實踐" class="headerlink" title="安全性考量與最佳實踐"></a>安全性考量與最佳實踐</h2><h3 id="1-前後端安全分工"><a href="#1-前後端安全分工" class="headerlink" title="1. 前後端安全分工"></a>1. 前後端安全分工</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 前端路由守衛 - 僅用於 UX</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">RouteGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// 這只是 UI 層面的保護</span></span><br><span class="line">    <span class="comment">// 不能依賴它來保護敏感資料</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">hasPermission</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 後端 API - 真正的安全防線</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;api/sensitive-data&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SensitiveDataController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="meta">@UseGuards</span>(<span class="title class_">JwtAuthGuard</span>) <span class="comment">// 後端驗證</span></span><br><span class="line">  <span class="title function_">getSensitiveData</span>(<span class="params"><span class="meta">@Request</span>() req</span>) &#123;</span><br><span class="line">    <span class="comment">// 真正的安全檢查在這裡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dataService</span>.<span class="title function_">getSensitiveData</span>(req.<span class="property">user</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-SSR-環境的安全配置"><a href="#2-SSR-環境的安全配置" class="headerlink" title="2. SSR 環境的安全配置"></a>2. SSR 環境的安全配置</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.server.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">    <span class="comment">// 伺服器端專用的安全設定</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">provide</span>: <span class="string">&#x27;SERVER_SIDE_CONFIG&#x27;</span>,</span><br><span class="line">      <span class="attr">useValue</span>: &#123;</span><br><span class="line">        <span class="attr">apiUrl</span>: process.<span class="property">env</span>[<span class="string">&#x27;API_URL&#x27;</span>],</span><br><span class="line">        <span class="attr">secretKey</span>: process.<span class="property">env</span>[<span class="string">&#x27;SECRET_KEY&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="部署與監控建議"><a href="#部署與監控建議" class="headerlink" title="部署與監控建議"></a>部署與監控建議</h2><h3 id="1-建構指令最佳化"><a href="#1-建構指令最佳化" class="headerlink" title="1. 建構指令最佳化"></a>1. 建構指令最佳化</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build:ssr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build &amp;&amp; ng run app:server&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:prerender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build &amp;&amp; ng run app:prerender&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve:ssr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node dist/app/server/server.mjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:analyze&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build --stats-json &amp;&amp; npx webpack-bundle-analyzer dist/app/stats.json&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-效能監控指標"><a href="#2-效能監控指標" class="headerlink" title="2. 效能監控指標"></a>2. 效能監控指標</h3><ul>
<li><strong>FCP (First Contentful Paint)</strong>: 預渲染應 &lt; 1.5s</li>
<li><strong>LCP (Largest Contentful Paint)</strong>: 應 &lt; 2.5s</li>
<li><strong>CLS (Cumulative Layout Shift)</strong>: 應 &lt; 0.1</li>
<li><strong>TTI (Time to Interactive)</strong>: 水合作用完成時間</li>
</ul>
<h3 id="3-快取策略"><a href="#3-快取策略" class="headerlink" title="3. 快取策略"></a>3. 快取策略</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Express 伺服器快取設定</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;*&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 靜態資源長期快取</span></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">url</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/assets/&#x27;</span>)) &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=31536000&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// HTML 短期快取</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=3600&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;index&#x27;</span>, &#123; req &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="常見問題與解決方案"><a href="#常見問題與解決方案" class="headerlink" title="常見問題與解決方案"></a>常見問題與解決方案</h2><h3 id="1-預渲染頁面空白問題"><a href="#1-預渲染頁面空白問題" class="headerlink" title="1. 預渲染頁面空白問題"></a>1. 預渲染頁面空白問題</h3><p><strong>原因</strong>: 路由守衛阻擋或資料載入失敗<br><strong>解決</strong>: 設計 SSR 友善的守衛，或將該路由設為動態渲染</p>
<h3 id="2-水合作用錯誤"><a href="#2-水合作用錯誤" class="headerlink" title="2. 水合作用錯誤"></a>2. 水合作用錯誤</h3><p><strong>原因</strong>: 伺服器端與客戶端 DOM 結構不一致<br><strong>解決</strong>: 使用 <code>isPlatformBrowser/Server</code> 條件渲染</p>
<h3 id="3-效能回歸"><a href="#3-效能回歸" class="headerlink" title="3. 效能回歸"></a>3. 效能回歸</h3><p><strong>原因</strong>: 過度預渲染或 JavaScript bundle 過大<br><strong>解決</strong>: 選擇性預渲染 + 程式碼分割</p>
<h2 id="實務配置完整範例"><a href="#實務配置完整範例" class="headerlink" title="實務配置完整範例"></a>實務配置完整範例</h2><p>以下是一個完整的 Angular SSR 專案配置範例：</p>
<h3 id="1-app-config-ts-客戶端配置"><a href="#1-app-config-ts-客戶端配置" class="headerlink" title="1. app.config.ts (客戶端配置)"></a>1. app.config.ts (客戶端配置)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideAnimations &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser/animations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideRouter</span>(routes),</span><br><span class="line">    <span class="title function_">provideAnimations</span>(),</span><br><span class="line">    <span class="comment">// 其他客戶端專用的提供者</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-app-routes-ts-共用路由"><a href="#2-app-routes-ts-共用路由" class="headerlink" title="2. app.routes.ts (共用路由)"></a>2. app.routes.ts (共用路由)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Routes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./home/home.component&#x27;</span>) &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./about/about.component&#x27;</span>) &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>, </span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dashboard/dashboard.routes&#x27;</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;**&#x27;</span>, <span class="attr">redirectTo</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-app-routes-server-ts-伺服器路由配置"><a href="#3-app-routes-server-ts-伺服器路由配置" class="headerlink" title="3. app.routes.server.ts (伺服器路由配置)"></a>3. app.routes.server.ts (伺服器路由配置)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ServerRoute</span>, <span class="title class_">RenderMode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; routes &#125;; <span class="comment">// 重新匯出共用路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="4-app-config-server-ts-伺服器配置"><a href="#4-app-config-server-ts-伺服器配置" class="headerlink" title="4. app.config.server.ts (伺服器配置)"></a>4. app.config.server.ts (伺服器配置)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mergeApplicationConfig, <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; serverRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes.server&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">    <span class="title function_">provideServerRouting</span>(serverRoutes)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h2 id="關鍵技術問答"><a href="#關鍵技術問答" class="headerlink" title="關鍵技術問答"></a>關鍵技術問答</h2><h3 id="Q-為什麼要分離-server-和非-server-檔案？"><a href="#Q-為什麼要分離-server-和非-server-檔案？" class="headerlink" title="Q: 為什麼要分離 .server 和非 .server 檔案？"></a>Q: 為什麼要分離 <code>.server</code> 和非 <code>.server</code> 檔案？</h3><p><strong>A</strong>: 關注點分離，讓客戶端和伺服器端各自處理專屬的配置，避免混淆且方便維護。</p>
<h3 id="Q-mergeApplicationConfig-如何運作？"><a href="#Q-mergeApplicationConfig-如何運作？" class="headerlink" title="Q: mergeApplicationConfig 如何運作？"></a>Q: <code>mergeApplicationConfig</code> 如何運作？</h3><p><strong>A</strong>: 它會合併兩個 ApplicationConfig，保留所有 providers，若有衝突則伺服器配置優先。</p>
<h3 id="Q-延遲載入會影響-SSR-嗎？"><a href="#Q-延遲載入會影響-SSR-嗎？" class="headerlink" title="Q: 延遲載入會影響 SSR 嗎？"></a>Q: 延遲載入會影響 SSR 嗎？</h3><p><strong>A</strong>: 不會。Angular 在建構時會分析所有路由進行預渲染，執行時仍正常延遲載入。</p>
<h3 id="Q-路由守衛會影響預渲染嗎？"><a href="#Q-路由守衛會影響預渲染嗎？" class="headerlink" title="Q: 路由守衛會影響預渲染嗎？"></a>Q: 路由守衛會影響預渲染嗎？</h3><p><strong>A</strong>: 會。若守衛在預渲染時阻擋路由，該頁面可能產生空白內容。建議設計 SSR 友善的守衛。</p>
<h3 id="Q-何時應該選擇-SPA-而非-SSR？"><a href="#Q-何時應該選擇-SPA-而非-SSR？" class="headerlink" title="Q: 何時應該選擇 SPA 而非 SSR？"></a>Q: 何時應該選擇 SPA 而非 SSR？</h3><p><strong>A</strong>: 高互動性、需要登入、內部系統、不需 SEO 的場景適合 SPA。</p>
<h2 id="總結與展望"><a href="#總結與展望" class="headerlink" title="總結與展望"></a>總結與展望</h2><p>Angular 19 的 SSR&#x2F;Prerender 架構提供了強大且靈活的渲染策略，關鍵要點：</p>
<ol>
<li><strong>架構設計</strong>: 善用 <code>.server</code> 檔案分離關注點，<code>mergeApplicationConfig</code> 整合配置</li>
<li><strong>路由規劃</strong>: 根據頁面特性選擇適當的渲染模式，公開頁面用預渲染，私有頁面用動態渲染</li>
<li><strong>效能優化</strong>: 延遲載入與 SSR 完全兼容，搭配程式碼分割最佳化載入</li>
<li><strong>安全考量</strong>: 前端守衛僅為 UX 優化，真正的安全防線在後端 API 驗證</li>
<li><strong>監控維護</strong>: 持續監控 FCP、LCP、CLS 等指標，調整渲染策略</li>
</ol>
<p><strong>最佳實踐</strong>: 透過正確的配置策略，實現「公開頁面快速載入 + 私有頁面流暢互動」的最佳使用者體驗。</p>
<h2 id="💡-渲染策略決策流程圖"><a href="#💡-渲染策略決策流程圖" class="headerlink" title="💡 渲染策略決策流程圖"></a>💡 渲染策略決策流程圖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[新頁面需求] --&gt; B&#123;需要 SEO 嗎?&#125;</span><br><span class="line">    B --&gt;|是| C&#123;內容是否靜態?&#125;</span><br><span class="line">    B --&gt;|否| D&#123;需要認證嗎?&#125;</span><br><span class="line">    </span><br><span class="line">    C --&gt;|是| E[Prerender 模式]</span><br><span class="line">    C --&gt;|否| F&#123;更新頻率?&#125;</span><br><span class="line">    </span><br><span class="line">    D --&gt;|是| G[SPA 模式]</span><br><span class="line">    D --&gt;|否| H[Dynamic 模式]</span><br><span class="line">    </span><br><span class="line">    F --&gt;|低| E</span><br><span class="line">    F --&gt;|高| I[Dynamic 模式]</span><br><span class="line">    </span><br><span class="line">    E --&gt; J[建構時生成 HTML]</span><br><span class="line">    I --&gt; K[執行時生成 HTML]</span><br><span class="line">    H --&gt; K</span><br><span class="line">    G --&gt; L[純客戶端渲染]</span><br><span class="line">    </span><br><span class="line">    J --&gt; M[最佳 SEO + 載入速度]</span><br><span class="line">    K --&gt; N[良好 SEO + 動態內容]</span><br><span class="line">    L --&gt; O[最佳互動體驗]</span><br></pre></td></tr></table></figure>

<h2 id="🎯-核心洞察總結"><a href="#🎯-核心洞察總結" class="headerlink" title="🎯 核心洞察總結"></a>🎯 核心洞察總結</h2><h3 id="1-架構設計的智慧"><a href="#1-架構設計的智慧" class="headerlink" title="1. 架構設計的智慧"></a>1. <strong>架構設計的智慧</strong></h3><p>Angular 19 的雙軌設計提供了：</p>
<ul>
<li><strong>關注點分離</strong>：客戶端與伺服器端各司其職</li>
<li><strong>配置合併</strong>：<code>mergeApplicationConfig</code> 統一管理</li>
<li><strong>彈性選擇</strong>：根據頁面特性選擇最適合的渲染模式</li>
</ul>
<h3 id="2-效能優化的關鍵"><a href="#2-效能優化的關鍵" class="headerlink" title="2. 效能優化的關鍵"></a>2. <strong>效能優化的關鍵</strong></h3><ul>
<li><strong>選擇性預渲染</strong>：不是所有頁面都需要 SSR</li>
<li><strong>程式碼分割</strong>：延遲載入與 SSR 完全兼容</li>
<li><strong>快取策略</strong>：靜態資源長期快取，HTML 短期快取</li>
</ul>
<h3 id="3-安全性的平衡"><a href="#3-安全性的平衡" class="headerlink" title="3. 安全性的平衡"></a>3. <strong>安全性的平衡</strong></h3><ul>
<li><strong>前端防護</strong>：僅為 UX 優化，不能依賴它保護敏感資料</li>
<li><strong>後端防線</strong>：真正的安全檢查必須在 API 層執行</li>
<li><strong>SSR 友善設計</strong>：守衛應該考慮伺服器端渲染環境</li>
</ul>
<h2 id="🚀-進階實踐建議"><a href="#🚀-進階實踐建議" class="headerlink" title="🚀 進階實踐建議"></a>🚀 進階實踐建議</h2><h3 id="大型專案策略"><a href="#大型專案策略" class="headerlink" title="大型專案策略"></a>大型專案策略</h3><ul>
<li><strong>微前端整合</strong>：不同模組可採用不同渲染策略</li>
<li><strong>CDN 優化</strong>：預渲染頁面部署到全球 CDN</li>
<li><strong>A&#x2F;B 測試</strong>：比較不同渲染模式的效果</li>
</ul>
<h3 id="監控與維護"><a href="#監控與維護" class="headerlink" title="監控與維護"></a>監控與維護</h3><ul>
<li><strong>Core Web Vitals</strong>：持續監控 FCP、LCP、CLS 指標</li>
<li><strong>建構時間</strong>：預渲染頁面數量與建構時間的平衡</li>
<li><strong>伺服器負載</strong>：動態渲染的伺服器資源消耗</li>
</ul>
<h2 id="📞-技術支援與參考資源"><a href="#📞-技術支援與參考資源" class="headerlink" title="📞 技術支援與參考資源"></a>📞 技術支援與參考資源</h2><h3 id="官方文件"><a href="#官方文件" class="headerlink" title="官方文件"></a>官方文件</h3><ul>
<li><a target="_blank" rel="noopener" href="https://angular.dev/guide/ssr">Angular SSR 官方指南</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/angular/universal">Angular Universal 文件</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.angular.io/">Angular 19 新功能</a></li>
</ul>
<h3 id="實用工具"><a href="#實用工具" class="headerlink" title="實用工具"></a>實用工具</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@angular-devkit/build-angular">Angular DevKit Build</a></li>
<li><a target="_blank" rel="noopener" href="https://angular.io/cli">Angular CLI</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/GoogleChrome/lighthouse-ci">Lighthouse CI</a></li>
</ul>
<h3 id="效能測試"><a href="#效能測試" class="headerlink" title="效能測試"></a>效能測試</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.webpagetest.org/">Web Page Test</a></li>
<li><a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">PageSpeed Insights</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/devtools/">Chrome DevTools</a></li>
</ul>
<h3 id="相關範例"><a href="#相關範例" class="headerlink" title="相關範例"></a>相關範例</h3><ul>
<li>Angular SSR 官方範例專案</li>
<li>Enterprise Angular 架構指南</li>
<li>PWA + SSR 整合案例</li>
</ul>
<blockquote>
<p><strong>作者</strong>：Angular 架構團隊<br><strong>更新日期</strong>：2025年6月29日<br><strong>版本</strong>：v2.1<br><strong>適用範圍</strong>：Angular 19+ SSR&#x2F;Prerender 專案</p>
</blockquote>
<hr>
<p><em>此文件結合了技術原理、實務配置和效能考量，提供完整的 Angular SSR 實作指南。</em> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-ssr-prerender-technical-guide/" data-id="cmcj9gyym000169mz3hm14qpj" data-title="Angular 19 SSR/Prerender 深度技術分析與實戰指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hydration/" rel="tag">Hydration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Performance-Optimization/" rel="tag">Performance Optimization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prerender/" rel="tag">Prerender</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RenderMode/" rel="tag">RenderMode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Route-Guards/" rel="tag">Route Guards</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server-Side-Rendering/" rel="tag">Server-Side Rendering</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ai-business-collaboration-strategy-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/ai-business-collaboration-strategy-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T04:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/ai-business-collaboration-strategy-guide/">AI 業務導向協作策略與 {{critical_functions}} 實戰指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="📋-核心懶人包"><a href="#📋-核心懶人包" class="headerlink" title="📋 核心懶人包"></a>📋 核心懶人包</h2><ol>
<li><strong> 概念</strong>：不只是佔位符，而是業務羅盤和 AI 協作的關鍵</li>
<li><strong>上下文引導</strong>：具體的業務術語觸發 AI 相關技術經驗和領域知識</li>
<li><strong>智能模板</strong>：可重用的文檔模板承載團隊智慧和領域專長</li>
<li><strong>協作進化</strong>：從通用助手進化為領域專家的 AI 協作模式</li>
<li><strong>決策框架</strong>：基於業務影響和技術風險的優先級排序系統</li>
</ol>
<h2 id="🤖-專案概述"><a href="#🤖-專案概述" class="headerlink" title="🤖 專案概述"></a>🤖 專案概述</h2><p>本文探討了 AI 業務導向指導策略在能源管理系統開發中的實際應用，展示如何透過明確的業務上下文提升 AI 協作效率：</p>
<ul>
<li>🎯 <strong>業務羅盤功能</strong>： 如何引導 AI 關注重點</li>
<li>🧠 <strong>認知科學原理</strong>：注意力聚焦與領域知識激活機制</li>
<li>📚 <strong>模板化策略</strong>：可重用的智慧模板設計和應用</li>
<li>🔄 <strong>協作模式演進</strong>：從通用助手到領域專家的轉變</li>
<li>⚡ <strong>效能評估</strong>：技術、協作和業務指標的綜合評估</li>
</ul>
<h2 id="🏗️-AI-協作演進架構"><a href="#🏗️-AI-協作演進架構" class="headerlink" title="🏗️ AI 協作演進架構"></a>🏗️ AI 協作演進架構</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[AI 協作請求] --&gt; B&#123;是否包含業務上下文?&#125;</span><br><span class="line">    B --&gt;|否| C[泛化回應]</span><br><span class="line">    B --&gt;|是| D[&#123;&#123;critical_functions&#125;&#125; 分析]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[標準技術模板]</span><br><span class="line">    C --&gt; C2[缺乏業務洞察]</span><br><span class="line">    </span><br><span class="line">    D --&gt; D1[領域知識激活]</span><br><span class="line">    D --&gt; D2[業務特性考量]</span><br><span class="line">    D --&gt; D3[專業建議生成]</span><br><span class="line">    </span><br><span class="line">    D1 --&gt; E[針對性技術方案]</span><br><span class="line">    D2 --&gt; E</span><br><span class="line">    D3 --&gt; E</span><br><span class="line">    </span><br><span class="line">    E --&gt; F[業務價值最大化]</span><br></pre></td></tr></table></figure>

<h2 id="🎯-的深層戰略意義"><a href="#🎯-的深層戰略意義" class="headerlink" title="🎯  的深層戰略意義"></a>🎯  的深層戰略意義</h2><h3 id="💡-不只是佔位符，是業務羅盤"><a href="#💡-不只是佔位符，是業務羅盤" class="headerlink" title="💡 不只是佔位符，是業務羅盤"></a>💡 不只是佔位符，是業務羅盤</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 傳統做法：泛化的技術文檔</span></span><br><span class="line"><span class="bullet">-</span> Document edge cases and error handling for all functions</span><br><span class="line"></span><br><span class="line"><span class="section"># 業務導向做法：領域特化的技術指導  </span></span><br><span class="line"><span class="bullet">-</span> Document edge cases and error handling for &#123;&#123;critical<span class="emphasis">_functions&#125;&#125;</span></span><br><span class="line"><span class="emphasis">- 填入：energy data collection, power consumption monitoring, real-time analytics</span></span><br></pre></td></tr></table></figure>

<h3 id="🧠-認知科學原理"><a href="#🧠-認知科學原理" class="headerlink" title="🧠 認知科學原理"></a>🧠 認知科學原理</h3><ul>
<li><strong>注意力聚焦</strong>: 人類和 AI 都有注意力限制，明確的關注點提升效率</li>
<li><strong>領域知識激活</strong>: 具體的業務術語觸發相關的技術經驗</li>
<li><strong>優先級自動排序</strong>: 重要功能獲得更多細節關注</li>
</ul>
<hr>
<h2 id="🤖-AI-協作的業務方向引導"><a href="#🤖-AI-協作的業務方向引導" class="headerlink" title="🤖 AI 協作的業務方向引導"></a>🤖 AI 協作的業務方向引導</h2><h3 id="💡-AI-如何理解業務重點"><a href="#💡-AI-如何理解業務重點" class="headerlink" title="💡 AI 如何理解業務重點"></a>💡 AI 如何理解業務重點</h3><h4 id="沒有業務上下文的-AI"><a href="#沒有業務上下文的-AI" class="headerlink" title="沒有業務上下文的 AI"></a><strong>沒有業務上下文的 AI</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">輸入：幫我寫個錯誤處理函數</span><br><span class="line">AI 思考：這是個通用的技術問題</span><br><span class="line">AI 回應：標準的 try-catch 模式</span><br><span class="line"></span><br><span class="line">結果：技術正確但缺乏業務洞察</span><br></pre></td></tr></table></figure>

<h4 id="有-引導的-AI"><a href="#有-引導的-AI" class="headerlink" title="有  引導的 AI"></a><strong>有  引導的 AI</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">輸入：幫我寫能源數據收集的錯誤處理函數</span><br><span class="line">AI 思考：這是能源管理系統的核心功能</span><br><span class="line"><span class="bullet">-</span> 數據完整性很重要</span><br><span class="line"><span class="bullet">-</span> 感測器故障是常見問題  </span><br><span class="line"><span class="bullet">-</span> 需要考慮即時性要求</span><br><span class="line"><span class="bullet">-</span> 可能需要備援機制</span><br><span class="line"></span><br><span class="line">AI 回應：針對能源系統特性的專業錯誤處理</span><br><span class="line"></span><br><span class="line">結果：技術準確且具備業務洞察</span><br></pre></td></tr></table></figure>

<h3 id="🎯-實際範例對比"><a href="#🎯-實際範例對比" class="headerlink" title="🎯 實際範例對比"></a>🎯 實際範例對比</h3><h4 id="泛化指導"><a href="#泛化指導" class="headerlink" title="泛化指導"></a><strong>泛化指導</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AI 產生的通用錯誤處理</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleError</span>(<span class="params"><span class="attr">error</span>: <span class="title class_">Error</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;An error occurred:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">  <span class="keyword">throw</span> error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="業務導向指導後"><a href="#業務導向指導後" class="headerlink" title="業務導向指導後"></a><strong>業務導向指導後</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AI 產生的能源系統專用錯誤處理</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">EnergyDataCollectionError</span> <span class="keyword">extends</span> <span class="title class_">Error</span> &#123;</span><br><span class="line">  <span class="attr">sensorId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">timestamp</span>: <span class="title class_">Date</span>;</span><br><span class="line">  <span class="attr">errorType</span>: <span class="string">&#x27;SENSOR_OFFLINE&#x27;</span> | <span class="string">&#x27;DATA_INVALID&#x27;</span> | <span class="string">&#x27;NETWORK_TIMEOUT&#x27;</span>;</span><br><span class="line">  <span class="attr">recoveryAction</span>?: <span class="string">&#x27;USE_BACKUP_SENSOR&#x27;</span> | <span class="string">&#x27;ESTIMATE_FROM_HISTORY&#x27;</span> | <span class="string">&#x27;ALERT_MAINTENANCE&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleEnergyDataError</span>(<span class="params"><span class="attr">error</span>: <span class="title class_">EnergyDataCollectionError</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// 記錄到能源管理系統專用日誌</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">energyLogger</span>.<span class="title function_">logSensorError</span>(&#123;</span><br><span class="line">    <span class="attr">sensorId</span>: error.<span class="property">sensorId</span>,</span><br><span class="line">    <span class="attr">errorType</span>: error.<span class="property">errorType</span>,</span><br><span class="line">    <span class="attr">timestamp</span>: error.<span class="property">timestamp</span>,</span><br><span class="line">    <span class="attr">criticalityLevel</span>: <span class="variable language_">this</span>.<span class="title function_">assessCriticality</span>(error.<span class="property">sensorId</span>)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 根據錯誤類型執行對應的恢復策略</span></span><br><span class="line">  <span class="keyword">switch</span> (error.<span class="property">errorType</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;SENSOR_OFFLINE&#x27;</span>:</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">activateBackupSensor</span>(error.<span class="property">sensorId</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;DATA_INVALID&#x27;</span>:</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">estimateFromHistoricalData</span>(error.<span class="property">sensorId</span>, error.<span class="property">timestamp</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;NETWORK_TIMEOUT&#x27;</span>:</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">queueForRetry</span>(error.<span class="property">sensorId</span>, error.<span class="property">timestamp</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="🏗️-領域驅動的技術決策"><a href="#🏗️-領域驅動的技術決策" class="headerlink" title="🏗️ 領域驅動的技術決策"></a>🏗️ 領域驅動的技術決策</h2><h3 id="💡-不同業務領域的-對比"><a href="#💡-不同業務領域的-對比" class="headerlink" title="💡 不同業務領域的  對比"></a>💡 不同業務領域的  對比</h3><h4 id="金融支付系統"><a href="#金融支付系統" class="headerlink" title="金融支付系統"></a><strong>金融支付系統</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;critical_functions&#125;&#125;: transaction processing, fraud detection, account balance validation</span><br></pre></td></tr></table></figure>
<p><strong>AI 會關注</strong>: </p>
<ul>
<li>交易一致性</li>
<li>安全性驗證</li>
<li>合規要求</li>
<li>即時性與準確性的平衡</li>
</ul>
<h4 id="醫療管理系統"><a href="#醫療管理系統" class="headerlink" title="醫療管理系統"></a><strong>醫療管理系統</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;critical_functions&#125;&#125;: patient data access, medication dosage calculations, emergency alerts</span><br></pre></td></tr></table></figure>
<p><strong>AI 會關注</strong>:</p>
<ul>
<li>病患隱私保護</li>
<li>劑量計算精確性</li>
<li>生命安全相關的可靠性</li>
<li>法規合規性</li>
</ul>
<h4 id="能源管理系統"><a href="#能源管理系統" class="headerlink" title="能源管理系統"></a><strong>能源管理系統</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;critical_functions&#125;&#125;: energy data collection, power consumption monitoring, real-time analytics</span><br></pre></td></tr></table></figure>
<p><strong>AI 會關注</strong>:</p>
<ul>
<li>感測器可靠性</li>
<li>即時數據處理</li>
<li>能源效率優化</li>
<li>設備安全保護</li>
</ul>
<h3 id="🎯-業務領域如何影響技術選擇"><a href="#🎯-業務領域如何影響技術選擇" class="headerlink" title="🎯 業務領域如何影響技術選擇"></a>🎯 業務領域如何影響技術選擇</h3><h4 id="能源系統的技術決策"><a href="#能源系統的技術決策" class="headerlink" title="能源系統的技術決策"></a><strong>能源系統的技術決策</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 因為是能源管理，AI 建議這樣的資料結構</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">EnergyReading</span> &#123;</span><br><span class="line">  <span class="attr">sensorId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">timestamp</span>: <span class="title class_">Date</span>;</span><br><span class="line">  <span class="attr">powerKW</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">voltageV</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">currentA</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">frequency</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">qualityIndicator</span>: <span class="string">&#x27;GOOD&#x27;</span> | <span class="string">&#x27;SUSPICIOUS&#x27;</span> | <span class="string">&#x27;BAD&#x27;</span>;  <span class="comment">// 數據品質很重要</span></span><br><span class="line">  <span class="attr">backupReading</span>?: <span class="title class_">EnergyReading</span>;  <span class="comment">// 備援數據策略</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因為即時性很重要，AI 建議這樣的錯誤處理</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EnergyDataService</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="variable constant_">TIMEOUT_MS</span> = <span class="number">3000</span>;  <span class="comment">// 能源系統對延遲敏感</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="variable constant_">RETRY_ATTEMPTS</span> = <span class="number">3</span>;  <span class="comment">// 快速失敗重試</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">collectEnergyData</span>(<span class="attr">sensorId</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">EnergyReading</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">race</span>([</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">primarySensor</span>.<span class="title function_">read</span>(sensorId),</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">timeoutAfter</span>(<span class="variable language_">this</span>.<span class="property">TIMEOUT_MS</span>)  <span class="comment">// 強制超時保護</span></span><br><span class="line">    ]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="電商系統的技術決策"><a href="#電商系統的技術決策" class="headerlink" title="電商系統的技術決策"></a><strong>電商系統的技術決策</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果是電商系統，AI 會建議不同的考量</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">OrderProcessing</span> &#123;</span><br><span class="line">  <span class="attr">orderId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">customerId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">items</span>: <span class="title class_">OrderItem</span>[];</span><br><span class="line">  <span class="attr">paymentStatus</span>: <span class="string">&#x27;PENDING&#x27;</span> | <span class="string">&#x27;PAID&#x27;</span> | <span class="string">&#x27;FAILED&#x27;</span>;</span><br><span class="line">  <span class="attr">inventoryReserved</span>: <span class="built_in">boolean</span>;  <span class="comment">// 庫存管理很重要</span></span><br><span class="line">  <span class="attr">fraudScore</span>: <span class="built_in">number</span>;  <span class="comment">// 風險控制很重要</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 電商注重的是交易一致性和用戶體驗</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="variable constant_">INVENTORY_TIMEOUT_MS</span> = <span class="number">10000</span>;  <span class="comment">// 可以等待更久</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="variable constant_">PAYMENT_RETRY_ATTEMPTS</span> = <span class="number">5</span>;  <span class="comment">// 支付重試更寬容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="📚-文檔模板化的戰略價值"><a href="#📚-文檔模板化的戰略價值" class="headerlink" title="📚 文檔模板化的戰略價值"></a>📚 文檔模板化的戰略價值</h2><h3 id="💡-可重用的智慧模板"><a href="#💡-可重用的智慧模板" class="headerlink" title="💡 可重用的智慧模板"></a>💡 可重用的智慧模板</h3><h4 id="通用模板結構"><a href="#通用模板結構" class="headerlink" title="通用模板結構"></a><strong>通用模板結構</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># AI Rules for &#123;&#123;project<span class="emphasis">_domain&#125;&#125;</span></span></span><br><span class="line"><span class="emphasis"><span class="section"></span></span></span><br><span class="line"><span class="emphasis"><span class="section">## CRITICAL_</span>FUNCTIONS</span></span><br><span class="line"><span class="bullet">-</span> Document edge cases and error handling for &#123;&#123;critical<span class="emphasis">_functions&#125;&#125;</span></span><br><span class="line"><span class="emphasis">- Implement monitoring and alerting for &#123;&#123;high_</span>risk<span class="emphasis">_operations&#125;&#125;  </span></span><br><span class="line"><span class="emphasis">- Ensure compliance with &#123;&#123;industry_</span>regulations&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## BUSINESS<span class="emphasis">_CONTEXT</span></span></span><br><span class="line"><span class="emphasis"><span class="section">- &#123;&#123;primary_</span>user<span class="emphasis">_types&#125;&#125; depend on &#123;&#123;core_</span>value<span class="emphasis">_proposition&#125;&#125;</span></span></span><br><span class="line"><span class="emphasis"><span class="section">- System failure impacts: &#123;&#123;business_</span>impact<span class="emphasis">_severity&#125;&#125;</span></span></span><br><span class="line"><span class="emphasis"><span class="section">- Recovery time objectives: &#123;&#123;recovery_</span>requirements&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="填入不同領域"><a href="#填入不同領域" class="headerlink" title="填入不同領域"></a><strong>填入不同領域</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 能源管理系統</span></span><br><span class="line">&#123;&#123;project<span class="emphasis">_domain&#125;&#125;: Energy Management System (EMS)</span></span><br><span class="line"><span class="emphasis">&#123;&#123;critical_</span>functions&#125;&#125;: energy data collection, power monitoring</span><br><span class="line">&#123;&#123;high<span class="emphasis">_risk_</span>operations&#125;&#125;: grid integration, safety shutdowns</span><br><span class="line">&#123;&#123;industry<span class="emphasis">_regulations&#125;&#125;: electrical safety standards, environmental compliance</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"># 金融交易系統  </span></span><br><span class="line"><span class="emphasis">&#123;&#123;project_</span>domain&#125;&#125;: Financial Trading Platform (FTP)</span><br><span class="line">&#123;&#123;critical<span class="emphasis">_functions&#125;&#125;: order execution, risk calculation</span></span><br><span class="line"><span class="emphasis">&#123;&#123;high_</span>risk<span class="emphasis">_operations&#125;&#125;: large transactions, margin calls</span></span><br><span class="line"><span class="emphasis">&#123;&#123;industry_</span>regulations&#125;&#125;: financial compliance, audit requirements</span><br></pre></td></tr></table></figure>

<h3 id="🎯-模板的進化策略"><a href="#🎯-模板的進化策略" class="headerlink" title="🎯 模板的進化策略"></a>🎯 模板的進化策略</h3><h4 id="Level-1-基礎模板"><a href="#Level-1-基礎模板" class="headerlink" title="Level 1: 基礎模板"></a><strong>Level 1: 基礎模板</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;critical<span class="emphasis">_functions&#125;&#125; - 列出關鍵功能名稱</span></span><br></pre></td></tr></table></figure>

<h4 id="Level-2-上下文模板"><a href="#Level-2-上下文模板" class="headerlink" title="Level 2: 上下文模板"></a><strong>Level 2: 上下文模板</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;critical<span class="emphasis">_functions&#125;&#125; - 關鍵功能</span></span><br><span class="line"><span class="emphasis">&#123;&#123;business_</span>impact&#125;&#125; - 業務影響</span><br><span class="line">&#123;&#123;technical<span class="emphasis">_constraints&#125;&#125; - 技術限制</span></span><br></pre></td></tr></table></figure>

<h4 id="Level-3-智能模板"><a href="#Level-3-智能模板" class="headerlink" title="Level 3: 智能模板"></a><strong>Level 3: 智能模板</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;critical<span class="emphasis">_functions&#125;&#125; - 根據領域自動推薦</span></span><br><span class="line"><span class="emphasis">&#123;&#123;risk_</span>matrix&#125;&#125; - 風險評估矩陣</span><br><span class="line">&#123;&#123;compliance<span class="emphasis">_checklist&#125;&#125; - 合規要求檢查</span></span><br><span class="line"><span class="emphasis">&#123;&#123;performance_</span>benchmarks&#125;&#125; - 性能基準</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="🧠-AI-協作模式的演進"><a href="#🧠-AI-協作模式的演進" class="headerlink" title="🧠 AI 協作模式的演進"></a>🧠 AI 協作模式的演進</h2><h3 id="💡-從通用助手到領域專家"><a href="#💡-從通用助手到領域專家" class="headerlink" title="💡 從通用助手到領域專家"></a>💡 從通用助手到領域專家</h3><h4 id="傳統-AI-互動模式"><a href="#傳統-AI-互動模式" class="headerlink" title="傳統 AI 互動模式"></a><strong>傳統 AI 互動模式</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">人類：幫我寫個函數</span><br><span class="line">AI：好的，這是通用函數模板</span><br><span class="line">結果：技術正確，業務無關</span><br></pre></td></tr></table></figure>

<h4 id="領域導向-AI-互動模式"><a href="#領域導向-AI-互動模式" class="headerlink" title="領域導向 AI 互動模式"></a><strong>領域導向 AI 互動模式</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">人類：根據 &#123;&#123;critical_functions&#125;&#125; 幫我設計能源數據收集函數</span><br><span class="line">AI：我理解這是能源管理系統的核心功能，需要考慮...</span><br><span class="line">- 感測器可靠性</span><br><span class="line">- 即時性要求  </span><br><span class="line">- 數據品質驗證</span><br><span class="line">- 備援機制</span><br><span class="line">結果：技術與業務完美結合</span><br></pre></td></tr></table></figure>

<h3 id="🎯-提升-AI-協作效率的策略"><a href="#🎯-提升-AI-協作效率的策略" class="headerlink" title="🎯 提升 AI 協作效率的策略"></a>🎯 提升 AI 協作效率的策略</h3><h4 id="1-上下文預設置"><a href="#1-上下文預設置" class="headerlink" title="1. 上下文預設置"></a><strong>1. 上下文預設置</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 在專案開始就建立清楚的上下文</span></span><br><span class="line">This is an Energy Management System (EMS) for industrial facilities.</span><br><span class="line">Critical functions include: energy data collection, power consumption monitoring, </span><br><span class="line">real-time energy analytics, alert generation, energy efficiency calculations.</span><br><span class="line"></span><br><span class="line">Priority concerns: data accuracy, system reliability, real-time performance.</span><br></pre></td></tr></table></figure>

<h4 id="2-角色定義"><a href="#2-角色定義" class="headerlink" title="2. 角色定義"></a><strong>2. 角色定義</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 讓 AI 扮演領域專家角色</span></span><br><span class="line">Act as a senior energy management system architect with 10+ years experience.</span><br><span class="line">Focus on industrial-grade reliability and energy efficiency optimization.</span><br><span class="line">Consider sensor networks, data integrity, and real-time processing requirements.</span><br></pre></td></tr></table></figure>

<h4 id="3-約束條件明確化"><a href="#3-約束條件明確化" class="headerlink" title="3. 約束條件明確化"></a><strong>3. 約束條件明確化</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 明確的技術和業務約束</span></span><br><span class="line">Technical constraints:</span><br><span class="line"><span class="bullet">-</span> Must handle 1000+ sensors simultaneously</span><br><span class="line"><span class="bullet">-</span> Maximum 3-second response time for alerts</span><br><span class="line"><span class="bullet">-</span> 99.9% uptime requirement</span><br><span class="line"></span><br><span class="line">Business constraints:  </span><br><span class="line"><span class="bullet">-</span> Energy data must be audit-ready</span><br><span class="line"><span class="bullet">-</span> Integration with existing SCADA systems</span><br><span class="line"><span class="bullet">-</span> Compliance with electrical safety standards</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="🚀-實踐應用策略"><a href="#🚀-實踐應用策略" class="headerlink" title="🚀 實踐應用策略"></a>🚀 實踐應用策略</h2><h3 id="💡-建立你的-清單"><a href="#💡-建立你的-清單" class="headerlink" title="💡 建立你的  清單"></a>💡 建立你的  清單</h3><h4 id="Step-1-業務影響分析"><a href="#Step-1-業務影響分析" class="headerlink" title="Step 1: 業務影響分析"></a><strong>Step 1: 業務影響分析</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">問自己這些問題：</span><br><span class="line"><span class="bullet">1.</span> 哪些功能失效會直接影響業務目標？</span><br><span class="line"><span class="bullet">2.</span> 哪些操作涉及用戶安全或數據安全？</span><br><span class="line"><span class="bullet">3.</span> 哪些流程是法規要求必須可靠的？</span><br><span class="line"><span class="bullet">4.</span> 哪些功能的停機成本最高？</span><br></pre></td></tr></table></figure>

<h4 id="Step-2-技術風險評估"><a href="#Step-2-技術風險評估" class="headerlink" title="Step 2: 技術風險評估"></a><strong>Step 2: 技術風險評估</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">評估技術複雜度：</span><br><span class="line"><span class="bullet">1.</span> 涉及外部系統整合的功能</span><br><span class="line"><span class="bullet">2.</span> 即時性要求高的處理流程</span><br><span class="line"><span class="bullet">3.</span> 數據一致性要求嚴格的操作</span><br><span class="line"><span class="bullet">4.</span> 用戶體驗關鍵路徑上的功能</span><br></pre></td></tr></table></figure>

<h4 id="Step-3-優先級排序"><a href="#Step-3-優先級排序" class="headerlink" title="Step 3: 優先級排序"></a><strong>Step 3: 優先級排序</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">業務影響 × 技術風險 = 關注優先級</span><br><span class="line"></span><br><span class="line">高業務影響 + 高技術風險 = 核心關注 (critical<span class="emphasis">_functions)</span></span><br><span class="line"><span class="emphasis">高業務影響 + 低技術風險 = 重要但可控</span></span><br><span class="line"><span class="emphasis">低業務影響 + 高技術風險 = 技術挑戰</span></span><br><span class="line"><span class="emphasis">低業務影響 + 低技術風險 = 標準處理</span></span><br></pre></td></tr></table></figure>

<h3 id="🎯-AI-提示工程最佳實踐"><a href="#🎯-AI-提示工程最佳實踐" class="headerlink" title="🎯 AI 提示工程最佳實踐"></a>🎯 AI 提示工程最佳實踐</h3><h4 id="有效的提示模板"><a href="#有效的提示模板" class="headerlink" title="有效的提示模板"></a><strong>有效的提示模板</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 結構化的 AI 提示</span></span><br><span class="line">Context: I&#x27;m working on a &#123;&#123;project<span class="emphasis">_domain&#125;&#125; system</span></span><br><span class="line"><span class="emphasis">Critical Functions: &#123;&#123;critical_</span>functions&#125;&#125;</span><br><span class="line">Current Task: &#123;&#123;specific<span class="emphasis">_task&#125;&#125;</span></span><br><span class="line"><span class="emphasis">Business Constraints: &#123;&#123;business_</span>requirements&#125;&#125;</span><br><span class="line">Technical Constraints: &#123;&#123;technical<span class="emphasis">_requirements&#125;&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">Please provide a solution that specifically addresses the &#123;&#123;domain&#125;&#125; requirements,</span></span><br><span class="line"><span class="emphasis">with special attention to &#123;&#123;critical_</span>aspects&#125;&#125;.</span><br></pre></td></tr></table></figure>

<h4 id="範例應用"><a href="#範例應用" class="headerlink" title="範例應用"></a><strong>範例應用</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Context: I&#x27;m working on an Energy Management System</span><br><span class="line">Critical Functions: energy data collection, power consumption monitoring</span><br><span class="line">Current Task: Design error handling for sensor data collection</span><br><span class="line">Business Constraints: Must maintain audit trail, 99.9% reliability required</span><br><span class="line">Technical Constraints: Handle 1000+ sensors, 3-second max response time</span><br><span class="line"></span><br><span class="line">Please provide a solution that specifically addresses energy management requirements,</span><br><span class="line">with special attention to sensor reliability and data integrity.</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="📊-成效評估指標"><a href="#📊-成效評估指標" class="headerlink" title="📊 成效評估指標"></a>📊 成效評估指標</h2><h3 id="💡-如何衡量-的價值"><a href="#💡-如何衡量-的價值" class="headerlink" title="💡 如何衡量  的價值"></a>💡 如何衡量  的價值</h3><h4 id="技術指標"><a href="#技術指標" class="headerlink" title="技術指標"></a><strong>技術指標</strong></h4><ul>
<li>關鍵功能的 <strong>程式碼覆蓋率</strong>: &gt;95%</li>
<li>關鍵功能的 <strong>錯誤處理完整性</strong>: 所有異常情況都有對應處理</li>
<li>關鍵功能的 <strong>文檔詳細度</strong>: 包含邊緣情況和恢復策略</li>
</ul>
<h4 id="協作指標"><a href="#協作指標" class="headerlink" title="協作指標"></a><strong>協作指標</strong></h4><ul>
<li><strong>AI 回應準確性</strong>: 針對業務領域的技術建議準確率</li>
<li><strong>開發效率提升</strong>: 減少重複解釋上下文的時間</li>
<li><strong>新人上手速度</strong>: 透過明確的關注點快速理解系統</li>
</ul>
<h4 id="業務指標"><a href="#業務指標" class="headerlink" title="業務指標"></a><strong>業務指標</strong></h4><ul>
<li><strong>故障恢復時間</strong>: 關鍵功能問題的平均修復時間</li>
<li><strong>用戶影響範圍</strong>: 關鍵功能故障的用戶影響程度</li>
<li><strong>合規達成率</strong>: 關鍵功能的法規要求滿足程度</li>
</ul>
<hr>
<h2 id="🎯-核心洞察"><a href="#🎯-核心洞察" class="headerlink" title="🎯 核心洞察"></a>🎯 核心洞察</h2><h3 id="1-精準比完整更重要"><a href="#1-精準比完整更重要" class="headerlink" title="1. 精準比完整更重要"></a>1. <strong>精準比完整更重要</strong></h3><ul>
<li>10 個精準的關鍵功能比 100 個泛化的功能清單更有價值</li>
<li>AI 和人類都受益於明確的優先級</li>
</ul>
<h3 id="2-上下文是-AI-協作的倍增器"><a href="#2-上下文是-AI-協作的倍增器" class="headerlink" title="2. 上下文是 AI 協作的倍增器"></a>2. <strong>上下文是 AI 協作的倍增器</strong></h3><ul>
<li>良好的業務上下文讓 AI 從「程式碼產生器」變成「領域顧問」</li>
<li> 是最有效的上下文載體</li>
</ul>
<h3 id="3-文檔模板是知識資產"><a href="#3-文檔模板是知識資產" class="headerlink" title="3. 文檔模板是知識資產"></a>3. <strong>文檔模板是知識資產</strong></h3><ul>
<li>可重用的模板承載團隊智慧</li>
<li>每個專案的  都是寶貴的領域知識</li>
</ul>
<h3 id="4-業務驅動技術，不是相反"><a href="#4-業務驅動技術，不是相反" class="headerlink" title="4. 業務驅動技術，不是相反"></a>4. <strong>業務驅動技術，不是相反</strong></h3><ul>
<li>技術選擇應該服務業務目標</li>
<li> 確保技術決策對齊業務優先級</li>
</ul>
<hr>
<h2 id="📝-行動指南"><a href="#📝-行動指南" class="headerlink" title="📝 行動指南"></a>📝 行動指南</h2><h3 id="立即開始的三個步驟"><a href="#立即開始的三個步驟" class="headerlink" title="立即開始的三個步驟"></a>立即開始的三個步驟</h3><h4 id="1-定義你的"><a href="#1-定義你的" class="headerlink" title="1. 定義你的 "></a><strong>1. 定義你的 </strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">針對你的專案，回答：</span><br><span class="line"><span class="bullet">-</span> 什麼功能失效會讓業務停擺？</span><br><span class="line"><span class="bullet">-</span> 什麼操作涉及安全風險？</span><br><span class="line"><span class="bullet">-</span> 什麼流程是用戶價值的核心？</span><br></pre></td></tr></table></figure>

<h4 id="2-建立-AI-協作模板"><a href="#2-建立-AI-協作模板" class="headerlink" title="2. 建立 AI 協作模板"></a><strong>2. 建立 AI 協作模板</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在每次 AI 互動前，提供：</span><br><span class="line"><span class="bullet">-</span> 專案領域和業務目標</span><br><span class="line"><span class="bullet">-</span> 關鍵功能清單</span><br><span class="line"><span class="bullet">-</span> 當前任務的業務上下文</span><br></pre></td></tr></table></figure>

<h4 id="3-迭代優化"><a href="#3-迭代優化" class="headerlink" title="3. 迭代優化"></a><strong>3. 迭代優化</strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">定期檢視和更新：</span><br><span class="line"><span class="bullet">-</span> &#123;&#123;critical<span class="emphasis">_functions&#125;&#125; 是否還符合業務優先級？</span></span><br><span class="line"><span class="emphasis">- AI 協作效果是否有改善？</span></span><br><span class="line"><span class="emphasis">- 團隊對重點的理解是否一致？</span></span><br></pre></td></tr></table></figure>

<h2 id="💡-實施流程圖"><a href="#💡-實施流程圖" class="headerlink" title="💡  實施流程圖"></a>💡  實施流程圖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[專案開始] --&gt; B[業務影響分析]</span><br><span class="line">    B --&gt; C[技術風險評估]</span><br><span class="line">    C --&gt; D[優先級排序]</span><br><span class="line">    </span><br><span class="line">    D --&gt; E&#123;確定 critical_functions&#125;</span><br><span class="line">    E --&gt; F[建立 AI 協作模板]</span><br><span class="line">    F --&gt; G[團隊培訓和實施]</span><br><span class="line">    </span><br><span class="line">    G --&gt; H[效果評估]</span><br><span class="line">    H --&gt; I&#123;是否達到預期?&#125;</span><br><span class="line">    </span><br><span class="line">    I --&gt;|是| J[持續優化]</span><br><span class="line">    I --&gt;|否| K[調整策略]</span><br><span class="line">    </span><br><span class="line">    K --&gt; E</span><br><span class="line">    J --&gt; L[知識沉澱]</span><br><span class="line">    L --&gt; M[模板進化]</span><br><span class="line">    M --&gt; J</span><br></pre></td></tr></table></figure>

<h2 id="🎯-核心洞察總結"><a href="#🎯-核心洞察總結" class="headerlink" title="🎯 核心洞察總結"></a>🎯 核心洞察總結</h2><h3 id="1-AI-協作的本質轉變"><a href="#1-AI-協作的本質轉變" class="headerlink" title="1. AI 協作的本質轉變"></a>1. <strong>AI 協作的本質轉變</strong></h3><p>從「程式碼產生器」進化為「領域顧問」：</p>
<ul>
<li><strong>精準比完整更重要</strong>：10 個精準的關鍵功能比 100 個泛化功能更有價值</li>
<li><strong>上下文是倍增器</strong>：良好的業務上下文讓 AI 發揮真正的專業價值</li>
<li><strong>模板是知識資產</strong>：承載團隊智慧的可重用模板</li>
</ul>
<h3 id="2-業務驅動技術決策"><a href="#2-業務驅動技術決策" class="headerlink" title="2. 業務驅動技術決策"></a>2. <strong>業務驅動技術決策</strong></h3><p>技術選擇應該服務業務目標：</p>
<ul>
<li><strong> 確保對齊</strong>：技術決策與業務優先級保持一致</li>
<li><strong>領域知識激活</strong>：具體業務術語觸發相關技術經驗</li>
<li><strong>優先級自動排序</strong>：重要功能獲得更多細節關注</li>
</ul>
<h3 id="3-實施成功的關鍵要素"><a href="#3-實施成功的關鍵要素" class="headerlink" title="3. 實施成功的關鍵要素"></a>3. <strong>實施成功的關鍵要素</strong></h3><ul>
<li><strong>團隊共識</strong>：對  的理解要一致</li>
<li><strong>持續迭代</strong>：定期檢視和更新關鍵功能清單</li>
<li><strong>效果測量</strong>：透過技術、協作和業務指標評估成效</li>
</ul>
<h2 id="🚀-進階應用策略"><a href="#🚀-進階應用策略" class="headerlink" title="🚀 進階應用策略"></a>🚀 進階應用策略</h2><h3 id="跨領域模板庫"><a href="#跨領域模板庫" class="headerlink" title="跨領域模板庫"></a>跨領域模板庫</h3><p>建立不同業務領域的  模板：</p>
<ul>
<li><strong>金融科技</strong>：風險控制、合規性、交易安全</li>
<li><strong>醫療健康</strong>：病患隱私、劑量精確性、生命安全</li>
<li><strong>能源管理</strong>：設備可靠性、即時監控、安全保護</li>
</ul>
<h3 id="AI-協作成熟度模型"><a href="#AI-協作成熟度模型" class="headerlink" title="AI 協作成熟度模型"></a>AI 協作成熟度模型</h3><ul>
<li><strong>Level 1</strong>：基礎模板使用</li>
<li><strong>Level 2</strong>：上下文優化</li>
<li><strong>Level 3</strong>：智能模板自動推薦</li>
<li><strong>Level 4</strong>：領域專家級協作</li>
</ul>
<h2 id="📞-技術支援與參考資源"><a href="#📞-技術支援與參考資源" class="headerlink" title="📞 技術支援與參考資源"></a>📞 技術支援與參考資源</h2><h3 id="實踐工具"><a href="#實踐工具" class="headerlink" title="實踐工具"></a>實踐工具</h3><ul>
<li>AI 提示工程最佳實踐</li>
<li>業務分析框架</li>
<li>技術決策模板</li>
<li>效果評估指標</li>
</ul>
<h3 id="相關方法論"><a href="#相關方法論" class="headerlink" title="相關方法論"></a>相關方法論</h3><ul>
<li>領域驅動設計 (DDD)</li>
<li>業務能力建模</li>
<li>風險評估矩陣</li>
<li>敏捷開發實踐</li>
</ul>
<h3 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h3><ul>
<li>《Domain-Driven Design》by Eric Evans</li>
<li>《The Lean Startup》by Eric Ries</li>
<li>《Building Microservices》by Sam Newman</li>
</ul>
<blockquote>
<p><strong>作者</strong>：AI 協作策略團隊<br><strong>更新日期</strong>：2025年6月29日<br><strong>版本</strong>：v2.0<br><strong>適用範圍</strong>：企業級軟體開發專案</p>
</blockquote>
<hr>
<p><em>AI 是工具，業務是目標。 是讓工具服務目標的關鍵！</em> 🎯 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/ai-business-collaboration-strategy-guide/" data-id="cmcj9gyyk000069mza0xa24br" data-title="AI 業務導向協作策略與 {{critical_functions}} 實戰指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI-Assistant/" rel="tag">AI Assistant</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI-Collaboration/" rel="tag">AI Collaboration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Business-Context/" rel="tag">Business Context</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Business-Strategy/" rel="tag">Business Strategy</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Critical-Functions/" rel="tag">Critical Functions</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Domain-Knowledge/" rel="tag">Domain Knowledge</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Knowledge-Management/" rel="tag">Knowledge Management</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prompt-Engineering/" rel="tag">Prompt Engineering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Team-Productivity/" rel="tag">Team Productivity</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Technical-Decision-Making/" rel="tag">Technical Decision Making</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue-frontend-architecture-patterns-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/vue-frontend-architecture-patterns-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T03:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/vue-frontend-architecture-patterns-guide/">Vue.js 前端架構模式比較與選擇指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="📋-核心懶人包"><a href="#📋-核心懶人包" class="headerlink" title="📋 核心懶人包"></a>📋 核心懶人包</h2><ol>
<li><strong>全域屬性模式</strong>：快速開發，適合小型專案或即將 EOS 的系統</li>
<li><strong>服務注入模式</strong>：純業務邏輯處理，易於測試，重用性高</li>
<li><strong>Composables 模式</strong>：響應式邏輯復用，Vue 3 原生支援</li>
<li><strong>Store 模式</strong>：全域狀態管理，適合複雜應用程式狀態</li>
<li><strong>混合策略</strong>：依據功能特性選擇最適合的架構模式</li>
</ol>
<h2 id="🏗️-專案概述"><a href="#🏗️-專案概述" class="headerlink" title="🏗️ 專案概述"></a>🏗️ 專案概述</h2><p>本文記錄了在 Vue.js 專案中不同架構模式的比較分析，特別針對公用程式管理、狀態共享和業務邏輯組織方式進行深入探討：</p>
<ul>
<li>🎯 <strong>架構模式比較</strong>：四種主要前端架構模式的優缺點分析</li>
<li>🔧 <strong>實作策略</strong>：每種模式的具體實作方式和程式碼範例</li>
<li>📊 <strong>選擇指南</strong>：基於專案特性的架構選擇建議</li>
<li>🚀 <strong>最佳實踐</strong>：混合使用策略和重構建議</li>
<li>⚡ <strong>效能考量</strong>：不同模式對 Bundle 大小和效能的影響</li>
</ul>
<h2 id="🏗️-架構模式技術比較"><a href="#🏗️-架構模式技術比較" class="headerlink" title="🏗️ 架構模式技術比較"></a>🏗️ 架構模式技術比較</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Vue.js 前端架構] --&gt; B[全域屬性注入]</span><br><span class="line">    A --&gt; C[服務注入模式]</span><br><span class="line">    A --&gt; D[Composables 模式]</span><br><span class="line">    A --&gt; E[Store 模式]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[快速開發]</span><br><span class="line">    B --&gt; B2[統一管理]</span><br><span class="line">    B --&gt; B3[Bundle 較大]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[純業務邏輯]</span><br><span class="line">    C --&gt; C2[易於測試]</span><br><span class="line">    C --&gt; C3[型別安全]</span><br><span class="line">    </span><br><span class="line">    D --&gt; D1[響應式狀態]</span><br><span class="line">    D --&gt; D2[邏輯復用]</span><br><span class="line">    D --&gt; D3[Vue 特定]</span><br><span class="line">    </span><br><span class="line">    E --&gt; E1[全域狀態]</span><br><span class="line">    E --&gt; E2[DevTools 支援]</span><br><span class="line">    E --&gt; E3[結構化管理]</span><br></pre></td></tr></table></figure>

<h2 id="📝-文件概述"><a href="#📝-文件概述" class="headerlink" title="📝 文件概述"></a>📝 文件概述</h2><p>本文記錄了在 Vue.js 專案中不同架構模式的比較分析，特別針對公用程式管理、狀態共享和業務邏輯組織方式進行深入探討。</p>
<h2 id="🏗️-架構模式比較"><a href="#🏗️-架構模式比較" class="headerlink" title="🏗️ 架構模式比較"></a>🏗️ 架構模式比較</h2><h3 id="1-全域屬性注入模式-Global-Properties-Injection"><a href="#1-全域屬性注入模式-Global-Properties-Injection" class="headerlink" title="1. 全域屬性注入模式 (Global Properties Injection)"></a>1. 全域屬性注入模式 (Global Properties Injection)</h3><h4 id="💡-概念"><a href="#💡-概念" class="headerlink" title="💡 概念"></a>💡 概念</h4><p>將所有工具函式和服務掛載到 Vue 應用程式的全域屬性上，讓所有組件都能直接存取。</p>
<h4 id="🔧-實作方式"><a href="#🔧-實作方式" class="headerlink" title="🔧 實作方式"></a>🔧 實作方式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Utils</span> <span class="keyword">from</span> <span class="string">&#x27;@/common/utils.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ChartOptions</span> <span class="keyword">from</span> <span class="string">&#x27;@/common/chart_option.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;./api&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$utils</span> = <span class="title class_">Utils</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$api</span> = api;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$chartOption</span> = <span class="title class_">ChartOptions</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$lodash</span> = lodash;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在組件中使用</span></span><br><span class="line"><span class="keyword">const</span> curInstance = <span class="title function_">getCurrentInstance</span>();</span><br><span class="line"><span class="keyword">const</span> api = curInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$api</span>;</span><br><span class="line"><span class="keyword">const</span> utils = curInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$utils</span>;</span><br></pre></td></tr></table></figure>

<h4 id="✅-優點"><a href="#✅-優點" class="headerlink" title="✅ 優點"></a>✅ 優點</h4><ul>
<li><strong>快速開發</strong>：不需要反覆匯入，直接使用</li>
<li><strong>統一管理</strong>：所有公用程式都在 main.js 中註冊</li>
<li><strong>團隊協作</strong>：新成員容易上手，使用方式一致</li>
<li><strong>向後相容</strong>：適合既有專案的漸進式升級</li>
</ul>
<h4 id="❌-缺點"><a href="#❌-缺點" class="headerlink" title="❌ 缺點"></a>❌ 缺點</h4><ul>
<li><strong>Bundle 肥大</strong>：所有工具都會被打包，即使未使用</li>
<li><strong>依賴不明確</strong>：難以追蹤組件真正使用的依賴</li>
<li><strong>測試困難</strong>：全域依賴較難進行單元測試</li>
<li><strong>型別推斷弱</strong>：TypeScript 支援有限</li>
</ul>
<h4 id="🎯-適用場景"><a href="#🎯-適用場景" class="headerlink" title="🎯 適用場景"></a>🎯 適用場景</h4><ul>
<li><strong>即將 EOS 的專案</strong>：不適合大規模重構</li>
<li><strong>快速原型開發</strong>：需要快速驗證功能</li>
<li><strong>小型專案</strong>：團隊規模小，複雜度低</li>
</ul>
<hr>
<h3 id="2-服務注入模式-Service-Injection"><a href="#2-服務注入模式-Service-Injection" class="headerlink" title="2. 服務注入模式 (Service Injection)"></a>2. 服務注入模式 (Service Injection)</h3><h4 id="💡-概念-1"><a href="#💡-概念-1" class="headerlink" title="💡 概念"></a>💡 概念</h4><p>將業務邏輯封裝成獨立的服務類別，按需匯入使用，專注於純業務邏輯處理。</p>
<h4 id="🔧-實作方式-1"><a href="#🔧-實作方式-1" class="headerlink" title="🔧 實作方式"></a>🔧 實作方式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// services/ExcelService.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExcelService</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">exportExcel</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            data = [],</span><br><span class="line">            headers = [],</span><br><span class="line">            filename = <span class="string">&#x27;export&#x27;</span>,</span><br><span class="line">            sheetName = <span class="string">&#x27;Sheet1&#x27;</span>,</span><br><span class="line">            style = &#123;&#125;,</span><br><span class="line">            includeTimestamp = <span class="literal">true</span></span><br><span class="line">        &#125; = options;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> worksheet = <span class="variable language_">this</span>.<span class="title function_">_createWorksheet</span>(data, headers);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_applyStyle</span>(worksheet, style);</span><br><span class="line">            <span class="keyword">const</span> buffer = <span class="variable language_">this</span>.<span class="title function_">_generateFile</span>(worksheet, sheetName);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_downloadFile</span>(buffer, filename, includeTimestamp);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">success</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Excel 匯出失敗:&#x27;</span>, error);</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">success</span>: <span class="literal">false</span>, error &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_createWorksheet</span>(<span class="params">data, headers</span>) &#123; <span class="comment">/* 實作邏輯 */</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_applyStyle</span>(<span class="params">worksheet, style</span>) &#123; <span class="comment">/* 實作邏輯 */</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_generateFile</span>(<span class="params">worksheet, sheetName</span>) &#123; <span class="comment">/* 實作邏輯 */</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_downloadFile</span>(<span class="params">buffer, filename, includeTimestamp</span>) &#123; <span class="comment">/* 實作邏輯 */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ExcelService</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在組件中使用</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ExcelService</span> <span class="keyword">from</span> <span class="string">&#x27;@/services/ExcelService.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">exportData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title class_">ExcelService</span>.<span class="title function_">exportExcel</span>(&#123;</span><br><span class="line">        <span class="attr">data</span>: tableData.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">headers</span>: columnHeaders,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;設備清單&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="✅-優點-1"><a href="#✅-優點-1" class="headerlink" title="✅ 優點"></a>✅ 優點</h4><ul>
<li><strong>易於測試</strong>：純業務邏輯，易於單元測試</li>
<li><strong>重用性高</strong>：可在任何環境使用，不限於 Vue</li>
<li><strong>型別安全</strong>：完整的 TypeScript 支援</li>
<li><strong>按需載入</strong>：只載入真正需要的功能</li>
<li><strong>依賴明確</strong>：清楚知道組件使用哪些服務</li>
</ul>
<h4 id="❌-缺點-1"><a href="#❌-缺點-1" class="headerlink" title="❌ 缺點"></a>❌ 缺點</h4><ul>
<li><strong>學習成本</strong>：需要理解服務模式的概念</li>
<li><strong>初期投入</strong>：需要設計服務介面和架構</li>
<li><strong>依賴注入</strong>：需要手動管理依賴關係</li>
</ul>
<h4 id="🎯-適用場景-1"><a href="#🎯-適用場景-1" class="headerlink" title="🎯 適用場景"></a>🎯 適用場景</h4><ul>
<li><strong>純業務邏輯</strong>：如資料處理、檔案匯出、API 呼叫</li>
<li><strong>需要測試</strong>：重要的業務功能需要完整測試</li>
<li><strong>跨平台使用</strong>：邏輯可能在不同環境中重複使用</li>
</ul>
<hr>
<h3 id="3-Composables-模式-Vue-3-Composition-API"><a href="#3-Composables-模式-Vue-3-Composition-API" class="headerlink" title="3. Composables 模式 (Vue 3 Composition API)"></a>3. Composables 模式 (Vue 3 Composition API)</h3><h4 id="💡-概念-2"><a href="#💡-概念-2" class="headerlink" title="💡 概念"></a>💡 概念</h4><p>使用 Vue 3 的 Composition API 建立可重複使用的響應式邏輯，專注於狀態管理和 Vue 特定功能。</p>
<h4 id="🔧-實作方式-2"><a href="#🔧-實作方式-2" class="headerlink" title="🔧 實作方式"></a>🔧 實作方式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useCounter.js</span></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>) <span class="comment">// 模組級別共享狀態</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">        count.<span class="property">value</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">        count.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        <span class="attr">count</span>: <span class="title function_">readonly</span>(count), </span><br><span class="line">        doubleCount, </span><br><span class="line">        increment, </span><br><span class="line">        reset </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useApi.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useApi</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">const</span> error = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">url</span>) &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">        error.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">            data.<span class="property">value</span> = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            error.<span class="property">value</span> = e.<span class="property">message</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            loading.<span class="property">value</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; data, loading, error, fetchData &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在組件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; useCounter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/composables/useCounter&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useApi &#125; <span class="keyword">from</span> <span class="string">&#x27;@/composables/useApi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; count, increment &#125; = <span class="title function_">useCounter</span>();</span><br><span class="line">        <span class="keyword">const</span> &#123; data, loading, fetchData &#125; = <span class="title function_">useApi</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123; count, increment, data, loading, fetchData &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="✅-優點-2"><a href="#✅-優點-2" class="headerlink" title="✅ 優點"></a>✅ 優點</h4><ul>
<li><strong>響應式狀態</strong>：自動追蹤狀態變化，無需手動更新</li>
<li><strong>生命週期整合</strong>：可以使用 Vue 的生命週期鉤子</li>
<li><strong>邏輯複用</strong>：在多個組件間共享相同邏輯</li>
<li><strong>型別推斷</strong>：優秀的 TypeScript 支援</li>
<li><strong>組合能力</strong>：可以輕鬆組合多個 Composables</li>
</ul>
<h4 id="❌-缺點-2"><a href="#❌-缺點-2" class="headerlink" title="❌ 缺點"></a>❌ 缺點</h4><ul>
<li><strong>學習曲線</strong>：需要理解 Composition API 概念</li>
<li><strong>Vue 限定</strong>：只能在 Vue 環境中使用</li>
<li><strong>測試複雜</strong>：需要 mock Vue 實例和響應式系統</li>
<li><strong>狀態管理</strong>：複雜狀態管理不如專門的 Store</li>
</ul>
<h4 id="🎯-適用場景-2"><a href="#🎯-適用場景-2" class="headerlink" title="🎯 適用場景"></a>🎯 適用場景</h4><ul>
<li><strong>響應式狀態管理</strong>：需要追蹤狀態變化的邏輯</li>
<li><strong>Vue 特定功能</strong>：使用 Vue 生命週期、響應式 API</li>
<li><strong>組件間邏輯共享</strong>：多個組件需要相同的響應式邏輯</li>
</ul>
<hr>
<h2 id="🛒-狀態管理比較：Store-vs-Composables"><a href="#🛒-狀態管理比較：Store-vs-Composables" class="headerlink" title="🛒 狀態管理比較：Store vs Composables"></a>🛒 狀態管理比較：Store vs Composables</h2><h3 id="Store-Pinia-Vuex-模式"><a href="#Store-Pinia-Vuex-模式" class="headerlink" title="Store (Pinia&#x2F;Vuex) 模式"></a>Store (Pinia&#x2F;Vuex) 模式</h3><h4 id="🔧-實作方式-3"><a href="#🔧-實作方式-3" class="headerlink" title="🔧 實作方式"></a>🔧 實作方式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/user.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> currentUser = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">ref</span>(<span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>));</span><br><span class="line">    <span class="keyword">const</span> permissions = <span class="title function_">ref</span>([]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">credentials</span>) &#123;</span><br><span class="line">        <span class="comment">// 登入邏輯</span></span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> api.<span class="title function_">login</span>(credentials);</span><br><span class="line">        currentUser.<span class="property">value</span> = response.<span class="property">user</span>;</span><br><span class="line">        token.<span class="property">value</span> = response.<span class="property">token</span>;</span><br><span class="line">        <span class="variable language_">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>, response.<span class="property">token</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">        currentUser.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        token.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        permissions.<span class="property">value</span> = [];</span><br><span class="line">        <span class="variable language_">sessionStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; currentUser, token, permissions, login, logout &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="特點"><a href="#特點" class="headerlink" title="特點"></a>特點</h4><ul>
<li><strong>全域狀態管理</strong>：應用程式級別的狀態</li>
<li><strong>DevTools 支援</strong>：完整的開發者工具整合</li>
<li><strong>持久化</strong>：易於整合狀態持久化</li>
<li><strong>結構化</strong>：強制統一的狀態管理結構</li>
</ul>
<h3 id="Composables-狀態共享"><a href="#Composables-狀態共享" class="headerlink" title="Composables 狀態共享"></a>Composables 狀態共享</h3><h4 id="🔧-實作方式-4"><a href="#🔧-實作方式-4" class="headerlink" title="🔧 實作方式"></a>🔧 實作方式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useGlobalNotifications.js</span></span><br><span class="line"><span class="keyword">const</span> notifications = <span class="title function_">ref</span>([]); <span class="comment">// 模組級別 = 全域共享</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useGlobalNotifications</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> unreadCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> </span><br><span class="line">        notifications.<span class="property">value</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">n</span> =&gt;</span> !n.<span class="property">read</span>).<span class="property">length</span></span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">addNotification</span>(<span class="params">message</span>) &#123;</span><br><span class="line">        notifications.<span class="property">value</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">            message,</span><br><span class="line">            <span class="attr">read</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">markAsRead</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> notification = notifications.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function"><span class="params">n</span> =&gt;</span> n.<span class="property">id</span> === id);</span><br><span class="line">        <span class="keyword">if</span> (notification) notification.<span class="property">read</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">notifications</span>: <span class="title function_">readonly</span>(notifications),</span><br><span class="line">        unreadCount,</span><br><span class="line">        addNotification,</span><br><span class="line">        markAsRead</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="特點-1"><a href="#特點-1" class="headerlink" title="特點"></a>特點</h4><ul>
<li><strong>靈活性高</strong>：可以選擇全域或區域共享</li>
<li><strong>輕量級</strong>：不需要額外的狀態管理函式庫</li>
<li><strong>組合能力</strong>：可以輕鬆組合多個狀態邏輯</li>
</ul>
<hr>
<h2 id="📊-選擇指南對照表"><a href="#📊-選擇指南對照表" class="headerlink" title="📊 選擇指南對照表"></a>📊 選擇指南對照表</h2><table>
<thead>
<tr>
<th>功能類型</th>
<th>全域屬性模式</th>
<th>服務模式</th>
<th>Composables 模式</th>
<th>Store 模式</th>
</tr>
</thead>
<tbody><tr>
<td><strong>純業務邏輯</strong></td>
<td>⭐⭐⭐</td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐</td>
<td>⭐⭐</td>
</tr>
<tr>
<td><strong>工具函式</strong></td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐⭐⭐</td>
<td>⭐⭐</td>
<td>⭐</td>
</tr>
<tr>
<td><strong>響應式狀態</strong></td>
<td>⭐⭐</td>
<td>⭐</td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr>
<td><strong>全域狀態</strong></td>
<td>⭐⭐⭐</td>
<td>⭐</td>
<td>⭐⭐⭐</td>
<td>⭐⭐⭐⭐⭐</td>
</tr>
<tr>
<td><strong>測試能力</strong></td>
<td>⭐⭐</td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐⭐</td>
<td>⭐⭐⭐⭐</td>
</tr>
<tr>
<td><strong>學習成本</strong></td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐⭐</td>
<td>⭐⭐</td>
<td>⭐⭐⭐</td>
</tr>
<tr>
<td><strong>開發速度</strong></td>
<td>⭐⭐⭐⭐⭐</td>
<td>⭐⭐⭐</td>
<td>⭐⭐⭐</td>
<td>⭐⭐⭐</td>
</tr>
</tbody></table>
<h2 id="🎯-實際應用案例：Excel-匯出功能"><a href="#🎯-實際應用案例：Excel-匯出功能" class="headerlink" title="🎯 實際應用案例：Excel 匯出功能"></a>🎯 實際應用案例：Excel 匯出功能</h2><h3 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h3><p>Excel 匯出功能具有以下特性：</p>
<ul>
<li><strong>純業務邏輯</strong>：不涉及響應式狀態</li>
<li><strong>工具性質</strong>：提供資料處理和檔案產生功能</li>
<li><strong>可重複使用</strong>：多個頁面都可能需要匯出功能</li>
</ul>
<h3 id="推薦方案：Service-模式"><a href="#推薦方案：Service-模式" class="headerlink" title="推薦方案：Service 模式"></a>推薦方案：Service 模式</h3><h4 id="理由"><a href="#理由" class="headerlink" title="理由"></a>理由</h4><ol>
<li><strong>純業務邏輯</strong>：Excel 處理不需要響應式狀態</li>
<li><strong>易於測試</strong>：可以獨立測試匯出邏輯</li>
<li><strong>跨平台重用</strong>：未來可能在其他專案中使用</li>
<li><strong>依賴明確</strong>：清楚知道需要哪些 XLSX 功能</li>
</ol>
<h4 id="實作策略"><a href="#實作策略" class="headerlink" title="實作策略"></a>實作策略</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// services/ExcelService.js - 純業務邏輯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExcelService</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">exportExcel</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// 核心匯出邏輯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// utils.js - 提供便捷介面</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">exportExcel</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">ExcelService</span>.<span class="title function_">exportExcel</span>(&#123;</span><br><span class="line">        ...options,</span><br><span class="line">        <span class="attr">formatUtils</span>: format  <span class="comment">// 注入專案特定依賴</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 組件中使用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">export_data_excel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = utils.<span class="title function_">exportExcel</span>(&#123;</span><br><span class="line">        <span class="attr">data</span>: tableData.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">headers</span>: columnHeaders,</span><br><span class="line">        <span class="attr">filename</span>: <span class="title function_">t</span>(<span class="string">&#x27;EXPORT_FILENAME&#x27;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="🔄-Vue-3-推出-Composables-的背景"><a href="#🔄-Vue-3-推出-Composables-的背景" class="headerlink" title="🔄 Vue 3 推出 Composables 的背景"></a>🔄 Vue 3 推出 Composables 的背景</h2><h3 id="解決的問題"><a href="#解決的問題" class="headerlink" title="解決的問題"></a>解決的問題</h3><h4 id="1-Vue-2-Mixins-的痛點"><a href="#1-Vue-2-Mixins-的痛點" class="headerlink" title="1. Vue 2 Mixins 的痛點"></a>1. Vue 2 Mixins 的痛點</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue 2 - 問題範例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">mixins</span>: [counterMixin, apiMixin], <span class="comment">// 命名衝突、來源不明</span></span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// 不知道 count 來自哪個 mixin</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue 3 - 解決方案</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; count &#125; = <span class="title function_">useCounter</span>();  <span class="comment">// 明確來源</span></span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = <span class="title function_">useApi</span>();       <span class="comment">// 無命名衝突</span></span><br><span class="line">        <span class="keyword">return</span> &#123; count, data &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-邏輯復用困難"><a href="#2-邏輯復用困難" class="headerlink" title="2. 邏輯復用困難"></a>2. 邏輯復用困難</h4><p>Vue 2 中跨組件共享邏輯很困難，Composables 提供了優雅的解決方案。</p>
<h4 id="3-TypeScript-支援不足"><a href="#3-TypeScript-支援不足" class="headerlink" title="3. TypeScript 支援不足"></a>3. TypeScript 支援不足</h4><p>Composables 提供完整的型別推斷和型別安全。</p>
<h3 id="設計哲學"><a href="#設計哲學" class="headerlink" title="設計哲學"></a>設計哲學</h3><p>Composables <strong>不是要取代 Service</strong>，而是補充 Vue 生態系統中<strong>狀態管理和邏輯復用</strong>的能力。</p>
<hr>
<h2 id="🏛️-架構演進建議"><a href="#🏛️-架構演進建議" class="headerlink" title="🏛️ 架構演進建議"></a>🏛️ 架構演進建議</h2><h3 id="對於-EOS-專案"><a href="#對於-EOS-專案" class="headerlink" title="對於 EOS 專案"></a>對於 EOS 專案</h3><ol>
<li><strong>保持現有架構</strong>：不進行大規模重構</li>
<li><strong>新功能使用 Service</strong>：如 Excel 匯出等純業務邏輯</li>
<li><strong>逐步優化</strong>：針對高使用率功能進行局部優化</li>
</ol>
<h3 id="對於新專案"><a href="#對於新專案" class="headerlink" title="對於新專案"></a>對於新專案</h3><ol>
<li><p><strong>混合使用策略</strong>：</p>
<ul>
<li><strong>工具函式</strong>：Service 模式</li>
<li><strong>響應式邏輯</strong>：Composables 模式</li>
<li><strong>全域狀態</strong>：Store 模式</li>
<li><strong>API 呼叫</strong>：Service + Composables 組合</li>
</ul>
</li>
<li><p><strong>分層架構</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Components (組件層)</span><br><span class="line">     ↓</span><br><span class="line">Composables (邏輯復用層)</span><br><span class="line">     ↓</span><br><span class="line">Services (業務邏輯層)</span><br><span class="line">     ↓</span><br><span class="line">Utils (工具函式層)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="📝-最佳實踐總結"><a href="#📝-最佳實踐總結" class="headerlink" title="📝 最佳實踐總結"></a>📝 最佳實踐總結</h2><h3 id="1-選擇原則"><a href="#1-選擇原則" class="headerlink" title="1. 選擇原則"></a>1. 選擇原則</h3><ul>
<li><strong>狀態性質</strong>：有狀態選 Composables&#x2F;Store，無狀態選 Service</li>
<li><strong>專案階段</strong>：新專案靈活選擇，既有專案漸進式改進</li>
<li><strong>團隊能力</strong>：考慮團隊對新技術的接受度和學習成本</li>
</ul>
<h3 id="2-混合使用策略"><a href="#2-混合使用策略" class="headerlink" title="2. 混合使用策略"></a>2. 混合使用策略</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 典型組件架構</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 全域狀態</span></span><br><span class="line">        <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 響應式邏輯</span></span><br><span class="line">        <span class="keyword">const</span> &#123; filters, updateFilter &#125; = <span class="title function_">useTableFilters</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 業務服務</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; <span class="title class_">ExcelService</span>.<span class="title function_">exportExcel</span>(&#123;...&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 工具函式</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">formatDate</span> = (<span class="params">date</span>) =&gt; utils.<span class="title function_">format</span>(date, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">user</span>: userStore.<span class="property">currentUser</span>,</span><br><span class="line">            filters,</span><br><span class="line">            updateFilter,</span><br><span class="line">            exportData,</span><br><span class="line">            formatDate</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-重構策略"><a href="#3-重構策略" class="headerlink" title="3. 重構策略"></a>3. 重構策略</h3><ul>
<li><strong>階段式遷移</strong>：優先重構高使用率、高維護成本的功能</li>
<li><strong>向後相容</strong>：保持既有 API 不變，內部實作漸進式改進</li>
<li><strong>測試驅動</strong>：重要功能先寫測試，再進行重構</li>
</ul>
<hr>
<h2 id="🔗-參考資源"><a href="#🔗-參考資源" class="headerlink" title="🔗 參考資源"></a>🔗 參考資源</h2><ul>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/api/composition-api-setup.html">Vue 3 Composition API 官方文件</a></li>
<li><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia 狀態管理</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/typescript/overview.html">TypeScript 與 Vue 3</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/reusability/composables.html">Vue 3 設計模式最佳實踐</a></li>
</ul>
<h2 id="💡-實戰決策流程圖"><a href="#💡-實戰決策流程圖" class="headerlink" title="💡 實戰決策流程圖"></a>💡 實戰決策流程圖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[新功能需求] --&gt; B&#123;是否需要狀態管理?&#125;</span><br><span class="line">    B --&gt;|是| C&#123;全域還是局部狀態?&#125;</span><br><span class="line">    B --&gt;|否| D&#123;是否為純業務邏輯?&#125;</span><br><span class="line">    </span><br><span class="line">    C --&gt;|全域| E[Store 模式]</span><br><span class="line">    C --&gt;|局部| F[Composables 模式]</span><br><span class="line">    </span><br><span class="line">    D --&gt;|是| G[Service 模式]</span><br><span class="line">    D --&gt;|否| H&#123;是否為工具函式?&#125;</span><br><span class="line">    </span><br><span class="line">    H --&gt;|是| I&#123;專案規模?&#125;</span><br><span class="line">    H --&gt;|否| J[考慮重新分析需求]</span><br><span class="line">    </span><br><span class="line">    I --&gt;|大型/新專案| G</span><br><span class="line">    I --&gt;|小型/EOS專案| K[全域屬性模式]</span><br><span class="line">    </span><br><span class="line">    E --&gt; L[實作方案]</span><br><span class="line">    F --&gt; L</span><br><span class="line">    G --&gt; L</span><br><span class="line">    K --&gt; L</span><br></pre></td></tr></table></figure>

<h2 id="🎯-核心洞察總結"><a href="#🎯-核心洞察總結" class="headerlink" title="🎯 核心洞察總結"></a>🎯 核心洞察總結</h2><h3 id="1-架構選擇的關鍵因素"><a href="#1-架構選擇的關鍵因素" class="headerlink" title="1. 架構選擇的關鍵因素"></a>1. <strong>架構選擇的關鍵因素</strong></h3><ul>
<li><strong>專案生命週期</strong>：新專案靈活選擇，既有專案考慮維護成本</li>
<li><strong>團隊技能</strong>：考慮團隊對新技術的接受度和學習曲線</li>
<li><strong>功能特性</strong>：依據狀態性質、業務複雜度選擇合適模式</li>
</ul>
<h3 id="2-混合策略的威力"><a href="#2-混合策略的威力" class="headerlink" title="2. 混合策略的威力"></a>2. <strong>混合策略的威力</strong></h3><p>不同架構模式各有優勢，智慧的組合使用能發揮最大效益：</p>
<ul>
<li><strong>工具函式</strong>：Service 模式提供最佳的測試性和重用性</li>
<li><strong>響應式邏輯</strong>：Composables 模式發揮 Vue 3 的優勢</li>
<li><strong>全域狀態</strong>：Store 模式提供結構化的狀態管理</li>
<li><strong>既有系統</strong>：全域屬性模式確保穩定性</li>
</ul>
<h3 id="3-效能與開發體驗的平衡"><a href="#3-效能與開發體驗的平衡" class="headerlink" title="3. 效能與開發體驗的平衡"></a>3. <strong>效能與開發體驗的平衡</strong></h3><ul>
<li><strong>開發速度 vs 長期維護</strong>：短期開發效率與長期維護成本的權衡</li>
<li><strong>Bundle 大小 vs 開發便利性</strong>：按需載入與全域注入的取捨</li>
<li><strong>型別安全 vs 學習成本</strong>：TypeScript 支援與團隊學習投入</li>
</ul>
<h2 id="📞-技術支援與參考資源"><a href="#📞-技術支援與參考資源" class="headerlink" title="📞 技術支援與參考資源"></a>📞 技術支援與參考資源</h2><h3 id="官方文件"><a href="#官方文件" class="headerlink" title="官方文件"></a>官方文件</h3><ul>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/api/composition-api-setup.html">Vue 3 Composition API 官方文件</a></li>
<li><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia 狀態管理</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/typescript/overview.html">TypeScript 與 Vue 3</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/reusability/composables.html">Vue 3 設計模式最佳實踐</a></li>
</ul>
<h3 id="實踐案例"><a href="#實踐案例" class="headerlink" title="實踐案例"></a>實踐案例</h3><ul>
<li>Vue.js 官方範例專案</li>
<li>Composition API RFC 討論</li>
<li>Vue 3 遷移指南</li>
</ul>
<h3 id="相關工具"><a href="#相關工具" class="headerlink" title="相關工具"></a>相關工具</h3><ul>
<li>Vue DevTools 3.0+</li>
<li>TypeScript</li>
<li>ESLint Vue Plugin</li>
<li>Vite 建構工具</li>
</ul>
<blockquote>
<p><strong>作者</strong>：前端架構團隊<br><strong>更新日期</strong>：2025年6月29日<br><strong>版本</strong>：v1.1<br><strong>適用範圍</strong>：Vue 3 + Composition API 專案</p>
</blockquote>
<hr>
<p><em>本文件為前端架構決策提供系統性的分析和建議，幫助團隊選擇最適合的技術方案。</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/vue-frontend-architecture-patterns-guide/" data-id="cmcj9gyyo000469mz0bcsfwfj" data-title="Vue.js 前端架構模式比較與選擇指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Best-Practices/" rel="tag">Best Practices</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Composables/" rel="tag">Composables</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Composition-API/" rel="tag">Composition API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Frontend-Architecture/" rel="tag">Frontend Architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Global-Properties/" rel="tag">Global Properties</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Pinia/" rel="tag">Pinia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Service-Pattern/" rel="tag">Service Pattern</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/State-Management/" rel="tag">State Management</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mapbox-data-visualization-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/mapbox-data-visualization-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T02:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/mapbox-data-visualization-guide/">Mapbox 地圖資料視覺化技術分析與應用指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="📋-核心懶人包"><a href="#📋-核心懶人包" class="headerlink" title="📋 核心懶人包"></a>📋 核心懶人包</h2><ol>
<li><strong>智能圖層控制</strong>：選擇性隱藏地圖元素，建立專注的視覺環境</li>
<li><strong>Canvas 圖案生成</strong>：動態產生填充圖案，不依賴外部資源</li>
<li><strong>GeoJSON 資料整合</strong>：載入世界陸地邊界，展示地理資料應用</li>
<li><strong>叢集視覺化</strong>：將大量點資料智能分組，提升視覺清晰度</li>
<li><strong>互動體驗設計</strong>：整合地理編碼 API，提供豐富的使用者體驗</li>
</ol>
<h2 id="🗺️-專案概述"><a href="#🗺️-專案概述" class="headerlink" title="🗺️ 專案概述"></a>🗺️ 專案概述</h2><p>本專案展示了 Mapbox GL JS 在地理資料視覺化方面的強大功能：</p>
<ul>
<li>🎯 <strong>圖層控制技術</strong>：精確管理地圖顯示內容</li>
<li>🎨 <strong>自訂視覺圖案</strong>：使用 Canvas API 動態生成填充圖案</li>
<li>📊 <strong>資料叢集化</strong>：將大量點資料進行智能分組顯示</li>
<li>🌍 <strong>地理資料整合</strong>：載入並展示世界陸地邊界資料</li>
<li>⚡ <strong>互動體驗</strong>：豐富的點擊、懸停與縮放功能</li>
</ul>
<h2 id="🏗️-核心技術架構"><a href="#🏗️-核心技術架構" class="headerlink" title="🏗️ 核心技術架構"></a>🏗️ 核心技術架構</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Mapbox GL JS 地圖] --&gt; B[圖層控制]</span><br><span class="line">    A --&gt; C[Canvas 圖案生成]</span><br><span class="line">    A --&gt; D[GeoJSON 資料載入]</span><br><span class="line">    A --&gt; E[叢集處理]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[隱藏內建圖層]</span><br><span class="line">    C --&gt; C1[動態點狀圖案]</span><br><span class="line">    D --&gt; D1[世界陸地邊界]</span><br><span class="line">    D --&gt; D2[容錯處理機制]</span><br><span class="line">    E --&gt; E1[地震資料叢集]</span><br><span class="line">    E --&gt; E2[視覺化呈現]</span><br></pre></td></tr></table></figure>

<h2 id="🎛️-地圖圖層控制技術"><a href="#🎛️-地圖圖層控制技術" class="headerlink" title="🎛️ 地圖圖層控制技術"></a>🎛️ 地圖圖層控制技術</h2><h3 id="技術原理"><a href="#技術原理" class="headerlink" title="技術原理"></a>技術原理</h3><p>Mapbox 底圖包含許多預設圖層，在特定應用場景中可能造成視覺干擾。通過圖層控制技術，我們可以建立更專注的視覺環境。</p>
<h3 id="實作方式"><a href="#實作方式" class="headerlink" title="實作方式"></a>實作方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定義需要隱藏的圖層清單</span></span><br><span class="line"><span class="keyword">const</span> layersToHide = [</span><br><span class="line">  <span class="string">&#x27;country-label&#x27;</span>,      <span class="comment">// 國家標籤</span></span><br><span class="line">  <span class="string">&#x27;state-label&#x27;</span>,        <span class="comment">// 州/省標籤</span></span><br><span class="line">  <span class="string">&#x27;settlement-label&#x27;</span>,   <span class="comment">// 城市標籤</span></span><br><span class="line">  <span class="string">&#x27;road-primary&#x27;</span>,       <span class="comment">// 主要道路</span></span><br><span class="line">  <span class="string">&#x27;building&#x27;</span>,           <span class="comment">// 建築物</span></span><br><span class="line">  <span class="string">&#x27;water&#x27;</span>,              <span class="comment">// 水體</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 批次隱藏圖層</span></span><br><span class="line">layersToHide.<span class="title function_">forEach</span>(<span class="function"><span class="params">layerId</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (map.<span class="title function_">getLayer</span>(layerId)) &#123;</span><br><span class="line">    map.<span class="title function_">setLayoutProperty</span>(layerId, <span class="string">&#x27;visibility&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="技術優勢"><a href="#技術優勢" class="headerlink" title="技術優勢"></a>技術優勢</h3><ul>
<li>✅ <strong>效能優化</strong>：減少不必要的渲染負擔</li>
<li>✅ <strong>視覺聚焦</strong>：突出重要的資料內容</li>
<li>✅ <strong>彈性控制</strong>：可根據需求動態調整顯示內容</li>
</ul>
<h2 id="🎨-Canvas-動態圖案生成"><a href="#🎨-Canvas-動態圖案生成" class="headerlink" title="🎨 Canvas 動態圖案生成"></a>🎨 Canvas 動態圖案生成</h2><h3 id="為什麼使用-Canvas？"><a href="#為什麼使用-Canvas？" class="headerlink" title="為什麼使用 Canvas？"></a>為什麼使用 Canvas？</h3><p>傳統填充圖案需要外部圖片檔案，而 Canvas 技術讓我們能夠：</p>
<ol>
<li><strong>即時生成</strong>：不依賴外部資源</li>
<li><strong>完全客製化</strong>：精確控制每個像素</li>
<li><strong>動態變化</strong>：可以加入隨機元素增加視覺豐富性</li>
</ol>
<h3 id="核心實作"><a href="#核心實作" class="headerlink" title="核心實作"></a>核心實作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立 Canvas 畫布</span></span><br><span class="line"><span class="keyword">const</span> size = <span class="number">64</span>;</span><br><span class="line"><span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">canvas.<span class="property">width</span> = size;</span><br><span class="line">canvas.<span class="property">height</span> = size;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 設定點狀圖案參數</span></span><br><span class="line"><span class="keyword">const</span> dotSize = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> spacing = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用巢狀迴圈繪製點陣圖案</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x = <span class="number">2</span>; x &lt; size - <span class="number">2</span>; x += spacing) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> y = <span class="number">2</span>; y &lt; size - <span class="number">2</span>; y += spacing) &#123;</span><br><span class="line">    <span class="comment">// 隨機化視覺效果</span></span><br><span class="line">    <span class="keyword">const</span> randomSize = dotSize + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1.5</span>;</span><br><span class="line">    <span class="keyword">const</span> grayValue = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">80</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">const</span> alpha = <span class="number">0.4</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.4</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 繪製單個點</span></span><br><span class="line">    ctx.<span class="property">fillStyle</span> = <span class="string">`rgba(<span class="subst">$&#123;grayValue&#125;</span>, <span class="subst">$&#123;grayValue&#125;</span>, <span class="subst">$&#123;grayValue&#125;</span>, <span class="subst">$&#123;alpha&#125;</span>)`</span>;</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">arc</span>(x, y, randomSize/<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">    ctx.<span class="title function_">fill</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 將 Canvas 內容註冊為地圖圖案</span></span><br><span class="line"><span class="keyword">const</span> imageData = ctx.<span class="title function_">getImageData</span>(<span class="number">0</span>, <span class="number">0</span>, size, size);</span><br><span class="line">map.<span class="title function_">addImage</span>(<span class="string">&#x27;custom-dots-pattern&#x27;</span>, imageData);</span><br></pre></td></tr></table></figure>

<h2 id="🌍-GeoJSON-資料載入與應用"><a href="#🌍-GeoJSON-資料載入與應用" class="headerlink" title="🌍 GeoJSON 資料載入與應用"></a>🌍 GeoJSON 資料載入與應用</h2><h3 id="什麼是-GeoJSON？"><a href="#什麼是-GeoJSON？" class="headerlink" title="什麼是 GeoJSON？"></a>什麼是 GeoJSON？</h3><p>GeoJSON 是一種基於 JSON 的地理資料交換格式，支援點、線、多邊形等地理要素。</p>
<h3 id="完整實作流程"><a href="#完整實作流程" class="headerlink" title="完整實作流程"></a>完整實作流程</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 步驟 1: 從遠端載入 GeoJSON 資料</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 步驟 2: 將資料註冊為地圖資料來源</span></span><br><span class="line">    map.<span class="title function_">addSource</span>(<span class="string">&#x27;world-land&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 步驟 3: 建立視覺圖層並套用自訂圖案</span></span><br><span class="line">    map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;land-dots&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">      <span class="attr">source</span>: <span class="string">&#x27;world-land&#x27;</span>,</span><br><span class="line">      <span class="attr">paint</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;fill-pattern&#x27;</span>: <span class="string">&#x27;custom-dots-pattern&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fill-opacity&#x27;</span>: <span class="number">0.4</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 步驟 4: 容錯處理 - 建立備用的簡化陸地區域</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;無法載入陸地資料，使用替代方案&#x27;</span>);</span><br><span class="line">    <span class="comment">// 手動定義簡化區域...</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="📊-叢集資料視覺化技術"><a href="#📊-叢集資料視覺化技術" class="headerlink" title="📊 叢集資料視覺化技術"></a>📊 叢集資料視覺化技術</h2><h3 id="什麼是資料叢集？"><a href="#什麼是資料叢集？" class="headerlink" title="什麼是資料叢集？"></a>什麼是資料叢集？</h3><p>當地圖上有大量密集的點資料時，叢集技術能夠：</p>
<ul>
<li>將鄰近的點合併顯示</li>
<li>根據縮放層級動態調整叢集</li>
<li>提供清晰的數量資訊</li>
</ul>
<h3 id="完整叢集實作範例"><a href="#完整叢集實作範例" class="headerlink" title="完整叢集實作範例"></a>完整叢集實作範例</h3><p>基於 <a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/example/cluster/">Mapbox 官方範例</a>，以下是完整的叢集實作程式碼：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 設定 Mapbox 存取權杖</span></span><br><span class="line">mapboxgl.<span class="property">accessToken</span> = <span class="string">&#x27;YOUR_MAPBOX_ACCESS_TOKEN&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化地圖</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> mapboxgl.<span class="title class_">Map</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">  <span class="attr">style</span>: <span class="string">&#x27;mapbox://styles/mapbox/standard&#x27;</span>,</span><br><span class="line">  <span class="attr">config</span>: &#123;</span><br><span class="line">    <span class="attr">basemap</span>: &#123;</span><br><span class="line">      <span class="attr">theme</span>: <span class="string">&#x27;monochrome&#x27;</span>,</span><br><span class="line">      <span class="attr">lightPreset</span>: <span class="string">&#x27;night&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">center</span>: [-<span class="number">103.5917</span>, <span class="number">40.6699</span>],</span><br><span class="line">  <span class="attr">zoom</span>: <span class="number">3</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 新增地震資料來源並啟用叢集功能</span></span><br><span class="line">  map.<span class="title function_">addSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span><br><span class="line">    <span class="comment">// 使用 USGS 地震資料 (2015/12/22 - 2016/1/21)</span></span><br><span class="line">    <span class="attr">data</span>: <span class="string">&#x27;https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson&#x27;</span>,</span><br><span class="line">    <span class="attr">cluster</span>: <span class="literal">true</span>,           <span class="comment">// 啟用叢集</span></span><br><span class="line">    <span class="attr">clusterMaxZoom</span>: <span class="number">14</span>,      <span class="comment">// 叢集的最大縮放層級</span></span><br><span class="line">    <span class="attr">clusterRadius</span>: <span class="number">50</span>        <span class="comment">// 叢集半徑（像素）</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 叢集圓圈圖層</span></span><br><span class="line">  map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;clusters&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],  <span class="comment">// 只顯示叢集點</span></span><br><span class="line">    <span class="attr">paint</span>: &#123;</span><br><span class="line">      <span class="comment">// 使用 step 表達式根據點數量決定顏色</span></span><br><span class="line">      <span class="string">&#x27;circle-color&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;step&#x27;</span>,</span><br><span class="line">        [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;#51bbd6&#x27;</span>,    <span class="comment">// &lt; 100 個點：藍色</span></span><br><span class="line">        <span class="number">100</span>,</span><br><span class="line">        <span class="string">&#x27;#f1f075&#x27;</span>,    <span class="comment">// 100-750 個點：黃色  </span></span><br><span class="line">        <span class="number">750</span>,</span><br><span class="line">        <span class="string">&#x27;#f28cb1&#x27;</span>     <span class="comment">// &gt;= 750 個點：粉色</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// 根據點數量決定圓圈大小</span></span><br><span class="line">      <span class="string">&#x27;circle-radius&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;step&#x27;</span>,</span><br><span class="line">        [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span><br><span class="line">        <span class="number">20</span>,           <span class="comment">// &lt; 100 個點：半徑 20px</span></span><br><span class="line">        <span class="number">100</span>,</span><br><span class="line">        <span class="number">30</span>,           <span class="comment">// 100-750 個點：半徑 30px</span></span><br><span class="line">        <span class="number">750</span>,</span><br><span class="line">        <span class="number">40</span>            <span class="comment">// &gt;= 750 個點：半徑 40px</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span>  <span class="comment">// 發光效果</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 叢集數字標籤圖層</span></span><br><span class="line">  map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;cluster-count&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;symbol&#x27;</span>,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span><br><span class="line">    <span class="attr">layout</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;text-field&#x27;</span>: [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count_abbreviated&#x27;</span>],  <span class="comment">// 顯示縮寫數字</span></span><br><span class="line">      <span class="string">&#x27;text-font&#x27;</span>: [<span class="string">&#x27;DIN Offc Pro Medium&#x27;</span>, <span class="string">&#x27;Arial Unicode MS Bold&#x27;</span>],</span><br><span class="line">      <span class="string">&#x27;text-size&#x27;</span>: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. 個別點（未叢集）圖層</span></span><br><span class="line">  map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;unclustered-point&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: [<span class="string">&#x27;!&#x27;</span>, [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>]],  <span class="comment">// 只顯示非叢集點</span></span><br><span class="line">    <span class="attr">paint</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;circle-color&#x27;</span>: <span class="string">&#x27;#11b4da&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;circle-radius&#x27;</span>: <span class="number">4</span>,</span><br><span class="line">      <span class="string">&#x27;circle-stroke-width&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&#x27;circle-stroke-color&#x27;</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5. 叢集點擊事件 - 自動縮放展開</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> features = map.<span class="title function_">queryRenderedFeatures</span>(e.<span class="property">point</span>, &#123;</span><br><span class="line">      <span class="attr">layers</span>: [<span class="string">&#x27;clusters&#x27;</span>]</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> clusterId = features[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">cluster_id</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 取得適當的縮放層級</span></span><br><span class="line">    map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">getClusterExpansionZoom</span>(</span><br><span class="line">      clusterId,</span><br><span class="line">      <span class="function">(<span class="params">err, zoom</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 平滑縮放到叢集位置</span></span><br><span class="line">        map.<span class="title function_">easeTo</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: features[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>,</span><br><span class="line">          <span class="attr">zoom</span>: zoom</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 6. 個別點點擊事件 - 顯示詳細資訊</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;unclustered-point&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> coordinates = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>.<span class="title function_">slice</span>();</span><br><span class="line">    <span class="keyword">const</span> mag = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">mag</span>;</span><br><span class="line">    <span class="keyword">const</span> tsunami = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">tsunami</span> === <span class="number">1</span> ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 處理地圖投影邊界問題</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="string">&#x27;mercator&#x27;</span>, <span class="string">&#x27;equirectangular&#x27;</span>].<span class="title function_">includes</span>(map.<span class="title function_">getProjection</span>().<span class="property">name</span>)) &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(e.<span class="property">lngLat</span>.<span class="property">lng</span> - coordinates[<span class="number">0</span>]) &gt; <span class="number">180</span>) &#123;</span><br><span class="line">        coordinates[<span class="number">0</span>] += e.<span class="property">lngLat</span>.<span class="property">lng</span> &gt; coordinates[<span class="number">0</span>] ? <span class="number">360</span> : -<span class="number">360</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 顯示彈出視窗</span></span><br><span class="line">    <span class="keyword">new</span> mapboxgl.<span class="title class_">Popup</span>()</span><br><span class="line">      .<span class="title function_">setLngLat</span>(coordinates)</span><br><span class="line">      .<span class="title function_">setHTML</span>(</span><br><span class="line">        <span class="string">`magnitude: <span class="subst">$&#123;mag&#125;</span>&lt;br&gt;Was there a tsunami?: <span class="subst">$&#123;tsunami&#125;</span>`</span></span><br><span class="line">      )</span><br><span class="line">      .<span class="title function_">addTo</span>(map);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 7. 滑鼠游標效果</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;pointer&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="技術架構分析"><a href="#技術架構分析" class="headerlink" title="技術架構分析"></a>技術架構分析</h3><table>
<thead>
<tr>
<th>圖層</th>
<th>用途</th>
<th>關鍵屬性</th>
</tr>
</thead>
<tbody><tr>
<td><code>clusters</code></td>
<td>叢集圓圈</td>
<td><code>filter: [&#39;has&#39;, &#39;point_count&#39;]</code></td>
</tr>
<tr>
<td><code>cluster-count</code></td>
<td>叢集數字</td>
<td><code>text-field: point_count_abbreviated</code></td>
</tr>
<tr>
<td><code>unclustered-point</code></td>
<td>個別點</td>
<td><code>filter: [&#39;!&#39;, [&#39;has&#39;, &#39;point_count&#39;]]</code></td>
</tr>
</tbody></table>
<h2 id="⚡-互動體驗設計"><a href="#⚡-互動體驗設計" class="headerlink" title="⚡ 互動體驗設計"></a>⚡ 互動體驗設計</h2><h3 id="地理編碼整合"><a href="#地理編碼整合" class="headerlink" title="地理編碼整合"></a>地理編碼整合</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 點擊個別點時顯示地址資訊</span></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;unclustered-point&#x27;</span>, <span class="title function_">async</span> (e) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [lng, lat] = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 呼叫 Mapbox Geocoding API 進行反向地理編碼</span></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(</span><br><span class="line">    <span class="string">`https://api.mapbox.com/geocoding/v5/mapbox.places/<span class="subst">$&#123;lng&#125;</span>,<span class="subst">$&#123;lat&#125;</span>.json?access_token=<span class="subst">$&#123;mapboxgl.accessToken&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  <span class="keyword">const</span> placeName = data.<span class="property">features</span>[<span class="number">0</span>]?.<span class="property">place_name</span> || <span class="string">&#x27;地址查無&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 顯示彈出視窗</span></span><br><span class="line">  <span class="keyword">new</span> mapboxgl.<span class="title class_">Popup</span>()</span><br><span class="line">    .<span class="title function_">setLngLat</span>([lng, lat])</span><br><span class="line">    .<span class="title function_">setHTML</span>(<span class="string">`&lt;strong&gt;<span class="subst">$&#123;placeName&#125;</span>&lt;/strong&gt;`</span>)</span><br><span class="line">    .<span class="title function_">addTo</span>(map);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="叢集互動功能"><a href="#叢集互動功能" class="headerlink" title="叢集互動功能"></a>叢集互動功能</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 點擊叢集時自動縮放</span></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> features = map.<span class="title function_">queryRenderedFeatures</span>(e.<span class="property">point</span>, &#123;</span><br><span class="line">    <span class="attr">layers</span>: [<span class="string">&#x27;clusters&#x27;</span>]</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> clusterId = features[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">cluster_id</span>;</span><br><span class="line">  </span><br><span class="line">  map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">getClusterExpansionZoom</span>(</span><br><span class="line">    clusterId,</span><br><span class="line">    <span class="function">(<span class="params">err, zoom</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 平滑縮放到目標位置</span></span><br><span class="line">      map.<span class="title function_">easeTo</span>(&#123;</span><br><span class="line">        <span class="attr">center</span>: features[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>,</span><br><span class="line">        <span class="attr">zoom</span>: zoom</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="🎯-實用技巧總結"><a href="#🎯-實用技巧總結" class="headerlink" title="🎯 實用技巧總結"></a>🎯 實用技巧總結</h2><h3 id="1-分層渲染策略"><a href="#1-分層渲染策略" class="headerlink" title="1. 分層渲染策略"></a>1. 分層渲染策略</h3><p>正確的圖層順序（由下到上）：</p>
<ol>
<li>底層填充圖案</li>
<li>叢集圓圈</li>
<li>光暈效果</li>
<li>核心點</li>
<li>文字標籤（最上層）</li>
</ol>
<h3 id="2-效能最佳化"><a href="#2-效能最佳化" class="headerlink" title="2. 效能最佳化"></a>2. 效能最佳化</h3><ul>
<li><strong>圖層最小化</strong>：只顯示必要的圖層</li>
<li><strong>適當的叢集設定</strong>：平衡視覺效果與效能</li>
<li><strong>事件處理最佳化</strong>：避免過度頻繁的 API 呼叫</li>
</ul>
<h3 id="3-錯誤處理模式"><a href="#3-錯誤處理模式" class="headerlink" title="3. 錯誤處理模式"></a>3. 錯誤處理模式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 優雅的降級處理</span></span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;主要資料載入失敗，使用備用方案&#x27;</span>);</span><br><span class="line">  <span class="comment">// 提供簡化但可用的替代方案</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="🚀-進階應用方向"><a href="#🚀-進階應用方向" class="headerlink" title="🚀 進階應用方向"></a>🚀 進階應用方向</h2><h3 id="台灣地圖整合"><a href="#台灣地圖整合" class="headerlink" title="台灣地圖整合"></a>台灣地圖整合</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 載入台灣 GeoJSON 資料</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;./taiwan.geojson&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    map.<span class="title function_">addSource</span>(<span class="string">&#x27;taiwan&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 套用台灣特色的視覺樣式</span></span><br><span class="line">    map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;taiwan-regions&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">      <span class="attr">source</span>: <span class="string">&#x27;taiwan&#x27;</span>,</span><br><span class="line">      <span class="attr">paint</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;fill-color&#x27;</span>: <span class="string">&#x27;#ff6b6b&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fill-opacity&#x27;</span>: <span class="number">0.3</span>,</span><br><span class="line">        <span class="string">&#x27;fill-outline-color&#x27;</span>: <span class="string">&#x27;#ee5a52&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="時間軸動畫"><a href="#時間軸動畫" class="headerlink" title="時間軸動畫"></a>時間軸動畫</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加時間維度的資料視覺化</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animateData</span>(<span class="params">timeRange</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> filteredData = originalData.<span class="property">features</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">feature</span> =&gt;</span> </span><br><span class="line">    feature.<span class="property">properties</span>.<span class="property">timestamp</span> &gt;= timeRange.<span class="property">start</span> &amp;&amp;</span><br><span class="line">    feature.<span class="property">properties</span>.<span class="property">timestamp</span> &lt;= timeRange.<span class="property">end</span></span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;FeatureCollection&#x27;</span>,</span><br><span class="line">    <span class="attr">features</span>: filteredData</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="💡-技術延伸應用"><a href="#💡-技術延伸應用" class="headerlink" title="💡 技術延伸應用"></a>💡 技術延伸應用</h2><p>這些技術可以應用到：</p>
<ul>
<li><strong>商業智能</strong>：銷售數據的地理分佈分析</li>
<li><strong>物聯網</strong>：感測器資料的即時地圖展示</li>
<li><strong>社會媒體</strong>：用戶簽到數據的視覺化</li>
<li><strong>災害管理</strong>：緊急事件的地理資訊系統</li>
</ul>
<h2 id="🎓-學習建議"><a href="#🎓-學習建議" class="headerlink" title="🎓 學習建議"></a>🎓 學習建議</h2><ol>
<li><strong>深入研究 Mapbox GL JS 官方文件</strong></li>
<li><strong>實驗不同的資料來源和格式</strong></li>
<li><strong>嘗試整合其他 Web API</strong></li>
<li><strong>優化效能和使用者體驗</strong></li>
</ol>
<h2 id="📄-完整-HTML-範例"><a href="#📄-完整-HTML-範例" class="headerlink" title="📄 完整 HTML 範例"></a>📄 完整 HTML 範例</h2><p>以下是可以直接執行的完整 HTML 檔案：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Create and style clusters<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#map</span> &#123; <span class="attribute">position</span>: absolute; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">width</span>: <span class="number">100%</span>; &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// TO MAKE THE MAP APPEAR YOU MUST</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ADD YOUR ACCESS TOKEN FROM</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// https://account.mapbox.com</span></span></span><br><span class="line"><span class="language-javascript">    mapboxgl.<span class="property">accessToken</span> = <span class="string">&#x27;YOUR_MAPBOX_ACCESS_TOKEN&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> map = <span class="keyword">new</span> mapboxgl.<span class="title class_">Map</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">container</span>: <span class="string">&#x27;map&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// Choose from Mapbox&#x27;s core styles, or make your own style with Mapbox Studio</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">style</span>: <span class="string">&#x27;mapbox://styles/mapbox/standard&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">config</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">basemap</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">theme</span>: <span class="string">&#x27;monochrome&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">lightPreset</span>: <span class="string">&#x27;night&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">center</span>: [-<span class="number">103.5917</span>, <span class="number">40.6699</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">zoom</span>: <span class="number">3</span></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    map.<span class="title function_">on</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// Add a new source from our GeoJSON data and</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// set the &#x27;cluster&#x27; option to true. GL-JS will</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// add the point_count property to your source data.</span></span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Point to GeoJSON data. This example visualizes all M1.0+ earthquakes</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// from 12/22/15 to 1/21/16 as logged by USGS&#x27; Earthquake hazards program.</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: <span class="string">&#x27;https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">cluster</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">clusterMaxZoom</span>: <span class="number">14</span>, <span class="comment">// Max zoom to cluster points on</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">clusterRadius</span>: <span class="number">50</span> <span class="comment">// Radius of each cluster when clustering points (defaults to 50)</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;clusters&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">paint</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// Use step expressions (https://docs.mapbox.com/style-spec/reference/expressions/#step)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// with three steps to implement three types of circles:</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   * Blue, 20px circles when point count is less than 100</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   * Yellow, 30px circles when point count is between 100 and 750</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   * Pink, 40px circles when point count is greater than or equal to 750</span></span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-color&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;step&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;#51bbd6&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;#f1f075&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">750</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;#f28cb1&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-radius&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;step&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">750</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">40</span></span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;cluster-count&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;symbol&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">layout</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;text-field&#x27;</span>: [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count_abbreviated&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;text-font&#x27;</span>: [<span class="string">&#x27;DIN Offc Pro Medium&#x27;</span>, <span class="string">&#x27;Arial Unicode MS Bold&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;text-size&#x27;</span>: <span class="number">12</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;unclustered-point&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">filter</span>: [<span class="string">&#x27;!&#x27;</span>, [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>]],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">paint</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-color&#x27;</span>: <span class="string">&#x27;#11b4da&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-radius&#x27;</span>: <span class="number">4</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-stroke-width&#x27;</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-stroke-color&#x27;</span>: <span class="string">&#x27;#fff&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// inspect a cluster on click</span></span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> features = map.<span class="title function_">queryRenderedFeatures</span>(e.<span class="property">point</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">layers</span>: [<span class="string">&#x27;clusters&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> clusterId = features[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">cluster_id</span>;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">getClusterExpansionZoom</span>(</span></span><br><span class="line"><span class="language-javascript">          clusterId,</span></span><br><span class="line"><span class="language-javascript">          <span class="function">(<span class="params">err, zoom</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            map.<span class="title function_">easeTo</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">center</span>: features[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">zoom</span>: zoom</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        );</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// When a click event occurs on a feature in</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// the unclustered-point layer, open a popup at</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// the location of the feature, with</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// description HTML from its properties.</span></span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;unclustered-point&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> coordinates = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>.<span class="title function_">slice</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> mag = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">mag</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> tsunami = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">tsunami</span> === <span class="number">1</span> ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Ensure that if the map is zoomed out such that</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// multiple copies of the feature are visible, the</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// popup appears over the copy being pointed to.</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> ([<span class="string">&#x27;mercator&#x27;</span>, <span class="string">&#x27;equirectangular&#x27;</span>].<span class="title function_">includes</span>(map.<span class="title function_">getProjection</span>().<span class="property">name</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">while</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(e.<span class="property">lngLat</span>.<span class="property">lng</span> - coordinates[<span class="number">0</span>]) &gt; <span class="number">180</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            coordinates[<span class="number">0</span>] += e.<span class="property">lngLat</span>.<span class="property">lng</span> &gt; coordinates[<span class="number">0</span>] ? <span class="number">360</span> : -<span class="number">360</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> mapboxgl.<span class="title class_">Popup</span>()</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">setLngLat</span>(coordinates)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">setHTML</span>(</span></span><br><span class="line"><span class="language-javascript">            <span class="string">`magnitude: <span class="subst">$&#123;mag&#125;</span>&lt;br&gt;Was there a tsunami?: <span class="subst">$&#123;tsunami&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">          )</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">addTo</span>(map);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;pointer&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="🚀-快速開始步驟"><a href="#🚀-快速開始步驟" class="headerlink" title="🚀 快速開始步驟"></a>🚀 快速開始步驟</h3><ol>
<li><p><strong>取得 Access Token</strong>：</p>
<ul>
<li>前往 <a target="_blank" rel="noopener" href="https://account.mapbox.com/">Mapbox Account</a></li>
<li>複製您的 access token</li>
<li>替換程式碼中的 <code>YOUR_MAPBOX_ACCESS_TOKEN</code></li>
</ul>
</li>
<li><p><strong>本地測試</strong>：</p>
<ul>
<li>儲存為 <code>.html</code> 檔案</li>
<li>在瀏覽器中開啟</li>
<li>享受互動式叢集地圖！</li>
</ul>
</li>
<li><p><strong>客製化調整</strong>：</p>
<ul>
<li>修改 <code>clusterRadius</code> 調整叢集半徑</li>
<li>更換 <code>data</code> URL 使用自己的 GeoJSON 資料</li>
<li>調整顏色和大小的 step 表達式</li>
</ul>
</li>
</ol>
<hr>
<h2 id="📞-技術支援與參考資源"><a href="#📞-技術支援與參考資源" class="headerlink" title="📞 技術支援與參考資源"></a>📞 技術支援與參考資源</h2><h3 id="官方文件"><a href="#官方文件" class="headerlink" title="官方文件"></a>官方文件</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/">Mapbox GL JS 官方文件</a></li>
<li><a target="_blank" rel="noopener" href="https://geojson.org/">GeoJSON 規格說明</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/example/cluster/">Mapbox 叢集範例</a></li>
</ul>
<h3 id="資料來源"><a href="#資料來源" class="headerlink" title="資料來源"></a>資料來源</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson">USGS 地震資料</a></li>
<li><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson">世界陸地邊界 GeoJSON</a></li>
</ul>
<h3 id="相關專案"><a href="#相關專案" class="headerlink" title="相關專案"></a>相關專案</h3><ul>
<li>本文技術範例基於 Mapbox 官方叢集教學</li>
</ul>
<blockquote>
<p><strong>作者</strong>：技術團隊<br><strong>更新日期</strong>：2025年6月29日<br><strong>版本</strong>：v1.1<br><strong>程式碼來源</strong>：<a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/example/cluster/">Mapbox Create and Style Clusters</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/mapbox-data-visualization-guide/" data-id="cmciag7pa0004csmz00a8ekx5" data-title="Mapbox 地圖資料視覺化技術分析與應用指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Canvas/" rel="tag">Canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Clustering/" rel="tag">Clustering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Visualization/" rel="tag">Data Visualization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GeoJSON/" rel="tag">GeoJSON</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Interactive-Maps/" rel="tag">Interactive Maps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mapbox/" rel="tag">Mapbox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mapbox-GL-JS/" rel="tag">Mapbox GL JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USGS-Data/" rel="tag">USGS Data</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web-Mapping/" rel="tag">Web Mapping</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-docker-buildx-tech-daily" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/19/docker-buildx-tech-daily/" class="article-date">
  <time class="dt-published" datetime="2025-06-19T02:00:00.000Z" itemprop="datePublished">2025-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/19/docker-buildx-tech-daily/">Docker Buildx 跨架構封裝 Tech Daily</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="0-核心懶人包"><a href="#0-核心懶人包" class="headerlink" title="0. 核心懶人包"></a>0. 核心懶人包</h2><ol>
<li><strong>Buildx</strong>：BuildKit 前端，可於 x86／Apple Silicon 一次產出多平台映像。</li>
<li><code>--output type=docker,dest=*.tar</code>：產生可攜式 <code>.tar</code>，低效能主機用 <code>docker load</code> 匯入即可。</li>
<li><strong>最佳實踐</strong>：Multi-Stage Build＋極小基底映像＋QEMU 跨架構編譯，可縮短部署時間並減少映像體積。</li>
</ol>
<h2 id="1-指令拆解"><a href="#1-指令拆解" class="headerlink" title="1. 指令拆解"></a>1. 指令拆解</h2><table>
<thead>
<tr>
<th>片段</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker buildx build</code></td>
<td>啟用 BuildKit（並行、快取、秘密掛載…）。</td>
</tr>
<tr>
<td><code>-f Dockerfile</code></td>
<td>指定 Dockerfile 路徑。</td>
</tr>
<tr>
<td><code>--platform linux/arm64</code></td>
<td>產出 arm64 層；可用逗號一次列多架構。</td>
</tr>
<tr>
<td><code>.</code></td>
<td>建構上下文（專案根目錄）。</td>
</tr>
<tr>
<td><code>-t generic-app:latest</code></td>
<td>打映像標籤。</td>
</tr>
<tr>
<td><code>--output type=docker,dest=generic-app-arm64.tar</code></td>
<td>匯出成 tar 供離線傳輸。</td>
</tr>
</tbody></table>
<h2 id="2-系統流程"><a href="#2-系統流程" class="headerlink" title="2. 系統流程"></a>2. 系統流程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x86／Apple Silicon 開發機</span><br><span class="line">│  Buildx (BuildKit)</span><br><span class="line">│     ├─ QEMU 模擬 arm64 指令</span><br><span class="line">│     └─ 生成 manifest list</span><br><span class="line">│            └─ arm64 layers → generic-app-arm64.tar</span><br><span class="line">└─ scp／rsync</span><br><span class="line">      └─► 目標 ARM 主機</span><br><span class="line">             docker load</span><br><span class="line">             docker run／compose up</span><br></pre></td></tr></table></figure>

<h2 id="3-映像瘦身備忘"><a href="#3-映像瘦身備忘" class="headerlink" title="3. 映像瘦身備忘"></a>3. 映像瘦身備忘</h2><ol>
<li><strong>Multi-Stage Build</strong>：只保留最終執行檔與靜態資產。</li>
<li><strong>精簡基底</strong>：<code>alpine</code>、<code>debian:bookworm-slim</code>，或 <strong>Distroless</strong>。</li>
<li><strong>清理暫存</strong>：<code>apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*</code>、<code>npm ci --omit=dev</code>。</li>
<li><strong>靜態編譯 + strip</strong>（Go／Rust）：<code>-ldflags &quot;-s -w&quot;</code> 可再省 30 %以上體積。</li>
</ol>
<h2 id="4-docker-compose-範例"><a href="#4-docker-compose-範例" class="headerlink" title="4. docker-compose 範例"></a>4. docker-compose 範例</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">generic-app:latest</span></span><br><span class="line">    <span class="attr">platform:</span> <span class="string">linux/arm64</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>先於目標機載入映像：<code>docker load -i generic-app-arm64.tar</code>，再執行 <code>docker compose up -d</code>。</p>
</blockquote>
<h2 id="5-常見踩雷速查"><a href="#5-常見踩雷速查" class="headerlink" title="5. 常見踩雷速查"></a>5. 常見踩雷速查</h2><table>
<thead>
<tr>
<th>症狀</th>
<th>快速排解</th>
</tr>
</thead>
<tbody><tr>
<td>Build 階段 QEMU 超慢</td>
<td>僅在 Build 階段用 QEMU；Runtime 選真 arm64 基底。</td>
</tr>
<tr>
<td><code>apt</code> 抓錯架構</td>
<td>檢查 <code>dpkg --print-architecture</code>；必要時加 <code>--platform</code>。</td>
</tr>
<tr>
<td><code>CGO</code> 交叉編譯失敗</td>
<td>安裝 <code>gcc-aarch64-linux-gnu</code> 或改用 musl／zig。</td>
</tr>
<tr>
<td>映像仍肥大</td>
<td><code>docker history &lt;image&gt;</code> 找出大 layer，清除 cache／log。</td>
</tr>
</tbody></table>
<h2 id="6-延伸指令"><a href="#6-延伸指令" class="headerlink" title="6. 延伸指令"></a>6. 延伸指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立跨架構 builder</span></span><br><span class="line">docker buildx create --use --name cross   &amp;&amp; docker buildx inspect --bootstrap</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多平台一次打包並推送 Registry</span></span><br><span class="line">docker buildx build   --platform linux/amd64,linux/arm64   -t registry.example.com/generic-app:multi   --push .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看映像支援架構</span></span><br><span class="line">docker buildx imagetools inspect generic-app:latest</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="每日一句"><a href="#每日一句" class="headerlink" title="每日一句"></a>每日一句</h3><p><em>Build once, run anywhere — 讓大主機做重活，讓小主機專心跑服務。</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/19/docker-buildx-tech-daily/" data-id="cmciag7p70000csmz957kfryd" data-title="Docker Buildx 跨架構封裝 Tech Daily" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Buildx/" rel="tag">Buildx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Multi-platform/" rel="tag">Multi-platform</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Offline-Deployment/" rel="tag">Offline Deployment</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/15/hello-world/" class="article-date">
  <time class="dt-published" datetime="2025-06-15T15:24:50.177Z" itemprop="datePublished">2025-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/15/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/15/hello-world/" data-id="cmciag7p90001csmz6f4v9z1g" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tech-Daily/">Tech Daily</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI-Assistant/" rel="tag">AI Assistant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI-Collaboration/" rel="tag">AI Collaboration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Best-Practices/" rel="tag">Best Practices</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Buildx/" rel="tag">Buildx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business-Context/" rel="tag">Business Context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Business-Strategy/" rel="tag">Business Strategy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Canvas/" rel="tag">Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clustering/" rel="tag">Clustering</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code-Quality/" rel="tag">Code Quality</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Composables/" rel="tag">Composables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Composition-API/" rel="tag">Composition API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Critical-Functions/" rel="tag">Critical Functions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Visualization/" rel="tag">Data Visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Developer-Experience/" rel="tag">Developer Experience</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Domain-Knowledge/" rel="tag">Domain Knowledge</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESLint-9-x/" rel="tag">ESLint 9.x</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flat-Config/" rel="tag">Flat Config</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend-Architecture/" rel="tag">Frontend Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend-Tooling/" rel="tag">Frontend Tooling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GeoJSON/" rel="tag">GeoJSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Global-Properties/" rel="tag">Global Properties</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hydration/" rel="tag">Hydration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Interactive-Maps/" rel="tag">Interactive Maps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Knowledge-Management/" rel="tag">Knowledge Management</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linting-Rules/" rel="tag">Linting Rules</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mapbox/" rel="tag">Mapbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mapbox-GL-JS/" rel="tag">Mapbox GL JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multi-platform/" rel="tag">Multi-platform</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Naming-Convention/" rel="tag">Naming Convention</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Offline-Deployment/" rel="tag">Offline Deployment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance-Optimization/" rel="tag">Performance Optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pinia/" rel="tag">Pinia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prerender/" rel="tag">Prerender</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prompt-Engineering/" rel="tag">Prompt Engineering</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RenderMode/" rel="tag">RenderMode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Route-Guards/" rel="tag">Route Guards</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server-Side-Rendering/" rel="tag">Server-Side Rendering</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Service-Pattern/" rel="tag">Service Pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/State-Management/" rel="tag">State Management</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Team-Productivity/" rel="tag">Team Productivity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Technical-Decision-Making/" rel="tag">Technical Decision Making</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USGS-Data/" rel="tag">USGS Data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web-Mapping/" rel="tag">Web Mapping</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI-Assistant/" style="font-size: 10px;">AI Assistant</a> <a href="/tags/AI-Collaboration/" style="font-size: 10px;">AI Collaboration</a> <a href="/tags/ARM/" style="font-size: 10px;">ARM</a> <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/Angular-19/" style="font-size: 10px;">Angular 19</a> <a href="/tags/Angular-Universal/" style="font-size: 10px;">Angular Universal</a> <a href="/tags/Best-Practices/" style="font-size: 10px;">Best Practices</a> <a href="/tags/Buildx/" style="font-size: 10px;">Buildx</a> <a href="/tags/Business-Context/" style="font-size: 10px;">Business Context</a> <a href="/tags/Business-Strategy/" style="font-size: 10px;">Business Strategy</a> <a href="/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/tags/Canvas/" style="font-size: 10px;">Canvas</a> <a href="/tags/Clustering/" style="font-size: 10px;">Clustering</a> <a href="/tags/Code-Quality/" style="font-size: 10px;">Code Quality</a> <a href="/tags/Composables/" style="font-size: 10px;">Composables</a> <a href="/tags/Composition-API/" style="font-size: 10px;">Composition API</a> <a href="/tags/Critical-Functions/" style="font-size: 10px;">Critical Functions</a> <a href="/tags/Data-Visualization/" style="font-size: 10px;">Data Visualization</a> <a href="/tags/Design-Patterns/" style="font-size: 10px;">Design Patterns</a> <a href="/tags/Developer-Experience/" style="font-size: 10px;">Developer Experience</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Domain-Knowledge/" style="font-size: 10px;">Domain Knowledge</a> <a href="/tags/ESLint-9-x/" style="font-size: 10px;">ESLint 9.x</a> <a href="/tags/Flat-Config/" style="font-size: 10px;">Flat Config</a> <a href="/tags/Frontend-Architecture/" style="font-size: 10px;">Frontend Architecture</a> <a href="/tags/Frontend-Tooling/" style="font-size: 10px;">Frontend Tooling</a> <a href="/tags/GeoJSON/" style="font-size: 10px;">GeoJSON</a> <a href="/tags/Global-Properties/" style="font-size: 10px;">Global Properties</a> <a href="/tags/Hydration/" style="font-size: 10px;">Hydration</a> <a href="/tags/Interactive-Maps/" style="font-size: 10px;">Interactive Maps</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Knowledge-Management/" style="font-size: 10px;">Knowledge Management</a> <a href="/tags/Linting-Rules/" style="font-size: 10px;">Linting Rules</a> <a href="/tags/Mapbox/" style="font-size: 10px;">Mapbox</a> <a href="/tags/Mapbox-GL-JS/" style="font-size: 10px;">Mapbox GL JS</a> <a href="/tags/Multi-platform/" style="font-size: 10px;">Multi-platform</a> <a href="/tags/Naming-Convention/" style="font-size: 10px;">Naming Convention</a> <a href="/tags/Offline-Deployment/" style="font-size: 10px;">Offline Deployment</a> <a href="/tags/Performance-Optimization/" style="font-size: 10px;">Performance Optimization</a> <a href="/tags/Pinia/" style="font-size: 10px;">Pinia</a> <a href="/tags/Prerender/" style="font-size: 10px;">Prerender</a> <a href="/tags/Prompt-Engineering/" style="font-size: 10px;">Prompt Engineering</a> <a href="/tags/RenderMode/" style="font-size: 10px;">RenderMode</a> <a href="/tags/Route-Guards/" style="font-size: 10px;">Route Guards</a> <a href="/tags/SEO/" style="font-size: 10px;">SEO</a> <a href="/tags/SSR/" style="font-size: 10px;">SSR</a> <a href="/tags/Server-Side-Rendering/" style="font-size: 10px;">Server-Side Rendering</a> <a href="/tags/Service-Pattern/" style="font-size: 10px;">Service Pattern</a> <a href="/tags/State-Management/" style="font-size: 10px;">State Management</a> <a href="/tags/Team-Productivity/" style="font-size: 10px;">Team Productivity</a> <a href="/tags/Technical-Decision-Making/" style="font-size: 10px;">Technical Decision Making</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/USGS-Data/" style="font-size: 10px;">USGS Data</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Web-Mapping/" style="font-size: 10px;">Web Mapping</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">六月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/06/29/eslint-configuration-best-practices-guide/">ESLint 9.x 革命性配置與前端開發最佳化實戰指南</a>
          </li>
        
          <li>
            <a href="/2025/06/29/angular-ssr-prerender-technical-guide/">Angular 19 SSR/Prerender 深度技術分析與實戰指南</a>
          </li>
        
          <li>
            <a href="/2025/06/29/ai-business-collaboration-strategy-guide/">AI 業務導向協作策略與 {{critical_functions}} 實戰指南</a>
          </li>
        
          <li>
            <a href="/2025/06/29/vue-frontend-architecture-patterns-guide/">Vue.js 前端架構模式比較與選擇指南</a>
          </li>
        
          <li>
            <a href="/2025/06/29/mapbox-data-visualization-guide/">Mapbox 地圖資料視覺化技術分析與應用指南</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Ben Hsieh<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>