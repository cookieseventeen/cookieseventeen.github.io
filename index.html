<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://cookieseventeen.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Ben Hsieh">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">ä»»ä½•ä¸€ä»¶äº‹åšåˆ°æ¥µè‡´éƒ½å€¼å¾—æ•¬ä½©</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="æœå°‹"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœå°‹"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://cookieseventeen.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-canvas-simplex-noise-wave-animation-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/29/canvas-simplex-noise-wave-animation-guide/" class="article-date">
  <time class="dt-published" datetime="2025-09-29T02:00:00.000Z" itemprop="datePublished">2025-09-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/09/29/canvas-simplex-noise-wave-animation-guide/">Canvas + Simplex Noise å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Canvas-Simplex-Noise-å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—"><a href="#Canvas-Simplex-Noise-å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—" class="headerlink" title="Canvas + Simplex Noise å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—"></a>Canvas + Simplex Noise å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—</h1><h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>ğŸ—ï¸ æŠ€è¡“çµ„åˆ</strong>ï¼šä½¿ç”¨ HTML5 Canvas + Simplex Noise ç”¢ç”Ÿé€£çºŒã€å¹³æ»‘ä¸”è‡ªç„¶çš„æ³¢å½¢ã€‚</li>
<li><strong>ğŸ¯ å¯¦ä½œé‡é»</strong>ï¼šå¤šå±¤æ³¢æµªã€é¡è‰²é€æ˜åº¦ç–ŠåŠ ã€æ™‚é–“è»¸æ¨é€²ï¼ˆtickï¼‰å½¢æˆæµå‹•æ„Ÿã€‚</li>
<li><strong>âš¡ æ•ˆèƒ½å„ªåŒ–</strong>ï¼šDPR ç¸®æ”¾ã€ç¯€æµé‡ç¹ªã€å¯è¦‹æ€§åµæ¸¬èˆ‡ <code>requestAnimationFrame</code> ç®¡ç†ã€‚</li>
<li><strong>ğŸ”§ ç©©å®šæ€§</strong>ï¼šå®Œæ•´éŒ¯èª¤è™•ç†ã€è¦–çª—å°ºå¯¸è®Šæ›´èˆ‡è³‡æºå›æ”¶ï¼ˆåœæ­¢å‹•ç•«ï¼‰ã€‚</li>
<li><strong>ğŸ“š å¯ç§»æ¤æ€§</strong>ï¼šä¸ä¾è³´æ¡†æ¶ï¼ŒåŸç”Ÿ JS å³å¯åŸ·è¡Œï¼Œæ˜“æ•´åˆå„é¡å‰ç«¯å°ˆæ¡ˆã€‚</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>é€™ç¯‡æŒ‡å—ç¤ºç¯„å¦‚ä½•é€é Simplex Noise ç”Ÿæˆè‡ªç„¶çš„æ³¢æµªé‹å‹•ï¼Œä¸¦åœ¨ Canvas ä¸­ä»¥å¤šå±¤ç–ŠåŠ æ–¹å¼å‘ˆç¾æ“¬çœŸæ°´é¢æ•ˆæœã€‚å…§å®¹æ¶µè“‹åŸºç¤åˆ°é€²éšçš„å¯¦ä½œç´°ç¯€ã€æ•ˆèƒ½èª¿æ ¡èˆ‡éŒ¯èª¤è™•ç†ï¼Œå¯ç›´æ¥æ‡‰ç”¨æ–¼ç™»å…¥é ã€è¡ŒéŠ·é ã€æ•¸æ“šè¦–è¦ºåŒ–èƒŒæ™¯æˆ–å‰µæ„äº’å‹•å ´æ™¯ã€‚</p>
<h3 id="é è¦½åœ–"><a href="#é è¦½åœ–" class="headerlink" title="é è¦½åœ–"></a>é è¦½åœ–</h3><p><img src="/assets/animated-waves/wave.gif" alt="wave preview"></p>
<h2 id="ğŸ—ï¸-æŠ€è¡“æ¶æ§‹åœ–"><a href="#ğŸ—ï¸-æŠ€è¡“æ¶æ§‹åœ–" class="headerlink" title="ğŸ—ï¸ æŠ€è¡“æ¶æ§‹åœ–"></a>ğŸ—ï¸ æŠ€è¡“æ¶æ§‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">  A[&quot;ä½¿ç”¨è€…è¼‰å…¥é é¢&quot;] --&gt; B[&quot;åˆå§‹åŒ– Canvas èˆ‡ Context&quot;]</span><br><span class="line">  B --&gt; C[&quot;ä¾æ“š DPR è¨­å®šç¹ªåœ–å°ºå¯¸&quot;]</span><br><span class="line">  C --&gt; D[&quot;å»ºç«‹ Simplex Noise å¯¦ä¾‹&quot;]</span><br><span class="line">  D --&gt; E[&quot;å®šç¾©å¤šå±¤æ³¢æµªåƒæ•¸&quot;]</span><br><span class="line">  E --&gt; F[&quot;å‹•ç•«ä¸»è¿´åœˆ: requestAnimationFrame&quot;]</span><br><span class="line">  F --&gt; G[&quot;æ›´æ–° tick èˆ‡è¨ˆç®— y åº§æ¨™&quot;]</span><br><span class="line">  G --&gt; H[&quot;ç¹ªè£½å¤šå±¤è·¯å¾‘ä¸¦å¡«è‰²&quot;]</span><br><span class="line">  H --&gt; I&#123;ã€Œè¦–çª—è®Šæ›´/é é¢éš±è—?ã€&#125;</span><br><span class="line">  I -- æ˜¯ --&gt; J[&quot;èª¿æ•´å°ºå¯¸/æš«åœé‡ç¹ª&quot;]</span><br><span class="line">  I -- å¦ --&gt; F</span><br></pre></td></tr></table></figure>

<h2 id="æ ¸å¿ƒå…§å®¹ç« ç¯€"><a href="#æ ¸å¿ƒå…§å®¹ç« ç¯€" class="headerlink" title="æ ¸å¿ƒå…§å®¹ç« ç¯€"></a>æ ¸å¿ƒå…§å®¹ç« ç¯€</h2><h3 id="1-æœ€å°å¯åŸ·è¡Œç¯„ä¾‹ï¼ˆå¯ç›´æ¥æ”¾å…¥éœæ…‹é ï¼‰"><a href="#1-æœ€å°å¯åŸ·è¡Œç¯„ä¾‹ï¼ˆå¯ç›´æ¥æ”¾å…¥éœæ…‹é ï¼‰" class="headerlink" title="1. æœ€å°å¯åŸ·è¡Œç¯„ä¾‹ï¼ˆå¯ç›´æ¥æ”¾å…¥éœæ…‹é ï¼‰"></a>1. æœ€å°å¯åŸ·è¡Œç¯„ä¾‹ï¼ˆå¯ç›´æ¥æ”¾å…¥éœæ…‹é ï¼‰</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-Hant&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Simplex Noise Waves<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- CDNï¼šsimplex-noise ä»¥åŠè¼•é‡åŒ–çš„ reset --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/simplex-noise@4.0.1/dist/esm/simplex-noise.min.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; <span class="attribute">background</span>: <span class="number">#0f1419</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#wrap</span> &#123; <span class="attribute">height</span>: <span class="number">320px</span>; &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">canvas</span> &#123; <span class="attribute">display</span>: block; <span class="attribute">width</span>: <span class="number">100%</span>; <span class="attribute">height</span>: <span class="number">100%</span>; &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;waveCanvas&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;decorative waves&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">import</span> <span class="title class_">SimplexNoise</span> <span class="keyword">from</span> <span class="string">&#x27;https://cdn.jsdelivr.net/npm/simplex-noise@4.0.1/dist/esm/simplex-noise.min.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> wrapper = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;wrap&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;waveCanvas&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!ctx) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;CanvasRenderingContext2D åˆå§‹åŒ–å¤±æ•—&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> simplex = <span class="keyword">new</span> <span class="title class_">SimplexNoise</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> waves = [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">frequency</span>: <span class="number">0.002</span>, <span class="attr">amplitude</span>: <span class="number">10</span>, <span class="attr">speed</span>: <span class="number">0.001</span>, <span class="attr">tick</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(100,100,100,0.9)&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">frequency</span>: <span class="number">0.002</span>, <span class="attr">amplitude</span>: <span class="number">20</span>, <span class="attr">speed</span>: <span class="number">0.002</span>, <span class="attr">tick</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(100,100,100,0.5)&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">frequency</span>: <span class="number">0.003</span>, <span class="attr">amplitude</span>: <span class="number">7</span>,  <span class="attr">speed</span>: <span class="number">0.005</span>, <span class="attr">tick</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(100,100,100,0.6)&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      ];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> rafId = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">resizeCanvas</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> dpr = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span> || <span class="number">1</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> width = wrapper.<span class="property">clientWidth</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> height = <span class="number">300</span>; <span class="comment">// å›ºå®šé«˜åº¦ï¼Œäº¦å¯ä¾éœ€æ±‚èª¿æ•´</span></span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">width</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(width * dpr);</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">height</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(height * dpr);</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">style</span>.<span class="property">width</span> = width + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        canvas.<span class="property">style</span>.<span class="property">height</span> = height + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">setTransform</span>(dpr, <span class="number">0</span>, <span class="number">0</span>, dpr, <span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">drawWave</span>(<span class="params">wave</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">moveTo</span>(canvas.<span class="property">width</span>, canvas.<span class="property">height</span> / <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> x = canvas.<span class="property">width</span>; x &gt;= <span class="number">0</span>; x--) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> y = canvas.<span class="property">height</span> / <span class="number">2</span> + simplex.<span class="title function_">noise2D</span>(x * wave.<span class="property">frequency</span>, wave.<span class="property">tick</span>) * wave.<span class="property">amplitude</span>;</span></span><br><span class="line"><span class="language-javascript">          ctx.<span class="title function_">lineTo</span>(x, y);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">lineTo</span>(<span class="number">0</span>, canvas.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">lineTo</span>(canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="property">fillStyle</span> = wave.<span class="property">color</span>;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">const</span> wave <span class="keyword">of</span> waves) &#123;</span></span><br><span class="line"><span class="language-javascript">          wave.<span class="property">tick</span> += wave.<span class="property">speed</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">drawWave</span>(wave);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        rafId = <span class="title function_">requestAnimationFrame</span>(animate);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// å¯è¦‹æ€§æ§åˆ¶ï¼ˆåˆ‡æ›åˆ†é æ™‚æš«åœï¼Œå›ä¾†å†æ¢å¾©ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">handleVisibility</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">cancelAnimationFrame</span>(rafId);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          rafId = <span class="title function_">requestAnimationFrame</span>(animate);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ä½¿ç”¨ rAF ç¯€æµé‡ç¹ª</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">cancelAnimationFrame</span>(rafId);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">resizeCanvas</span>();</span></span><br><span class="line"><span class="language-javascript">        rafId = <span class="title function_">requestAnimationFrame</span>(animate);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, handleVisibility);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">resizeCanvas</span>();</span></span><br><span class="line"><span class="language-javascript">      rafId = <span class="title function_">requestAnimationFrame</span>(animate);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-æ¨¡çµ„åŒ–ç¨‹å¼ç¢¼ï¼ˆæŠ½é›¢é‚è¼¯ï¼Œä¾¿æ–¼æ•´åˆæ¡†æ¶ï¼‰"><a href="#2-æ¨¡çµ„åŒ–ç¨‹å¼ç¢¼ï¼ˆæŠ½é›¢é‚è¼¯ï¼Œä¾¿æ–¼æ•´åˆæ¡†æ¶ï¼‰" class="headerlink" title="2. æ¨¡çµ„åŒ–ç¨‹å¼ç¢¼ï¼ˆæŠ½é›¢é‚è¼¯ï¼Œä¾¿æ–¼æ•´åˆæ¡†æ¶ï¼‰"></a>2. æ¨¡çµ„åŒ–ç¨‹å¼ç¢¼ï¼ˆæŠ½é›¢é‚è¼¯ï¼Œä¾¿æ–¼æ•´åˆæ¡†æ¶ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// waves.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SimplexNoise</span> <span class="keyword">from</span> <span class="string">&#x27;simplex-noise&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SimplexWaveAnimator</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">canvas, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!context) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;CanvasRenderingContext2D åˆå§‹åŒ–å¤±æ•—&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span> = canvas;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span> = context;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">wrapper</span> = canvas.<span class="property">parentElement</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">simplex</span> = <span class="keyword">new</span> <span class="title class_">SimplexNoise</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">waves</span> = options.<span class="property">waves</span> || [</span><br><span class="line">      &#123; <span class="attr">frequency</span>: <span class="number">0.002</span>, <span class="attr">amplitude</span>: <span class="number">10</span>, <span class="attr">speed</span>: <span class="number">0.001</span>, <span class="attr">tick</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(100,100,100,0.9)&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">frequency</span>: <span class="number">0.002</span>, <span class="attr">amplitude</span>: <span class="number">20</span>, <span class="attr">speed</span>: <span class="number">0.002</span>, <span class="attr">tick</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(100,100,100,0.5)&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">frequency</span>: <span class="number">0.003</span>, <span class="attr">amplitude</span>: <span class="number">7</span>,  <span class="attr">speed</span>: <span class="number">0.005</span>, <span class="attr">tick</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(100,100,100,0.6)&#x27;</span> &#125;,</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rafId</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = options.<span class="property">height</span> || <span class="number">300</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">resize</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> dpr = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span> || <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">const</span> width = <span class="variable language_">this</span>.<span class="property">wrapper</span>?.<span class="property">clientWidth</span> ?? <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    <span class="keyword">const</span> height = <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">width</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(width * dpr);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">height</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(height * dpr);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">style</span>.<span class="property">width</span> = width + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">style</span>.<span class="property">height</span> = height + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">setTransform</span>(dpr, <span class="number">0</span>, <span class="number">0</span>, dpr, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">drawWave</span>(<span class="params">wave</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx, canvas, simplex &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">moveTo</span>(canvas.<span class="property">width</span>, canvas.<span class="property">height</span> / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> x = canvas.<span class="property">width</span>; x &gt;= <span class="number">0</span>; x--) &#123;</span><br><span class="line">      <span class="keyword">const</span> y = canvas.<span class="property">height</span> / <span class="number">2</span> + simplex.<span class="title function_">noise2D</span>(x * wave.<span class="property">frequency</span>, wave.<span class="property">tick</span>) * wave.<span class="property">amplitude</span>;</span><br><span class="line">      ctx.<span class="title function_">lineTo</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    ctx.<span class="title function_">lineTo</span>(<span class="number">0</span>, canvas.<span class="property">height</span>);</span><br><span class="line">    ctx.<span class="title function_">lineTo</span>(canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">    ctx.<span class="title function_">closePath</span>();</span><br><span class="line">    ctx.<span class="property">fillStyle</span> = wave.<span class="property">color</span>;</span><br><span class="line">    ctx.<span class="title function_">fill</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  frame = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">width</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">height</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> wave <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="property">waves</span>) &#123;</span><br><span class="line">      wave.<span class="property">tick</span> += wave.<span class="property">speed</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">drawWave</span>(wave);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rafId</span> = <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">frame</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">stop</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">resize</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rafId</span> = <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">frame</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleVisibility</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleResize</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">stop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">cancelAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">rafId</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleVisibility</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="variable language_">this</span>.<span class="property">handleResize</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleVisibility = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span><br><span class="line">      <span class="title function_">cancelAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">rafId</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rafId</span> = <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">frame</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleResize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">cancelAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">rafId</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">resize</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rafId</span> = <span class="title function_">requestAnimationFrame</span>(<span class="variable language_">this</span>.<span class="property">frame</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hero&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;bg-waves&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å…¶ä»–å…§å®¹ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; <span class="title class_">SimplexWaveAnimator</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./waves.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;bg-waves&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> animator = <span class="keyword">new</span> <span class="title class_">SimplexWaveAnimator</span>(canvas, &#123; <span class="attr">height</span>: <span class="number">320</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">  animator.<span class="title function_">start</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// é é¢å¸è¼‰æ™‚åœæ­¢</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;beforeunload&#x27;</span>, <span class="function">() =&gt;</span> animator.<span class="title function_">stop</span>());</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// è¦–åœ–åˆ‡æ›æ™‚äº¦å¯æ‰‹å‹•åœæ­¢ animator.stop();</span></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-é‚Šç•Œæƒ…æ³èˆ‡éŒ¯èª¤è™•ç†"><a href="#3-é‚Šç•Œæƒ…æ³èˆ‡éŒ¯èª¤è™•ç†" class="headerlink" title="3. é‚Šç•Œæƒ…æ³èˆ‡éŒ¯èª¤è™•ç†"></a>3. é‚Šç•Œæƒ…æ³èˆ‡éŒ¯èª¤è™•ç†</h3><ul>
<li><strong>Canvas context å–å¾—å¤±æ•—</strong>ï¼šåœ¨ç„¡æ³•å–å¾— 2D context æ™‚ç«‹å³æ‹‹éŒ¯ï¼Œé¿å…éœé»˜å¤±æ•ˆã€‚</li>
<li><strong>é«˜ DPR è£ç½®</strong>ï¼šä½¿ç”¨ <code>devicePixelRatio</code> ä¸¦é™åˆ¶æœ€å¤§å€¼ï¼ˆä¾‹å¦‚ 2ï¼‰é¿å… GPU è¨˜æ†¶é«”é£†å‡ã€‚</li>
<li><strong>è¦–çª—å°ºå¯¸è®Šæ›´</strong>ï¼šç¯€æµæ›´æ–°ä¸¦é‡æ–°ç¹ªè£½ï¼Œç¢ºä¿ç•«è³ªä¸æ¨¡ç³Šã€‚</li>
<li><strong>é ç±¤å¯è¦‹æ€§</strong>ï¼šåˆ©ç”¨ <code>visibilitychange</code> åœæ­¢é‡ç¹ªï¼Œè¿”å›æ™‚æ¢å¾©ã€‚</li>
<li><strong>è³‡æºå›æ”¶</strong>ï¼šæä¾› <code>stop()</code> æ–¹æ³•ï¼Œé¿å… SPA è·¯ç”±åˆ‡æ›å¾Œå‹•ç•«æŒçºŒä½”ç”¨è³‡æºã€‚</li>
</ul>
<h2 id="ğŸ’¡-æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">  A[&quot;éœ€è¦æ“¬çœŸæ³¢æµªèƒŒæ™¯?&quot;] --&gt;|æ˜¯| B&#123;&quot;æ•ˆèƒ½è¦æ±‚?&quot;&#125;</span><br><span class="line">  A --&gt;|å¦| Z[&quot;æ”¹ç”¨ç´” CSS/éœæ…‹åœ–&quot;]</span><br><span class="line">  B --&gt;|é«˜| C[&quot;é™ä½å±¤æ•¸/æŒ¯å¹…\né™åˆ¶ DPR=2&quot;]</span><br><span class="line">  B --&gt;|ä¸­| D[&quot;ç¶­æŒ 2~3 å±¤æ³¢æµª&quot;]</span><br><span class="line">  B --&gt;|ä½| E[&quot;å¢åŠ ç´°ç¯€èˆ‡é€æ˜åº¦ç–ŠåŠ &quot;]</span><br><span class="line">  C --&gt; F&#123;&quot;æ˜¯å¦éœ€è¦äº’å‹•?&quot;&#125;</span><br><span class="line">  D --&gt; F</span><br><span class="line">  E --&gt; F</span><br><span class="line">  F --&gt;|éœ€è¦| G[&quot;åŠ å…¥æ»‘é¼ /è§¸æ§å½±éŸ¿ tick æˆ– amplitude&quot;]</span><br><span class="line">  F --&gt;|ä¸éœ€è¦| H[&quot;å›ºå®šåƒæ•¸ï¼Œå°ˆæ³¨è¦–è¦ºç©©å®š&quot;]</span><br><span class="line">  H --&gt; I[&quot;æ•´åˆåˆ°é é¢/æ¡†æ¶&quot;]</span><br><span class="line">  G --&gt; I</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><ul>
<li><strong>Simplex Noise</strong> æä¾›é€£çºŒã€ä½é‡è¤‡æ€§çš„ç–Šä»£æ³¢å½¢ï¼Œè¦–è¦ºè‡ªç„¶ä¸”æ˜“æ§ã€‚</li>
<li><strong>å¤šå±¤é€æ˜ç–ŠåŠ </strong> èƒ½å¿«é€Ÿæå‡è³ªæ„Ÿï¼Œä½†éœ€æ­é… DPR èˆ‡é‡ç¹ªç¯€æµæ§ç®¡æ•ˆèƒ½ã€‚</li>
<li><strong>å‹•ç•«ç”Ÿå‘½é€±æœŸç®¡ç†</strong> æ˜¯å‰ç«¯æ•´åˆçš„é—œéµï¼Œé ˆå¦¥å–„è™•ç†å¯è¦‹æ€§ã€å°ºå¯¸è®Šæ›´èˆ‡è·¯ç”±åˆ‡æ›ã€‚</li>
</ul>
<h2 id="ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥"><a href="#ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥" class="headerlink" title="ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥"></a>ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥</h2><ul>
<li><strong>äº’å‹•åŒ–</strong>ï¼šä½¿ç”¨æ»‘é¼ ä½ç½®æˆ–éŸ³è¨Šé »è­œå½±éŸ¿ <code>frequency/amplitude</code>ï¼Œæ‰“é€ éŸ³æ³¢&#x2F;æ°´æ³¢äº’å‹•ã€‚</li>
<li><strong>ä¸»é¡ŒåŒ–</strong>ï¼šä¾æ·±æ·ºè‰²ä¸»é¡Œåˆ‡æ›æ³¢æµªé¡è‰²èˆ‡é€æ˜åº¦ï¼Œèå…¥è¨­è¨ˆç³»çµ±ã€‚</li>
<li><strong>è³‡æ–™è¦–è¦ºåŒ–èƒŒæ™¯</strong>ï¼šä½œç‚ºå„€è¡¨æ¿èƒŒæ™¯å‹•ç•«ï¼Œæ­é…æš«åœ&#x2F;æ’­æ”¾æ§åˆ¶é¿å…å¹²æ“¾é–±è®€ã€‚</li>
<li><strong>WebGL é·ç§»</strong>ï¼šå°æ¥µè‡´æ•ˆèƒ½éœ€æ±‚å¯é·ç§»è‡³ WebGL&#x2F;Shaderï¼Œä¿ç•™æ±ºç­–æµç¨‹ä¸è®Šã€‚</li>
</ul>
<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="ğŸ› ï¸-å¯¦ç”¨å·¥å…·"><a href="#ğŸ› ï¸-å¯¦ç”¨å·¥å…·" class="headerlink" title="ğŸ› ï¸ å¯¦ç”¨å·¥å…·"></a>ğŸ› ï¸ å¯¦ç”¨å·¥å…·</h3><table>
<thead>
<tr>
<th>å·¥å…·</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>simplex-noise</td>
<td>ç”¢ç”Ÿ Simplex å™ªè²çš„ JS å‡½å¼åº«</td>
</tr>
<tr>
<td>Stats.js</td>
<td>ç°¡æ˜“æ•ˆèƒ½ç›£æ¸¬ï¼ˆå¹€ç‡ï¼‰</td>
</tr>
<tr>
<td>Canvas Inspector</td>
<td>åµéŒ¯ Canvas ç¹ªåœ–æµç¨‹</td>
</tr>
</tbody></table>
<h3 id="ğŸ“š-å®˜æ–¹æ–‡ä»¶"><a href="#ğŸ“š-å®˜æ–¹æ–‡ä»¶" class="headerlink" title="ğŸ“š å®˜æ–¹æ–‡ä»¶"></a>ğŸ“š å®˜æ–¹æ–‡ä»¶</h3><ul>
<li>Simplex Noise å¥—ä»¶ï¼ˆnpmï¼‰ï¼š<code>https://www.npmjs.com/package/simplex-noise</code></li>
<li>MDN Canvas APIï¼š<code>https://developer.mozilla.org/docs/Web/API/Canvas_API</code></li>
<li>requestAnimationFrameï¼š<code>https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame</code></li>
</ul>
<h3 id="ğŸŒ-ç¤¾ç¾¤èˆ‡å­¸ç¿’"><a href="#ğŸŒ-ç¤¾ç¾¤èˆ‡å­¸ç¿’" class="headerlink" title="ğŸŒ ç¤¾ç¾¤èˆ‡å­¸ç¿’"></a>ğŸŒ ç¤¾ç¾¤èˆ‡å­¸ç¿’</h3><ul>
<li>StackBlitz ç¯„ä¾‹ï¼ˆèˆ‡æœ¬æ–‡é‚è¼¯ç›¸è¿‘ï¼‰ï¼š<code>https://stackblitz.com/edit/js-hpafz1?file=index.js</code></li>
<li>Creative Coding ç¤¾ç¾¤ç²¾é¸ï¼š<code>https://www.reddit.com/r/creativecoding/</code></li>
</ul>
<h2 id="ğŸ”—-ç›¸é—œæ–‡ç« é€£çµ"><a href="#ğŸ”—-ç›¸é—œæ–‡ç« é€£çµ" class="headerlink" title="ğŸ”— ç›¸é—œæ–‡ç« é€£çµ"></a>ğŸ”— ç›¸é—œæ–‡ç« é€£çµ</h2><h3 id="ğŸ“š-ç³»åˆ—æ–‡ç« å»ºè­°"><a href="#ğŸ“š-ç³»åˆ—æ–‡ç« å»ºè­°" class="headerlink" title="ğŸ“š ç³»åˆ—æ–‡ç« å»ºè­°"></a>ğŸ“š ç³»åˆ—æ–‡ç« å»ºè­°</h3><ul>
<li>å¾ŒçºŒæ–‡ç« ï¼šCanvas æ•ˆèƒ½å„ªåŒ–å¯¦æˆ° - ç·šæ¢åˆä½µã€é›¢å±æ¸²æŸ“ã€å¿«å–ç­–ç•¥</li>
<li>å¾ŒçºŒæ–‡ç« ï¼šå‰ç«¯å‹•ç•«ç”Ÿå‘½é€±æœŸç®¡ç† - åœ¨ SPA&#x2F;SSR ä¸­ç©©å®šé‹è¡Œå‹•ç•«</li>
</ul>
<h3 id="ğŸ¯-ç›¸é—œä¸»é¡Œ"><a href="#ğŸ¯-ç›¸é—œä¸»é¡Œ" class="headerlink" title="ğŸ¯ ç›¸é—œä¸»é¡Œ"></a>ğŸ¯ ç›¸é—œä¸»é¡Œ</h3><ul>
<li>ä¸¦è¡Œæ–‡ç« ï¼šMapbox è³‡æ–™è¦–è¦ºåŒ–æŒ‡å— - èƒŒæ™¯å‹•ç•«èˆ‡åœ°åœ–äº’å‹•çš„å”ä½œ</li>
<li>å°æ¯”æ–‡ç« ï¼šCSS ç”¢ç”Ÿæ³¢æµªæ•ˆæœ - ç´” CSS èˆ‡ Canvas çš„å–æ¨</li>
</ul>
<h3 id="ğŸ“‹-å»¶ä¼¸é–±è®€"><a href="#ğŸ“‹-å»¶ä¼¸é–±è®€" class="headerlink" title="ğŸ“‹ å»¶ä¼¸é–±è®€"></a>ğŸ“‹ å»¶ä¼¸é–±è®€</h3><ul>
<li>æ·±å…¥ç ”ç©¶ï¼šå™ªè²å‡½æ•¸æ¯”è¼ƒ - Perlin vs Simplex çš„ç‰¹æ€§èˆ‡æˆæœ¬</li>
<li>å¯¦è¸æ¡ˆä¾‹ï¼šè¡ŒéŠ·è½åœ°é å‹•æ…‹èƒŒæ™¯ - A&#x2F;B æ¸¬è©¦èˆ‡å¯è®€æ€§å¹³è¡¡</li>
</ul>
<hr>
<p><strong>ä½œè€…è³‡è¨Š</strong>ï¼š<br>æœ¬æ–‡ç”±å‰ç«¯é–‹ç™¼è€…æ•´ç†ï¼Œèšç„¦æ–¼å‰µæ„ç·¨ç¢¼èˆ‡è³‡æ–™è¦–è¦ºåŒ–çš„å·¥ç¨‹å¯¦è¸ã€‚</p>
<p><strong>ç‰ˆæœ¬è³‡è¨Š</strong>ï¼š<br>ç‰ˆæœ¬ v1.0 | ç™¼å¸ƒæ—¥æœŸï¼š2025-09-29 | é©ç”¨ç’°å¢ƒï¼šç¾ä»£ç€è¦½å™¨</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/09/29/canvas-simplex-noise-wave-animation-guide/" data-id="cmg51yfqi000aanmz7zk194fw" data-title="Canvas + Simplex Noise å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Animation-Loop/" rel="tag">Animation Loop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Creative-Coding/" rel="tag">Creative Coding</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Device-Pixel-Ratio/" rel="tag">Device Pixel Ratio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Error-Handling/" rel="tag">Error Handling</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML5-Canvas/" rel="tag">HTML5 Canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Performance-Optimization/" rel="tag">Performance Optimization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Procedural-Animation/" rel="tag">Procedural Animation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Simplex-Noise/" rel="tag">Simplex Noise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Visualization/" rel="tag">Visualization</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-enterprise-project-initialization-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-enterprise-project-initialization-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T10:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-enterprise-project-initialization-guide/">Angular 19 ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Angular-19-ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—"><a href="#Angular-19-ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—" class="headerlink" title="Angular 19 ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—"></a>Angular 19 ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—</h1><h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><p>â­ <strong>5 å€‹é—œéµåƒ¹å€¼é»</strong>ï¼š</p>
<ol>
<li><strong>ğŸ—ï¸ ç¾ä»£åŒ–æ¶æ§‹è¨­è¨ˆ</strong>ï¼šæ¡ç”¨ Angular 19 æœ€æ–°çš„ Standalone Components å’Œ Signals æŠ€è¡“</li>
<li><strong>ğŸ¯ æ¨¡çµ„åŒ–é–‹ç™¼ç­–ç•¥</strong>ï¼šåŠŸèƒ½æ¨¡çµ„åŒ–æ¶æ§‹æ”¯æ´å¤§å‹åœ˜éšŠå”ä½œå’Œå¿«é€Ÿæ“´å±•</li>
<li><strong>âš¡ æ•ˆèƒ½å„ªåŒ–é…ç½®</strong>ï¼šå»¶é²è¼‰å…¥ã€OnPush è®Šæ›´æª¢æ¸¬å’Œ SSR é æ¸²æŸ“å„ªåŒ–</li>
<li><strong>ğŸ¨ å®Œæ•´ UI è§£æ±ºæ–¹æ¡ˆ</strong>ï¼šPrimeNG + Tailwind CSS æ‰“é€ ç¾ä»£åŒ–ä½¿ç”¨è€…ä»‹é¢</li>
<li><strong>ğŸ”§ é–‹ç™¼å·¥å…·æ•´åˆ</strong>ï¼šESLintã€Prettierã€TypeScript åš´æ ¼æ¨¡å¼çš„å®Œæ•´å·¥å…·éˆ</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°-Ï€"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°-Ï€" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°Â Ï€"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°Â Ï€</h2><p>æœ¬æŒ‡å—æä¾›ä¸€å¥—å®Œæ•´çš„ Angular 19 ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–æ–¹æ¡ˆï¼Œå°ˆç‚ºå¤§å‹ä¼æ¥­æ‡‰ç”¨è¨­è¨ˆã€‚é€éç¾ä»£åŒ–çš„æŠ€è¡“æ£§å’Œæˆç†Ÿçš„æ¶æ§‹æ¨¡å¼ï¼Œå¹«åŠ©é–‹ç™¼åœ˜éšŠå¿«é€Ÿå»ºç«‹é«˜å“è³ªã€å¯ç¶­è­·ã€å¯æ“´å±•çš„å‰ç«¯å°ˆæ¡ˆåŸºç¤ã€‚</p>
<h3 id="ğŸ’¼-é©ç”¨å ´æ™¯"><a href="#ğŸ’¼-é©ç”¨å ´æ™¯" class="headerlink" title="ğŸ’¼ é©ç”¨å ´æ™¯"></a>ğŸ’¼ é©ç”¨å ´æ™¯</h3><ul>
<li><strong>ä¼æ¥­ç´šç®¡ç†ç³»çµ±</strong>ï¼šCRMã€ERPã€äººäº‹ç®¡ç†ç­‰æ¥­å‹™ç³»çµ±</li>
<li><strong>æ•¸æ“šé©¾é©¶è‰™æ‡‰ç”¨</strong>ï¼šç›£æ§é¢æ¿ã€åˆ†æå ±è¡¨ã€å¯¦æ™‚æ•¸æ“šå±•ç¤º</li>
<li><strong>å¤šåŠŸèƒ½æ•´åˆå¹³å°</strong>ï¼šæ•´åˆå¤šå€‹æ¥­å‹™æ¨¡çµ„çš„çµ±ä¸€å…¥å£</li>
<li><strong>B2B å•†å‹™æ‡‰ç”¨</strong>ï¼šä¾›æ‡‰å•†ç®¡ç†ã€å®¢æˆ¶æœå‹™ã€å…§éƒ¨ä½œæ¥­å¹³å°</li>
</ul>
<h3 id="ğŸ¯-æ ¸å¿ƒæŠ€è¡“ç‰¹è‰²"><a href="#ğŸ¯-æ ¸å¿ƒæŠ€è¡“ç‰¹è‰²" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæŠ€è¡“ç‰¹è‰²"></a>ğŸ¯ æ ¸å¿ƒæŠ€è¡“ç‰¹è‰²</h3><ul>
<li>âœ… <strong>Angular 19 æœ€æ–°ç‰¹æ€§</strong>ï¼šStandalone Componentsã€Signalsã€æ–°ç‰ˆ Control Flow</li>
<li>âœ… <strong>ä¼æ¥­ç´šæ¶æ§‹æ¨¡å¼</strong>ï¼šClean Architecture + Feature Module åˆ†å±¤è¨­è¨ˆ</li>
<li>âœ… <strong>ç¾ä»£åŒ– UI æŠ€è¡“æ£§</strong>ï¼šPrimeNG 19 + Tailwind CSS + æš—è‰²æ¨¡å¼</li>
<li>âœ… <strong>å®Œæ•´é–‹ç™¼å·¥å…·éˆ</strong>ï¼šESLint 9ã€Prettierã€TypeScript 5.6+</li>
<li>âœ… <strong>æ•ˆèƒ½å„ªåŒ–é…ç½®</strong>ï¼šSSRã€å»¶é²è¼‰å…¥ã€è®Šæ›´æª¢æ¸¬å„ªåŒ–</li>
</ul>
<h2 id="ğŸ—ï¸-æŠ€è¡“æ¶æ§‹åœ–"><a href="#ğŸ—ï¸-æŠ€è¡“æ¶æ§‹åœ–" class="headerlink" title="ğŸ—ï¸ æŠ€è¡“æ¶æ§‹åœ–"></a>ğŸ—ï¸ æŠ€è¡“æ¶æ§‹åœ–</h2><h3 id="æ•´é«”æ¶æ§‹è¨­è¨ˆ"><a href="#æ•´é«”æ¶æ§‹è¨­è¨ˆ" class="headerlink" title="æ•´é«”æ¶æ§‹è¨­è¨ˆ"></a>æ•´é«”æ¶æ§‹è¨­è¨ˆ</h3><p>æœ¬å°ˆæ¡ˆæ¡ç”¨ <strong>åŠŸèƒ½æ¨¡çµ„åŒ–æ¶æ§‹</strong> (Feature-Module Architecture)ï¼Œçµåˆ <strong>æ¸…æ½”æ¶æ§‹</strong> (Clean Architecture) åŸå‰‡ï¼Œæ§‹å»ºå¯æ“´å±•çš„ä¼æ¥­ç´šå‰ç«¯æ‡‰ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    subgraph &quot;ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆæ¶æ§‹&quot;</span><br><span class="line">        subgraph &quot;æŠ€è¡“æ£§å±¤ç´š&quot;</span><br><span class="line">            A1[&quot;Angular 19.2+&lt;br/&gt;Standalone Components&quot;]</span><br><span class="line">            A2[&quot;TypeScript 5.6+&lt;br/&gt;åš´æ ¼æ¨¡å¼&quot;]</span><br><span class="line">            A3[&quot;PrimeNG 19&lt;br/&gt;UI å…ƒä»¶åº«&quot;]</span><br><span class="line">            A4[&quot;Tailwind CSS&lt;br/&gt;æ¨£å¼æ¡†æ¶&quot;]</span><br><span class="line">        end</span><br><span class="line">        </span><br><span class="line">        subgraph &quot;æ¶æ§‹åˆ†å±¤&quot;</span><br><span class="line">            B1[&quot;Core Layer&lt;br/&gt;æ ¸å¿ƒæœå‹™å±¤&quot;]</span><br><span class="line">            B2[&quot;Shared Layer&lt;br/&gt;å…±äº«å…ƒä»¶å±¤&quot;]</span><br><span class="line">            B3[&quot;Feature Layer&lt;br/&gt;åŠŸèƒ½æ¨¡çµ„å±¤&quot;]</span><br><span class="line">            B4[&quot;Pages Layer&lt;br/&gt;é é¢æ•´åˆå±¤&quot;]</span><br><span class="line">        end</span><br><span class="line">        </span><br><span class="line">        subgraph &quot;é–‹ç™¼å·¥å…·&quot;</span><br><span class="line">            C1[&quot;ESLint 9&lt;br/&gt;ç¨‹å¼ç¢¼æª¢æŸ¥&quot;]</span><br><span class="line">            C2[&quot;Prettier&lt;br/&gt;æ ¼å¼åŒ–å·¥å…·&quot;]</span><br><span class="line">            C3[&quot;Angular CLI&lt;br/&gt;æ§‹å»ºå·¥å…·&quot;]</span><br><span class="line">            C4[&quot;SSR Support&lt;br/&gt;ä¼ºæœå™¨ç«¯æ¸²æŸ“&quot;]</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    A1 --&gt; B1</span><br><span class="line">    A2 --&gt; B1</span><br><span class="line">    B1 --&gt; B2</span><br><span class="line">    B2 --&gt; B3</span><br><span class="line">    B3 --&gt; B4</span><br><span class="line">    </span><br><span class="line">    C1 --&gt; A2</span><br><span class="line">    C2 --&gt; A2</span><br><span class="line">    C3 --&gt; A1</span><br><span class="line">    C4 --&gt; A1</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†å±¤è²¬ä»»èˆ‡è¨­è¨ˆåŸå‰‡"><a href="#åˆ†å±¤è²¬ä»»èˆ‡è¨­è¨ˆåŸå‰‡" class="headerlink" title="åˆ†å±¤è²¬ä»»èˆ‡è¨­è¨ˆåŸå‰‡"></a>åˆ†å±¤è²¬ä»»èˆ‡è¨­è¨ˆåŸå‰‡</h3><table>
<thead>
<tr>
<th>å±¤ç´š</th>
<th>è²¬ä»»ç¯„åœ</th>
<th>è¨­è¨ˆåŸå‰‡</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Core Layer</strong></td>
<td>æ ¸å¿ƒæ¥­å‹™é‚è¼¯ã€æœå‹™ã€æ””æˆªå™¨</td>
<td>æä¾›åŸºç¤è¨­æ–½ï¼Œä¿æŒå–®ä¾‹æ¨¡å¼</td>
</tr>
<tr>
<td><strong>Shared Layer</strong></td>
<td>å¯é‡ç”¨å…ƒä»¶ã€ç®¡é“ã€æŒ‡ä»¤</td>
<td>è·¨æ¨¡çµ„å…±äº«ï¼Œç„¡æ¥­å‹™é‚è¼¯ä¾è³´</td>
</tr>
<tr>
<td><strong>Feature Layer</strong></td>
<td>åŠŸèƒ½æ¨¡çµ„ã€æ¥­å‹™é‚è¼¯</td>
<td>è‡ªåŒ…å«ï¼Œå»¶é²è¼‰å…¥ï¼Œä¾è³´éš”é›¢</td>
</tr>
<tr>
<td><strong>Page Layer</strong></td>
<td>é é¢ç´šå…ƒä»¶</td>
<td>æ•´åˆåŠŸèƒ½æ¨¡çµ„ï¼Œè™•ç†å…¨åŸŸé‚è¼¯</td>
</tr>
</tbody></table>
<h2 id="ğŸš€-å°ˆæ¡ˆåˆå§‹åŒ–æ­¥é©Ÿ"><a href="#ğŸš€-å°ˆæ¡ˆåˆå§‹åŒ–æ­¥é©Ÿ" class="headerlink" title="ğŸš€ å°ˆæ¡ˆåˆå§‹åŒ–æ­¥é©Ÿ"></a>ğŸš€ å°ˆæ¡ˆåˆå§‹åŒ–æ­¥é©Ÿ</h2><h3 id="1-ç’°å¢ƒæº–å‚™"><a href="#1-ç’°å¢ƒæº–å‚™" class="headerlink" title="1. ç’°å¢ƒæº–å‚™"></a>1. ç’°å¢ƒæº–å‚™</h3><p><strong>ç³»çµ±éœ€æ±‚</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Node.js &gt;= 18.19.0</span><br><span class="line">npm &gt;= 10.2.0</span><br><span class="line">Angular CLI &gt;= 19.0.0</span><br></pre></td></tr></table></figure>

<p><strong>å®‰è£ Angular CLI</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular/cli@latest</span><br></pre></td></tr></table></figure>

<h3 id="2-å»ºç«‹æ–°å°ˆæ¡ˆ"><a href="#2-å»ºç«‹æ–°å°ˆæ¡ˆ" class="headerlink" title="2. å»ºç«‹æ–°å°ˆæ¡ˆ"></a>2. å»ºç«‹æ–°å°ˆæ¡ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹å°ˆæ¡ˆï¼ˆä½¿ç”¨ Standalone Components å’Œ SSRï¼‰</span></span><br><span class="line">ng new your-project-name --routing --style=scss --ssr --package-manager=npm --standalone</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€²å…¥å°ˆæ¡ˆç›®éŒ„</span></span><br><span class="line"><span class="built_in">cd</span> your-project-name</span><br></pre></td></tr></table></figure>

<h3 id="3-å®‰è£æ ¸å¿ƒä¾è³´"><a href="#3-å®‰è£æ ¸å¿ƒä¾è³´" class="headerlink" title="3. å®‰è£æ ¸å¿ƒä¾è³´"></a>3. å®‰è£æ ¸å¿ƒä¾è³´</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£ UI æ¡†æ¶</span></span><br><span class="line">npm install primeng@19 primeicons primeflex</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£ Tailwind CSS</span></span><br><span class="line">npm install -D tailwindcss postcss autoprefixer</span><br><span class="line">npx tailwindcss init -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£é–‹ç™¼å·¥å…·</span></span><br><span class="line">npm install -D eslint @angular-eslint/eslint-plugin @angular-eslint/template-parser</span><br><span class="line">npm install -D prettier eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure>

<h3 id="4-å»ºç«‹å°ˆæ¡ˆç›®éŒ„çµæ§‹"><a href="#4-å»ºç«‹å°ˆæ¡ˆç›®éŒ„çµæ§‹" class="headerlink" title="4. å»ºç«‹å°ˆæ¡ˆç›®éŒ„çµæ§‹"></a>4. å»ºç«‹å°ˆæ¡ˆç›®éŒ„çµæ§‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹æ ¸å¿ƒç›®éŒ„çµæ§‹</span></span><br><span class="line"><span class="built_in">mkdir</span> -p src/app/&#123;core,shared,features,pages&#125;</span><br><span class="line"><span class="built_in">mkdir</span> -p src/app/core/&#123;services,models,guards,interceptors,enums&#125;</span><br><span class="line"><span class="built_in">mkdir</span> -p src/app/shared/&#123;components,layouts,directives,pipes,utils&#125;</span><br><span class="line"><span class="built_in">mkdir</span> -p src/app/features/&#123;demo,user,system&#125;</span><br><span class="line"><span class="built_in">mkdir</span> -p src/app/pages/&#123;dashboard,not-found&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ç‰ˆé¢é…ç½®</span></span><br><span class="line"><span class="built_in">mkdir</span> -p src/app/shared/layouts/&#123;empty-layout,sidebar-layout&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹æ–‡ä»¶ç›®éŒ„</span></span><br><span class="line"><span class="built_in">mkdir</span> docs</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“‚-å®Œæ•´ç›®éŒ„çµæ§‹"><a href="#ğŸ“‚-å®Œæ•´ç›®éŒ„çµæ§‹" class="headerlink" title="ğŸ“‚ å®Œæ•´ç›®éŒ„çµæ§‹"></a>ğŸ“‚ å®Œæ•´ç›®éŒ„çµæ§‹</h2><h3 id="æ¨è–¦çš„å°ˆæ¡ˆçµæ§‹"><a href="#æ¨è–¦çš„å°ˆæ¡ˆçµæ§‹" class="headerlink" title="æ¨è–¦çš„å°ˆæ¡ˆçµæ§‹"></a>æ¨è–¦çš„å°ˆæ¡ˆçµæ§‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">your-project/</span><br><span class="line">â”œâ”€â”€ ğŸ“ docs/                                    # å°ˆæ¡ˆæ–‡ä»¶ç›®éŒ„</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ project-architecture.md              # å°ˆæ¡ˆæ¶æ§‹æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ coding-standards.md                  # ç¨‹å¼ç¢¼è¦ç¯„æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ ğŸ“„ deployment-guide.md                  # éƒ¨ç½²æŒ‡å—æ–‡ä»¶</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ ğŸ“ public/                                  # éœæ…‹è³‡æºç›®éŒ„</span><br><span class="line">â”‚   â””â”€â”€ ğŸ“„ favicon.ico                          # ç¶²ç«™åœ–ç¤ºæª”æ¡ˆ</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ ğŸ“ src/                                     # åŸå§‹ç¨‹å¼ç¢¼æ ¹ç›®éŒ„</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ index.html                           # æ‡‰ç”¨ç¨‹å¼ HTML é€²å…¥é»</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ main.ts                              # å®¢æˆ¶ç«¯æ‡‰ç”¨å•Ÿå‹•æª”æ¡ˆ</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ main.server.ts                       # ä¼ºæœå™¨ç«¯æ‡‰ç”¨å•Ÿå‹•æª”æ¡ˆ</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ styles.scss                          # å…¨åŸŸæ¨£å¼æª”æ¡ˆ</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ tailwind.css                         # Tailwind CSS é€²å…¥é»</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“ environments/                        # ç’°å¢ƒé…ç½®ç›®éŒ„</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ ğŸ“„ environment.ts                   # é–‹ç™¼ç’°å¢ƒé…ç½®</span><br><span class="line">â”‚   â”‚   â””â”€â”€ ğŸ“„ environment.prod.ts              # ç”Ÿç”¢ç’°å¢ƒé…ç½®</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â””â”€â”€ ğŸ“ app/                                 # Angular æ‡‰ç”¨ç¨‹å¼æ ¸å¿ƒç›®éŒ„</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“„ app.component.html               # æ ¹å…ƒä»¶ HTML æ¨¡æ¿</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“„ app.component.scss               # æ ¹å…ƒä»¶æ¨£å¼æª”æ¡ˆ</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“„ app.component.ts                 # æ ¹å…ƒä»¶ TypeScript é‚è¼¯</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“„ app.config.ts                    # æ‡‰ç”¨ç¨‹å¼æ ¸å¿ƒé…ç½®</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“„ app.routes.ts                    # æ ¹è·¯ç”±é…ç½®æª”æ¡ˆ</span><br><span class="line">â”‚       â”‚</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“ core/                            # æ ¸å¿ƒå±¤ - æ‡‰ç”¨ç¨‹å¼åŸºç¤è¨­æ–½</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ enums/                       # åˆ—èˆ‰å®šç¾©ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ guards/                      # è·¯ç”±å®ˆè¡›ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ interceptors/                # HTTP æ””æˆªå™¨ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ models/                      # è³‡æ–™æ¨¡å‹èˆ‡ä»‹é¢ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â””â”€â”€ ğŸ“ services/                    # æ ¸å¿ƒæœå‹™ç›®éŒ„</span><br><span class="line">â”‚       â”‚</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“ shared/                          # å…±äº«å±¤ - å¯é‡ç”¨å…ƒä»¶èˆ‡å·¥å…·</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ components/                  # è·¨æ¨¡çµ„å…±äº«å…ƒä»¶ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ directives/                  # è‡ªè¨‚æŒ‡ä»¤ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ layouts/                     # ç‰ˆé¢é…ç½®å…ƒä»¶ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â”‚   â”œâ”€â”€ ğŸ“ empty-layout/            # ç©ºç™½ç‰ˆé¢é…ç½®å…ƒä»¶</span><br><span class="line">â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“ sidebar-layout/          # å´é‚Šæ¬„ç‰ˆé¢é…ç½®å…ƒä»¶</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ pipes/                       # è‡ªè¨‚ç®¡é“ç›®éŒ„</span><br><span class="line">â”‚       â”‚   â””â”€â”€ ğŸ“ utils/                       # å·¥å…·å‡½å¼ç›®éŒ„</span><br><span class="line">â”‚       â”‚</span><br><span class="line">â”‚       â”œâ”€â”€ ğŸ“ features/                        # åŠŸèƒ½å±¤ - æ¥­å‹™åŠŸèƒ½æ¨¡çµ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ demo/                        # å±•ç¤ºåŠŸèƒ½æ¨¡çµ„</span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ ğŸ“ user/                        # ä½¿ç”¨è€…ç®¡ç†åŠŸèƒ½æ¨¡çµ„</span><br><span class="line">â”‚       â”‚   â””â”€â”€ ğŸ“ system/                      # ç³»çµ±ç®¡ç†åŠŸèƒ½æ¨¡çµ„</span><br><span class="line">â”‚       â”‚</span><br><span class="line">â”‚       â””â”€â”€ ğŸ“ pages/                           # é é¢å±¤ - é ‚å±¤é é¢å…ƒä»¶</span><br><span class="line">â”‚           â”œâ”€â”€ ğŸ“ dashboard/                   # å„€è¡¨æ¿é é¢</span><br><span class="line">â”‚           â””â”€â”€ ğŸ“ not-found/                   # 404 éŒ¯èª¤é é¢</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ ğŸ“„ angular.json                             # Angular CLI å°ˆæ¡ˆé…ç½®æª”æ¡ˆ</span><br><span class="line">â”œâ”€â”€ ğŸ“„ eslint.config.js                         # ESLint ç¨‹å¼ç¢¼æª¢æŸ¥é…ç½®</span><br><span class="line">â”œâ”€â”€ ğŸ“„ package.json                             # NPM å¥—ä»¶ç®¡ç†èˆ‡è…³æœ¬é…ç½®</span><br><span class="line">â”œâ”€â”€ ğŸ“„ tailwind.config.ts                       # Tailwind CSS å®¢è£½åŒ–é…ç½®</span><br><span class="line">â”œâ”€â”€ ğŸ“„ tsconfig.app.json                        # æ‡‰ç”¨ç¨‹å¼ TypeScript é…ç½®</span><br><span class="line">â”œâ”€â”€ ğŸ“„ tsconfig.json                            # æ ¹å±¤ç´š TypeScript é…ç½®</span><br><span class="line">â””â”€â”€ ğŸ“„ README.md                                # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h2 id="âš™ï¸-æ ¸å¿ƒé…ç½®æ–‡ä»¶è¨­ç½®"><a href="#âš™ï¸-æ ¸å¿ƒé…ç½®æ–‡ä»¶è¨­ç½®" class="headerlink" title="âš™ï¸ æ ¸å¿ƒé…ç½®æ–‡ä»¶è¨­ç½®"></a>âš™ï¸ æ ¸å¿ƒé…ç½®æ–‡ä»¶è¨­ç½®</h2><h3 id="1-Tailwind-CSS-é…ç½®"><a href="#1-Tailwind-CSS-é…ç½®" class="headerlink" title="1. Tailwind CSS é…ç½®"></a>1. Tailwind CSS é…ç½®</h3><p><strong>tailwind.config.ts</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">Config</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;tailwindcss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">content</span>: [</span><br><span class="line">    <span class="string">&quot;./src/**/*.&#123;html,ts&#125;&quot;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">darkMode</span>: <span class="string">&#x27;class&#x27;</span>,</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">extend</span>: &#123;</span><br><span class="line">      <span class="attr">colors</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;primary&#x27;</span>: <span class="string">&#x27;var(--p-primary-color)&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;primary-contrast&#x27;</span>: <span class="string">&#x27;var(--p-primary-contrast-color)&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;surface&#x27;</span>: <span class="string">&#x27;var(--p-surface-ground)&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">&#125; <span class="keyword">satisfies</span> <span class="title class_">Config</span>;</span><br></pre></td></tr></table></figure>

<p><strong>src&#x2F;tailwind.css</strong>ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@tailwind</span> base;</span><br><span class="line"><span class="keyword">@tailwind</span> components;</span><br><span class="line"><span class="keyword">@tailwind</span> utilities;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* PrimeNG èˆ‡ Tailwind æ•´åˆ */</span></span><br><span class="line"><span class="keyword">@layer</span> base &#123;</span><br><span class="line">  <span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--p-primary-color</span>: <span class="number">#3b82f6</span>;</span><br><span class="line">    <span class="attr">--p-primary-contrast-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attr">--p-surface-ground</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.dark</span> &#123;</span><br><span class="line">    <span class="attr">--p-surface-ground</span>: <span class="number">#0f1419</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ESLint-é…ç½®"><a href="#2-ESLint-é…ç½®" class="headerlink" title="2. ESLint é…ç½®"></a>2. ESLint é…ç½®</h3><p><strong>eslint.config.js</strong>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tseslint <span class="keyword">from</span> <span class="string">&#x27;@typescript-eslint/eslint-plugin&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> angular <span class="keyword">from</span> <span class="string">&#x27;@angular-eslint/eslint-plugin&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&#x27;**/*.ts&#x27;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">      <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">project</span>: <span class="string">&#x27;./tsconfig.json&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@typescript-eslint&#x27;</span>: tseslint,</span><br><span class="line">      <span class="string">&#x27;@angular-eslint&#x27;</span>: angular,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@angular-eslint/component-class-suffix&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;@angular-eslint/directive-class-suffix&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;@typescript-eslint/no-explicit-any&#x27;</span>: <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;@typescript-eslint/no-unused-vars&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;prefer-const&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-Angular-æ‡‰ç”¨é…ç½®"><a href="#3-Angular-æ‡‰ç”¨é…ç½®" class="headerlink" title="3. Angular æ‡‰ç”¨é…ç½®"></a>3. Angular æ‡‰ç”¨é…ç½®</h3><p><strong>src&#x2F;app&#x2F;app.config.ts</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span>, importProvidersFrom &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideRouter, withInMemoryScrolling &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideClientHydration &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideAnimationsAsync &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser/animations/async&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideHttpClient, withFetch &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrimeNGConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;primeng/api&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideRouter</span>(routes, <span class="title function_">withInMemoryScrolling</span>(&#123;</span><br><span class="line">      <span class="attr">scrollPositionRestoration</span>: <span class="string">&#x27;top&#x27;</span></span><br><span class="line">    &#125;)),</span><br><span class="line">    <span class="title function_">provideClientHydration</span>(),</span><br><span class="line">    <span class="title function_">provideAnimationsAsync</span>(),</span><br><span class="line">    <span class="title function_">provideHttpClient</span>(<span class="title function_">withFetch</span>()),</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">provide</span>: <span class="title class_">PrimeNGConfig</span>,</span><br><span class="line">      <span class="attr">useFactory</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> config = <span class="keyword">new</span> <span class="title class_">PrimeNGConfig</span>();</span><br><span class="line">        config.<span class="property">theme</span>.<span class="title function_">set</span>(&#123; <span class="attr">preset</span>: <span class="string">&#x27;Aura&#x27;</span> &#125;);</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4-è·¯ç”±é…ç½®"><a href="#4-è·¯ç”±é…ç½®" class="headerlink" title="4. è·¯ç”±é…ç½®"></a>4. è·¯ç”±é…ç½®</h3><p><strong>src&#x2F;app&#x2F;app.routes.ts</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Routes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">redirectTo</span>: <span class="string">&#x27;/dashboard&#x27;</span>,</span><br><span class="line">    <span class="attr">pathMatch</span>: <span class="string">&#x27;full&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./pages/dashboard/dashboard.component&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">DashboardComponent</span>),</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;å„€è¡¨æ¿&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;demo&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./features/demo/routes&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">demoRoutes</span>),</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Demo å±•ç¤ºä¸­å¿ƒ&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;**&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./pages/not-found/not-found.component&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">NotFoundComponent</span>),</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;é é¢æœªæ‰¾åˆ°&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ’¡-æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ æ±ºç­–æµç¨‹åœ–</h2><h3 id="å°ˆæ¡ˆåˆå§‹åŒ–æ±ºç­–æŒ‡å—"><a href="#å°ˆæ¡ˆåˆå§‹åŒ–æ±ºç­–æŒ‡å—" class="headerlink" title="å°ˆæ¡ˆåˆå§‹åŒ–æ±ºç­–æŒ‡å—"></a>å°ˆæ¡ˆåˆå§‹åŒ–æ±ºç­–æŒ‡å—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[&quot;é–‹å§‹æ–°å°ˆæ¡ˆ&quot;] --&gt; B&#123;&quot;å°ˆæ¡ˆé¡å‹é¸æ“‡&quot;&#125;</span><br><span class="line">    </span><br><span class="line">    B --&gt;|ä¼æ¥­ç´šå¤§å‹æ‡‰ç”¨| C[&quot;é¸æ“‡ Angular 19&lt;br/&gt;Standalone Components&quot;]</span><br><span class="line">    B --&gt;|ä¸­å°å‹å°ˆæ¡ˆ| D[&quot;è€ƒæ…®å…¶ä»–è¼•é‡æ¡†æ¶&quot;]</span><br><span class="line">    </span><br><span class="line">    C --&gt; E&#123;&quot;UI è¨­è¨ˆéœ€æ±‚&quot;&#125;</span><br><span class="line">    E --&gt;|è±å¯Œçš„ä¼æ¥­ç´š UI| F[&quot;æ¡ç”¨ PrimeNG + Tailwind&quot;]</span><br><span class="line">    E --&gt;|å®¢è£½åŒ–è¨­è¨ˆ| G[&quot;åƒ…ä½¿ç”¨ Tailwind CSS&quot;]</span><br><span class="line">    </span><br><span class="line">    F --&gt; H[&quot;å»ºç«‹åŠŸèƒ½æ¨¡çµ„æ¶æ§‹&quot;]</span><br><span class="line">    G --&gt; H</span><br><span class="line">    </span><br><span class="line">    H --&gt; I&#123;&quot;åœ˜éšŠè¦æ¨¡&quot;&#125;</span><br><span class="line">    I --&gt;|å¤§å‹åœ˜éšŠ| J[&quot;åš´æ ¼åˆ†å±¤æ¶æ§‹&lt;br/&gt;Core/Shared/Feature/Pages&quot;]</span><br><span class="line">    I --&gt;|å°å‹åœ˜éšŠ| K[&quot;ç°¡åŒ–ç‰ˆåˆ†å±¤æ¶æ§‹&quot;]</span><br><span class="line">    </span><br><span class="line">    J --&gt; L[&quot;é…ç½®é–‹ç™¼å·¥å…·éˆ&quot;]</span><br><span class="line">    K --&gt; L</span><br><span class="line">    </span><br><span class="line">    L --&gt; M[&quot;ESLint + Prettier + TypeScript&quot;]</span><br><span class="line">    M --&gt; N&#123;&quot;æ€§èƒ½éœ€æ±‚&quot;&#125;</span><br><span class="line">    </span><br><span class="line">    N --&gt;|éœ€è¦ SEO| O[&quot;å•Ÿç”¨ SSR é…ç½®&quot;]</span><br><span class="line">    N --&gt;|SPA å³å¯| P[&quot;å®¢æˆ¶ç«¯æ¸²æŸ“&quot;]</span><br><span class="line">    </span><br><span class="line">    O --&gt; Q[&quot;å°ˆæ¡ˆåˆå§‹åŒ–å®Œæˆ&quot;]</span><br><span class="line">    P --&gt; Q</span><br><span class="line">    </span><br><span class="line">    Q --&gt; R[&quot;é–‹å§‹åŠŸèƒ½é–‹ç™¼&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="æŠ€è¡“é¸å‹æ±ºç­–è¦é»"><a href="#æŠ€è¡“é¸å‹æ±ºç­–è¦é»" class="headerlink" title="æŠ€è¡“é¸å‹æ±ºç­–è¦é»"></a>æŠ€è¡“é¸å‹æ±ºç­–è¦é»</h3><table>
<thead>
<tr>
<th>æ±ºç­–é»</th>
<th>é¸æ“‡æ¨™æº–</th>
<th>æ¨è–¦æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å‰ç«¯æ¡†æ¶</strong></td>
<td>ä¼æ¥­ç´šã€å¤§å‹å°ˆæ¡ˆã€é•·æœŸç¶­è­·</td>
<td>Angular 19 + Standalone Components</td>
</tr>
<tr>
<td><strong>UI æ¡†æ¶</strong></td>
<td>è±å¯Œå…ƒä»¶ã€ä¸€è‡´æ€§è¨­è¨ˆã€å¿«é€Ÿé–‹ç™¼</td>
<td>PrimeNG + Tailwind CSS</td>
</tr>
<tr>
<td><strong>ç‹€æ…‹ç®¡ç†</strong></td>
<td>ä¸­å°å‹å°ˆæ¡ˆã€ç°¡å–®ç‹€æ…‹</td>
<td>Angular Signals</td>
</tr>
<tr>
<td><strong>ç‹€æ…‹ç®¡ç†</strong></td>
<td>è¤‡é›œç‹€æ…‹ã€å¤§å‹æ‡‰ç”¨</td>
<td>NgRx Store</td>
</tr>
<tr>
<td><strong>æ¨£å¼ç­–ç•¥</strong></td>
<td>å¿«é€Ÿé–‹ç™¼ã€éŸ¿æ‡‰å¼è¨­è¨ˆ</td>
<td>Tailwind CSS + SCSS</td>
</tr>
<tr>
<td><strong>ä»£ç¢¼å“è³ª</strong></td>
<td>åœ˜éšŠå”ä½œã€ä¸€è‡´æ€§</td>
<td>ESLint + Prettier + TypeScript</td>
</tr>
</tbody></table>
<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="ğŸ—ï¸-æ¶æ§‹è¨­è¨ˆæ´å¯Ÿ"><a href="#ğŸ—ï¸-æ¶æ§‹è¨­è¨ˆæ´å¯Ÿ" class="headerlink" title="ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆæ´å¯Ÿ"></a>ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆæ´å¯Ÿ</h3><ol>
<li><p><strong>åˆ†å±¤æ¶æ§‹çš„åƒ¹å€¼</strong></p>
<ul>
<li><strong>è·è²¬æ¸…æ™°</strong>ï¼šæ¯å±¤éƒ½æœ‰æ˜ç¢ºçš„è²¬ä»»ç¯„åœï¼Œé¿å…ä»£ç¢¼æ··äº‚</li>
<li><strong>ä¾è³´éš”é›¢</strong>ï¼šåŠŸèƒ½æ¨¡çµ„é–“ç›¸äº’ç¨ç«‹ï¼Œä¾¿æ–¼ä¸¦è¡Œé–‹ç™¼</li>
<li><strong>æ˜“æ–¼æ¸¬è©¦</strong>ï¼šæ¸…æ™°çš„åˆ†å±¤ä¾¿æ–¼å–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦</li>
</ul>
</li>
<li><p><strong>Standalone Components å„ªå‹¢</strong></p>
<ul>
<li><strong>æ¸›å°‘è¤‡é›œåº¦</strong>ï¼šç„¡éœ€ç®¡ç† NgModule çš„ç¹ç‘£ä¾è³´é—œä¿‚</li>
<li><strong>Tree-shaking å‹å¥½</strong>ï¼šæ›´å¥½çš„æ‰“åŒ…å„ªåŒ–ï¼Œæ¸›å°‘æœ€çµ‚åŒ…å¤§å°</li>
<li><strong>çµ„ä»¶è‡ªåŒ…å«</strong>ï¼šæ¯å€‹çµ„ä»¶æ˜ç¢ºè²æ˜è‡ªå·±çš„ä¾è³´</li>
</ul>
</li>
<li><p><strong>åŠŸèƒ½æ¨¡çµ„åŒ–ç­–ç•¥</strong></p>
<ul>
<li><strong>å»¶é²è¼‰å…¥</strong>ï¼šé¦–å±è¼‰å…¥é€Ÿåº¦æå‡ 40-60%</li>
<li><strong>é–‹ç™¼æ•ˆç‡</strong>ï¼šä¸åŒåŠŸèƒ½æ¨¡çµ„å¯ä¸¦è¡Œé–‹ç™¼ï¼Œæå‡åœ˜éšŠå”ä½œæ•ˆç‡</li>
<li><strong>ç¶­è­·æ€§</strong>ï¼šåŠŸèƒ½é‚Šç•Œæ¸…æ™°ï¼Œbug å®šä½å’Œä¿®å¾©æ›´å®¹æ˜“</li>
</ul>
</li>
</ol>
<h3 id="âš¡-æ•ˆèƒ½å„ªåŒ–ç­–ç•¥"><a href="#âš¡-æ•ˆèƒ½å„ªåŒ–ç­–ç•¥" class="headerlink" title="âš¡ æ•ˆèƒ½å„ªåŒ–ç­–ç•¥"></a>âš¡ æ•ˆèƒ½å„ªåŒ–ç­–ç•¥</h3><ol>
<li><p><strong>è¼‰å…¥æ€§èƒ½å„ªåŒ–</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»¶é²è¼‰å…¥å¯¦ç¾</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature.component&#x27;</span>),</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/routes&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>è®Šæ›´æª¢æ¸¬å„ªåŒ–</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">changeDetection</span>: <span class="title class_">ChangeDetectionStrategy</span>.<span class="property">OnPush</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">OptimizedComponent</span> &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ Signals å„ªåŒ–éŸ¿æ‡‰å¼æ›´æ–°</span></span><br><span class="line">  data = signal&lt;<span class="title class_">DataType</span>[]&gt;([]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Signals ç‹€æ…‹ç®¡ç†</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–ä»£å‚³çµ±çš„ Subject + Observable æ¨¡å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataService</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> _data = signal&lt;<span class="title class_">Data</span>[]&gt;([]);</span><br><span class="line">  data = <span class="variable language_">this</span>.<span class="property">_data</span>.<span class="title function_">asReadonly</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">updateData</span>(<span class="params"><span class="attr">newData</span>: <span class="title class_">Data</span>[]</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_data</span>.<span class="title function_">set</span>(newData);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="ğŸ”§-é–‹ç™¼é«”é©—å„ªåŒ–"><a href="#ğŸ”§-é–‹ç™¼é«”é©—å„ªåŒ–" class="headerlink" title="ğŸ”§ é–‹ç™¼é«”é©—å„ªåŒ–"></a>ğŸ”§ é–‹ç™¼é«”é©—å„ªåŒ–</h3><ol>
<li><p><strong>é¡å‹å®‰å…¨ä¿è­‰</strong></p>
<ul>
<li>TypeScript åš´æ ¼æ¨¡å¼ç¢ºä¿ç·¨è­¯æ™‚éŒ¯èª¤æª¢æŸ¥</li>
<li>ä»‹é¢å®šç¾©æ˜ç¢ºçš„ API å¥‘ç´„</li>
<li>æ³›å‹ä½¿ç”¨æå‡ä»£ç¢¼å¾©ç”¨æ€§</li>
</ul>
</li>
<li><p><strong>ä»£ç¢¼å“è³ªæ§åˆ¶</strong></p>
<ul>
<li>ESLint è‡ªå‹•æª¢æŸ¥ä»£ç¢¼è¦ç¯„å•é¡Œ</li>
<li>Prettier çµ±ä¸€ä»£ç¢¼æ ¼å¼</li>
<li>Git hooks ç¢ºä¿æäº¤å“è³ª</li>
</ul>
</li>
</ol>
<h2 id="ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥"><a href="#ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥" class="headerlink" title="ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥"></a>ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥</h2><h3 id="1-å¾®å‰ç«¯æ¶æ§‹æ“´å±•"><a href="#1-å¾®å‰ç«¯æ¶æ§‹æ“´å±•" class="headerlink" title="1. å¾®å‰ç«¯æ¶æ§‹æ“´å±•"></a>1. å¾®å‰ç«¯æ¶æ§‹æ“´å±•</h3><p>ç•¶å°ˆæ¡ˆéœ€è¦æ“´å±•ç‚ºå¾®å‰ç«¯æ¶æ§‹æ™‚ï¼Œæœ¬åˆå§‹åŒ–æ–¹æ¡ˆæä¾›è‰¯å¥½çš„åŸºç¤ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Module Federation é…ç½®ç¯„ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ModuleFederationPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;@module-federation/webpack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ModuleFederationPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;shell&#x27;</span>,</span><br><span class="line">      <span class="attr">remotes</span>: &#123;</span><br><span class="line">        <span class="attr">userModule</span>: <span class="string">&#x27;userModule@http://localhost:4201/remoteEntry.js&#x27;</span>,</span><br><span class="line">        <span class="attr">systemModule</span>: <span class="string">&#x27;systemModule@http://localhost:4202/remoteEntry.js&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-åœ‹éš›åŒ–æ”¯æ´ç­–ç•¥"><a href="#2-åœ‹éš›åŒ–æ”¯æ´ç­–ç•¥" class="headerlink" title="2. åœ‹éš›åŒ–æ”¯æ´ç­–ç•¥"></a>2. åœ‹éš›åŒ–æ”¯æ´ç­–ç•¥</h3><p><strong>å®‰è£ Angular i18n</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng add @angular/localize</span><br></pre></td></tr></table></figure>

<p><strong>å¤šèªè¨€é…ç½®</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ app.config.ts ä¸­é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; provideAnimationsAsync &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser/animations/async&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerLocaleData &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> localeZhTw <span class="keyword">from</span> <span class="string">&#x27;@angular/common/locales/zh-Hant-TW&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">registerLocaleData</span>(localeZhTw);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    &#123; <span class="attr">provide</span>: <span class="variable constant_">LOCALE_ID</span>, <span class="attr">useValue</span>: <span class="string">&#x27;zh-TW&#x27;</span> &#125;,</span><br><span class="line">    <span class="comment">// å…¶ä»–é…ç½®...</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-PWA-åŠŸèƒ½é›†æˆ"><a href="#3-PWA-åŠŸèƒ½é›†æˆ" class="headerlink" title="3. PWA åŠŸèƒ½é›†æˆ"></a>3. PWA åŠŸèƒ½é›†æˆ</h3><p><strong>å®‰è£ PWA æ”¯æ´</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng add @angular/pwa</span><br></pre></td></tr></table></figure>

<p><strong>Service Worker è‡ªè¨‚</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ app.config.ts ä¸­</span></span><br><span class="line"><span class="keyword">import</span> &#123; isDevMode &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServiceWorker &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/service-worker&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServiceWorker</span>(<span class="string">&#x27;ngsw-worker.js&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">enabled</span>: !<span class="title function_">isDevMode</span>(),</span><br><span class="line">      <span class="attr">registrationStrategy</span>: <span class="string">&#x27;registerWhenStable:30000&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4-æ¸¬è©¦ç­–ç•¥å®Œå–„"><a href="#4-æ¸¬è©¦ç­–ç•¥å®Œå–„" class="headerlink" title="4. æ¸¬è©¦ç­–ç•¥å®Œå–„"></a>4. æ¸¬è©¦ç­–ç•¥å®Œå–„</h3><p><strong>å–®å…ƒæ¸¬è©¦é…ç½®</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŠŸèƒ½æ¨¡çµ„æ¸¬è©¦ç¯„ä¾‹</span></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;FeatureComponent&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">component</span>: <span class="title class_">FeatureComponent</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">fixture</span>: <span class="title class_">ComponentFixture</span>&lt;<span class="title class_">FeatureComponent</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">TestBed</span>.<span class="title function_">configureTestingModule</span>(&#123;</span><br><span class="line">      <span class="attr">imports</span>: [<span class="title class_">FeatureComponent</span>], <span class="comment">// Standalone Component æ¸¬è©¦</span></span><br><span class="line">    &#125;).<span class="title function_">compileComponents</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;should create&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(component).<span class="title function_">toBeTruthy</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>E2E æ¸¬è©¦æ•´åˆ</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£ Cypress é€²è¡Œ E2E æ¸¬è©¦</span></span><br><span class="line">npm install --save-dev cypress @cypress/schematic</span><br><span class="line">ng add @cypress/schematic</span><br></pre></td></tr></table></figure>

<h3 id="5-CI-CD-ç®¡é“è¨­ç½®"><a href="#5-CI-CD-ç®¡é“è¨­ç½®" class="headerlink" title="5. CI&#x2F;CD ç®¡é“è¨­ç½®"></a>5. CI&#x2F;CD ç®¡é“è¨­ç½®</h3><p><strong>GitHub Actions ç¯„ä¾‹</strong>ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">CI/CD</span> <span class="string">Pipeline</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">main</span>, <span class="string">develop</span> ]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [ <span class="string">main</span> ]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;18&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">lint</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">test:ci</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="ğŸ› ï¸-å¯¦ç”¨å·¥å…·æ¨è–¦"><a href="#ğŸ› ï¸-å¯¦ç”¨å·¥å…·æ¨è–¦" class="headerlink" title="ğŸ› ï¸ å¯¦ç”¨å·¥å…·æ¨è–¦"></a>ğŸ› ï¸ å¯¦ç”¨å·¥å…·æ¨è–¦</h3><table>
<thead>
<tr>
<th>å·¥å…·åˆ†é¡</th>
<th>æ¨è–¦å·¥å…·</th>
<th>ç”¨é€”èªªæ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é–‹ç™¼å·¥å…·</strong></td>
<td>Visual Studio Code + Angular Language Service</td>
<td>æœ€ä½³çš„ Angular é–‹ç™¼é«”é©—</td>
</tr>
<tr>
<td><strong>èª¿è©¦å·¥å…·</strong></td>
<td>Angular DevTools</td>
<td>çµ„ä»¶æª¢æŸ¥ã€æ•ˆèƒ½åˆ†æ</td>
</tr>
<tr>
<td><strong>API é–‹ç™¼</strong></td>
<td>JSON Server, MockAPI</td>
<td>å¿«é€Ÿå»ºç«‹æ¨¡æ“¬ API</td>
</tr>
<tr>
<td><strong>åœ–ç¤ºè³‡æº</strong></td>
<td>PrimeIcons, Heroicons</td>
<td>è±å¯Œçš„åœ–ç¤ºåº«</td>
</tr>
<tr>
<td><strong>ç‹€æ…‹ç®¡ç†</strong></td>
<td>NgRx DevTools</td>
<td>è¤‡é›œç‹€æ…‹èª¿è©¦</td>
</tr>
</tbody></table>
<h3 id="ğŸ“š-å®˜æ–¹æ–‡ä»¶è³‡æº"><a href="#ğŸ“š-å®˜æ–¹æ–‡ä»¶è³‡æº" class="headerlink" title="ğŸ“š å®˜æ–¹æ–‡ä»¶è³‡æº"></a>ğŸ“š å®˜æ–¹æ–‡ä»¶è³‡æº</h3><ul>
<li><strong>Angular å®˜æ–¹æ–‡ä»¶</strong>ï¼š<a target="_blank" rel="noopener" href="https://angular.io/docs">https://angular.io/docs</a></li>
<li><strong>PrimeNG å…ƒä»¶åº«</strong>ï¼š<a target="_blank" rel="noopener" href="https://primeng.org/">https://primeng.org/</a></li>
<li><strong>Tailwind CSS æ–‡ä»¶</strong>ï¼š<a target="_blank" rel="noopener" href="https://tailwindcss.com/docs">https://tailwindcss.com/docs</a></li>
<li><strong>TypeScript æ‰‹å†Š</strong>ï¼š<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/">https://www.typescriptlang.org/docs/</a></li>
</ul>
<h3 id="ğŸŒ-ç¤¾ç¾¤è³‡æº"><a href="#ğŸŒ-ç¤¾ç¾¤è³‡æº" class="headerlink" title="ğŸŒ ç¤¾ç¾¤è³‡æº"></a>ğŸŒ ç¤¾ç¾¤è³‡æº</h3><ul>
<li><strong>Angular å°ç£ç¤¾ç¾¤</strong>ï¼š<a target="_blank" rel="noopener" href="https://www.facebook.com/groups/angular.tw">https://www.facebook.com/groups/angular.tw</a></li>
<li><strong>Angular Blog</strong>ï¼š<a target="_blank" rel="noopener" href="https://blog.angular.io/">https://blog.angular.io/</a></li>
<li><strong>NgConf å½±ç‰‡è³‡æº</strong>ï¼š<a target="_blank" rel="noopener" href="https://www.youtube.com/c/ngconf">https://www.youtube.com/c/ngconf</a></li>
</ul>
<h3 id="ğŸ“–-å»¶ä¼¸é–±è®€å»ºè­°"><a href="#ğŸ“–-å»¶ä¼¸é–±è®€å»ºè­°" class="headerlink" title="ğŸ“– å»¶ä¼¸é–±è®€å»ºè­°"></a>ğŸ“– å»¶ä¼¸é–±è®€å»ºè­°</h3><ol>
<li><strong>ã€ŠAngular ä¼æ¥­ç´šæ‡‰ç”¨é–‹ç™¼ã€‹</strong> - æ·±å…¥å­¸ç¿’ä¼æ¥­ç´šé–‹ç™¼æ¨¡å¼</li>
<li><strong>ã€ŠClean Architectureã€‹</strong> - Robert C. Martin çš„æ¶æ§‹è¨­è¨ˆæ€æƒ³</li>
<li><strong>ã€ŠRefactoringã€‹</strong> - Martin Fowler çš„é‡æ§‹æŠ€å·§</li>
<li><strong>ã€ŠYou Donâ€™t Know JSã€‹</strong> - æ·±å…¥ç†è§£ JavaScript æ ¸å¿ƒæ¦‚å¿µ</li>
</ol>
<h3 id="ğŸ”§-å•é¡Œæ’é™¤æŒ‡å—"><a href="#ğŸ”§-å•é¡Œæ’é™¤æŒ‡å—" class="headerlink" title="ğŸ”§ å•é¡Œæ’é™¤æŒ‡å—"></a>ğŸ”§ å•é¡Œæ’é™¤æŒ‡å—</h3><p><strong>å¸¸è¦‹åˆå§‹åŒ–å•é¡Œ</strong>ï¼š</p>
<ol>
<li><p><strong>Node.js ç‰ˆæœ¬ä¸ç›¸å®¹</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ nvm ç®¡ç† Node.js ç‰ˆæœ¬</span></span><br><span class="line">nvm install 18.19.0</span><br><span class="line">nvm use 18.19.0</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¥—ä»¶å®‰è£å¤±æ•—</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…é™¤ npm å¿«å–</span></span><br><span class="line">npm cache clean --force</span><br><span class="line"><span class="built_in">rm</span> -rf node_modules package-lock.json</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ESLint é…ç½®è¡çª</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°å®‰è£ ESLint ç›¸é—œå¥—ä»¶</span></span><br><span class="line">npm uninstall eslint @angular-eslint/*</span><br><span class="line">npm install -D eslint@latest @angular-eslint/eslint-plugin@latest</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="ğŸ”—-ç›¸é—œæ–‡ç« é€£çµ"><a href="#ğŸ”—-ç›¸é—œæ–‡ç« é€£çµ" class="headerlink" title="ğŸ”— ç›¸é—œæ–‡ç« é€£çµ"></a>ğŸ”— ç›¸é—œæ–‡ç« é€£çµ</h2><p>ç”±æ–¼é€™æ˜¯å°ˆæ¡ˆåˆå§‹åŒ–æŒ‡å—ï¼Œå»ºè­°å¾ŒçºŒé–±è®€ä»¥ä¸‹ä¸»é¡Œçš„æ·±å…¥æ–‡ç« ï¼š</p>
<h3 id="ğŸ“š-ç³»åˆ—æ–‡ç« å»ºè­°"><a href="#ğŸ“š-ç³»åˆ—æ–‡ç« å»ºè­°" class="headerlink" title="ğŸ“š ç³»åˆ—æ–‡ç« å»ºè­°"></a>ğŸ“š ç³»åˆ—æ–‡ç« å»ºè­°</h3><ul>
<li><strong>å¾ŒçºŒæ–‡ç« </strong>ï¼šAngular 19 åŠŸèƒ½æ¨¡çµ„é–‹ç™¼å¯¦æˆ°æŒ‡å— - åŸºæ–¼æœ¬æ¶æ§‹çš„åŠŸèƒ½é–‹ç™¼å¯¦ä½œ</li>
<li><strong>å¾ŒçºŒæ–‡ç« </strong>ï¼šPrimeNG + Tailwind CSS è¨­è¨ˆç³»çµ±å»ºç«‹æŒ‡å— - UI è¨­è¨ˆç³»çµ±çš„å®Œæ•´å¯¦ä½œ</li>
</ul>
<h3 id="ğŸ¯-ç›¸é—œä¸»é¡Œ"><a href="#ğŸ¯-ç›¸é—œä¸»é¡Œ" class="headerlink" title="ğŸ¯ ç›¸é—œä¸»é¡Œ"></a>ğŸ¯ ç›¸é—œä¸»é¡Œ</h3><ul>
<li><strong>ä¸¦è¡Œæ–‡ç« </strong>ï¼šVue 3 ä¼æ¥­ç´šå°ˆæ¡ˆæ¶æ§‹æŒ‡å— - ä¸åŒæ¡†æ¶çš„æ¶æ§‹å°æ¯”</li>
<li><strong>å°æ¯”æ–‡ç« </strong>ï¼šReact 18 ç¾ä»£åŒ–é–‹ç™¼æ¶æ§‹ - ä¸»æµå‰ç«¯æ¡†æ¶æ¯”è¼ƒåˆ†æ</li>
</ul>
<h3 id="ğŸ“‹-å»¶ä¼¸é–±è®€"><a href="#ğŸ“‹-å»¶ä¼¸é–±è®€" class="headerlink" title="ğŸ“‹ å»¶ä¼¸é–±è®€"></a>ğŸ“‹ å»¶ä¼¸é–±è®€</h3><ul>
<li><strong>æ·±å…¥ç ”ç©¶</strong>ï¼šAngular æ•ˆèƒ½å„ªåŒ–é€²éšæŠ€å·§ - æ›´æ·±å…¥çš„æ•ˆèƒ½èª¿å„ªç­–ç•¥</li>
<li><strong>å¯¦è¸æ¡ˆä¾‹</strong>ï¼šä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆ CI&#x2F;CD å¯¦æˆ° - å®Œæ•´çš„éƒ¨ç½²ç®¡é“å»ºç«‹</li>
</ul>
<hr>
<p><strong>ä½œè€…è³‡è¨Š</strong>ï¼š<br><em>æœ¬æ–‡ç”±å‰ç«¯æ¶æ§‹å°ˆå®¶æ’°å¯«ï¼ŒåŸºæ–¼å¤šå¹´ä¼æ¥­ç´š Angular å°ˆæ¡ˆé–‹ç™¼ç¶“é©—æ•´ç†è€Œæˆã€‚</em></p>
<p><strong>ç‰ˆæœ¬è³‡è¨Š</strong>ï¼š<br><em>ç‰ˆæœ¬ v1.0 | ç™¼å¸ƒæ—¥æœŸï¼š2025å¹´6æœˆ29æ—¥ | åŸºæ–¼ Angular 19.2.2</em> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-enterprise-project-initialization-guide/" data-id="cmg51yfqc0000anmz87ja7q47" data-title="Angular 19 ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Clean-Architecture/" rel="tag">Clean Architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Enterprise-Architecture/" rel="tag">Enterprise Architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Feature-Modules/" rel="tag">Feature Modules</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Frontend-Initialization/" rel="tag">Frontend Initialization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PrimeNG/" rel="tag">PrimeNG</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Project-Architecture/" rel="tag">Project Architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Project-Setup/" rel="tag">Project Setup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Signals/" rel="tag">Signals</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Standalone-Components/" rel="tag">Standalone Components</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tailwind-CSS/" rel="tag">Tailwind CSS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ssr-transloco-troubleshooting-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-ssr-transloco-troubleshooting-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T09:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-ssr-transloco-troubleshooting-guide/">Angular SSR + Transloco æ•…éšœæ’é™¤èˆ‡é™¤éŒ¯å®Œæ•´æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>NullInjectorError æ ¹å› </strong>ï¼š90% ç”±é…ç½®åˆä½µå¤±æ•—æˆ– Token ç¼ºå¤±é€ æˆï¼Œé‡é»æª¢æŸ¥ server config</li>
<li><strong>SSR Loader é™¤éŒ¯</strong>ï¼šé€é console log è¿½è¹¤è¼‰å…¥æµç¨‹ï¼Œç¢ºèªåˆå§‹åŒ–å’Œæª”æ¡ˆè®€å–ç‹€æ…‹</li>
<li><strong>è·¯å¾‘å•é¡Œè¨ºæ–·</strong>ï¼šå°ˆæ¡ˆåç¨±ä¸ä¸€è‡´æ˜¯æœ€å¸¸è¦‹é™·é˜±ï¼Œå¿…é ˆæª¢æŸ¥å»ºç½®è¼¸å‡ºç›®éŒ„</li>
<li><strong>ç’°å¢ƒå·®ç•°è™•ç†</strong>ï¼šé–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒçš„ä¸åŒé…ç½®éœ€æ±‚å’Œè§£æ±ºæ–¹æ¡ˆ</li>
<li><strong>ç³»çµ±æ€§é™¤éŒ¯æ³•</strong>ï¼šåˆ†å±¤æª¢æŸ¥å¾é…ç½®â†’å»ºç½®â†’é‹è¡Œï¼Œå¿«é€Ÿå®šä½å•é¡Œæ ¹æº</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æŒ‡å—å°ˆæ³¨æ–¼ Angular SSR + Transloco çš„æ•…éšœæ’é™¤ï¼Œæä¾›ç³»çµ±æ€§çš„é™¤éŒ¯æ–¹æ³•å’Œè§£æ±ºæ–¹æ¡ˆï¼š</p>
<ul>
<li>ğŸ” <strong>éŒ¯èª¤åˆ†æ</strong>ï¼šå¸¸è¦‹éŒ¯èª¤çš„æ ¹æœ¬åŸå› åˆ†æå’Œå¿«é€Ÿè¨ºæ–·</li>
<li>ğŸ› ï¸ <strong>é™¤éŒ¯æŠ€å·§</strong>ï¼šæœ‰æ•ˆçš„é™¤éŒ¯å·¥å…·å’Œæ–¹æ³•è«–</li>
<li>âš¡ <strong>å¿«é€Ÿä¿®å¾©</strong>ï¼šå¸¸è¦‹å•é¡Œçš„ç«‹å³è§£æ±ºæ–¹æ¡ˆ</li>
<li>ğŸš€ <strong>é é˜²æªæ–½</strong>ï¼šé¿å…å¸¸è¦‹é™·é˜±çš„æœ€ä½³å¯¦è¸</li>
<li>ğŸ“Š <strong>ç›£æ§ç­–ç•¥</strong>ï¼šç”Ÿç”¢ç’°å¢ƒçš„éŒ¯èª¤ç›£æ§å’Œè™•ç†</li>
</ul>
<h2 id="ğŸ—ï¸-æ•…éšœæ’é™¤æµç¨‹æ¶æ§‹"><a href="#ğŸ—ï¸-æ•…éšœæ’é™¤æµç¨‹æ¶æ§‹" class="headerlink" title="ğŸ—ï¸ æ•…éšœæ’é™¤æµç¨‹æ¶æ§‹"></a>ğŸ—ï¸ æ•…éšœæ’é™¤æµç¨‹æ¶æ§‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ç™¼ç¾ SSR + Transloco å•é¡Œ] --&gt; B&#123;éŒ¯èª¤é¡å‹åˆ¤æ–·&#125;</span><br><span class="line">    </span><br><span class="line">    B --&gt;|NullInjectorError| C[Token æ³¨å…¥å•é¡Œ]</span><br><span class="line">    B --&gt;|HTTP 404| D[æª”æ¡ˆè¼‰å…¥å•é¡Œ]</span><br><span class="line">    B --&gt;|ç¿»è­¯å…§å®¹éŒ¯èª¤| E[èªç³»æª”æ¡ˆå•é¡Œ]</span><br><span class="line">    B --&gt;|SSR å•Ÿå‹•å¤±æ•—| F[é…ç½®å•é¡Œ]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[æª¢æŸ¥ server config åˆä½µ]</span><br><span class="line">    C --&gt; C2[é©—è­‰ TRANSLOCO_LOADER token]</span><br><span class="line">    </span><br><span class="line">    D --&gt; D1[æª¢æŸ¥å°ˆæ¡ˆåç¨±ä¸€è‡´æ€§]</span><br><span class="line">    D --&gt; D2[é©—è­‰ assets é…ç½®]</span><br><span class="line">    </span><br><span class="line">    E --&gt; E1[æª¢æŸ¥ JSON æ ¼å¼]</span><br><span class="line">    E --&gt; E2[é©—è­‰èªç³»æª”æ¡ˆè·¯å¾‘]</span><br><span class="line">    </span><br><span class="line">    F --&gt; F1[æª¢æŸ¥ main.server.ts]</span><br><span class="line">    F --&gt; F2[é©—è­‰é…ç½®åˆä½µ]</span><br><span class="line">    </span><br><span class="line">    C1 --&gt; G[ä¿®å¾©ä¸¦æ¸¬è©¦]</span><br><span class="line">    C2 --&gt; G</span><br><span class="line">    D1 --&gt; G</span><br><span class="line">    D2 --&gt; G</span><br><span class="line">    E1 --&gt; G</span><br><span class="line">    E2 --&gt; G</span><br><span class="line">    F1 --&gt; G</span><br><span class="line">    F2 --&gt; G</span><br><span class="line">    </span><br><span class="line">    G --&gt; H&#123;å•é¡Œè§£æ±º?&#125;</span><br><span class="line">    H --&gt;|å¦| I[æ·±åº¦é™¤éŒ¯]</span><br><span class="line">    H --&gt;|æ˜¯| J[éƒ¨ç½²é©—è­‰]</span><br><span class="line">    </span><br><span class="line">    I --&gt; K[å•Ÿç”¨è©³ç´°æ—¥èªŒ]</span><br><span class="line">    K --&gt; L[åˆ†æéŒ¯èª¤å †ç–Š]</span><br><span class="line">    L --&gt; M[æŸ¥é–±æ–‡æª”]</span><br><span class="line">    M --&gt; G</span><br><span class="line">    </span><br><span class="line">    J --&gt; N[å®Œæˆä¿®å¾© âœ…]</span><br></pre></td></tr></table></figure>

<h1 id="Angular-SSR-Transloco-åœ‹éš›åŒ–å•é¡Œè¨ºæ–·èˆ‡å®Œæ•´è§£æ±ºæ–¹æ¡ˆ"><a href="#Angular-SSR-Transloco-åœ‹éš›åŒ–å•é¡Œè¨ºæ–·èˆ‡å®Œæ•´è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="Angular SSR + Transloco åœ‹éš›åŒ–å•é¡Œè¨ºæ–·èˆ‡å®Œæ•´è§£æ±ºæ–¹æ¡ˆ"></a>Angular SSR + Transloco åœ‹éš›åŒ–å•é¡Œè¨ºæ–·èˆ‡å®Œæ•´è§£æ±ºæ–¹æ¡ˆ</h1><h2 id="ğŸ“–-å•é¡ŒèƒŒæ™¯èˆ‡åˆå§‹ç—‡ç‹€"><a href="#ğŸ“–-å•é¡ŒèƒŒæ™¯èˆ‡åˆå§‹ç—‡ç‹€" class="headerlink" title="ğŸ“– å•é¡ŒèƒŒæ™¯èˆ‡åˆå§‹ç—‡ç‹€"></a>ğŸ“– <strong>å•é¡ŒèƒŒæ™¯èˆ‡åˆå§‹ç—‡ç‹€</strong></h2><p>åœ¨å¯¦æ–½ Angular å‰ç«¯å°ˆæ¡ˆçš„ SSR (Server-Side Rendering) å’Œåœ‹éš›åŒ–åŠŸèƒ½æ™‚ï¼Œé‡åˆ°äº†ä¸€å€‹çœ‹ä¼¼ç°¡å–®ä½†å¯¦éš›è¤‡é›œçš„å•é¡Œï¼š</p>
<h3 id="åˆå§‹ç—‡ç‹€"><a href="#åˆå§‹ç—‡ç‹€" class="headerlink" title="åˆå§‹ç—‡ç‹€"></a><strong>åˆå§‹ç—‡ç‹€</strong></h3><ol>
<li>SSR ç’°å¢ƒä¸­å­˜åœ¨ TypeScript éŒ¯èª¤</li>
<li>ç„¡æ³•çœ‹åˆ° SSR Transloco çš„ log è¼¸å‡º</li>
<li>ä¸ç¢ºå®šèªç³»æª”æ¡ˆæ˜¯å¦åœ¨ SSR éšæ®µæ­£ç¢ºè¼‰å…¥</li>
</ol>
<h3 id="æŠ€è¡“ç’°å¢ƒ"><a href="#æŠ€è¡“ç’°å¢ƒ" class="headerlink" title="æŠ€è¡“ç’°å¢ƒ"></a><strong>æŠ€è¡“ç’°å¢ƒ</strong></h3><ul>
<li>Angular 19.2.14</li>
<li>Transloco (@jsverse&#x2F;transloco)</li>
<li>SSR + é æ¸²æŸ“ (Prerendered 5 static routes)</li>
<li>Node.js v23.10.0</li>
<li>TypeScript</li>
</ul>
<h2 id="ğŸ”-è¨ºæ–·éç¨‹ï¼šå¾è¡¨è±¡åˆ°æ ¹å› "><a href="#ğŸ”-è¨ºæ–·éç¨‹ï¼šå¾è¡¨è±¡åˆ°æ ¹å› " class="headerlink" title="ğŸ” è¨ºæ–·éç¨‹ï¼šå¾è¡¨è±¡åˆ°æ ¹å› "></a>ğŸ” <strong>è¨ºæ–·éç¨‹ï¼šå¾è¡¨è±¡åˆ°æ ¹å› </strong></h2><h3 id="ç¬¬ä¸€éšæ®µï¼šè¡¨é¢å•é¡Œä¿®å¾©"><a href="#ç¬¬ä¸€éšæ®µï¼šè¡¨é¢å•é¡Œä¿®å¾©" class="headerlink" title="ç¬¬ä¸€éšæ®µï¼šè¡¨é¢å•é¡Œä¿®å¾©"></a><strong>ç¬¬ä¸€éšæ®µï¼šè¡¨é¢å•é¡Œä¿®å¾©</strong></h3><p><strong>èª¤åˆ¤</strong>ï¼šä»¥ç‚ºåªæ˜¯ç°¡å–®çš„ TypeScript é¡å‹æ¨™è¨»å•é¡Œ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ åŸå§‹å•é¡Œä»£ç¢¼</span></span><br><span class="line"><span class="title function_">getTranslation</span>(<span class="params"><span class="attr">lang</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="comment">// ç¼ºå°‘è¿”å›é¡å‹æ¨™è¨»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… ä¿®æ­£å¾Œ</span></span><br><span class="line"><span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ äº†æ˜ç¢ºçš„è¿”å›é¡å‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>çµæœ</strong>ï¼šTypeScript éŒ¯èª¤è§£æ±ºï¼Œä½†æ ¸å¿ƒå•é¡Œä¾ç„¶å­˜åœ¨ã€‚</p>
<h3 id="ç¬¬äºŒéšæ®µï¼šLog-è¼¸å‡ºå•é¡Œ"><a href="#ç¬¬äºŒéšæ®µï¼šLog-è¼¸å‡ºå•é¡Œ" class="headerlink" title="ç¬¬äºŒéšæ®µï¼šLog è¼¸å‡ºå•é¡Œ"></a><strong>ç¬¬äºŒéšæ®µï¼šLog è¼¸å‡ºå•é¡Œ</strong></h3><p><strong>ç™¼ç¾</strong>ï¼šç„¡æ³•çœ‹åˆ°ä»»ä½• SSR Transloco çš„ log è¼¸å‡º</p>
<p><strong>åˆæ­¥å˜—è©¦</strong>ï¼š</p>
<ul>
<li>æª¢æŸ¥ console.log æ˜¯å¦è¢«ç¦ç”¨</li>
<li>æª¢æŸ¥ Transloco çš„ prodMode è¨­ç½®</li>
<li>æ·»åŠ æ›´å¤š log èªå¥</li>
</ul>
<p><strong>éƒ¨åˆ†åŸå› </strong>ï¼š</p>
<ol>
<li>ç”Ÿç”¢ç’°å¢ƒ <code>console.log</code> è¢«é‡å¯«ç‚ºç©ºå‡½æ•¸</li>
<li>Transloco çš„ <code>prodMode: !isDevMode()</code> ç¦ç”¨äº†å…§éƒ¨ log</li>
</ol>
<h3 id="ç¬¬ä¸‰éšæ®µï¼šæ·±å…¥é…ç½®å•é¡Œ"><a href="#ç¬¬ä¸‰éšæ®µï¼šæ·±å…¥é…ç½®å•é¡Œ" class="headerlink" title="ç¬¬ä¸‰éšæ®µï¼šæ·±å…¥é…ç½®å•é¡Œ"></a><strong>ç¬¬ä¸‰éšæ®µï¼šæ·±å…¥é…ç½®å•é¡Œ</strong></h3><p><strong>ğŸ” é—œéµè¨ºæ–·æ€è·¯ï¼šè£œè¶³ç¼ºå¤±çš„ Injection Token</strong></p>
<p>ç•¶æ™‚æˆ‘å€‘æ¡ç”¨çš„æ­£ç¢ºä¿®å¾©æ–¹å‘æ˜¯ï¼š<strong>è­˜åˆ¥ä¸¦è£œè¶³ç¼ºå¤±çš„ injection token</strong></p>
<h4 id="A-éŒ¯èª¤è¨Šæ¯åˆ†æ"><a href="#A-éŒ¯èª¤è¨Šæ¯åˆ†æ" class="headerlink" title="A. éŒ¯èª¤è¨Šæ¯åˆ†æ"></a><strong>A. éŒ¯èª¤è¨Šæ¯åˆ†æ</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ERROR Error [NullInjectorError]: R3InjectorError(Standalone[_ComponentDemoComponent])[_TranslocoService -&gt; _TranslocoService -&gt; InjectionToken TRANSLOCO_TRANSPILER -&gt; InjectionToken TRANSLOCO_TRANSPILER]:</span><br><span class="line">  NullInjectorError: No provider <span class="keyword">for</span> InjectionToken TRANSLOCO_TRANSPILER!</span><br><span class="line">    at NullInjector.get (.../chunk-PXXRCHXC.js:13045:21)</span><br><span class="line">    at R3Injector.get (.../chunk-PXXRCHXC.js:13396:27)</span><br></pre></td></tr></table></figure>

<h4 id="B-å•é¡Œå®šä½æ€è·¯"><a href="#B-å•é¡Œå®šä½æ€è·¯" class="headerlink" title="B. å•é¡Œå®šä½æ€è·¯"></a><strong>B. å•é¡Œå®šä½æ€è·¯</strong></h4><ol>
<li><strong>è­˜åˆ¥ç¼ºå¤±çš„ Token</strong>ï¼š<code>TRANSLOCO_TRANSPILER</code> åœ¨ SSR ç’°å¢ƒä¸­æ‰¾ä¸åˆ°</li>
<li><strong>åˆ†æä¾è³´éˆ</strong>ï¼š<code>TranslocoService</code> â†’ <code>TRANSLOCO_TRANSPILER</code> token ç¼ºå¤±</li>
<li><strong>æª¢æŸ¥é…ç½®ä¾†æº</strong>ï¼š<code>main.server.ts</code> ä½¿ç”¨äº†å“ªå€‹é…ç½®æª”æ¡ˆï¼Ÿ</li>
<li><strong>è¿½è¹¤ Provider è¨»å†Š</strong>ï¼šserver config ä¸­æ˜¯å¦æœ‰ Transloco ç›¸é—œçš„å®Œæ•´ providerï¼Ÿ</li>
</ol>
<h4 id="C-ä¿®å¾©ç­–ç•¥ç¢ºå®š"><a href="#C-ä¿®å¾©ç­–ç•¥ç¢ºå®š" class="headerlink" title="C. ä¿®å¾©ç­–ç•¥ç¢ºå®š"></a><strong>C. ä¿®å¾©ç­–ç•¥ç¢ºå®š</strong></h4><p>âœ… <strong>è£œè¶³ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ç¢ºä¿ <code>main.server.ts</code> ä½¿ç”¨æ­£ç¢ºçš„ server config</li>
<li>åœ¨ <code>app.config.server.ts</code> ä¸­æä¾›å®Œæ•´çš„ Transloco providers</li>
<li>æª¢æŸ¥æ˜¯å¦éœ€è¦é¡å¤–çš„ <code>TRANSLOCO_TRANSPILER</code> å’Œ <code>TRANSLOCO_LOADER</code> é…ç½®</li>
<li>é¿å…ç€è¦½å™¨ç«¯å’Œæœå‹™å™¨ç«¯ provider è¡çª</li>
</ul>
<p><strong>é—œéµç™¼ç¾</strong>ï¼š<code>main.server.ts</code> é…ç½®éŒ¯èª¤</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ éŒ¯èª¤é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; config &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.config&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> server = <span class="title function_">createExpressServer</span>(config); <span class="comment">// ä½¿ç”¨éŒ¯èª¤çš„é…ç½®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¢ºé…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; config &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.config.server&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> server = <span class="title function_">createExpressServer</span>(config); <span class="comment">// ä½¿ç”¨æ­£ç¢ºçš„ server é…ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ ¹æœ¬åŸå› </strong>ï¼šæ²’æœ‰ä½¿ç”¨ <code>app.config.server.ts</code> å°è‡´ <code>TRANSLOCO_TRANSPILER</code> ç­‰ Transloco ç›¸é—œ tokens æœªè¢«è¨»å†Šï¼</p>
<h2 id="ğŸŒ€-å¯¦éš›è§£æ±ºéç¨‹ï¼šè¿·æƒ˜èˆ‡è©¦éŒ¯çš„å®Œæ•´æ­·ç¨‹"><a href="#ğŸŒ€-å¯¦éš›è§£æ±ºéç¨‹ï¼šè¿·æƒ˜èˆ‡è©¦éŒ¯çš„å®Œæ•´æ­·ç¨‹" class="headerlink" title="ğŸŒ€ å¯¦éš›è§£æ±ºéç¨‹ï¼šè¿·æƒ˜èˆ‡è©¦éŒ¯çš„å®Œæ•´æ­·ç¨‹"></a>ğŸŒ€ <strong>å¯¦éš›è§£æ±ºéç¨‹ï¼šè¿·æƒ˜èˆ‡è©¦éŒ¯çš„å®Œæ•´æ­·ç¨‹</strong></h2><p><strong>é€™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ† - å±•ç¤ºçœŸå¯¦çš„è§£æ±ºæ€è·¯æ¼”é€²ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„éŒ¯èª¤åˆ¤æ–·å’Œé™·é˜±ï¼</strong></p>
<h3 id="éšæ®µ-1ï¼šåˆå§‹-Token-å•é¡Œè§£æ±º-âœ…"><a href="#éšæ®µ-1ï¼šåˆå§‹-Token-å•é¡Œè§£æ±º-âœ…" class="headerlink" title="éšæ®µ 1ï¼šåˆå§‹ Token å•é¡Œè§£æ±º âœ…"></a><strong>éšæ®µ 1ï¼šåˆå§‹ Token å•é¡Œè§£æ±º</strong> âœ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR: No provider <span class="keyword">for</span> InjectionToken TRANSLOCO_TRANSPILER!</span><br></pre></td></tr></table></figure>

<p><strong>è¡Œå‹•</strong>ï¼šè£œè¶³ server configï¼Œç¢ºä¿ <code>main.server.ts</code> ä½¿ç”¨ <code>app.config.server.ts</code><br><strong>çµæœ</strong>ï¼šToken éŒ¯èª¤æ¶ˆå¤±ï¼Œä»¥ç‚ºå•é¡Œè§£æ±ºäº†</p>
<h3 id="éšæ®µ-2ï¼šç™¼ç¾æ–°å•é¡Œ-ğŸ˜•"><a href="#éšæ®µ-2ï¼šç™¼ç¾æ–°å•é¡Œ-ğŸ˜•" class="headerlink" title="éšæ®µ 2ï¼šç™¼ç¾æ–°å•é¡Œ ğŸ˜•"></a><strong>éšæ®µ 2ï¼šç™¼ç¾æ–°å•é¡Œ</strong> ğŸ˜•</h3><p><strong>æ–°ç—‡ç‹€</strong>ï¼šé é¢å¯ä»¥æ¸²æŸ“ï¼Œä½†æ˜¯ï¼š</p>
<ul>
<li>æ²’æœ‰çœ‹åˆ°ä»»ä½• SSR log è¼¸å‡º</li>
<li>ä¸ç¢ºå®šèªç³»æª”æ¡ˆæ˜¯å¦çœŸçš„åœ¨ SSR éšæ®µè¼‰å…¥</li>
<li>æ‡·ç–‘ SSR Transloco æ ¹æœ¬æ²’æœ‰å·¥ä½œ</li>
</ul>
<p><strong>åˆæ­¥åˆ¤æ–·</strong>ï¼šå¯èƒ½éœ€è¦å°ˆç”¨çš„ SSR Loader</p>
<h3 id="éšæ®µ-3ï¼šé™·å…¥-Loader-é…ç½®è¿·å®®-ğŸŒ€"><a href="#éšæ®µ-3ï¼šé™·å…¥-Loader-é…ç½®è¿·å®®-ğŸŒ€" class="headerlink" title="éšæ®µ 3ï¼šé™·å…¥ Loader é…ç½®è¿·å®® ğŸŒ€"></a><strong>éšæ®µ 3ï¼šé™·å…¥ Loader é…ç½®è¿·å®®</strong> ğŸŒ€</h3><p><strong>æˆ‘å€‘å¡åœ¨é€™è£¡å¾ˆä¹…ï¼åè¦†å˜—è©¦ä¸åŒçš„ Loader é…ç½®æ–¹å¼ï¼š</strong></p>
<h4 id="å˜—è©¦-Aï¼šåŸºæœ¬-SSR-Loader"><a href="#å˜—è©¦-Aï¼šåŸºæœ¬-SSR-Loader" class="headerlink" title="å˜—è©¦ Aï¼šåŸºæœ¬ SSR Loader"></a><strong>å˜—è©¦ Aï¼šåŸºæœ¬ SSR Loader</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‰µå»ºäº† TranslocoSSRLoaderï¼Œå¯¦ç¾æ–‡ä»¶ç³»çµ±è®€å–</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TranslocoSSRLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">    <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">        <span class="comment">// åŸºæœ¬æ–‡ä»¶è®€å–é‚è¼¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>çµæœ</strong>ï¼šé‚„æ˜¯æ²’æœ‰ log è¼¸å‡º</p>
<h4 id="å˜—è©¦-Bï¼šèª¿æ•´è·¯å¾‘ç­–ç•¥"><a href="#å˜—è©¦-Bï¼šèª¿æ•´è·¯å¾‘ç­–ç•¥" class="headerlink" title="å˜—è©¦ Bï¼šèª¿æ•´è·¯å¾‘ç­–ç•¥"></a><strong>å˜—è©¦ Bï¼šèª¿æ•´è·¯å¾‘ç­–ç•¥</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥ç‚ºæ˜¯è·¯å¾‘å•é¡Œï¼Œå˜—è©¦å¤šç¨®è·¯å¾‘é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> paths = [</span><br><span class="line">    <span class="string">&#x27;./assets/i18n/$&#123;lang&#125;.json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;./dist/assets/i18n/$&#123;lang&#125;.json&#x27;</span>,</span><br><span class="line">    <span class="comment">// ... å„ç¨®è·¯å¾‘çµ„åˆ</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><strong>çµæœ</strong>ï¼šé‚„æ˜¯æ²’æœ‰ log è¼¸å‡º</p>
<h4 id="å˜—è©¦-Cï¼šä¿®æ”¹-Provider-é…ç½®"><a href="#å˜—è©¦-Cï¼šä¿®æ”¹-Provider-é…ç½®" class="headerlink" title="å˜—è©¦ Cï¼šä¿®æ”¹ Provider é…ç½®"></a><strong>å˜—è©¦ Cï¼šä¿®æ”¹ Provider é…ç½®</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜—è©¦ä¸åŒçš„ provider è¨»å†Šæ–¹å¼</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_LOADER</span>,</span><br><span class="line">    <span class="attr">useClass</span>: <span class="title class_">TranslocoSSRLoader</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// vs</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_LOADER</span>,</span><br><span class="line">    <span class="attr">useFactory</span>: <span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">TranslocoSSRLoader</span>(),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>çµæœ</strong>ï¼šé‚„æ˜¯æ²’æœ‰ log è¼¸å‡ºï¼</p>
<h3 id="éšæ®µ-4ï¼šç›²ç›®æ¸¬è©¦éšæ®µ-ğŸ¤·â€â™‚ï¸"><a href="#éšæ®µ-4ï¼šç›²ç›®æ¸¬è©¦éšæ®µ-ğŸ¤·â€â™‚ï¸" class="headerlink" title="éšæ®µ 4ï¼šç›²ç›®æ¸¬è©¦éšæ®µ ğŸ¤·â€â™‚ï¸"></a><strong>éšæ®µ 4ï¼šç›²ç›®æ¸¬è©¦éšæ®µ</strong> ğŸ¤·â€â™‚ï¸</h3><p><strong>é€™æ™‚æˆ‘å€‘è®Šå¾—å¾ˆç›²ç›®ï¼Œä¸æ–·å˜—è©¦å„ç¨®é…ç½®ï¼š</strong></p>
<ul>
<li>èª¿æ•´ Loader å¯¦ç¾ç´°ç¯€</li>
<li>ä¿®æ”¹æ–‡ä»¶è·¯å¾‘ç­–ç•¥</li>
<li>å˜—è©¦ä¸åŒçš„ log è¼¸å‡ºæ–¹å¼</li>
<li>æª¢æŸ¥ TypeScript é…ç½®</li>
<li>æ‡·ç–‘ ES modules å•é¡Œ</li>
</ul>
<p><strong>æ ¸å¿ƒå›°æƒ‘</strong>ï¼šç‚ºä»€éº¼å‰µå»ºäº† SSR Loader ä½†å®Œå…¨æ²’æœ‰ä»»ä½• log è¼¸å‡ºï¼Ÿ</p>
<h3 id="éšæ®µ-5ï¼šç’°å¢ƒè¨­å®šæª¢è¨-ğŸ”"><a href="#éšæ®µ-5ï¼šç’°å¢ƒè¨­å®šæª¢è¨-ğŸ”" class="headerlink" title="éšæ®µ 5ï¼šç’°å¢ƒè¨­å®šæª¢è¨ ğŸ”"></a><strong>éšæ®µ 5ï¼šç’°å¢ƒè¨­å®šæª¢è¨</strong> ğŸ”</h3><p><strong>é–‹å§‹æ‡·ç–‘æ˜¯ç’°å¢ƒè¨­å®šå•é¡Œï¼š</strong></p>
<h4 id="æ‡·ç–‘-Aï¼šconsole-log-è¢«ç¦ç”¨"><a href="#æ‡·ç–‘-Aï¼šconsole-log-è¢«ç¦ç”¨" class="headerlink" title="æ‡·ç–‘ Aï¼šconsole.log è¢«ç¦ç”¨"></a><strong>æ‡·ç–‘ Aï¼šconsole.log è¢«ç¦ç”¨</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æª¢æŸ¥ç”Ÿç”¢ç’°å¢ƒé…ç½®</span></span><br><span class="line"><span class="keyword">if</span> (environment.<span class="property">production</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="property">log</span> = <span class="function">() =&gt;</span> &#123;&#125;; <span class="comment">// è¢«ç¦ç”¨äº†ï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ‡·ç–‘-Bï¼šTransloco-prodMode"><a href="#æ‡·ç–‘-Bï¼šTransloco-prodMode" class="headerlink" title="æ‡·ç–‘ Bï¼šTransloco prodMode"></a><strong>æ‡·ç–‘ Bï¼šTransloco prodMode</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æª¢æŸ¥ Transloco é…ç½®</span></span><br><span class="line"><span class="title function_">provideTransloco</span>(&#123;</span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">prodMode</span>: !<span class="title function_">isDevMode</span>(), <span class="comment">// é€™å€‹ç¦ç”¨äº† logï¼Ÿ</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="æ‡·ç–‘-Cï¼šå»ºç½®ç’°å¢ƒå•é¡Œ"><a href="#æ‡·ç–‘-Cï¼šå»ºç½®ç’°å¢ƒå•é¡Œ" class="headerlink" title="æ‡·ç–‘ Cï¼šå»ºç½®ç’°å¢ƒå•é¡Œ"></a><strong>æ‡·ç–‘ Cï¼šå»ºç½®ç’°å¢ƒå•é¡Œ</strong></h4><ul>
<li>æª¢æŸ¥ dist ç›®éŒ„çµæ§‹</li>
<li>ç¢ºèªèªç³»æª”æ¡ˆæ˜¯å¦æ­£ç¢ºè¤‡è£½</li>
<li>æ‡·ç–‘æ˜¯ SSR å»ºç½®é…ç½®å•é¡Œ</li>
</ul>
<p><strong>çµæœ</strong>ï¼šé€™äº›éƒ½ä¸æ˜¯æ ¹æœ¬åŸå› ï¼</p>
<h3 id="éšæ®µ-6ï¼šé—œéµçªç ´æ™‚åˆ»-ğŸ’¡"><a href="#éšæ®µ-6ï¼šé—œéµçªç ´æ™‚åˆ»-ğŸ’¡" class="headerlink" title="éšæ®µ 6ï¼šé—œéµçªç ´æ™‚åˆ» ğŸ’¡"></a><strong>éšæ®µ 6ï¼šé—œéµçªç ´æ™‚åˆ»</strong> ğŸ’¡</h3><p><strong>æœ€çµ‚ç™¼ç¾çœŸç›¸ï¼šSSR Loader æ ¹æœ¬æ²’æœ‰è¢«è¼‰å…¥ï¼</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æª¢æŸ¥å¯¦éš›é‹è¡Œæ™‚çš„ log</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸš€ TranslocoSSRLoader è¢«åˆå§‹åŒ–ï¼&#x27;</span>); <span class="comment">// é€™å€‹ log å¾ä¾†æ²’å‡ºç¾éï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é—œéµæ´å¯Ÿ</strong>ï¼šå¦‚æœ constructor çš„ log éƒ½æ²’å‡ºç¾ï¼Œèªªæ˜ SSR Loader æ ¹æœ¬æ²’æœ‰è¢«è¨»å†Šæˆ–è¼‰å…¥ï¼</p>
<p><strong>æ·±å…¥æª¢æŸ¥</strong>ï¼š</p>
<ol>
<li>æª¢æŸ¥ <code>main.server.ts</code> å¯¦éš›ä½¿ç”¨çš„é…ç½®</li>
<li>é©—è­‰ server config æ˜¯å¦çœŸçš„è¢«ä½¿ç”¨</li>
<li>ç¢ºèª <code>mergeApplicationConfig</code> æ˜¯å¦æ­£ç¢ºåˆä½µ</li>
</ol>
<p><strong>æœ€çµ‚ç™¼ç¾</strong>ï¼šé›–ç„¶æˆ‘å€‘ä¿®æ”¹äº† <code>app.config.server.ts</code>ï¼Œä½† <code>main.server.ts</code> å¯èƒ½é‚„æ˜¯æ²’æœ‰æ­£ç¢ºä½¿ç”¨é€™å€‹é…ç½®ï¼</p>
<h2 id="ğŸ¯-çœŸæ­£çš„å•é¡Œæ ¹æº"><a href="#ğŸ¯-çœŸæ­£çš„å•é¡Œæ ¹æº" class="headerlink" title="ğŸ¯ çœŸæ­£çš„å•é¡Œæ ¹æº"></a>ğŸ¯ <strong>çœŸæ­£çš„å•é¡Œæ ¹æº</strong></h2><p>ç¶“éæ·±å…¥åˆ†æï¼Œç™¼ç¾äº†ä¸‰å€‹å±¤æ¬¡çš„å•é¡Œï¼š</p>
<h3 id="1-é…ç½®å±¤æ¬¡å•é¡Œ"><a href="#1-é…ç½®å±¤æ¬¡å•é¡Œ" class="headerlink" title="1. é…ç½®å±¤æ¬¡å•é¡Œ"></a><strong>1. é…ç½®å±¤æ¬¡å•é¡Œ</strong></h3><ul>
<li><code>main.server.ts</code> æ²’æœ‰ä½¿ç”¨æ­£ç¢ºçš„ server é…ç½®</li>
<li>SSR å°ˆç”¨çš„ Transloco Loader æ²’æœ‰è¢«æ­£ç¢ºè¨»å†Š</li>
</ul>
<h3 id="2-å¯¦ç¾å±¤æ¬¡å•é¡Œ"><a href="#2-å¯¦ç¾å±¤æ¬¡å•é¡Œ" class="headerlink" title="2. å¯¦ç¾å±¤æ¬¡å•é¡Œ"></a><strong>2. å¯¦ç¾å±¤æ¬¡å•é¡Œ</strong></h3><ul>
<li>ç¼ºå°‘å°ˆç”¨çš„ SSR Loader å¯¦ç¾</li>
<li>è·¯å¾‘è§£ææ©Ÿåˆ¶ä¸å®Œå–„</li>
<li>ES modules ç’°å¢ƒä¸‹çš„ <code>__dirname</code> å•é¡Œ</li>
</ul>
<h3 id="3-èª¿è©¦å±¤æ¬¡å•é¡Œ"><a href="#3-èª¿è©¦å±¤æ¬¡å•é¡Œ" class="headerlink" title="3. èª¿è©¦å±¤æ¬¡å•é¡Œ"></a><strong>3. èª¿è©¦å±¤æ¬¡å•é¡Œ</strong></h3><ul>
<li>Log è¼¸å‡ºè¢«å¤šé‡ç¦ç”¨</li>
<li>ç¼ºå°‘è©³ç´°çš„è¼‰å…¥éç¨‹è¿½è¹¤</li>
</ul>
<h3 id="4-Injection-Token-å•é¡Œ-ğŸš¨"><a href="#4-Injection-Token-å•é¡Œ-ğŸš¨" class="headerlink" title="4. Injection Token å•é¡Œ ğŸš¨"></a><strong>4. Injection Token å•é¡Œ</strong> ğŸš¨</h3><p><strong>é€™æ˜¯æœ€åˆçš„æ ¹æœ¬éŒ¯èª¤ï¼</strong></p>
<ul>
<li>SSR ç’°å¢ƒä¸­æ‰¾ä¸åˆ° <code>TRANSLOCO_TRANSPILER</code> injection token</li>
<li>Server config ä¸­ç¼ºå°‘æ­£ç¢ºçš„ provider é…ç½®</li>
<li>Transloco æœå‹™ä¾è³´çš„ transpiler æœªåœ¨ SSR ç’°å¢ƒä¸­è¨»å†Š</li>
<li>ä¾è³´æ³¨å…¥è§£æå¤±æ•—</li>
</ul>
<p><strong>å¯¦éš›éŒ¯èª¤è¨Šæ¯</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ERROR Error [NullInjectorError]: R3InjectorError(Standalone[_ComponentDemoComponent])[_TranslocoService -&gt; _TranslocoService -&gt; InjectionToken TRANSLOCO_TRANSPILER -&gt; InjectionToken TRANSLOCO_TRANSPILER]:</span><br><span class="line">  NullInjectorError: No provider <span class="keyword">for</span> InjectionToken TRANSLOCO_TRANSPILER!</span><br><span class="line">    at NullInjector.get (/Users/user/projects/example-project/.angular/cache/19.2.15/example_project_frontend/vite/deps_ssr/chunk-PXXRCHXC.js:13045:21)</span><br><span class="line">    at R3Injector.get (/Users/user/projects/example-project/.angular/cache/19.2.15/example_project_frontend/vite/deps_ssr/chunk-PXXRCHXC.js:13396:27)</span><br></pre></td></tr></table></figure>

<h3 id="5-è³‡æºé…ç½®å•é¡Œ-âš ï¸"><a href="#5-è³‡æºé…ç½®å•é¡Œ-âš ï¸" class="headerlink" title="5. è³‡æºé…ç½®å•é¡Œ âš ï¸"></a><strong>5. è³‡æºé…ç½®å•é¡Œ</strong> âš ï¸</h3><p><strong>é€™æ˜¯ä¸€å€‹å¸¸è¢«å¿½ç•¥ä½†é—œéµçš„å•é¡Œï¼</strong></p>
<ul>
<li><code>angular.json</code> ä¸­ assets é…ç½®ç¼ºå¤±æˆ–éŒ¯èª¤</li>
<li>èªç³»æª”æ¡ˆè·¯å¾‘çµæ§‹ä¸æ­£ç¢º</li>
<li>å»ºç½®å¾Œè³‡æºç„¡æ³•æ­£ç¢ºè¤‡è£½åˆ°ç›®æ¨™ä½ç½®</li>
</ul>
<h2 id="ğŸ”§-å®Œæ•´è§£æ±ºæ–¹æ¡ˆ"><a href="#ğŸ”§-å®Œæ•´è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="ğŸ”§ å®Œæ•´è§£æ±ºæ–¹æ¡ˆ"></a>ğŸ”§ <strong>å®Œæ•´è§£æ±ºæ–¹æ¡ˆ</strong></h2><h3 id="æ­¥é©Ÿ-0ï¼šç¢ºä¿åŸºç¤è³‡æºé…ç½®æ­£ç¢º-âš ï¸"><a href="#æ­¥é©Ÿ-0ï¼šç¢ºä¿åŸºç¤è³‡æºé…ç½®æ­£ç¢º-âš ï¸" class="headerlink" title="æ­¥é©Ÿ 0ï¼šç¢ºä¿åŸºç¤è³‡æºé…ç½®æ­£ç¢º âš ï¸"></a><strong>æ­¥é©Ÿ 0ï¼šç¢ºä¿åŸºç¤è³‡æºé…ç½®æ­£ç¢º</strong> âš ï¸</h3><p><strong>é€™æ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥ä½†å¿…é ˆæ­£ç¢ºçš„åŸºç¤é…ç½®ï¼</strong></p>
<h4 id="A-æª”æ¡ˆçµæ§‹"><a href="#A-æª”æ¡ˆçµæ§‹" class="headerlink" title="A. æª”æ¡ˆçµæ§‹"></a><strong>A. æª”æ¡ˆçµæ§‹</strong></h4><p>ç¢ºä¿èªç³»æª”æ¡ˆæ­£ç¢ºæ”¾ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">â”œâ”€â”€ assets/</span><br><span class="line">â”‚   â””â”€â”€ i18n/</span><br><span class="line">â”‚       â”œâ”€â”€ en.json</span><br><span class="line">â”‚       â””â”€â”€ zh-tw.json</span><br><span class="line">â””â”€â”€ app/</span><br><span class="line">    â””â”€â”€ ...</span><br></pre></td></tr></table></figure>

<h4 id="B-angular-json-é…ç½®"><a href="#B-angular-json-é…ç½®" class="headerlink" title="B. angular.json é…ç½®"></a><strong>B. angular.json é…ç½®</strong></h4><p><strong>é—œéµé…ç½®</strong>ï¼šç¢ºä¿ <code>assets</code> æ­£ç¢ºè¨­å®šï¼Œå¦å‰‡èªç³»æª”æ¡ˆä¸æœƒè¢«è¤‡è£½åˆ°å»ºç½®è¼¸å‡ºï¼</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;projects&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;your-project&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;architect&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/assets&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/assets&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/assets&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/assets&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>é‡è¦èªªæ˜</strong>ï¼š</p>
<ul>
<li><code>&quot;input&quot;: &quot;src/assets&quot;</code> - æŒ‡å®šæºç›®éŒ„</li>
<li><code>&quot;output&quot;: &quot;/assets&quot;</code> - æŒ‡å®šè¼¸å‡ºè·¯å¾‘</li>
<li>é€™ç¢ºä¿ <code>src/assets/i18n/*.json</code> æœƒè¢«è¤‡è£½åˆ° <code>dist/your-project/browser/assets/i18n/*.json</code></li>
</ul>
<h4 id="C-èªç³»æª”æ¡ˆç¯„ä¾‹"><a href="#C-èªç³»æª”æ¡ˆç¯„ä¾‹" class="headerlink" title="C. èªç³»æª”æ¡ˆç¯„ä¾‹"></a><strong>C. èªç³»æª”æ¡ˆç¯„ä¾‹</strong></h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/assets/i18n/zh-tw.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;demo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Demo å±•ç¤ºä¸­å¿ƒ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;buttons&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;primary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸»è¦å‹•ä½œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;secondary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ¬¡è¦å‹•ä½œ&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// src/assets/i18n/en.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;demo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Demo Center&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;buttons&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;primary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Primary Action&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;secondary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Secondary Action&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-1ï¼šè§£æ±º-Injection-Token-å•é¡Œ-ğŸš¨"><a href="#æ­¥é©Ÿ-1ï¼šè§£æ±º-Injection-Token-å•é¡Œ-ğŸš¨" class="headerlink" title="æ­¥é©Ÿ 1ï¼šè§£æ±º Injection Token å•é¡Œ ğŸš¨"></a><strong>æ­¥é©Ÿ 1ï¼šè§£æ±º Injection Token å•é¡Œ</strong> ğŸš¨</h3><p><strong>æœ€é—œéµçš„ç¬¬ä¸€æ­¥ï¼šä¿®æ­£ main.server.ts å’Œ Server Config</strong></p>
<h4 id="A-ä¿®æ­£-main-server-ts"><a href="#A-ä¿®æ­£-main-server-ts" class="headerlink" title="A. ä¿®æ­£ main.server.ts"></a><strong>A. ä¿®æ­£ main.server.ts</strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main.server.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; bootstrapApplication &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./src/app/app.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; config &#125; <span class="keyword">from</span> <span class="string">&#x27;./src/app/app.config.server&#x27;</span>; <span class="comment">// âœ… é—œéµï¼šä½¿ç”¨ server é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">bootstrapApplication</span>(<span class="title class_">AppComponent</span>, config);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>âŒ éŒ¯èª¤ç¯„ä¾‹</strong> (æœƒå°è‡´ injection token éŒ¯èª¤)ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ ç›´æ¥ä½¿ç”¨ç€è¦½å™¨ç«¯é…ç½®ï¼Œæœƒæ‰¾ä¸åˆ° SSR Loader</span></span><br><span class="line"><span class="keyword">import</span> &#123; config &#125; <span class="keyword">from</span> <span class="string">&#x27;./src/app/app.config&#x27;</span>; <span class="comment">// éŒ¯èª¤ï¼</span></span><br></pre></td></tr></table></figure>

<h4 id="B-æ­£ç¢ºé…ç½®-Server-Config"><a href="#B-æ­£ç¢ºé…ç½®-Server-Config" class="headerlink" title="B. æ­£ç¢ºé…ç½® Server Config"></a><strong>B. æ­£ç¢ºé…ç½® Server Config</strong></h4><p><strong>é—œéµç†è§£</strong>ï¼š<code>TRANSLOCO_TRANSPILER</code> éŒ¯èª¤çš„æ ¹æœ¬åŸå› æ˜¯ SSR ç’°å¢ƒç¼ºå°‘å®Œæ•´çš„ Transloco providersã€‚ç€è¦½å™¨ç«¯çš„ <code>provideTransloco()</code> æœƒè‡ªå‹•æä¾›åŒ…æ‹¬ <code>TRANSLOCO_TRANSPILER</code> åœ¨å…§çš„æ‰€æœ‰å¿…è¦ tokensï¼Œä½† SSR ç’°å¢ƒéœ€è¦æ­£ç¢ºåˆä½µé€™äº›é…ç½®ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/app.config.server.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span>, mergeApplicationConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">TRANSLOCO_LOADER</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.config&#x27;</span>; <span class="comment">// âœ… é—œéµï¼šåˆä½µåŒ…å« provideTransloco() çš„é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; serverRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes.server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoSSRLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./core/services/transloco-ssr.loader&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">        <span class="title function_">provideServerRouting</span>(serverRoutes),</span><br><span class="line">        <span class="comment">// âœ… ç‚º SSR ç’°å¢ƒæä¾›å°ˆç”¨çš„ loaderï¼ˆæœƒè¦†è“‹ç€è¦½å™¨ç«¯çš„ loaderï¼‰</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_LOADER</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">TranslocoSSRLoader</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… é—œéµï¼šåˆä½µé…ç½®ç¢ºä¿æ‰€æœ‰ Transloco providersï¼ˆåŒ…æ‹¬ TRANSLOCO_TRANSPILERï¼‰éƒ½è¢«åŒ…å«</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<p><strong>âŒ å¸¸è¦‹éŒ¯èª¤ç¯„ä¾‹</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ ç¼ºå°‘ TRANSLOCO_LOADER provider</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">        <span class="comment">// ç¼ºå°‘ TRANSLOCO_LOADER providerï¼</span></span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ ä½¿ç”¨éŒ¯èª¤çš„ loader</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_LOADER</span>,</span><br><span class="line">    <span class="attr">useClass</span>: <span class="title class_">TranslocoBrowserLoader</span>, <span class="comment">// éŒ¯èª¤ï¼SSR ä¸èƒ½ä½¿ç”¨ HTTP loader</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-2ï¼šå‰µå»ºå°ˆç”¨çš„-SSR-Transloco-Loader"><a href="#æ­¥é©Ÿ-2ï¼šå‰µå»ºå°ˆç”¨çš„-SSR-Transloco-Loader" class="headerlink" title="æ­¥é©Ÿ 2ï¼šå‰µå»ºå°ˆç”¨çš„ SSR Transloco Loader"></a><strong>æ­¥é©Ÿ 2ï¼šå‰µå»ºå°ˆç”¨çš„ SSR Transloco Loader</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/core/services/transloco-ssr.loader.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Translation</span>, <span class="title class_">TranslocoLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TranslocoSSRLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// é›™é‡è¼¸å‡ºç¢ºä¿ log å¯è¦‹</span></span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&#x27;ğŸš€ [SSR Transloco] TranslocoSSRLoader è¢«åˆå§‹åŒ–ï¼\n&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸš€ [SSR Transloco] ä¼ºæœå™¨ç«¯ Transloco Loader å·²å°±ç·’&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">        <span class="comment">// å¤šè·¯å¾‘å˜—è©¦æ©Ÿåˆ¶</span></span><br><span class="line">        <span class="keyword">const</span> possiblePaths = [</span><br><span class="line">            path.<span class="title function_">join</span>(</span><br><span class="line">                process.<span class="title function_">cwd</span>(),</span><br><span class="line">                <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;example_project_frontend&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;browser&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;assets&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;i18n&#x27;</span>,</span><br><span class="line">                <span class="string">`<span class="subst">$&#123;lang&#125;</span>.json`</span></span><br><span class="line">            ),</span><br><span class="line">            path.<span class="title function_">join</span>(process.<span class="title function_">cwd</span>(), <span class="string">&#x27;browser&#x27;</span>, <span class="string">&#x27;assets&#x27;</span>, <span class="string">&#x27;i18n&#x27;</span>, <span class="string">`<span class="subst">$&#123;lang&#125;</span>.json`</span>),</span><br><span class="line">            path.<span class="title function_">join</span>(process.<span class="title function_">cwd</span>(), <span class="string">&#x27;assets&#x27;</span>, <span class="string">&#x27;i18n&#x27;</span>, <span class="string">`<span class="subst">$&#123;lang&#125;</span>.json`</span>),</span><br><span class="line">            <span class="string">`./assets/i18n/<span class="subst">$&#123;lang&#125;</span>.json`</span>,</span><br><span class="line">            <span class="string">`./browser/assets/i18n/<span class="subst">$&#123;lang&#125;</span>.json`</span>,</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è©³ç´°çš„è¼‰å…¥éç¨‹è¿½è¹¤</span></span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸš€ å˜—è©¦è¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>\n`</span>);</span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸ“‚ å·¥ä½œç›®éŒ„: <span class="subst">$&#123;process.cwd()&#125;</span>\n`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> tryPath = <span class="title function_">async</span> (<span class="attr">pathIndex</span>: <span class="built_in">number</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt; =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (pathIndex &gt;= possiblePaths.<span class="property">length</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`ç„¡æ³•åœ¨ä»»ä½•è·¯å¾‘ä¸­æ‰¾åˆ°èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> filePath = possiblePaths[pathIndex];</span><br><span class="line">            process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸ“ å˜—è©¦è·¯å¾‘ <span class="subst">$&#123;pathIndex + <span class="number">1</span>&#125;</span>: <span class="subst">$&#123;filePath&#125;</span>\n`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                fs.<span class="title function_">readFile</span>(filePath, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="built_in">any</span>, <span class="attr">data</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (pathIndex &lt; possiblePaths.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">                            process.<span class="property">stdout</span>.<span class="title function_">write</span>(</span><br><span class="line">                                <span class="string">`[SSR Transloco] âš ï¸ è·¯å¾‘ <span class="subst">$&#123;pathIndex + <span class="number">1</span>&#125;</span> å¤±æ•—ï¼Œå˜—è©¦ä¸‹ä¸€å€‹\n`</span></span><br><span class="line">                            );</span><br><span class="line">                            <span class="title function_">tryPath</span>(pathIndex + <span class="number">1</span>)</span><br><span class="line">                                .<span class="title function_">then</span>(resolve)</span><br><span class="line">                                .<span class="title function_">catch</span>(reject);</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        process.<span class="property">stderr</span>.<span class="title function_">write</span>(</span><br><span class="line">                            <span class="string">`[SSR Transloco] âŒ è®€å–èªç³»æª”å¤±æ•—: <span class="subst">$&#123;lang&#125;</span> - <span class="subst">$&#123;err.message&#125;</span>\n`</span></span><br><span class="line">                        );</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_">reject</span>(err);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="keyword">const</span> translation = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data) <span class="keyword">as</span> <span class="title class_">Translation</span>;</span><br><span class="line">                        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] âœ… æˆåŠŸè¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>\n`</span>);</span><br><span class="line">                        <span class="title function_">resolve</span>(translation);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (parseErr) &#123;</span><br><span class="line">                        process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] âŒ JSON è§£æå¤±æ•—: <span class="subst">$&#123;lang&#125;</span>\n`</span>);</span><br><span class="line">                        <span class="title function_">reject</span>(parseErr);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">tryPath</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-3ï¼šç€è¦½å™¨ç«¯-Loader-é…ç½®"><a href="#æ­¥é©Ÿ-3ï¼šç€è¦½å™¨ç«¯-Loader-é…ç½®" class="headerlink" title="æ­¥é©Ÿ 3ï¼šç€è¦½å™¨ç«¯ Loader é…ç½®"></a><strong>æ­¥é©Ÿ 3ï¼šç€è¦½å™¨ç«¯ Loader é…ç½®</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/core/services/transloco.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpClient</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject, <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Translation</span>, <span class="title class_">TranslocoLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Observable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; catchError, tap &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs/operators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TranslocoBrowserLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> http = <span class="title function_">inject</span>(<span class="title class_">HttpClient</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ [Browser Transloco] TranslocoBrowserLoader è¢«åˆå§‹åŒ–ï¼&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Observable</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] ğŸŒ HTTPè¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="property">get</span>&lt;<span class="title class_">Translation</span>&gt;(<span class="string">`/assets/i18n/<span class="subst">$&#123;lang&#125;</span>.json`</span>).<span class="title function_">pipe</span>(</span><br><span class="line">            <span class="title function_">tap</span>(<span class="function">(<span class="params"><span class="attr">translation</span>: <span class="title class_">Translation</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] âœ… HTTPè¼‰å…¥æˆåŠŸ: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] è¼‰å…¥çš„ keys:`</span>, <span class="title class_">Object</span>.<span class="title function_">keys</span>(translation));</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title function_">catchError</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[Browser Transloco] âŒ HTTPè¼‰å…¥å¤±æ•—: <span class="subst">$&#123;lang&#125;</span>`</span>, err);</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-4ï¼šåŸºç¤æ‡‰ç”¨é…ç½®"><a href="#æ­¥é©Ÿ-4ï¼šåŸºç¤æ‡‰ç”¨é…ç½®" class="headerlink" title="æ­¥é©Ÿ 4ï¼šåŸºç¤æ‡‰ç”¨é…ç½®"></a><strong>æ­¥é©Ÿ 4ï¼šåŸºç¤æ‡‰ç”¨é…ç½®</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/app.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span>, isDevMode &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideHttpClient, withFetch &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideTransloco, <span class="variable constant_">TRANSLOCO_LOADER</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoBrowserLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./core/services/transloco.config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">provideHttpClient</span>(<span class="title function_">withFetch</span>()),</span><br><span class="line">        <span class="title function_">provideTransloco</span>(&#123;</span><br><span class="line">            <span class="attr">config</span>: &#123;</span><br><span class="line">                <span class="attr">availableLangs</span>: [<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;zh-tw&#x27;</span>],</span><br><span class="line">                <span class="attr">defaultLang</span>: <span class="string">&#x27;zh-tw&#x27;</span>,</span><br><span class="line">                <span class="comment">// é–‹ç™¼æ¨¡å¼ä¸‹å•Ÿç”¨ debugï¼Œç”Ÿç”¢æ¨¡å¼ä¸‹é—œé–‰</span></span><br><span class="line">                <span class="attr">prodMode</span>: !<span class="title function_">isDevMode</span>(),</span><br><span class="line">                <span class="attr">fallbackLang</span>: <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">                <span class="attr">reRenderOnLangChange</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">loader</span>: <span class="title class_">TranslocoBrowserLoader</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// ç€è¦½å™¨ç’°å¢ƒä½¿ç”¨ HTTP loader</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_LOADER</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">TranslocoBrowserLoader</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“Š-æ¸¬è©¦çµæœèˆ‡é©—è­‰"><a href="#ğŸ“Š-æ¸¬è©¦çµæœèˆ‡é©—è­‰" class="headerlink" title="ğŸ“Š æ¸¬è©¦çµæœèˆ‡é©—è­‰"></a>ğŸ“Š <strong>æ¸¬è©¦çµæœèˆ‡é©—è­‰</strong></h2><h3 id="å»ºç½®éšæ®µ-Log-è¼¸å‡º"><a href="#å»ºç½®éšæ®µ-Log-è¼¸å‡º" class="headerlink" title="å»ºç½®éšæ®µ Log è¼¸å‡º"></a><strong>å»ºç½®éšæ®µ Log è¼¸å‡º</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ğŸš€ [SSR Transloco] TranslocoSSRLoader è¢«åˆå§‹åŒ–ï¼</span><br><span class="line">ğŸš€ [SSR Transloco] ä¼ºæœå™¨ç«¯ Transloco Loader å·²å°±ç·’</span><br><span class="line">[SSR Transloco] ğŸš€ å˜—è©¦è¼‰å…¥èªç³»æª”: zh-tw</span><br><span class="line">[SSR Transloco] ğŸ“‚ å·¥ä½œç›®éŒ„: /path/to/project</span><br><span class="line">[SSR Transloco] ğŸ“ å˜—è©¦è·¯å¾‘ 1-5: [å¤šè·¯å¾‘å˜—è©¦æ©Ÿåˆ¶æ­£å¸¸é‹ä½œ]</span><br></pre></td></tr></table></figure>

<h3 id="é é¢ç¿»è­¯é©—è­‰"><a href="#é é¢ç¿»è­¯é©—è­‰" class="headerlink" title="é é¢ç¿»è­¯é©—è­‰"></a><strong>é é¢ç¿»è­¯é©—è­‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo å±•ç¤ºä¸­å¿ƒ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æŒ‰éˆ•å…ƒä»¶<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>ä¸»è¦å‹•ä½œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>æ¬¡è¦å‹•ä½œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”‘-é—œéµé…ç½®è¦é»"><a href="#ğŸ”‘-é—œéµé…ç½®è¦é»" class="headerlink" title="ğŸ”‘ é—œéµé…ç½®è¦é»"></a>ğŸ”‘ <strong>é—œéµé…ç½®è¦é»</strong></h2><h3 id="1-é›™-Loader-ç­–ç•¥"><a href="#1-é›™-Loader-ç­–ç•¥" class="headerlink" title="1. é›™ Loader ç­–ç•¥"></a><strong>1. é›™ Loader ç­–ç•¥</strong></h3><ul>
<li><strong>ç€è¦½å™¨ç«¯</strong>ï¼šä½¿ç”¨ HTTP è«‹æ±‚è¼‰å…¥èªç³»æª”</li>
<li><strong>SSR ç«¯</strong>ï¼šä½¿ç”¨æ–‡ä»¶ç³»çµ±ç›´æ¥è®€å–</li>
</ul>
<h3 id="2-è·¯å¾‘è§£æç­–ç•¥"><a href="#2-è·¯å¾‘è§£æç­–ç•¥" class="headerlink" title="2. è·¯å¾‘è§£æç­–ç•¥"></a><strong>2. è·¯å¾‘è§£æç­–ç•¥</strong></h3><ul>
<li>å¯¦ç¾å¤šè·¯å¾‘å˜—è©¦æ©Ÿåˆ¶</li>
<li>è€ƒæ…®å»ºç½®å¾Œçš„æª”æ¡ˆçµæ§‹</li>
<li>è™•ç† ES modules ç’°å¢ƒé™åˆ¶</li>
</ul>
<h3 id="3-Log-è¼¸å‡ºç­–ç•¥"><a href="#3-Log-è¼¸å‡ºç­–ç•¥" class="headerlink" title="3. Log è¼¸å‡ºç­–ç•¥"></a><strong>3. Log è¼¸å‡ºç­–ç•¥</strong></h3><ul>
<li>ä½¿ç”¨ <code>process.stdout.write</code> é¿å…è¢«ç¦ç”¨</li>
<li>é›™é‡è¼¸å‡ºç¢ºä¿å¯è¦‹æ€§</li>
<li>è©³ç´°çš„éç¨‹è¿½è¹¤</li>
</ul>
<h3 id="4-éŒ¯èª¤è™•ç†ç­–ç•¥"><a href="#4-éŒ¯èª¤è™•ç†ç­–ç•¥" class="headerlink" title="4. éŒ¯èª¤è™•ç†ç­–ç•¥"></a><strong>4. éŒ¯èª¤è™•ç†ç­–ç•¥</strong></h3><ul>
<li>Graceful fallback æ©Ÿåˆ¶</li>
<li>è©³ç´°çš„éŒ¯èª¤è¨Šæ¯</li>
<li>è·¯å¾‘å¤±æ•—æ™‚çš„è‡ªå‹•é‡è©¦</li>
</ul>
<h2 id="ğŸ’¡-æœ€ä½³å¯¦è¸ç¸½çµ"><a href="#ğŸ’¡-æœ€ä½³å¯¦è¸ç¸½çµ" class="headerlink" title="ğŸ’¡ æœ€ä½³å¯¦è¸ç¸½çµ"></a>ğŸ’¡ <strong>æœ€ä½³å¯¦è¸ç¸½çµ</strong></h2><h3 id="é…ç½®æª¢æŸ¥æ¸…å–®"><a href="#é…ç½®æª¢æŸ¥æ¸…å–®" class="headerlink" title="é…ç½®æª¢æŸ¥æ¸…å–®"></a><strong>é…ç½®æª¢æŸ¥æ¸…å–®</strong></h3><h4 id="ğŸ—ï¸-åŸºç¤é…ç½®-æœ€é‡è¦"><a href="#ğŸ—ï¸-åŸºç¤é…ç½®-æœ€é‡è¦" class="headerlink" title="ğŸ—ï¸ åŸºç¤é…ç½® (æœ€é‡è¦)"></a><strong>ğŸ—ï¸ åŸºç¤é…ç½® (æœ€é‡è¦)</strong></h4><ul>
<li>âœ… <strong>æª”æ¡ˆçµæ§‹</strong>ï¼š<code>src/assets/i18n/*.json</code> æ­£ç¢ºæ”¾ç½®</li>
<li>âœ… <strong>angular.json</strong>ï¼šassets é…ç½®æ­£ç¢ºè¨­å®š (<code>src/assets</code> â†’ <code>/assets</code>)</li>
<li>âœ… <strong>èªç³»æª”æ¡ˆ</strong>ï¼šJSON æ ¼å¼æ­£ç¢ºï¼Œç„¡èªæ³•éŒ¯èª¤</li>
</ul>
<h4 id="ğŸš¨-Injection-Token-é…ç½®"><a href="#ğŸš¨-Injection-Token-é…ç½®" class="headerlink" title="ğŸš¨ Injection Token é…ç½®"></a><strong>ğŸš¨ Injection Token é…ç½®</strong></h4><ul>
<li>âœ… <strong>main.server.ts</strong>ï¼šä½¿ç”¨æ­£ç¢ºçš„ server config (<code>app.config.server.ts</code>)</li>
<li>âœ… <strong>Server config</strong>ï¼šæ­£ç¢ºåˆä½µåŒ…å« <code>provideTransloco()</code> çš„é…ç½®ï¼Œç¢ºä¿ <code>TRANSLOCO_TRANSPILER</code> ç­‰ tokens è¢«æä¾›</li>
<li>âœ… <strong>é…ç½®åˆä½µ</strong>ï¼šä½¿ç”¨ <code>mergeApplicationConfig(appConfig, serverConfig)</code> ç¢ºä¿å®Œæ•´çš„ provider éˆ</li>
<li>âœ… <strong>SSR Loader</strong>ï¼šè¦†è“‹ç€è¦½å™¨ç«¯çš„ <code>TRANSLOCO_LOADER</code> ä»¥æ”¯æ´æ–‡ä»¶ç³»çµ±è®€å–</li>
</ul>
<h4 id="ğŸ”§-SSR-é…ç½®"><a href="#ğŸ”§-SSR-é…ç½®" class="headerlink" title="ğŸ”§ SSR é…ç½®"></a><strong>ğŸ”§ SSR é…ç½®</strong></h4><ul>
<li>âœ… å¯¦ç¾é›™ Loader ç­–ç•¥ (SSR + Browser)</li>
<li>âœ… æ·»åŠ è©³ç´°çš„ log è¿½è¹¤</li>
<li>âœ… å¯¦ç¾å¤šè·¯å¾‘å˜—è©¦æ©Ÿåˆ¶</li>
<li>âœ… æ­£ç¢ºçš„æ–‡ä»¶ç³»çµ±è®€å–é‚è¼¯</li>
</ul>
<h4 id="ğŸŒ-é‹è¡Œæ™‚é©—è­‰"><a href="#ğŸŒ-é‹è¡Œæ™‚é©—è­‰" class="headerlink" title="ğŸŒ é‹è¡Œæ™‚é©—è­‰"></a><strong>ğŸŒ é‹è¡Œæ™‚é©—è­‰</strong></h4><ul>
<li>âœ… å»ºç½®å¾Œæª”æ¡ˆå­˜åœ¨ï¼š<code>dist/project/browser/assets/i18n/*.json</code></li>
<li>âœ… SSR log æ­£å¸¸è¼¸å‡º</li>
<li>âœ… é é¢ç¿»è­¯å…§å®¹æ­£ç¢ºé¡¯ç¤º</li>
</ul>
<h3 id="èª¿è©¦æŠ€å·§"><a href="#èª¿è©¦æŠ€å·§" class="headerlink" title="èª¿è©¦æŠ€å·§"></a><strong>èª¿è©¦æŠ€å·§</strong></h3><h4 id="ğŸš¨-Injection-Token-å•é¡Œè¨ºæ–·"><a href="#ğŸš¨-Injection-Token-å•é¡Œè¨ºæ–·" class="headerlink" title="ğŸš¨ Injection Token å•é¡Œè¨ºæ–·"></a><strong>ğŸš¨ Injection Token å•é¡Œè¨ºæ–·</strong></h4><ol>
<li><strong>éŒ¯èª¤è¨Šæ¯é—œéµå­—</strong>ï¼šç•™æ„ <code>No provider for InjectionToken TRANSLOCO_TRANSPILER</code> å’Œ <code>NullInjectorError</code></li>
<li><strong>é…ç½®æª”æ¡ˆæª¢æŸ¥</strong>ï¼šç¢ºèª <code>main.server.ts</code> ä½¿ç”¨çš„æ˜¯å“ªå€‹é…ç½®æª”æ¡ˆ</li>
<li><strong>Provider è¿½è¹¤</strong>ï¼šæª¢æŸ¥ server config ä¸­æ˜¯å¦æœ‰ç›¸æ‡‰çš„ token provider</li>
<li><strong>ç’°å¢ƒå·®ç•°åˆ†æ</strong>ï¼šæ¯”è¼ƒç€è¦½å™¨ç«¯å’Œ SSR ç«¯çš„ provider é…ç½®å·®ç•°</li>
</ol>
<h4 id="ğŸŒ€-é¿å…é™·å…¥-Loader-é…ç½®è¿·å®®"><a href="#ğŸŒ€-é¿å…é™·å…¥-Loader-é…ç½®è¿·å®®" class="headerlink" title="ğŸŒ€ é¿å…é™·å…¥ Loader é…ç½®è¿·å®®"></a><strong>ğŸŒ€ é¿å…é™·å…¥ Loader é…ç½®è¿·å®®</strong></h4><p><strong>é—œéµæª¢æŸ¥é †åº</strong> - æŒ‰é€™å€‹é †åºé€²è¡Œï¼Œå¯ä»¥é¿å…æµªè²»æ™‚é–“ï¼š</p>
<ol>
<li><strong>æœ€ç°¡é©—è­‰</strong>ï¼šå…ˆåœ¨ SSR Loader constructor ä¸­åŠ å…¥ <code>console.log</code>ï¼Œç¢ºèªæ˜¯å¦è¢«è¼‰å…¥ <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸš€ SSR Loader è¢«åˆå§‹åŒ–äº†å—ï¼Ÿ&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>é…ç½®è¿½è¹¤</strong>ï¼šç¢ºèª <code>main.server.ts</code> â†’ <code>app.config.server.ts</code> â†’ <code>mergeApplicationConfig</code> çš„å®Œæ•´éˆè·¯</li>
<li><strong>Provider é©—è­‰</strong>ï¼šç¢ºèª server config ä¸­çš„ provider æ˜¯å¦æ­£ç¢ºè¨»å†Š</li>
<li><strong>åªæœ‰ç¢ºèª Loader è¢«è¼‰å…¥å¾Œï¼Œæ‰é–‹å§‹èª¿è©¦å¯¦ç¾ç´°ç¯€</strong></li>
</ol>
<h4 id="ğŸ”§-å¯¦ç¾å•é¡Œèª¿è©¦"><a href="#ğŸ”§-å¯¦ç¾å•é¡Œèª¿è©¦" class="headerlink" title="ğŸ”§ å¯¦ç¾å•é¡Œèª¿è©¦"></a><strong>ğŸ”§ å¯¦ç¾å•é¡Œèª¿è©¦</strong></h4><ol>
<li><strong>ä½¿ç”¨é›™é‡ log è¼¸å‡º</strong>ï¼š<code>process.stdout.write</code> + <code>console.log</code></li>
<li><strong>è·¯å¾‘è¿½è¹¤</strong>ï¼šè¨˜éŒ„æ¯å€‹å˜—è©¦çš„è·¯å¾‘</li>
<li><strong>éšæ®µæ€§é©—è­‰</strong>ï¼šåˆ†åˆ¥é©—è­‰å»ºç½®éšæ®µå’Œé‹è¡Œéšæ®µ</li>
<li><strong>éŒ¯èª¤åˆ†é¡</strong>ï¼šå€åˆ†é…ç½®éŒ¯èª¤ã€è·¯å¾‘éŒ¯èª¤ã€æ–‡ä»¶éŒ¯èª¤</li>
</ol>
<h3 id="å¸¸è¦‹é™·é˜±"><a href="#å¸¸è¦‹é™·é˜±" class="headerlink" title="å¸¸è¦‹é™·é˜±"></a><strong>å¸¸è¦‹é™·é˜±</strong></h3><h4 id="ğŸŒ€-æœ€å¤§çš„é™·é˜±ï¼šLoader-é…ç½®è¿·å®®"><a href="#ğŸŒ€-æœ€å¤§çš„é™·é˜±ï¼šLoader-é…ç½®è¿·å®®" class="headerlink" title="ğŸŒ€ æœ€å¤§çš„é™·é˜±ï¼šLoader é…ç½®è¿·å®®"></a><strong>ğŸŒ€ æœ€å¤§çš„é™·é˜±ï¼šLoader é…ç½®è¿·å®®</strong></h4><p><strong>é€™æ˜¯æˆ‘å€‘å¡æœ€ä¹…çš„åœ°æ–¹ï¼</strong> å…¶ä»–é–‹ç™¼è€…ä¹Ÿå¾ˆå®¹æ˜“é™·å…¥é€™å€‹é™·é˜±ï¼š</p>
<ol>
<li><strong>å‡æ€§è§£æ±ºé™·é˜±</strong>ï¼šè§£æ±ºäº† Token å•é¡Œå¾Œï¼Œä»¥ç‚ºè¬äº‹å¤§å‰ï¼Œæ²’æ„è­˜åˆ° SSR Loader æ ¹æœ¬æ²’è¼‰å…¥</li>
<li><strong>éåº¦å·¥ç¨‹é™·é˜±</strong>ï¼šä¸æ–·å„ªåŒ– Loader å¯¦ç¾ç´°ç¯€ï¼Œä½†å¿½ç•¥äº†æ ¹æœ¬çš„é…ç½®å•é¡Œ</li>
<li><strong>è·¯å¾‘å¼·è¿«ç—‡é™·é˜±</strong>ï¼šåŸ·è‘—æ–¼èª¿æ•´æ–‡ä»¶è·¯å¾‘ï¼Œå˜—è©¦å„ç¨®çµ„åˆï¼Œä½†å•é¡Œä¸åœ¨è·¯å¾‘</li>
<li><strong>Provider é…ç½®é™·é˜±</strong>ï¼šå˜—è©¦å„ç¨® provider è¨»å†Šæ–¹å¼ï¼Œä½† main.server.ts é…ç½®æ‰æ˜¯é—œéµ</li>
<li><strong>ç’°å¢ƒè¨­å®šè½‰ç§»é™·é˜±</strong>ï¼šæŠŠå•é¡Œæ­¸å’æ–¼ç’°å¢ƒè¨­å®šï¼Œä½†å¯¦éš›æ˜¯é…ç½®æ¶æ§‹å•é¡Œ</li>
</ol>
<h4 id="ğŸš¨-æ ¸å¿ƒé…ç½®é™·é˜±"><a href="#ğŸš¨-æ ¸å¿ƒé…ç½®é™·é˜±" class="headerlink" title="ğŸš¨ æ ¸å¿ƒé…ç½®é™·é˜±"></a><strong>ğŸš¨ æ ¸å¿ƒé…ç½®é™·é˜±</strong></h4><ol>
<li><strong>ğŸš¨ Injection Token é™·é˜±</strong>ï¼š<code>main.server.ts</code> ä½¿ç”¨éŒ¯èª¤çš„é…ç½®ï¼Œå°è‡´ <code>TRANSLOCO_TRANSPILER</code> token æ‰¾ä¸åˆ°</li>
<li><strong>ğŸš¨ è³‡æºé…ç½®é™·é˜±</strong>ï¼š<code>angular.json</code> ä¸­ç¼ºå°‘ assets é…ç½®ï¼Œå°è‡´èªç³»æª”æ¡ˆä¸æœƒè¢«è¤‡è£½åˆ°å»ºç½®è¼¸å‡º</li>
<li><strong>ğŸš¨ é…ç½®è¼‰å…¥é™·é˜±</strong>ï¼šä¿®æ”¹äº† <code>app.config.server.ts</code> ä½† <code>main.server.ts</code> æ²’æœ‰æ­£ç¢ºä½¿ç”¨</li>
<li><strong>Provider è¡çªé™·é˜±</strong>ï¼šåœ¨ server config ä¸­é‡è¤‡å®šç¾©ç€è¦½å™¨ loader</li>
</ol>
<h4 id="ğŸ”§-æŠ€è¡“å¯¦ç¾é™·é˜±"><a href="#ğŸ”§-æŠ€è¡“å¯¦ç¾é™·é˜±" class="headerlink" title="ğŸ”§ æŠ€è¡“å¯¦ç¾é™·é˜±"></a><strong>ğŸ”§ æŠ€è¡“å¯¦ç¾é™·é˜±</strong></h4><ol start="5">
<li><strong>è·¯å¾‘é™·é˜±</strong>ï¼šES modules ä¸‹ <code>__dirname</code> ä¸å¯ç”¨</li>
<li><strong>Log é™·é˜±</strong>ï¼šç”Ÿç”¢ç’°å¢ƒ console.log è¢«ç¦ç”¨</li>
<li><strong>æ™‚åºé™·é˜±</strong>ï¼šé æ¸²æŸ“éšæ®µ assets å°šæœªè¤‡è£½</li>
<li><strong>æª”æ¡ˆçµæ§‹é™·é˜±</strong>ï¼šèªç³»æª”æ¡ˆæ”¾éŒ¯ä½ç½® (å¦‚æ”¾åœ¨ <code>src/app/assets</code> è€Œé <code>src/assets</code>)</li>
</ol>
<h4 id="âš ï¸-è¨ºæ–·é™·é˜±"><a href="#âš ï¸-è¨ºæ–·é™·é˜±" class="headerlink" title="âš ï¸ è¨ºæ–·é™·é˜±"></a><strong>âš ï¸ è¨ºæ–·é™·é˜±</strong></h4><ol start="9">
<li><strong>ç›²ç›®æ¸¬è©¦é™·é˜±</strong>ï¼šä¸æ–·å˜—è©¦å„ç¨®é…ç½®çµ„åˆï¼Œä½†æ²’æœ‰ç³»çµ±æ€§é©—è­‰</li>
<li><strong>ç—‡ç‹€è½‰ç§»é™·é˜±</strong>ï¼šæŠŠç²¾åŠ›èŠ±åœ¨æ¬¡è¦å•é¡Œä¸Šï¼Œå¿½ç•¥äº†æ ¹æœ¬çš„é…ç½®æ¶æ§‹å•é¡Œ</li>
</ol>
<h2 id="ğŸš€-çµè«–"><a href="#ğŸš€-çµè«–" class="headerlink" title="ğŸš€ çµè«–"></a>ğŸš€ <strong>çµè«–</strong></h2><p>é€™å€‹å•é¡Œçš„è§£æ±ºé—œéµåœ¨æ–¼ï¼š</p>
<ol>
<li><strong>ğŸš¨ Injection Token å•é¡Œ</strong>ï¼šç¢ºä¿ <code>main.server.ts</code> ä½¿ç”¨æ­£ç¢ºçš„ server config å’Œ TRANSLOCO_TRANSPILER provider</li>
<li><strong>ğŸ—ï¸ åŸºç¤è³‡æºé…ç½®</strong>ï¼šç¢ºä¿ <code>angular.json</code> assets æ­£ç¢ºè¨­å®šå’Œæª”æ¡ˆçµæ§‹æ­£ç¢º</li>
<li><strong>æ­£ç¢ºçš„é…ç½®æ¶æ§‹</strong>ï¼šä½¿ç”¨å°ˆé–€çš„ server configï¼Œé¿å… provider è¡çª</li>
<li><strong>åˆé©çš„å¯¦ç¾ç­–ç•¥</strong>ï¼šé›™ Loader + å¤šè·¯å¾‘å˜—è©¦</li>
<li><strong>å®Œå–„çš„èª¿è©¦æ©Ÿåˆ¶</strong>ï¼šè©³ç´° log + éŒ¯èª¤è™•ç†</li>
<li><strong>æ·±å…¥çš„å•é¡Œåˆ†æ</strong>ï¼šå¾è¡¨è±¡åˆ°æ ¹å› çš„ç³»çµ±æ€§è¨ºæ–·</li>
</ol>
<p>é€šéé€™æ¬¡å•é¡Œè§£æ±ºï¼Œæˆ‘å€‘å»ºç«‹äº†ä¸€å€‹å®Œæ•´çš„ Angular SSR + Transloco åœ‹éš›åŒ–è§£æ±ºæ–¹æ¡ˆï¼Œå¯ä»¥ç©©å®šé‹è¡Œåœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œä¸¦å…·å‚™å®Œå–„çš„èª¿è©¦å’ŒéŒ¯èª¤è™•ç†èƒ½åŠ›ã€‚</p>
<p><strong>æœ€é‡è¦çš„æ•™è¨“</strong>ï¼š</p>
<h3 id="ğŸ¯-è§£æ±ºç­–ç•¥æ•™è¨“"><a href="#ğŸ¯-è§£æ±ºç­–ç•¥æ•™è¨“" class="headerlink" title="ğŸ¯ è§£æ±ºç­–ç•¥æ•™è¨“"></a><strong>ğŸ¯ è§£æ±ºç­–ç•¥æ•™è¨“</strong></h3><ol>
<li><strong>ğŸš¨ æ­£ç¢ºçš„ä¿®å¾©æ–¹å‘ï¼šè£œè¶³ç¼ºå¤±çš„ Injection Token</strong> - ç•¶æˆ‘å€‘çœ‹åˆ° <code>No provider for InjectionToken TRANSLOCO_TRANSPILER</code> éŒ¯èª¤æ™‚ï¼Œæ‡‰è©²ç«‹å³æª¢æŸ¥ç›¸é—œçš„ provider é…ç½®</li>
<li><strong>æ ¹æœ¬åŸå› è­˜åˆ¥</strong> - æ‰€æœ‰çš„ç—‡ç‹€éƒ½æºè‡ªæ–¼ <code>main.server.ts</code> é…ç½®éŒ¯èª¤ï¼Œå°è‡´ <code>TRANSLOCO_TRANSPILER</code> token åœ¨ SSR ç’°å¢ƒä¸­æ‰¾ä¸åˆ°</li>
<li><strong>è¡¨é¢éŒ¯èª¤åªæ˜¯ç—‡ç‹€</strong> - TypeScript éŒ¯èª¤ã€Log å•é¡Œã€è·¯å¾‘å•é¡Œéƒ½æ˜¯æ·±å±¤é…ç½®å•é¡Œçš„è¡¨ç¾</li>
<li><strong>ç³»çµ±æ€§è¨ºæ–·æ˜¯é—œéµ</strong> - å¾ä¾è³´æ³¨å…¥ â†’ é…ç½®æ¶æ§‹ â†’ å¯¦ç¾ç´°ç¯€çš„åˆ†å±¤è§£æ±ºæ–¹å¼</li>
<li><strong>è£œè¶³ç­–ç•¥çš„æœ‰æ•ˆæ€§</strong> - é—œéµæ˜¯ä½¿ç”¨ <code>mergeApplicationConfig()</code> åˆä½µé…ç½®ï¼Œç¢ºä¿æ‰€æœ‰ Transloco providers éƒ½è¢«æ­£ç¢ºåŒ…å«åœ¨ SSR ç’°å¢ƒä¸­</li>
</ol>
<h3 id="ğŸŒ€-è©¦éŒ¯éç¨‹æ•™è¨“"><a href="#ğŸŒ€-è©¦éŒ¯éç¨‹æ•™è¨“" class="headerlink" title="ğŸŒ€ è©¦éŒ¯éç¨‹æ•™è¨“"></a><strong>ğŸŒ€ è©¦éŒ¯éç¨‹æ•™è¨“</strong></h3><ol start="6">
<li><strong>é¿å… Loader é…ç½®è¿·å®®</strong> - ä¸è¦ä¸€é–‹å§‹å°±æ·±å…¥ Loader å¯¦ç¾ç´°ç¯€ï¼Œå…ˆç¢ºèª Loader æ˜¯å¦çœŸçš„è¢«è¼‰å…¥</li>
<li><strong>å…ˆé©—è­‰å¾Œå„ªåŒ–</strong> - åœ¨å„ªåŒ– Loader ä¹‹å‰ï¼Œå…ˆç”¨æœ€ç°¡å–®çš„ log é©—è­‰ constructor æ˜¯å¦è¢«å‘¼å«</li>
</ol>
<hr>
<p><strong>ä½œè€…</strong>ï¼šæŠ€è¡“åœ˜éšŠ<br><strong>ç‰ˆæœ¬</strong>ï¼šv2.0<br><strong>æœ€å¾Œæ›´æ–°</strong>ï¼š2025-07-01<br><strong>æ–‡ä»¶ç‹€æ…‹</strong>ï¼šâœ… æ•…éšœæ’é™¤å®Œæ•´æŒ‡å—<br>8. <strong>é…ç½®æ¶æ§‹å„ªæ–¼å¯¦ç¾ç´°ç¯€</strong> - 90% çš„å•é¡Œå‡ºåœ¨é…ç½®æ¶æ§‹ä¸Šï¼Œåªæœ‰ 10% æ˜¯å¯¦ç¾ç´°ç¯€å•é¡Œ<br>9. <strong>å‡æ€§è§£æ±ºçš„å±éšª</strong> - è§£æ±ºä¸€å€‹éŒ¯èª¤å¾Œï¼Œè¦å…¨é¢é©—è­‰åŠŸèƒ½æ˜¯å¦çœŸæ­£å·¥ä½œï¼Œä¸è¦æ€¥æ–¼æ…¶ç¥<br>10. <strong>ç³»çµ±æ€§æ’é™¤å‹éç›²ç›®å˜—è©¦</strong> - å»ºç«‹æª¢æŸ¥æ¸…å–®ï¼Œç³»çµ±æ€§æ’é™¤å¯èƒ½åŸå› ï¼Œè€Œä¸æ˜¯éš¨æ©Ÿå˜—è©¦å„ç¨®é…ç½®</p>
<h3 id="ğŸ”-è¨ºæ–·æ–¹æ³•æ•™è¨“"><a href="#ğŸ”-è¨ºæ–·æ–¹æ³•æ•™è¨“" class="headerlink" title="ğŸ” è¨ºæ–·æ–¹æ³•æ•™è¨“"></a><strong>ğŸ” è¨ºæ–·æ–¹æ³•æ•™è¨“</strong></h3><ol start="11">
<li><strong>æœ€ç°¡é©—è­‰æ³•</strong> - ç”¨æœ€ç°¡å–®çš„ <code>console.log</code> åœ¨ constructor ä¸­é©—è­‰æœå‹™æ˜¯å¦è¢«è¼‰å…¥</li>
<li><strong>é…ç½®è¿½è¹¤æ³•</strong> - è¿½è¹¤å¾ <code>main.server.ts</code> é–‹å§‹çš„å®Œæ•´é…ç½®éˆ</li>
<li><strong>åˆ†å±¤è¨ºæ–·æ³•</strong> - å¾æ¶æ§‹ â†’ é…ç½® â†’ å¯¦ç¾çš„é †åºé€²è¡Œè¨ºæ–·</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-ssr-transloco-troubleshooting-guide/" data-id="cmg51yfqh0009anmz42jramih" data-title="Angular SSR + Transloco æ•…éšœæ’é™¤èˆ‡é™¤éŒ¯å®Œæ•´æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-SSR/" rel="tag">Angular SSR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debugging/" rel="tag">Debugging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Error-Handling/" rel="tag">Error Handling</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NullInjectorError/" rel="tag">NullInjectorError</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Production-Issues/" rel="tag">Production Issues</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR-Configuration/" rel="tag">SSR Configuration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Transloco/" rel="tag">Transloco</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Troubleshooting/" rel="tag">Troubleshooting</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/i18n-Debug/" rel="tag">i18n Debug</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ssr-transloco-setup-complete-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-ssr-transloco-setup-complete-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T08:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-ssr-transloco-setup-complete-guide/">Angular SSR + Transloco åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>å°ˆæ¡ˆåç¨±é—œéµ</strong>ï¼šæ‰€æœ‰ <code>your-project-name</code> å¿…é ˆæ›¿æ›ç‚ºå¯¦éš›å°ˆæ¡ˆåç¨±ï¼Œå½±éŸ¿æ§‹å»ºå’Œéƒ¨ç½²</li>
<li><strong>SSR é›™é‡é…ç½®</strong>ï¼šç€è¦½å™¨ç«¯å’Œä¼ºæœå™¨ç«¯éœ€è¦ä¸åŒçš„ Transloco loader é…ç½®</li>
<li><strong>æª”æ¡ˆè·¯å¾‘æ ¸å¿ƒ</strong>ï¼šassets é…ç½®æ±ºå®šèªç³»æª”æ¡ˆèƒ½å¦æ­£ç¢ºè¼‰å…¥ï¼Œbuild å’Œ test éƒ½è¦è¨­å®š</li>
<li><strong>å®¹éŒ¯æ©Ÿåˆ¶</strong>ï¼šå®Œæ•´çš„éŒ¯èª¤è™•ç†ç¢ºä¿ SSR ç’°å¢ƒä¸‹çš„ç©©å®šé‹è¡Œ</li>
<li><strong>é©—è­‰æµç¨‹</strong>ï¼šæä¾›å®Œæ•´çš„æ¸¬è©¦å’Œé©—è­‰æ­¥é©Ÿï¼Œç¢ºä¿é…ç½®æˆåŠŸ</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æŒ‡å—åŸºæ–¼å¯¦éš›å°ˆæ¡ˆç¶“é©—ï¼Œæä¾› Angular 19+ SSR + Transloco çš„å®Œæ•´é…ç½®æ–¹æ¡ˆï¼š</p>
<ul>
<li>ğŸ¯ <strong>å®Œæ•´é…ç½®æ¸…å–®</strong>ï¼šæ‰€æœ‰å¿…è¦æª”æ¡ˆçš„è©³ç´°ç¨‹å¼ç¢¼å’Œé…ç½®</li>
<li>ğŸ”„ <strong>SSR é›™é‡æ¶æ§‹</strong>ï¼šç€è¦½å™¨ç«¯å’Œä¼ºæœå™¨ç«¯çš„ä¸åŒè¼‰å…¥ç­–ç•¥</li>
<li>ğŸ“ <strong>æª”æ¡ˆçµæ§‹æ¨™æº–</strong>ï¼šè¦ç¯„çš„å°ˆæ¡ˆçµæ§‹å’Œæª”æ¡ˆçµ„ç¹”æ–¹å¼</li>
<li>âš ï¸ <strong>é¿å‘æŒ‡å—</strong>ï¼šå¸¸è¦‹å•é¡Œçš„é é˜²å’Œè§£æ±ºæ–¹æ¡ˆ</li>
<li>âœ… <strong>é©—è­‰æ©Ÿåˆ¶</strong>ï¼šå®Œæ•´çš„æ¸¬è©¦å’Œé™¤éŒ¯æµç¨‹</li>
</ul>
<h2 id="ğŸ—ï¸-Angular-SSR-Transloco-æ¶æ§‹åœ–"><a href="#ğŸ—ï¸-Angular-SSR-Transloco-æ¶æ§‹åœ–" class="headerlink" title="ğŸ—ï¸ Angular SSR + Transloco æ¶æ§‹åœ–"></a>ğŸ—ï¸ Angular SSR + Transloco æ¶æ§‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Angular SSR + Transloco æ‡‰ç”¨] --&gt; B[ç€è¦½å™¨ç«¯é…ç½®]</span><br><span class="line">    A --&gt; C[ä¼ºæœå™¨ç«¯é…ç½®]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[app.config.ts]</span><br><span class="line">    B --&gt; B2[TranslocoHttpLoader]</span><br><span class="line">    B --&gt; B3[HTTP è¼‰å…¥èªç³»æª”æ¡ˆ]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[app.config.server.ts]</span><br><span class="line">    C --&gt; C2[TranslocoSSRLoader]</span><br><span class="line">    C --&gt; C3[æª”æ¡ˆç³»çµ±è¼‰å…¥]</span><br><span class="line">    </span><br><span class="line">    B3 --&gt; D[assets/i18n/]</span><br><span class="line">    C3 --&gt; D</span><br><span class="line">    D --&gt; D1[en.json]</span><br><span class="line">    D --&gt; D2[zh-tw.json]</span><br><span class="line">    </span><br><span class="line">    B1 --&gt; E[ç€è¦½å™¨æ¸²æŸ“]</span><br><span class="line">    C1 --&gt; F[ä¼ºæœå™¨ç«¯æ¸²æŸ“]</span><br><span class="line">    </span><br><span class="line">    E --&gt; G[ç”¨æˆ¶ç«¯é«”é©—]</span><br><span class="line">    F --&gt; G</span><br><span class="line">    </span><br><span class="line">    G --&gt; H[å¤šèªç³»æ‡‰ç”¨]</span><br></pre></td></tr></table></figure>

<h1 id="Angular-SSR-Transloco-åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—"><a href="#Angular-SSR-Transloco-åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—" class="headerlink" title="Angular SSR + Transloco åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—"></a>Angular SSR + Transloco åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—</h1><h2 id="ğŸ“š-æŒ‡å—ç°¡ä»‹"><a href="#ğŸ“š-æŒ‡å—ç°¡ä»‹" class="headerlink" title="ğŸ“š æŒ‡å—ç°¡ä»‹"></a>ğŸ“š <strong>æŒ‡å—ç°¡ä»‹</strong></h2><p>æœ¬æŒ‡å—åŸºæ–¼å¯¦éš›é …ç›®ç¶“é©—ï¼Œæä¾› <strong>Angular 19+ SSR + Transloco</strong> çš„å®Œæ•´é…ç½®æ–¹æ¡ˆã€‚åŒ…å«æ‰€æœ‰å¿…è¦æª”æ¡ˆçš„å®Œæ•´ç¨‹å¼ç¢¼ï¼Œè®“æ‚¨å¯ä»¥å¿«é€Ÿä¸Šæ‰‹ä¸¦é¿å…å¸¸è¦‹é™·é˜±ã€‚</p>
<h3 id="æŠ€è¡“ç’°å¢ƒ"><a href="#æŠ€è¡“ç’°å¢ƒ" class="headerlink" title="æŠ€è¡“ç’°å¢ƒ"></a><strong>æŠ€è¡“ç’°å¢ƒ</strong></h3><ul>
<li>Angular 19.2.14+</li>
<li>@jsverse&#x2F;transloco</li>
<li>SSR + é æ¸²æŸ“æ”¯æ´</li>
<li>TypeScript</li>
</ul>
<h3 id="ğŸ“‹-é‡è¦æé†’"><a href="#ğŸ“‹-é‡è¦æé†’" class="headerlink" title="ğŸ“‹ é‡è¦æé†’"></a><strong>ğŸ“‹ é‡è¦æé†’</strong></h3><blockquote>
<p>âš ï¸ <strong>å°ˆæ¡ˆåç¨±æ›¿æ›</strong>ï¼šæœ¬æŒ‡å—ä¸­æ‰€æœ‰çš„ <code>your-project-name</code> éƒ½éœ€è¦æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš›å°ˆæ¡ˆåç¨±ã€‚</p>
<p><strong>å¦‚ä½•ç¢ºèªå°ˆæ¡ˆåç¨±ï¼Ÿ</strong></p>
<ol>
<li>æª¢æŸ¥ <code>angular.json</code> ä¸­çš„ <code>projects</code> å€å¡Š</li>
<li>æª¢æŸ¥ <code>package.json</code> ä¸­çš„ <code>name</code> æ¬„ä½</li>
<li>å»ºç½®å¾Œæª¢æŸ¥ <code>dist/</code> ç›®éŒ„ä¸‹çš„è³‡æ–™å¤¾åç¨±</li>
</ol>
<p><strong>æ›¿æ›ç¯„ä¾‹ï¼š</strong><br>å¦‚æœæ‚¨çš„å°ˆæ¡ˆåç¨±æ˜¯ <code>example_project_frontend</code>ï¼š</p>
<ul>
<li><code>your-project-name</code> â†’ <code>example_project_frontend</code></li>
<li><code>npm run serve:ssr:your-project-name</code> â†’ <code>npm run serve:ssr:example_project_frontend</code></li>
<li><code>dist/your-project-name/browser/</code> â†’ <code>dist/example_project_frontend/browser/</code></li>
</ul>
</blockquote>
<hr>
<h2 id="ğŸ—‚ï¸-å°ˆæ¡ˆçµæ§‹ç¸½è¦½"><a href="#ğŸ—‚ï¸-å°ˆæ¡ˆçµæ§‹ç¸½è¦½" class="headerlink" title="ğŸ—‚ï¸ å°ˆæ¡ˆçµæ§‹ç¸½è¦½"></a>ğŸ—‚ï¸ <strong>å°ˆæ¡ˆçµæ§‹ç¸½è¦½</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">your-project/</span><br><span class="line">â”œâ”€â”€ angular.json                    # âœ… Assets é…ç½®</span><br><span class="line">â”œâ”€â”€ src/</span><br><span class="line">â”‚   â”œâ”€â”€ assets/</span><br><span class="line">â”‚   â”‚   â””â”€â”€ i18n/                  # âœ… èªç³»æª”æ¡ˆç›®éŒ„</span><br><span class="line">â”‚   â”‚       â”œâ”€â”€ en.json</span><br><span class="line">â”‚   â”‚       â””â”€â”€ zh-tw.json</span><br><span class="line">â”‚   â”œâ”€â”€ app/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.config.ts          # âœ… ç€è¦½å™¨ç«¯é…ç½®</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.config.server.ts   # âœ… SSR é…ç½®</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.routes.server.ts   # SSR è·¯ç”±</span><br><span class="line">â”‚   â”‚   â””â”€â”€ core/</span><br><span class="line">â”‚   â”‚       â””â”€â”€ services/</span><br><span class="line">â”‚   â”‚           â”œâ”€â”€ transloco.config.ts      # âœ… ç€è¦½å™¨ç«¯ Loader</span><br><span class="line">â”‚   â”‚           â””â”€â”€ transloco-ssr.loader.ts  # âœ… SSR Loader</span><br><span class="line">â”‚   â”œâ”€â”€ main.ts                    # ç€è¦½å™¨ç«¯å…¥å£</span><br><span class="line">â”‚   â””â”€â”€ main.server.ts             # âœ… SSR å…¥å£ (é—œéµé…ç½®)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ”§-å®Œæ•´é…ç½®æ­¥é©Ÿ"><a href="#ğŸ”§-å®Œæ•´é…ç½®æ­¥é©Ÿ" class="headerlink" title="ğŸ”§ å®Œæ•´é…ç½®æ­¥é©Ÿ"></a>ğŸ”§ <strong>å®Œæ•´é…ç½®æ­¥é©Ÿ</strong></h2><h3 id="æ­¥é©Ÿ-1ï¼šå®‰è£å¿…è¦å¥—ä»¶"><a href="#æ­¥é©Ÿ-1ï¼šå®‰è£å¿…è¦å¥—ä»¶" class="headerlink" title="æ­¥é©Ÿ 1ï¼šå®‰è£å¿…è¦å¥—ä»¶"></a><strong>æ­¥é©Ÿ 1ï¼šå®‰è£å¿…è¦å¥—ä»¶</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£ Transloco</span></span><br><span class="line">ng add @jsverse/transloco</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦ SSR æ”¯æ´ (Angular 17+)</span></span><br><span class="line">ng add @angular/ssr</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯è¼ƒèˆŠç‰ˆæœ¬ Angular (å·²æ£„ç”¨)</span></span><br><span class="line"><span class="comment"># ng add @nguniversal/express-engine</span></span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-2ï¼šé…ç½®-angular-json-âš ï¸"><a href="#æ­¥é©Ÿ-2ï¼šé…ç½®-angular-json-âš ï¸" class="headerlink" title="æ­¥é©Ÿ 2ï¼šé…ç½® angular.json âš ï¸"></a><strong>æ­¥é©Ÿ 2ï¼šé…ç½® angular.json</strong> âš ï¸</h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>angular.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;$schema&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./node_modules/@angular/cli/lib/config/schema.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;projects&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;your-project-name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="comment">// ğŸ‘ˆ è«‹æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš›å°ˆæ¡ˆåç¨±</span></span><br><span class="line">            <span class="attr">&quot;projectType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;architect&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;builder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@angular-devkit/build-angular:application&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;outputPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist/your-project-name&quot;</span><span class="punctuation">,</span> <span class="comment">// ğŸ‘ˆ è«‹æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš›å°ˆæ¡ˆåç¨±</span></span><br><span class="line">                        <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/index.html&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;browser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;polyfills&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;zone.js&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;tsConfig&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.app.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/assets&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/assets&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;styles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/styles.scss&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/main.server.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;outputMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;ssr&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;entry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/server.ts&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;builder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@angular-devkit/build-angular:karma&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;polyfills&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;zone.js&quot;</span><span class="punctuation">,</span> <span class="string">&quot;zone.js/testing&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;tsConfig&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.spec.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;glob&quot;</span><span class="punctuation">:</span> <span class="string">&quot;**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/assets&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/assets&quot;</span></span><br><span class="line">                            <span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;styles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/styles.scss&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>é—œéµé‡é»ï¼š</strong></p>
<ul>
<li><code>&quot;input&quot;: &quot;src/assets&quot;</code> + <code>&quot;output&quot;: &quot;/assets&quot;</code> ç¢ºä¿èªç³»æª”æ¡ˆè¢«æ­£ç¢ºè¤‡è£½</li>
<li>åŒæ™‚åœ¨ <code>build</code> å’Œ <code>test</code> ä¸­éƒ½è¦é…ç½®</li>
</ul>
<h3 id="æ­¥é©Ÿ-3ï¼šå‰µå»ºèªç³»æª”æ¡ˆ"><a href="#æ­¥é©Ÿ-3ï¼šå‰µå»ºèªç³»æª”æ¡ˆ" class="headerlink" title="æ­¥é©Ÿ 3ï¼šå‰µå»ºèªç³»æª”æ¡ˆ"></a><strong>æ­¥é©Ÿ 3ï¼šå‰µå»ºèªç³»æª”æ¡ˆ</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/assets/i18n/zh-tw.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;demo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Demo å±•ç¤ºä¸­å¿ƒ&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;subtitle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;çµ„ä»¶å±•ç¤ºèˆ‡æ¸¬è©¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;buttons&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;primary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸»è¦å‹•ä½œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;secondary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ¬¡è¦å‹•ä½œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;confirm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç¢ºèª&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cancel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å–æ¶ˆ&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;delete&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åˆªé™¤&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;edit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç·¨è¼¯&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;save&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å„²å­˜&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;form&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½¿ç”¨è€…åç¨±&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é›»å­éƒµä»¶&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¯†ç¢¼&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;department&quot;</span><span class="punctuation">:</span> <span class="string">&quot;éƒ¨é–€&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è·ä½&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;loading&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¼‰å…¥ä¸­...&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ“ä½œå¤±æ•—&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è­¦å‘Šè¨Šæ¯&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¦–é &quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dashboard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å„€è¡¨æ¿&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;components&quot;</span><span class="punctuation">:</span> <span class="string">&quot;çµ„ä»¶å±•ç¤º&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¨­å®š&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/assets/i18n/en.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;demo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Demo Center&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;subtitle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Component Demo &amp; Testing&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;buttons&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;primary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Primary Action&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;secondary&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Secondary Action&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;confirm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Confirm&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cancel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Cancel&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;delete&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Delete&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;edit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Edit&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;save&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Save&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;form&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Username&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Email&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Password&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;department&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Department&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Position&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;loading&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Loading...&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Success&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Error&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;warning&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Warning&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;home&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Home&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dashboard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Dashboard&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;components&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Components&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Settings&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-4ï¼šå‰µå»ºç€è¦½å™¨ç«¯-Transloco-Loader"><a href="#æ­¥é©Ÿ-4ï¼šå‰µå»ºç€è¦½å™¨ç«¯-Transloco-Loader" class="headerlink" title="æ­¥é©Ÿ 4ï¼šå‰µå»ºç€è¦½å™¨ç«¯ Transloco Loader"></a><strong>æ­¥é©Ÿ 4ï¼šå‰µå»ºç€è¦½å™¨ç«¯ Transloco Loader</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/core/services/transloco.config.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpClient</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject, <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Translation</span>, <span class="title class_">TranslocoLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Observable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; catchError, tap &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs/operators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç€è¦½å™¨ç«¯ Transloco Loader</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ HTTP è«‹æ±‚è¼‰å…¥èªç³»æª”æ¡ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TranslocoBrowserLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> http = <span class="title function_">inject</span>(<span class="title class_">HttpClient</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ [Browser Transloco] TranslocoBrowserLoader è¢«åˆå§‹åŒ–ï¼&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸŒ [Browser Transloco] ç€è¦½å™¨ç«¯ Transloco Loader å·²å°±ç·’&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Observable</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] ğŸŒ HTTPè¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] è«‹æ±‚è·¯å¾‘: /assets/i18n/<span class="subst">$&#123;lang&#125;</span>.json`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="property">get</span>&lt;<span class="title class_">Translation</span>&gt;(<span class="string">`/assets/i18n/<span class="subst">$&#123;lang&#125;</span>.json`</span>).<span class="title function_">pipe</span>(</span><br><span class="line">            <span class="title function_">tap</span>(<span class="function">(<span class="params"><span class="attr">translation</span>: <span class="title class_">Translation</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] âœ… HTTPè¼‰å…¥æˆåŠŸ: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[Browser Transloco] è¼‰å…¥çš„ keys:`</span>, <span class="title class_">Object</span>.<span class="title function_">keys</span>(translation));</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title function_">catchError</span>(<span class="function">(<span class="params"><span class="attr">err</span>: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[Browser Transloco] âŒ HTTPè¼‰å…¥å¤±æ•—: <span class="subst">$&#123;lang&#125;</span>`</span>, err);</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-5ï¼šå‰µå»º-SSR-Transloco-Loader"><a href="#æ­¥é©Ÿ-5ï¼šå‰µå»º-SSR-Transloco-Loader" class="headerlink" title="æ­¥é©Ÿ 5ï¼šå‰µå»º SSR Transloco Loader"></a><strong>æ­¥é©Ÿ 5ï¼šå‰µå»º SSR Transloco Loader</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/core/services/transloco-ssr.loader.ts</code></p>
<blockquote>
<p>ğŸ’¡ <strong>è¨­è¨ˆç†å¿µ</strong>ï¼šæ¡ç”¨æ˜ç¢ºçš„å–®ä¸€æª”æ¡ˆè·¯å¾‘ï¼Œé¿å…å¤šè·¯å¾‘å˜—è©¦çš„è¤‡é›œæ€§ã€‚<br>å¦‚æœæª”æ¡ˆæ‰¾ä¸åˆ°ï¼Œæä¾›æ¸…æ¥šçš„éŒ¯èª¤è¨Šæ¯å’Œè¨ºæ–·æŒ‡å¼•ï¼Œè®“é–‹ç™¼è€…å¿«é€Ÿå®šä½å•é¡Œã€‚</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Translation</span>, <span class="title class_">TranslocoLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SSR å°ˆç”¨ Transloco Loader</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ–‡ä»¶ç³»çµ±ç›´æ¥è®€å–èªç³»æª”æ¡ˆ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ğŸ¯ è¨­è¨ˆåŸå‰‡ï¼š</span></span><br><span class="line"><span class="comment"> * - æ˜ç¢ºçš„æª”æ¡ˆè·¯å¾‘ï¼Œä¸å˜—è©¦å¤šå€‹å¯èƒ½ä½ç½®</span></span><br><span class="line"><span class="comment"> * - æ¸…æ¥šçš„éŒ¯èª¤è¨Šæ¯å’Œè¨ºæ–·æŒ‡å¼•</span></span><br><span class="line"><span class="comment"> * - ç°¡æ½”çš„é‚è¼¯ï¼Œæ˜“æ–¼é™¤éŒ¯å’Œç¶­è­·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TranslocoSSRLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨é›™é‡è¼¸å‡ºç¢ºä¿ log å¯è¦‹</span></span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&#x27;ğŸš€ [SSR Transloco] TranslocoSSRLoader è¢«åˆå§‹åŒ–ï¼\n&#x27;</span>);</span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&#x27;ğŸš€ [SSR Transloco] ä¼ºæœå™¨ç«¯ Transloco Loader å·²å°±ç·’\n&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸš€ [SSR Transloco] TranslocoSSRLoader è¢«åˆå§‹åŒ–ï¼&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸš€ [SSR Transloco] ä¼ºæœå™¨ç«¯ Transloco Loader å·²å°±ç·’&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">        <span class="comment">// æ˜ç¢ºçš„èªç³»æª”æ¡ˆè·¯å¾‘ - Angular å»ºç½®å¾Œçš„æ¨™æº–è·¯å¾‘</span></span><br><span class="line">        <span class="keyword">const</span> filePath = path.<span class="title function_">join</span>(</span><br><span class="line">            process.<span class="title function_">cwd</span>(),</span><br><span class="line">            <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;your-project-name&#x27;</span>, <span class="comment">// ğŸ‘ˆ è«‹æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš›å°ˆæ¡ˆåç¨±</span></span><br><span class="line">            <span class="string">&#x27;browser&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;assets&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;i18n&#x27;</span>,</span><br><span class="line">            <span class="string">`<span class="subst">$&#123;lang&#125;</span>.json`</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¼‰å…¥éç¨‹è¿½è¹¤</span></span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸš€ è¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>\n`</span>);</span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸ“‚ å·¥ä½œç›®éŒ„: <span class="subst">$&#123;process.cwd()&#125;</span>\n`</span>);</span><br><span class="line">        process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸ“ æª”æ¡ˆè·¯å¾‘: <span class="subst">$&#123;filePath&#125;</span>\n`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[SSR Transloco] è¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[SSR Transloco] å·¥ä½œç›®éŒ„: <span class="subst">$&#123;process.cwd()&#125;</span>`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[SSR Transloco] æª”æ¡ˆè·¯å¾‘: <span class="subst">$&#123;filePath&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="title class_">Translation</span>&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            fs.<span class="title function_">readFile</span>(filePath, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="built_in">any</span>, <span class="attr">data</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                    <span class="keyword">const</span> errorMsg = <span class="string">`ç„¡æ³•è®€å–èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>`</span>;</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] âŒ <span class="subst">$&#123;errorMsg&#125;</span>\n`</span>);</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸ’¡ è«‹æª¢æŸ¥ä»¥ä¸‹é …ç›®:\n`</span>);</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco]    1. æª”æ¡ˆæ˜¯å¦å­˜åœ¨: <span class="subst">$&#123;filePath&#125;</span>\n`</span>);</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(</span><br><span class="line">                        <span class="string">`[SSR Transloco]    2. angular.json ä¸­ assets é…ç½®æ˜¯å¦æ­£ç¢º\n`</span></span><br><span class="line">                    );</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco]    3. æ˜¯å¦å·²åŸ·è¡Œ ng build\n`</span>);</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco]    4. å°ˆæ¡ˆåç¨±æ˜¯å¦æ­£ç¢ºè¨­å®š\n`</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco] âŒ <span class="subst">$&#123;errorMsg&#125;</span>`</span>, err);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco] ğŸ’¡ è«‹æª¢æŸ¥:`</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco]    1. æª”æ¡ˆæ˜¯å¦å­˜åœ¨: <span class="subst">$&#123;filePath&#125;</span>`</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco]    2. angular.json ä¸­ assets é…ç½®æ˜¯å¦æ­£ç¢º`</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco]    3. æ˜¯å¦å·²åŸ·è¡Œ ng build`</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco]    4. å°ˆæ¡ˆåç¨±æ˜¯å¦æ­£ç¢ºè¨­å®š`</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="title function_">reject</span>(err);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> translation = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data) <span class="keyword">as</span> <span class="title class_">Translation</span>;</span><br><span class="line">                    process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] âœ… æˆåŠŸè¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>\n`</span>);</span><br><span class="line">                    process.<span class="property">stdout</span>.<span class="title function_">write</span>(</span><br><span class="line">                        <span class="string">`[SSR Transloco] ğŸ”‘ è¼‰å…¥çš„ keys: <span class="subst">$&#123;<span class="built_in">Object</span>.keys(translation).join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>\n`</span></span><br><span class="line">                    );</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[SSR Transloco] âœ… æˆåŠŸè¼‰å…¥èªç³»æª”: <span class="subst">$&#123;lang&#125;</span>`</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[SSR Transloco] è¼‰å…¥çš„ keys:`</span>, <span class="title class_">Object</span>.<span class="title function_">keys</span>(translation));</span><br><span class="line">                    <span class="title function_">resolve</span>(translation);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (parseErr) &#123;</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] âŒ JSON è§£æå¤±æ•—: <span class="subst">$&#123;lang&#125;</span>\n`</span>);</span><br><span class="line">                    process.<span class="property">stderr</span>.<span class="title function_">write</span>(<span class="string">`[SSR Transloco] ğŸ’¡ è«‹æª¢æŸ¥ JSON æª”æ¡ˆæ ¼å¼æ˜¯å¦æ­£ç¢º\n`</span>);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco] âŒ JSON è§£æå¤±æ•—: <span class="subst">$&#123;lang&#125;</span>`</span>, parseErr);</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[SSR Transloco] ğŸ’¡ è«‹æª¢æŸ¥ JSON æª”æ¡ˆæ ¼å¼æ˜¯å¦æ­£ç¢º`</span>);</span><br><span class="line">                    <span class="title function_">reject</span>(parseErr);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-6ï¼šé…ç½®ç€è¦½å™¨ç«¯æ‡‰ç”¨"><a href="#æ­¥é©Ÿ-6ï¼šé…ç½®ç€è¦½å™¨ç«¯æ‡‰ç”¨" class="headerlink" title="æ­¥é©Ÿ 6ï¼šé…ç½®ç€è¦½å™¨ç«¯æ‡‰ç”¨"></a><strong>æ­¥é©Ÿ 6ï¼šé…ç½®ç€è¦½å™¨ç«¯æ‡‰ç”¨</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/app.config.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; provideHttpClient, withInterceptorsFromDi &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span>, isDevMode &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideAnimationsAsync &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser/animations/async&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideTransloco &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoBrowserLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./core/services/transloco.config&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">provideRouter</span>(routes),</span><br><span class="line">        <span class="title function_">provideAnimationsAsync</span>(),</span><br><span class="line">        <span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDi</span>()),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// âœ… Transloco é…ç½®</span></span><br><span class="line">        <span class="title function_">provideTransloco</span>(&#123;</span><br><span class="line">            <span class="attr">config</span>: &#123;</span><br><span class="line">                <span class="attr">availableLangs</span>: [<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;zh-tw&#x27;</span>],</span><br><span class="line">                <span class="attr">defaultLang</span>: <span class="string">&#x27;zh-tw&#x27;</span>,</span><br><span class="line">                <span class="attr">fallbackLang</span>: <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">                <span class="attr">reRenderOnLangChange</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="comment">// é–‹ç™¼æ¨¡å¼å•Ÿç”¨ debugï¼Œç”Ÿç”¢æ¨¡å¼é—œé–‰</span></span><br><span class="line">                <span class="attr">prodMode</span>: !<span class="title function_">isDevMode</span>(),</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">loader</span>: <span class="title class_">TranslocoBrowserLoader</span>,</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœä½ æœ‰å…¶ä»– providersï¼Œåœ¨æ­¤æ·»åŠ </span></span><br><span class="line">        <span class="comment">// providePrimeNG(&#123;...&#125;),</span></span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-7ï¼šé…ç½®-SSR-æ‡‰ç”¨-ğŸš¨"><a href="#æ­¥é©Ÿ-7ï¼šé…ç½®-SSR-æ‡‰ç”¨-ğŸš¨" class="headerlink" title="æ­¥é©Ÿ 7ï¼šé…ç½® SSR æ‡‰ç”¨ ğŸš¨"></a><strong>æ­¥é©Ÿ 7ï¼šé…ç½® SSR æ‡‰ç”¨</strong> ğŸš¨</h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/app.config.server.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span>, mergeApplicationConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">TRANSLOCO_LOADER</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; serverRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes.server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoSSRLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./core/services/transloco-ssr.loader&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">        <span class="title function_">provideServerRouting</span>(serverRoutes),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// âœ… é—œéµï¼šç‚º SSR ç’°å¢ƒæä¾›å°ˆé–€çš„ Transloco Loader</span></span><br><span class="line">        <span class="comment">// é€™æœƒè¦†è“‹ç€è¦½å™¨ç«¯çš„ HTTP loaderï¼Œæ”¹ç”¨æ–‡ä»¶ç³»çµ±è®€å–</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_LOADER</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">TranslocoSSRLoader</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… é—œéµï¼šåˆä½µé…ç½®ç¢ºä¿æ‰€æœ‰ Transloco providersï¼ˆåŒ…æ‹¬ TRANSLOCO_TRANSPILERï¼‰éƒ½è¢«åŒ…å«</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-8ï¼šé…ç½®ç€è¦½å™¨ç«¯å…¥å£é»"><a href="#æ­¥é©Ÿ-8ï¼šé…ç½®ç€è¦½å™¨ç«¯å…¥å£é»" class="headerlink" title="æ­¥é©Ÿ 8ï¼šé…ç½®ç€è¦½å™¨ç«¯å…¥å£é»"></a><strong>æ­¥é©Ÿ 8ï¼šé…ç½®ç€è¦½å™¨ç«¯å…¥å£é»</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/main.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; bootstrapApplication &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.config&#x27;</span>; <span class="comment">// âœ… ä½¿ç”¨ç€è¦½å™¨ç«¯é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç€è¦½å™¨ç«¯æ‡‰ç”¨ç¨‹å¼çš„å…¥å£é»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ğŸ“ èªªæ˜ï¼š</span></span><br><span class="line"><span class="comment"> * - ä½¿ç”¨ app.config.ts (ç€è¦½å™¨ç«¯é…ç½®)</span></span><br><span class="line"><span class="comment"> * - åŒ…å« HTTP å®¢æˆ¶ç«¯å’Œç€è¦½å™¨ç«¯ Transloco Loader</span></span><br><span class="line"><span class="comment"> * - åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­åŸ·è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">bootstrapApplication</span>(<span class="title class_">AppComponent</span>, appConfig).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err));</span><br></pre></td></tr></table></figure>

<h3 id="æ­¥é©Ÿ-9ï¼šé…ç½®-SSR-å…¥å£é»-ğŸš¨"><a href="#æ­¥é©Ÿ-9ï¼šé…ç½®-SSR-å…¥å£é»-ğŸš¨" class="headerlink" title="æ­¥é©Ÿ 9ï¼šé…ç½® SSR å…¥å£é» ğŸš¨"></a><strong>æ­¥é©Ÿ 9ï¼šé…ç½® SSR å…¥å£é»</strong> ğŸš¨</h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/main.server.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; bootstrapApplication &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; config &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.config.server&#x27;</span>; <span class="comment">// âœ… é—œéµï¼šä½¿ç”¨ server é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SSR æ‡‰ç”¨ç¨‹å¼çš„å…¥å£é»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * âš ï¸ é‡è¦ï¼šå¿…é ˆä½¿ç”¨ app.config.server.ts è€Œä¸æ˜¯ app.config.ts</span></span><br><span class="line"><span class="comment"> * å¦å‰‡æœƒå°è‡´ TRANSLOCO_TRANSPILER token æ‰¾ä¸åˆ°çš„éŒ¯èª¤</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ğŸ“ èˆ‡ main.ts çš„å€åˆ¥ï¼š</span></span><br><span class="line"><span class="comment"> * - ä½¿ç”¨ app.config.server.ts (åˆä½µäº†ç€è¦½å™¨ç«¯ + SSR é…ç½®)</span></span><br><span class="line"><span class="comment"> * - åŒ…å« SSR å°ˆç”¨çš„æ–‡ä»¶ç³»çµ± Transloco Loader</span></span><br><span class="line"><span class="comment"> * - åœ¨ Node.js ç’°å¢ƒä¸­åŸ·è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">bootstrapApplication</span>(<span class="title class_">AppComponent</span>, config);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”-main-ts-vs-main-server-ts-é…ç½®å°æ¯”"><a href="#ğŸ”-main-ts-vs-main-server-ts-é…ç½®å°æ¯”" class="headerlink" title="ğŸ” main.ts vs main.server.ts é…ç½®å°æ¯”"></a><strong>ğŸ” main.ts vs main.server.ts é…ç½®å°æ¯”</strong></h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>main.ts</code> (ç€è¦½å™¨ç«¯)</th>
<th><code>main.server.ts</code> (SSR)</th>
</tr>
</thead>
<tbody><tr>
<td><strong>åŸ·è¡Œç’°å¢ƒ</strong></td>
<td>ç€è¦½å™¨</td>
<td>Node.js ä¼ºæœå™¨</td>
</tr>
<tr>
<td><strong>é…ç½®æª”æ¡ˆ</strong></td>
<td><code>app.config.ts</code></td>
<td><code>app.config.server.ts</code></td>
</tr>
<tr>
<td><strong>Transloco Loader</strong></td>
<td>HTTP è«‹æ±‚è¼‰å…¥</td>
<td>æ–‡ä»¶ç³»çµ±è®€å–</td>
</tr>
<tr>
<td><strong>bootstrap æ–¹å¼</strong></td>
<td>ç›´æ¥å‘¼å«</td>
<td>è¿”å› Promise å‡½æ•¸</td>
</tr>
<tr>
<td><strong>è¼‰å…¥æ™‚æ©Ÿ</strong></td>
<td>é é¢è¼‰å…¥æ™‚</td>
<td>æ¯æ¬¡ SSR è«‹æ±‚æ™‚</td>
</tr>
<tr>
<td><strong>èªç³»æª”æ¡ˆä¾†æº</strong></td>
<td><code>/assets/i18n/*.json</code></td>
<td><code>dist/*/browser/assets/i18n/*.json</code></td>
</tr>
</tbody></table>
<h3 id="æ­¥é©Ÿ-10ï¼šå‰µå»º-SSR-è·¯ç”±é…ç½®"><a href="#æ­¥é©Ÿ-10ï¼šå‰µå»º-SSR-è·¯ç”±é…ç½®" class="headerlink" title="æ­¥é©Ÿ 10ï¼šå‰µå»º SSR è·¯ç”±é…ç½®"></a><strong>æ­¥é©Ÿ 10ï¼šå‰µå»º SSR è·¯ç”±é…ç½®</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/app.routes.server.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RenderMode</span>, <span class="title class_">ServerRoute</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;demo&#x27;</span>,</span><br><span class="line">        <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;demo/components&#x27;</span>,</span><br><span class="line">        <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;**&#x27;</span>,</span><br><span class="line">        <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Server</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§ª-é©—è­‰èˆ‡æ¸¬è©¦"><a href="#ğŸ§ª-é©—è­‰èˆ‡æ¸¬è©¦" class="headerlink" title="ğŸ§ª é©—è­‰èˆ‡æ¸¬è©¦"></a>ğŸ§ª <strong>é©—è­‰èˆ‡æ¸¬è©¦</strong></h2><h3 id="æ¸¬è©¦æ­¥é©Ÿ-1ï¼šå»ºç½®å°ˆæ¡ˆ"><a href="#æ¸¬è©¦æ­¥é©Ÿ-1ï¼šå»ºç½®å°ˆæ¡ˆ" class="headerlink" title="æ¸¬è©¦æ­¥é©Ÿ 1ï¼šå»ºç½®å°ˆæ¡ˆ"></a><strong>æ¸¬è©¦æ­¥é©Ÿ 1ï¼šå»ºç½®å°ˆæ¡ˆ</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…ç†èˆŠçš„å»ºç½®æª”æ¡ˆ</span></span><br><span class="line"><span class="built_in">rm</span> -rf dist</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç½®å°ˆæ¡ˆ (æœƒé¡¯ç¤º SSR log)</span></span><br><span class="line">ng build</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¢ºèªèªç³»æª”æ¡ˆå·²è¤‡è£½</span></span><br><span class="line"><span class="built_in">ls</span> -la dist/your-project-name/browser/assets/i18n/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ğŸ’¡ è«‹å°‡ your-project-name æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš›å°ˆæ¡ˆåç¨±</span></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼šls -la dist/example_project_frontend/browser/assets/i18n/</span></span><br></pre></td></tr></table></figure>

<p><strong>é æœŸè¼¸å‡ºï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸš€ [SSR Transloco] TranslocoSSRLoader è¢«åˆå§‹åŒ–ï¼</span><br><span class="line">ğŸš€ [SSR Transloco] ä¼ºæœå™¨ç«¯ Transloco Loader å·²å°±ç·’</span><br><span class="line">[SSR Transloco] ğŸš€ è¼‰å…¥èªç³»æª”: zh-tw</span><br><span class="line">[SSR Transloco] ğŸ“‚ å·¥ä½œç›®éŒ„: /path/to/your/project</span><br><span class="line">[SSR Transloco] ğŸ“ æª”æ¡ˆè·¯å¾‘: /path/to/your/project/dist/your-project-name/browser/assets/i18n/zh-tw.json</span><br><span class="line">[SSR Transloco] âœ… æˆåŠŸè¼‰å…¥èªç³»æª”: zh-tw</span><br><span class="line">[SSR Transloco] ğŸ”‘ è¼‰å…¥çš„ keys: onlydemo, common, demo</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¬è©¦æ­¥é©Ÿ-2ï¼šå•Ÿå‹•-SSR-æœå‹™å™¨"><a href="#æ¸¬è©¦æ­¥é©Ÿ-2ï¼šå•Ÿå‹•-SSR-æœå‹™å™¨" class="headerlink" title="æ¸¬è©¦æ­¥é©Ÿ 2ï¼šå•Ÿå‹• SSR æœå‹™å™¨"></a><strong>æ¸¬è©¦æ­¥é©Ÿ 2ï¼šå•Ÿå‹• SSR æœå‹™å™¨</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿå‹• SSR æœå‹™å™¨</span></span><br><span class="line">npm run serve:ssr:your-project-name</span><br><span class="line"></span><br><span class="line"><span class="comment"># ğŸ’¡ è«‹å°‡ your-project-name æ›¿æ›ç‚ºæ‚¨çš„å¯¦éš›å°ˆæ¡ˆåç¨±</span></span><br><span class="line"><span class="comment"># ä¾‹å¦‚ï¼šnpm run serve:ssr:example_project_frontend</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–å¸¸è¦‹çš„ SSR å•Ÿå‹•å‘½ä»¤æ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment"># npm run serve:ssr</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœä¸ç¢ºå®šï¼Œå¯ä»¥æª¢æŸ¥ package.json çš„ scripts å€å¡Š</span></span><br></pre></td></tr></table></figure>

<p><strong>é æœŸè¼¸å‡ºï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Node Express server listening on http://localhost:4000</span><br></pre></td></tr></table></figure>

<h3 id="æ¸¬è©¦æ­¥é©Ÿ-3ï¼šé©—è­‰é é¢å…§å®¹"><a href="#æ¸¬è©¦æ­¥é©Ÿ-3ï¼šé©—è­‰é é¢å…§å®¹" class="headerlink" title="æ¸¬è©¦æ­¥é©Ÿ 3ï¼šé©—è­‰é é¢å…§å®¹"></a><strong>æ¸¬è©¦æ­¥é©Ÿ 3ï¼šé©—è­‰é é¢å…§å®¹</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸¬è©¦é¦–é </span></span><br><span class="line">curl -s http://localhost:4000/ | grep -E <span class="string">&quot;(title|Demo|å±•ç¤º)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸¬è©¦ç‰¹å®šé é¢</span></span><br><span class="line">curl -s http://localhost:4000/demo/components | grep -E <span class="string">&quot;(Demo|å±•ç¤º|æŒ‰éˆ•|å…ƒä»¶)&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>é æœŸè¼¸å‡ºï¼š</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo å±•ç¤ºä¸­å¿ƒ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Demo å±•ç¤ºä¸­å¿ƒ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>ä¸»è¦å‹•ä½œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>æ¬¡è¦å‹•ä½œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ¯-ä½¿ç”¨ç¯„ä¾‹"><a href="#ğŸ¯-ä½¿ç”¨ç¯„ä¾‹" class="headerlink" title="ğŸ¯ ä½¿ç”¨ç¯„ä¾‹"></a>ğŸ¯ <strong>ä½¿ç”¨ç¯„ä¾‹</strong></h2><h3 id="åœ¨çµ„ä»¶ä¸­ä½¿ç”¨-Transloco"><a href="#åœ¨çµ„ä»¶ä¸­ä½¿ç”¨-Transloco" class="headerlink" title="åœ¨çµ„ä»¶ä¸­ä½¿ç”¨ Transloco"></a><strong>åœ¨çµ„ä»¶ä¸­ä½¿ç”¨ Transloco</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/components/demo/demo.component.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoDirective</span>, <span class="title class_">TranslocoService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;app-demo&#x27;</span>,</span><br><span class="line">    <span class="attr">standalone</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">imports</span>: [<span class="title class_">TranslocoDirective</span>],</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div *transloco=&quot;let t&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h1&gt;&#123;&#123; t(&#x27;demo.title&#x27;) &#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;p&gt;&#123;&#123; t(&#x27;demo.subtitle&#x27;) &#125;&#125;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            &lt;div class=&quot;buttons&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;button class=&quot;primary&quot;&gt;&#123;&#123; t(&#x27;demo.buttons.primary&#x27;) &#125;&#125;&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;button class=&quot;secondary&quot;&gt;&#123;&#123; t(&#x27;demo.buttons.secondary&#x27;) &#125;&#125;&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            &lt;form&gt;</span></span><br><span class="line"><span class="string">                &lt;label&gt;&#123;&#123; t(&#x27;demo.form.username&#x27;) &#125;&#125;&lt;/label&gt;</span></span><br><span class="line"><span class="string">                &lt;input type=&quot;text&quot; /&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                &lt;label&gt;&#123;&#123; t(&#x27;demo.form.email&#x27;) &#125;&#125;&lt;/label&gt;</span></span><br><span class="line"><span class="string">                &lt;input type=&quot;email&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;/form&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DemoComponent</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="attr">transloco</span>: <span class="title class_">TranslocoService</span></span>) &#123;</span><br><span class="line">        <span class="comment">// ç¨‹å¼åŒ–ä½¿ç”¨</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">transloco</span>.<span class="title function_">translate</span>(<span class="string">&#x27;demo.title&#x27;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ‡æ›èªè¨€</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">transloco</span>.<span class="title function_">setActiveLang</span>(<span class="string">&#x27;en&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="èªè¨€åˆ‡æ›çµ„ä»¶"><a href="#èªè¨€åˆ‡æ›çµ„ä»¶" class="headerlink" title="èªè¨€åˆ‡æ›çµ„ä»¶"></a><strong>èªè¨€åˆ‡æ›çµ„ä»¶</strong></h3><p><strong>æª”æ¡ˆè·¯å¾‘ï¼š</strong> <code>src/app/shared/components/language-switcher/language-switcher.component.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;app-language-switcher&#x27;</span>,</span><br><span class="line">    <span class="attr">standalone</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;language-switcher&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;button (click)=&quot;setLang(&#x27;zh-tw&#x27;)&quot; [class.active]=&quot;currentLang === &#x27;zh-tw&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">                ç¹é«”ä¸­æ–‡</span></span><br><span class="line"><span class="string">            &lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button (click)=&quot;setLang(&#x27;en&#x27;)&quot; [class.active]=&quot;currentLang === &#x27;en&#x27;&quot;&gt;English&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="attr">styles</span>: [</span><br><span class="line">        <span class="string">`</span></span><br><span class="line"><span class="string">            .language-switcher button &#123;</span></span><br><span class="line"><span class="string">                margin: 0 5px;</span></span><br><span class="line"><span class="string">                padding: 8px 16px;</span></span><br><span class="line"><span class="string">                border: 1px solid #ccc;</span></span><br><span class="line"><span class="string">                background: white;</span></span><br><span class="line"><span class="string">                cursor: pointer;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            .language-switcher button.active &#123;</span></span><br><span class="line"><span class="string">                background: #007bff;</span></span><br><span class="line"><span class="string">                color: white;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">LanguageSwitcherComponent</span> &#123;</span><br><span class="line">    currentLang = <span class="variable language_">this</span>.<span class="property">transloco</span>.<span class="title function_">getActiveLang</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="attr">transloco</span>: <span class="title class_">TranslocoService</span></span>) &#123;</span><br><span class="line">        <span class="comment">// ç›£è½èªè¨€è®Šæ›´</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">transloco</span>.<span class="property">langChanges$</span>.<span class="title function_">subscribe</span>(<span class="function"><span class="params">lang</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">currentLang</span> = lang;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setLang</span>(<span class="params"><span class="attr">lang</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">transloco</span>.<span class="title function_">setActiveLang</span>(lang);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âš ï¸-å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#âš ï¸-å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>âš ï¸ <strong>å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</strong></h2><h3 id="å•é¡Œ-1ï¼šToken-éŒ¯èª¤"><a href="#å•é¡Œ-1ï¼šToken-éŒ¯èª¤" class="headerlink" title="å•é¡Œ 1ï¼šToken éŒ¯èª¤"></a><strong>å•é¡Œ 1ï¼šToken éŒ¯èª¤</strong></h3><p><strong>éŒ¯èª¤è¨Šæ¯ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NullInjectorError: No provider <span class="keyword">for</span> InjectionToken TRANSLOCO_TRANSPILER!</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ±ºæ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>ç¢ºèª <code>src/main.server.ts</code> ä½¿ç”¨ <code>app.config.server.ts</code></li>
<li>ç¢ºèª <code>mergeApplicationConfig(appConfig, serverConfig)</code> æ­£ç¢ºåˆä½µ</li>
</ol>
<h3 id="å•é¡Œ-2ï¼šèªç³»æª”æ¡ˆè¼‰å…¥å¤±æ•—"><a href="#å•é¡Œ-2ï¼šèªç³»æª”æ¡ˆè¼‰å…¥å¤±æ•—" class="headerlink" title="å•é¡Œ 2ï¼šèªç³»æª”æ¡ˆè¼‰å…¥å¤±æ•—"></a><strong>å•é¡Œ 2ï¼šèªç³»æª”æ¡ˆè¼‰å…¥å¤±æ•—</strong></h3><p><strong>éŒ¯èª¤è¨Šæ¯ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP 404: /assets/i18n/zh-tw.json</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ±ºæ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>æª¢æŸ¥ <code>angular.json</code> ä¸­çš„ assets é…ç½®</li>
<li>ç¢ºèªèªç³»æª”æ¡ˆè·¯å¾‘ï¼š<code>src/assets/i18n/*.json</code></li>
<li>é‡æ–°å»ºç½®å°ˆæ¡ˆ</li>
</ol>
<h3 id="å•é¡Œ-3ï¼šSSR-Loader-æ²’æœ‰è¢«è¼‰å…¥"><a href="#å•é¡Œ-3ï¼šSSR-Loader-æ²’æœ‰è¢«è¼‰å…¥" class="headerlink" title="å•é¡Œ 3ï¼šSSR Loader æ²’æœ‰è¢«è¼‰å…¥"></a><strong>å•é¡Œ 3ï¼šSSR Loader æ²’æœ‰è¢«è¼‰å…¥</strong></h3><p><strong>ç—‡ç‹€ï¼š</strong> æ²’æœ‰çœ‹åˆ°ä»»ä½• SSR log è¼¸å‡º</p>
<p><strong>è¨ºæ–·æ–¹æ³•ï¼š</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. æª¢æŸ¥ SSR Loader æ˜¯å¦è¢«è¼‰å…¥</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ğŸš€ SSR Loader è¢«åˆå§‹åŒ–äº†å—ï¼Ÿ&#x27;</span>); <span class="comment">// å¦‚æœçœ‹ä¸åˆ°é€™å€‹ï¼Œä»£è¡¨æ²’è¼‰å…¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. æ‰‹å‹•æª¢æŸ¥èªç³»æª”æ¡ˆæ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">// åœ¨çµ‚ç«¯åŸ·è¡Œï¼š</span></span><br><span class="line"><span class="comment">// ls -la dist/your-project-name/browser/assets/i18n/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æª¢æŸ¥è·¯å¾‘æ˜¯å¦æ­£ç¢º</span></span><br><span class="line"><span class="comment">// ç¢ºèª SSR Loader ä¸­çš„å°ˆæ¡ˆåç¨±æ˜¯å¦èˆ‡å¯¦éš›å»ºç½®ç›®éŒ„ä¸€è‡´</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ±ºæ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>æª¢æŸ¥ <code>main.server.ts</code> é…ç½®</li>
<li>ç¢ºèª server config ä¸­çš„ provider è¨»å†Š</li>
<li>é©—è­‰ <code>mergeApplicationConfig</code> å‘¼å«</li>
</ol>
<hr>
<h2 id="ğŸš€-éƒ¨ç½²å»ºè­°"><a href="#ğŸš€-éƒ¨ç½²å»ºè­°" class="headerlink" title="ğŸš€ éƒ¨ç½²å»ºè­°"></a>ğŸš€ <strong>éƒ¨ç½²å»ºè­°</strong></h2><h3 id="ç”Ÿç”¢ç’°å¢ƒé…ç½®"><a href="#ç”Ÿç”¢ç’°å¢ƒé…ç½®" class="headerlink" title="ç”Ÿç”¢ç’°å¢ƒé…ç½®"></a><strong>ç”Ÿç”¢ç’°å¢ƒé…ç½®</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/app.config.ts</span></span><br><span class="line"><span class="title function_">provideTransloco</span>(&#123;</span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="comment">// ç”Ÿç”¢ç’°å¢ƒè¨­å®š</span></span><br><span class="line">        <span class="attr">prodMode</span>: !<span class="title function_">isDevMode</span>(), <span class="comment">// æœƒæ ¹æ“šç’°å¢ƒè‡ªå‹•èª¿æ•´</span></span><br><span class="line">        <span class="attr">missingHandler</span>: &#123;</span><br><span class="line">            <span class="attr">logMissingKey</span>: !<span class="title function_">isDevMode</span>(), <span class="comment">// åªåœ¨é–‹ç™¼ç’°å¢ƒ log ç¼ºå¤±çš„ key</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">loader</span>: <span class="title class_">TranslocoBrowserLoader</span>,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<h3 id="å»ºç½®è…³æœ¬"><a href="#å»ºç½®è…³æœ¬" class="headerlink" title="å»ºç½®è…³æœ¬"></a><strong>å»ºç½®è…³æœ¬</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;build:prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build --configuration=production&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;serve:ssr:prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build:prod &amp;&amp; npm run serve:ssr&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;prerender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build --configuration=production&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-é…ç½®æª¢æŸ¥æ¸…å–®"><a href="#âœ…-é…ç½®æª¢æŸ¥æ¸…å–®" class="headerlink" title="âœ… é…ç½®æª¢æŸ¥æ¸…å–®"></a>âœ… <strong>é…ç½®æª¢æŸ¥æ¸…å–®</strong></h2><h3 id="ğŸ”-å°ˆæ¡ˆåç¨±é©—è­‰"><a href="#ğŸ”-å°ˆæ¡ˆåç¨±é©—è­‰" class="headerlink" title="ğŸ” å°ˆæ¡ˆåç¨±é©—è­‰"></a><strong>ğŸ” å°ˆæ¡ˆåç¨±é©—è­‰</strong></h3><ul>
<li><input disabled="" type="checkbox"> ç¢ºèªå¯¦éš›å°ˆæ¡ˆåç¨±ï¼ˆæª¢æŸ¥ <code>angular.json</code> å’Œ <code>package.json</code>ï¼‰</li>
<li><input disabled="" type="checkbox"> æ‰€æœ‰æª”æ¡ˆä¸­çš„ <code>your-project-name</code> éƒ½å·²æ›¿æ›ç‚ºå¯¦éš›å°ˆæ¡ˆåç¨±</li>
<li><input disabled="" type="checkbox"> SSR Loader ä¸­çš„è·¯å¾‘ä½¿ç”¨æ­£ç¢ºçš„å°ˆæ¡ˆåç¨±</li>
</ul>
<h3 id="ğŸ“-åŸºç¤é…ç½®"><a href="#ğŸ“-åŸºç¤é…ç½®" class="headerlink" title="ğŸ“ åŸºç¤é…ç½®"></a><strong>ğŸ“ åŸºç¤é…ç½®</strong></h3><ul>
<li><input disabled="" type="checkbox"> <code>angular.json</code> assets é…ç½®æ­£ç¢º</li>
<li><input disabled="" type="checkbox"> èªç³»æª”æ¡ˆå­˜åœ¨æ–¼ <code>src/assets/i18n/</code></li>
<li><input disabled="" type="checkbox"> JSON æ ¼å¼æ­£ç¢ºç„¡èª¤</li>
</ul>
<h3 id="âš™ï¸-SSR-é…ç½®"><a href="#âš™ï¸-SSR-é…ç½®" class="headerlink" title="âš™ï¸ SSR é…ç½®"></a><strong>âš™ï¸ SSR é…ç½®</strong></h3><ul>
<li><input disabled="" type="checkbox"> <code>main.server.ts</code> ä½¿ç”¨ <code>app.config.server.ts</code></li>
<li><input disabled="" type="checkbox"> Server config ä¸­æœ‰ <code>TRANSLOCO_LOADER</code> provider</li>
<li><input disabled="" type="checkbox"> <code>mergeApplicationConfig</code> æ­£ç¢ºå‘¼å«</li>
<li><input disabled="" type="checkbox"> SSR Loader å¯¦ç¾ <code>TranslocoLoader</code> ä»‹é¢</li>
</ul>
<h3 id="ğŸš€-é‹è¡Œæ™‚é©—è­‰"><a href="#ğŸš€-é‹è¡Œæ™‚é©—è­‰" class="headerlink" title="ğŸš€ é‹è¡Œæ™‚é©—è­‰"></a><strong>ğŸš€ é‹è¡Œæ™‚é©—è­‰</strong></h3><ul>
<li><input disabled="" type="checkbox"> å»ºç½®æ™‚çœ‹åˆ° SSR Transloco log</li>
<li><input disabled="" type="checkbox"> èªç³»æª”æ¡ˆæ­£ç¢ºè¤‡è£½åˆ° <code>dist/&#123;å°ˆæ¡ˆåç¨±&#125;/browser/assets/i18n/</code></li>
<li><input disabled="" type="checkbox"> é é¢é¡¯ç¤ºæ­£ç¢ºçš„ç¿»è­¯å…§å®¹</li>
<li><input disabled="" type="checkbox"> èªè¨€åˆ‡æ›åŠŸèƒ½æ­£å¸¸</li>
</ul>
<h3 id="ğŸ›-å¿«é€Ÿè¨ºæ–·"><a href="#ğŸ›-å¿«é€Ÿè¨ºæ–·" class="headerlink" title="ğŸ› å¿«é€Ÿè¨ºæ–·"></a><strong>ğŸ› å¿«é€Ÿè¨ºæ–·</strong></h3><p>å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹ä¾åºæª¢æŸ¥ï¼š</p>
<ol>
<li><strong>SSR Loader æ˜¯å¦è¢«è¼‰å…¥ï¼Ÿ</strong> â†’ å»ºç½®æ™‚æ‡‰è©²çœ‹åˆ°åˆå§‹åŒ– log</li>
<li><strong>å°ˆæ¡ˆåç¨±æ˜¯å¦æ­£ç¢ºï¼Ÿ</strong> â†’ æª¢æŸ¥ SSR Loader ä¸­çš„è·¯å¾‘</li>
<li><strong>èªç³»æª”æ¡ˆæ˜¯å¦å­˜åœ¨ï¼Ÿ</strong> â†’ æª¢æŸ¥ <code>dist/&#123;å°ˆæ¡ˆåç¨±&#125;/browser/assets/i18n/</code></li>
<li><strong>é…ç½®æ˜¯å¦åˆä½µï¼Ÿ</strong> â†’ ç¢ºèª <code>mergeApplicationConfig</code> å‘¼å«</li>
</ol>
<hr>
<h2 id="ğŸ‰-çµèª"><a href="#ğŸ‰-çµèª" class="headerlink" title="ğŸ‰ çµèª"></a>ğŸ‰ <strong>çµèª</strong></h2><p>æœ¬æŒ‡å—åŸºæ–¼å¯¦éš›é …ç›®ç¶“é©—ï¼Œæ¶µè“‹äº† Angular SSR + Transloco é…ç½®çš„æ‰€æœ‰é—œéµç’°ç¯€ã€‚æŒ‰ç…§é€™å€‹æŒ‡å—æ“ä½œï¼Œæ‚¨æ‡‰è©²èƒ½å¤ æˆåŠŸå»ºç«‹ä¸€å€‹æ”¯æ´å¤šèªç³»çš„ SSR Angular æ‡‰ç”¨ç¨‹å¼ã€‚</p>
<h3 id="ğŸ¯-é—œéµæˆåŠŸè¦ç´ "><a href="#ğŸ¯-é—œéµæˆåŠŸè¦ç´ " class="headerlink" title="ğŸ¯ é—œéµæˆåŠŸè¦ç´ "></a><strong>ğŸ¯ é—œéµæˆåŠŸè¦ç´ </strong></h3><ol>
<li><strong>æ­£ç¢ºçš„å°ˆæ¡ˆåç¨±æ›¿æ›</strong> - ç¢ºä¿æ‰€æœ‰ <code>your-project-name</code> éƒ½æ›¿æ›ç‚ºå¯¦éš›å°ˆæ¡ˆåç¨±</li>
<li><strong>å®Œæ•´çš„é…ç½®åˆä½µ</strong> - ä½¿ç”¨ <code>mergeApplicationConfig</code> ç¢ºä¿æ‰€æœ‰ providers éƒ½è¢«åŒ…å«</li>
<li><strong>æ˜ç¢ºçš„æª”æ¡ˆè·¯å¾‘</strong> - SSR Loader ä½¿ç”¨æ­£ç¢ºçš„æª”æ¡ˆç³»çµ±è·¯å¾‘</li>
<li><strong>è©³ç´°çš„é™¤éŒ¯è³‡è¨Š</strong> - åˆ©ç”¨ log è¼¸å‡ºå¿«é€Ÿå®šä½å•é¡Œ</li>
</ol>
<h3 id="ğŸ”§-æ•…éšœæ’é™¤åŸå‰‡"><a href="#ğŸ”§-æ•…éšœæ’é™¤åŸå‰‡" class="headerlink" title="ğŸ”§ æ•…éšœæ’é™¤åŸå‰‡"></a><strong>ğŸ”§ æ•…éšœæ’é™¤åŸå‰‡</strong></h3><p>å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹æŒ‰ç…§æª¢æŸ¥æ¸…å–®é€é …é©—è­‰ï¼Œä¸¦åƒè€ƒå¸¸è¦‹å•é¡Œè§£æ±ºæ–¹æ¡ˆã€‚è¨˜ä½ï¼š</p>
<ul>
<li><strong>90% çš„å•é¡Œéƒ½å‡ºåœ¨é…ç½®æ¶æ§‹ä¸Š</strong>ï¼Œåªæœ‰ 10% æ˜¯å¯¦ç¾ç´°ç¯€å•é¡Œ</li>
<li><strong>å°ˆæ¡ˆåç¨±ä¸ä¸€è‡´</strong>æ˜¯æœ€å¸¸è¦‹çš„é™·é˜±</li>
<li><strong>SSR Loader çš„ log è¼¸å‡º</strong>æ˜¯æœ€ä½³çš„è¨ºæ–·å·¥å…·</li>
</ul>
<p><strong>ç¥æ‚¨é…ç½®é †åˆ©ï¼</strong> ğŸš€</p>
<h2 id="ğŸ’¡-SSR-Transloco-é…ç½®æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-SSR-Transloco-é…ç½®æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ SSR + Transloco é…ç½®æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ SSR + Transloco é…ç½®æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[é–‹å§‹ Angular SSR + Transloco é…ç½®] --&gt; B&#123;æ˜¯å¦ç‚ºæ–°å°ˆæ¡ˆ?&#125;</span><br><span class="line">    </span><br><span class="line">    B --&gt;|æ˜¯| C[å®‰è£ Angular SSR]</span><br><span class="line">    B --&gt;|å¦| D[æª¢æŸ¥ç¾æœ‰ SSR é…ç½®]</span><br><span class="line">    </span><br><span class="line">    C --&gt; E[å®‰è£ Transloco]</span><br><span class="line">    D --&gt; E</span><br><span class="line">    </span><br><span class="line">    E --&gt; F[ç¢ºèªå°ˆæ¡ˆåç¨±]</span><br><span class="line">    F --&gt; G[æ›¿æ›æ‰€æœ‰ your-project-name]</span><br><span class="line">    </span><br><span class="line">    G --&gt; H[é…ç½® angular.json assets]</span><br><span class="line">    H --&gt; I[å»ºç«‹èªç³»æª”æ¡ˆ]</span><br><span class="line">    </span><br><span class="line">    I --&gt; J[é…ç½®ç€è¦½å™¨ç«¯ Loader]</span><br><span class="line">    J --&gt; K[é…ç½®ä¼ºæœå™¨ç«¯ Loader]</span><br><span class="line">    </span><br><span class="line">    K --&gt; L[å»ºç«‹ app.config.server.ts]</span><br><span class="line">    L --&gt; M[ä¿®æ”¹ main.server.ts]</span><br><span class="line">    </span><br><span class="line">    M --&gt; N[æ¸¬è©¦å»ºç½®]</span><br><span class="line">    N --&gt; O&#123;å»ºç½®æˆåŠŸ?&#125;</span><br><span class="line">    </span><br><span class="line">    O --&gt;|å¦| P[æª¢æŸ¥éŒ¯èª¤è¨Šæ¯]</span><br><span class="line">    P --&gt; P1&#123;æ˜¯ Token éŒ¯èª¤?&#125;</span><br><span class="line">    P1 --&gt;|æ˜¯| P2[æª¢æŸ¥ server config åˆä½µ]</span><br><span class="line">    P1 --&gt;|å¦| P3[æª¢æŸ¥å°ˆæ¡ˆåç¨±å’Œè·¯å¾‘]</span><br><span class="line">    P2 --&gt; N</span><br><span class="line">    P3 --&gt; N</span><br><span class="line">    </span><br><span class="line">    O --&gt;|æ˜¯| Q[æ¸¬è©¦ SSR å•Ÿå‹•]</span><br><span class="line">    Q --&gt; R&#123;SSR å•Ÿå‹•æˆåŠŸ?&#125;</span><br><span class="line">    </span><br><span class="line">    R --&gt;|å¦| S[æª¢æŸ¥ Loader åˆå§‹åŒ–]</span><br><span class="line">    S --&gt; T[æŸ¥çœ‹ console log]</span><br><span class="line">    T --&gt; N</span><br><span class="line">    </span><br><span class="line">    R --&gt;|æ˜¯| U[æ¸¬è©¦èªè¨€åˆ‡æ›]</span><br><span class="line">    U --&gt; V&#123;ç¿»è­¯é¡¯ç¤ºæ­£ç¢º?&#125;</span><br><span class="line">    </span><br><span class="line">    V --&gt;|å¦| W[æª¢æŸ¥èªç³»æª”æ¡ˆæ ¼å¼]</span><br><span class="line">    W --&gt; N</span><br><span class="line">    </span><br><span class="line">    V --&gt;|æ˜¯| X[éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ]</span><br><span class="line">    X --&gt; Y[é…ç½®å®Œæˆ âœ…]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="ğŸ”-æ¶æ§‹è¨­è¨ˆé—œéµæ±ºç­–"><a href="#ğŸ”-æ¶æ§‹è¨­è¨ˆé—œéµæ±ºç­–" class="headerlink" title="ğŸ” æ¶æ§‹è¨­è¨ˆé—œéµæ±ºç­–"></a>ğŸ” æ¶æ§‹è¨­è¨ˆé—œéµæ±ºç­–</h3><ol>
<li><p><strong>é›™é‡è¼‰å…¥æ©Ÿåˆ¶</strong></p>
<ul>
<li><strong>ç€è¦½å™¨ç«¯</strong>ï¼šä½¿ç”¨ HTTP è¼‰å…¥ï¼Œæ”¯æ´å‹•æ…‹èªè¨€åˆ‡æ›</li>
<li><strong>ä¼ºæœå™¨ç«¯</strong>ï¼šä½¿ç”¨æª”æ¡ˆç³»çµ±ï¼Œç¢ºä¿ SSR æ€§èƒ½å’Œç©©å®šæ€§</li>
<li><strong>é…ç½®éš”é›¢</strong>ï¼šå…©ç«¯ä½¿ç”¨ä¸åŒçš„ loader é¿å…è¡çª</li>
</ul>
</li>
<li><p><strong>å°ˆæ¡ˆåç¨±ç®¡ç†ç­–ç•¥</strong></p>
<ul>
<li><strong>çµ±ä¸€å‘½å</strong>ï¼šæ‰€æœ‰é…ç½®æª”æ¡ˆä½¿ç”¨ä¸€è‡´çš„å°ˆæ¡ˆåç¨±</li>
<li><strong>è·¯å¾‘æ­£ç¢ºæ€§</strong>ï¼šSSR Loader å¿…é ˆä½¿ç”¨æ­£ç¢ºçš„å»ºç½®è¼¸å‡ºè·¯å¾‘</li>
<li><strong>é©—è­‰æ©Ÿåˆ¶</strong>ï¼šé€é console log ç¢ºèªè¼‰å…¥ç‹€æ…‹</li>
</ul>
</li>
<li><p><strong>éŒ¯èª¤è™•ç†èˆ‡é™¤éŒ¯</strong></p>
<ul>
<li><strong>Layer åŒ–é™¤éŒ¯</strong>ï¼šå¾é…ç½® â†’ å»ºç½® â†’ é‹è¡Œé€å±¤æª¢æŸ¥</li>
<li><strong>é—œéµ Log é»</strong>ï¼šLoader åˆå§‹åŒ–ã€æª”æ¡ˆè¼‰å…¥ã€èªè¨€åˆ‡æ›</li>
<li><strong>å¸¸è¦‹é™·é˜±</strong>ï¼šToken æ³¨å…¥å¤±æ•—ã€è·¯å¾‘éŒ¯èª¤ã€é…ç½®åˆä½µå•é¡Œ</li>
</ul>
</li>
</ol>
<h3 id="ğŸš¨-é¿å…çš„é—œéµé™·é˜±"><a href="#ğŸš¨-é¿å…çš„é—œéµé™·é˜±" class="headerlink" title="ğŸš¨ é¿å…çš„é—œéµé™·é˜±"></a>ğŸš¨ é¿å…çš„é—œéµé™·é˜±</h3><ol>
<li><strong>å°ˆæ¡ˆåç¨±ä¸ä¸€è‡´</strong>ï¼š90% çš„å•é¡Œæºæ–¼æ­¤ï¼Œå¿…é ˆå®Œæ•´æ›¿æ›æ‰€æœ‰ä½”ä½ç¬¦</li>
<li><strong>é…ç½®åˆä½µéºæ¼</strong>ï¼šå¿˜è¨˜ä½¿ç”¨ <code>mergeApplicationConfig</code> å°è‡´ providers ä¸Ÿå¤±</li>
<li><strong>Assets é…ç½®ç¼ºå¤±</strong>ï¼šå¿˜è¨˜åœ¨ angular.json ä¸­é…ç½®èªç³»æª”æ¡ˆè·¯å¾‘</li>
</ol>
<h3 id="ğŸ“Š-æ•ˆèƒ½èˆ‡ç¶­è­·æ€§è€ƒé‡"><a href="#ğŸ“Š-æ•ˆèƒ½èˆ‡ç¶­è­·æ€§è€ƒé‡" class="headerlink" title="ğŸ“Š æ•ˆèƒ½èˆ‡ç¶­è­·æ€§è€ƒé‡"></a>ğŸ“Š æ•ˆèƒ½èˆ‡ç¶­è­·æ€§è€ƒé‡</h3><ul>
<li><strong>SSR é¦–å±æ¸²æŸ“</strong>ï¼šä¼ºæœå™¨ç«¯è¼‰å…¥æ¸›å°‘ FOUC (Flash of Untranslated Content)</li>
<li><strong>Bundle æœ€ä½³åŒ–</strong>ï¼šèªç³»æª”æ¡ˆæŒ‰éœ€è¼‰å…¥ï¼Œæ¸›å°‘åˆå§‹ bundle å¤§å°</li>
<li><strong>å¿«å–ç­–ç•¥</strong>ï¼šç€è¦½å™¨ç«¯å¯å¯¦ç¾èªç³»æª”æ¡ˆå¿«å–ï¼Œæå‡é«”é©—</li>
</ul>
<h2 id="ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥"><a href="#ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥" class="headerlink" title="ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥"></a>ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥</h2><h3 id="ğŸ¯-å¤šèªç³»-SEO-å„ªåŒ–"><a href="#ğŸ¯-å¤šèªç³»-SEO-å„ªåŒ–" class="headerlink" title="ğŸ¯ å¤šèªç³» SEO å„ªåŒ–"></a>ğŸ¯ å¤šèªç³» SEO å„ªåŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å°ä¸åŒèªè¨€çš„ SSR è·¯ç”±é…ç½®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">redirectTo</span>: <span class="string">&#x27;/zh-tw&#x27;</span>, <span class="attr">pathMatch</span>: <span class="string">&#x27;full&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;:lang&#x27;</span>, <span class="attr">component</span>: <span class="title class_">AppComponent</span>, <span class="attr">children</span>: [</span><br><span class="line">    <span class="comment">// å­è·¯ç”±é…ç½®</span></span><br><span class="line">  ]&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå‹•èªè¨€åµæ¸¬å’Œ SEO meta æ¨™ç±¤</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">configureSEOTransloco</span>(<span class="params"><span class="attr">lang</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">provide</span>: <span class="variable constant_">TRANSLOCO_CONFIG</span>,</span><br><span class="line">    <span class="attr">useValue</span>: &#123;</span><br><span class="line">      <span class="attr">availableLangs</span>: [<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;zh-tw&#x27;</span>],</span><br><span class="line">      <span class="attr">defaultLang</span>: lang,</span><br><span class="line">      <span class="attr">fallbackLang</span>: <span class="string">&#x27;zh-tw&#x27;</span>,</span><br><span class="line">      <span class="attr">reRenderOnLangChange</span>: <span class="literal">false</span>, <span class="comment">// SSR æ¨¡å¼ä¸‹å»ºè­°é—œé–‰</span></span><br><span class="line">      <span class="attr">prodMode</span>: environment.<span class="property">production</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”„-å‹•æ…‹èªç³»è¼‰å…¥"><a href="#ğŸ”„-å‹•æ…‹èªç³»è¼‰å…¥" class="headerlink" title="ğŸ”„ å‹•æ…‹èªç³»è¼‰å…¥"></a>ğŸ”„ å‹•æ…‹èªç³»è¼‰å…¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¦ç¾èªç³»æª”æ¡ˆçš„å‹•æ…‹è¼‰å…¥å’Œå¿«å–</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DynamicTranslocoLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> cache = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Translation</span>&gt;();</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Observable</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(lang)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">of</span>(<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(lang)!);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="property">get</span>&lt;<span class="title class_">Translation</span>&gt;(<span class="string">`/api/i18n/<span class="subst">$&#123;lang&#125;</span>`</span>).<span class="title function_">pipe</span>(</span><br><span class="line">      <span class="title function_">tap</span>(<span class="function"><span class="params">translation</span> =&gt;</span> <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(lang, translation)),</span><br><span class="line">      <span class="title function_">catchError</span>(<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">getFallbackTranslation</span>(lang))</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="ğŸ› ï¸-é™¤éŒ¯å·¥å…·"><a href="#ğŸ› ï¸-é™¤éŒ¯å·¥å…·" class="headerlink" title="ğŸ› ï¸ é™¤éŒ¯å·¥å…·"></a>ğŸ› ï¸ é™¤éŒ¯å·¥å…·</h3><ul>
<li><strong>Angular DevTools</strong>ï¼šæª¢æŸ¥ Transloco æœå‹™ç‹€æ…‹å’Œèªç³»è¼‰å…¥</li>
<li><strong>Network Tab</strong>ï¼šç›£æ§èªç³»æª”æ¡ˆçš„ HTTP è«‹æ±‚</li>
<li><strong>Console Log</strong>ï¼šåˆ©ç”¨ SSR Loader çš„è©³ç´°æ—¥èªŒé€²è¡Œè¨ºæ–·</li>
</ul>
<h3 id="ğŸ“š-å®˜æ–¹æ–‡ä»¶"><a href="#ğŸ“š-å®˜æ–¹æ–‡ä»¶" class="headerlink" title="ğŸ“š å®˜æ–¹æ–‡ä»¶"></a>ğŸ“š å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><strong><a target="_blank" rel="noopener" href="https://ngneat.github.io/transloco/">Transloco å®˜æ–¹æ–‡æª”</a></strong>ï¼šå®Œæ•´çš„ API å’Œé…ç½®æŒ‡å—</li>
<li><strong><a target="_blank" rel="noopener" href="https://angular.io/guide/ssr">Angular SSR Guide</a></strong>ï¼šä¼ºæœå™¨ç«¯æ¸²æŸ“å®˜æ–¹æŒ‡å—</li>
<li><strong><a target="_blank" rel="noopener" href="https://angular.io/guide/i18n">Angular i18n</a></strong>ï¼šå®˜æ–¹åœ‹éš›åŒ–è§£æ±ºæ–¹æ¡ˆæ¯”è¼ƒ</li>
<li><strong><a target="_blank" rel="noopener" href="https://github.com/angular/universal">Angular Universal</a></strong>ï¼šUniversal ç›¸é—œæŠ€è¡“æ–‡æª”</li>
</ul>
<h3 id="ğŸŒ-ç¤¾ç¾¤è³‡æº"><a href="#ğŸŒ-ç¤¾ç¾¤è³‡æº" class="headerlink" title="ğŸŒ ç¤¾ç¾¤è³‡æº"></a>ğŸŒ ç¤¾ç¾¤è³‡æº</h3><ul>
<li><strong><a target="_blank" rel="noopener" href="https://github.com/ngneat/transloco">Transloco GitHub</a></strong>ï¼šæœ€æ–°ç‰ˆæœ¬å’Œ issue è¿½è¹¤</li>
<li><strong><a target="_blank" rel="noopener" href="https://community.angular.io/">Angular Community</a></strong>ï¼šç¤¾ç¾¤è¨è«–å’Œæœ€ä½³å¯¦è¸</li>
<li><strong><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/transloco">Stack Overflow</a></strong>ï¼šå¸¸è¦‹å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ</li>
</ul>
<hr>
<p><strong>ä½œè€…</strong>ï¼šæŠ€è¡“åœ˜éšŠ<br><strong>ç‰ˆæœ¬</strong>ï¼šv1.0<br><strong>æœ€å¾Œæ›´æ–°</strong>ï¼š2025-01-31<br><strong>æ–‡ä»¶ç‹€æ…‹</strong>ï¼šâœ… å·²å®Œæˆ</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-ssr-transloco-setup-complete-guide/" data-id="cmg51yfqg0006anmz22qhc2rk" data-title="Angular SSR + Transloco åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19+</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Internationalization/" rel="tag">Internationalization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Multi-language/" rel="tag">Multi-language</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Production-Deployment/" rel="tag">Production Deployment</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR-Configuration/" rel="tag">SSR Configuration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server-Side-Rendering/" rel="tag">Server-Side Rendering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Transloco/" rel="tag">Transloco</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/i18n/" rel="tag">i18n</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jsverse-transloco/" rel="tag">jsverse&#x2F;transloco</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-httpclient-modern-configuration-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-httpclient-modern-configuration-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T07:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-httpclient-modern-configuration-guide/">Angular HttpClient ç¾ä»£åŒ–é…ç½®èˆ‡ withInterceptorsFromDI å¯¦æˆ°æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>provideHttpClient() é©å‘½</strong>ï¼šAngular 15+ æ–°å¼é…ç½®å–ä»£ HttpClientModuleï¼Œæ›´å° bundleã€æ›´éˆæ´»</li>
<li><strong>withInterceptorsFromDI() é—œéµ</strong>ï¼šå‘å¾Œå…¼å®¹èˆŠå¼ HTTP_INTERCEPTORSï¼Œæ”¯æ´ç¬¬ä¸‰æ–¹åº«æ¼¸é€²å¼é·ç§»</li>
<li><strong>é…ç½®ç­–ç•¥</strong>ï¼šæ–°èˆŠ interceptors å¯æ··åˆä½¿ç”¨ï¼Œæ»¿è¶³ä¸åŒå ´æ™¯éœ€æ±‚</li>
<li><strong>Transloco æ•´åˆ</strong>ï¼šå®Œç¾æ”¯æ´åœ‹éš›åŒ–åº«çš„ HTTP è¼‰å…¥éœ€æ±‚</li>
<li><strong>æœ€ä½³å¯¦è¸</strong>ï¼šå„ªå…ˆä½¿ç”¨æ–°å¼å‡½æ•¸ interceptorsï¼Œä¿ç•™ DI æ”¯æ´ä½œç‚ºå‘å¾Œå…¼å®¹</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æ–‡è©³ç´°èªªæ˜ Angular 15+ ä¸­ <code>provideHttpClient()</code> çš„ä½¿ç”¨æ–¹å¼ï¼Œç‰¹åˆ¥æ˜¯ <code>withInterceptorsFromDI()</code> é…ç½®é¸é …çš„ä½œç”¨å’Œæœ€ä½³å¯¦è¸ï¼š</p>
<ul>
<li>âš¡ <strong>ç¾ä»£åŒ–é…ç½®</strong>ï¼šå¾ HttpClientModule é·ç§»åˆ° provideHttpClient() çš„å®Œæ•´æŒ‡å—</li>
<li>ğŸ”„ <strong>å‘å¾Œå…¼å®¹ç­–ç•¥</strong>ï¼šwithInterceptorsFromDI() æ”¯æ´æ—¢æœ‰ interceptors å’Œç¬¬ä¸‰æ–¹åº«</li>
<li>ğŸŒ <strong>Transloco æ•´åˆ</strong>ï¼šåœ‹éš›åŒ–åº«çš„ HTTP è¼‰å…¥é…ç½®å¯¦æˆ°</li>
<li>ğŸ“Š <strong>æ•ˆèƒ½å„ªåŒ–</strong>ï¼šTree-shakable é…ç½®æ¸›å°‘ bundle å¤§å°</li>
<li>ğŸ› ï¸ <strong>å¯¦æˆ°ç¯„ä¾‹</strong>ï¼šå‰ç«¯å°ˆæ¡ˆçš„çœŸå¯¦é…ç½®æ¡ˆä¾‹</li>
</ul>
<h2 id="ğŸ—ï¸-Angular-HttpClient-é…ç½®æ¼”é€²æ¶æ§‹"><a href="#ğŸ—ï¸-Angular-HttpClient-é…ç½®æ¼”é€²æ¶æ§‹" class="headerlink" title="ğŸ—ï¸ Angular HttpClient é…ç½®æ¼”é€²æ¶æ§‹"></a>ğŸ—ï¸ Angular HttpClient é…ç½®æ¼”é€²æ¶æ§‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Angular HttpClient é…ç½®] --&gt; B[å‚³çµ±æ–¹å¼ Angular 14-]</span><br><span class="line">    A --&gt; C[ç¾ä»£æ–¹å¼ Angular 15+]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[HttpClientModule]</span><br><span class="line">    B --&gt; B2[HTTP_INTERCEPTORS Token]</span><br><span class="line">    B --&gt; B3[è¼ƒå¤§ Bundle å¤§å°]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[provideHttpClient]</span><br><span class="line">    C --&gt; C2[å‡½æ•¸å¼é…ç½®]</span><br><span class="line">    C --&gt; C3[Tree-shakable]</span><br><span class="line">    </span><br><span class="line">    C1 --&gt; D[é…ç½®é¸é …]</span><br><span class="line">    D --&gt; D1[withInterceptors]</span><br><span class="line">    D --&gt; D2[withInterceptorsFromDI]</span><br><span class="line">    D --&gt; D3[withFetch]</span><br><span class="line">    D --&gt; D4[withRequestsMadeViaParent]</span><br><span class="line">    </span><br><span class="line">    D1 --&gt; E[æ–°å¼å‡½æ•¸ Interceptors]</span><br><span class="line">    D2 --&gt; F[ç›¸å®¹èˆŠå¼ DI Interceptors]</span><br><span class="line">    </span><br><span class="line">    E --&gt; G[æ¨è–¦ä½¿ç”¨]</span><br><span class="line">    F --&gt; H[å‘å¾Œå…¼å®¹]</span><br><span class="line">    </span><br><span class="line">    G --&gt; I[æ›´å¥½çš„ TypeScript æ”¯æ´]</span><br><span class="line">    H --&gt; I</span><br><span class="line">    I --&gt; J[æœ€ä½³åŒ–é–‹ç™¼é«”é©—]</span><br></pre></td></tr></table></figure>

<h1 id="Angular-HttpClient-ç¾ä»£åŒ–é…ç½®æŒ‡å—"><a href="#Angular-HttpClient-ç¾ä»£åŒ–é…ç½®æŒ‡å—" class="headerlink" title="Angular HttpClient ç¾ä»£åŒ–é…ç½®æŒ‡å—"></a>Angular HttpClient ç¾ä»£åŒ–é…ç½®æŒ‡å—</h1><h2 id="ğŸ“‹-æ¦‚è¿°"><a href="#ğŸ“‹-æ¦‚è¿°" class="headerlink" title="ğŸ“‹ æ¦‚è¿°"></a>ğŸ“‹ æ¦‚è¿°</h2><p>æœ¬æ–‡æª”è©³ç´°èªªæ˜ Angular 15+ ä¸­ <code>provideHttpClient()</code> çš„ä½¿ç”¨æ–¹å¼ï¼Œç‰¹åˆ¥æ˜¯ <code>withInterceptorsFromDi()</code> é…ç½®é¸é …çš„ä½œç”¨å’Œæœ€ä½³å¯¦è¸ã€‚</p>
<h2 id="ğŸ—ï¸-åŸºæœ¬æ¦‚å¿µ"><a href="#ğŸ—ï¸-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="ğŸ—ï¸ åŸºæœ¬æ¦‚å¿µ"></a>ğŸ—ï¸ åŸºæœ¬æ¦‚å¿µ</h2><h3 id="provideHttpClient"><a href="#provideHttpClient" class="headerlink" title="provideHttpClient()"></a>provideHttpClient()</h3><p>Angular 15+ å¼•å…¥çš„æ–°å¼ HTTP å®¢æˆ¶ç«¯é…ç½®æ–¹å¼ï¼Œå–ä»£å‚³çµ±çš„ <code>HttpClientModule</code>ã€‚</p>
<p><strong>ç‰¹é»ï¼š</strong></p>
<ul>
<li>å‡½æ•¸å¼é…ç½®</li>
<li>Tree-shakableï¼ˆæ›´å°çš„ bundle å¤§å°ï¼‰</li>
<li>æ›´éˆæ´»çš„åŠŸèƒ½çµ„åˆ</li>
<li>æ›´å¥½çš„ TypeScript æ”¯æ´</li>
</ul>
<h3 id="withInterceptorsFromDI"><a href="#withInterceptorsFromDI" class="headerlink" title="withInterceptorsFromDI()"></a>withInterceptorsFromDI()</h3><p>å•Ÿç”¨åŸºæ–¼ä¾è³´æ³¨å…¥ï¼ˆDIï¼‰çš„ HTTP Interceptors æ”¯æ´ã€‚</p>
<p><strong>ç”¨é€”ï¼š</strong></p>
<ul>
<li>å‘å¾Œå…¼å®¹èˆŠå¼ <code>HTTP_INTERCEPTORS</code> token</li>
<li>æ”¯æ´ç¬¬ä¸‰æ–¹åº«çš„ interceptors</li>
<li>æ¼¸é€²å¼é·ç§»ç­–ç•¥</li>
</ul>
<h2 id="ğŸ”„-æ–°èˆŠå°æ¯”"><a href="#ğŸ”„-æ–°èˆŠå°æ¯”" class="headerlink" title="ğŸ”„ æ–°èˆŠå°æ¯”"></a>ğŸ”„ æ–°èˆŠå°æ¯”</h2><h3 id="èˆŠæ–¹å¼ï¼ˆAngular-14-ä»¥å‰ï¼‰"><a href="#èˆŠæ–¹å¼ï¼ˆAngular-14-ä»¥å‰ï¼‰" class="headerlink" title="èˆŠæ–¹å¼ï¼ˆAngular 14 ä»¥å‰ï¼‰"></a>èˆŠæ–¹å¼ï¼ˆAngular 14 ä»¥å‰ï¼‰</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NgModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpClientModule</span>, <span class="variable constant_">HTTP_INTERCEPTORS</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AuthInterceptor</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./interceptors/auth.interceptor&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">    <span class="attr">imports</span>: [</span><br><span class="line">        <span class="title class_">HttpClientModule</span>, <span class="comment">// åŒ¯å…¥æ•´å€‹æ¨¡çµ„</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="comment">// è¨»å†Š interceptors</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">HTTP_INTERCEPTORS</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">AuthInterceptor</span>,</span><br><span class="line">            <span class="attr">multi</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–°æ–¹å¼ï¼ˆAngular-15-ï¼‰"><a href="#æ–°æ–¹å¼ï¼ˆAngular-15-ï¼‰" class="headerlink" title="æ–°æ–¹å¼ï¼ˆAngular 15+ï¼‰"></a>æ–°æ–¹å¼ï¼ˆAngular 15+ï¼‰</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    provideHttpClient,</span><br><span class="line">    withInterceptors,</span><br><span class="line">    withInterceptorsFromDi,</span><br><span class="line">    <span class="variable constant_">HTTP_INTERCEPTORS</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="comment">// æ–¹å¼1ï¼šæ–°å¼å‡½æ•¸ interceptorsï¼ˆæ¨è–¦ï¼‰</span></span><br><span class="line">        <span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptors</span>([authInterceptor, loggingInterceptor])),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼2ï¼šç›¸å®¹èˆŠå¼ DI interceptors</span></span><br><span class="line">        <span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDi</span>()),</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">HTTP_INTERCEPTORS</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">AuthInterceptor</span>,</span><br><span class="line">            <span class="attr">multi</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="âš™ï¸-é…ç½®é¸é …è©³è§£"><a href="#âš™ï¸-é…ç½®é¸é …è©³è§£" class="headerlink" title="âš™ï¸ é…ç½®é¸é …è©³è§£"></a>âš™ï¸ é…ç½®é¸é …è©³è§£</h2><h3 id="1-åŸºæœ¬é…ç½®"><a href="#1-åŸºæœ¬é…ç½®" class="headerlink" title="1. åŸºæœ¬é…ç½®"></a>1. åŸºæœ¬é…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ€ç°¡å–®çš„é…ç½® - åªæä¾› HttpClient æœå‹™</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>();</span><br></pre></td></tr></table></figure>

<h3 id="2-æ”¯æ´-DI-Interceptors"><a href="#2-æ”¯æ´-DI-Interceptors" class="headerlink" title="2. æ”¯æ´ DI Interceptors"></a>2. æ”¯æ´ DI Interceptors</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¯æ´å‚³çµ±çš„ä¾è³´æ³¨å…¥ interceptors</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDi</span>());</span><br></pre></td></tr></table></figure>

<h3 id="3-æ–°å¼å‡½æ•¸-Interceptors"><a href="#3-æ–°å¼å‡½æ•¸-Interceptors" class="headerlink" title="3. æ–°å¼å‡½æ•¸ Interceptors"></a>3. æ–°å¼å‡½æ•¸ Interceptors</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æ–°çš„å‡½æ•¸å¼ interceptors</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(</span><br><span class="line">    <span class="title function_">withInterceptors</span>([authInterceptor, loggingInterceptor, errorHandlingInterceptor])</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="4-æ··åˆé…ç½®"><a href="#4-æ··åˆé…ç½®" class="headerlink" title="4. æ··åˆé…ç½®"></a>4. æ··åˆé…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ™‚æ”¯æ´æ–°èˆŠå…©ç¨®æ–¹å¼</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(</span><br><span class="line">    <span class="title function_">withInterceptors</span>([newStyleInterceptor]),</span><br><span class="line">    <span class="title function_">withInterceptorsFromDi</span>(),</span><br><span class="line">    <span class="title function_">withFetch</span>(), <span class="comment">// ä½¿ç”¨ Fetch API</span></span><br><span class="line">    <span class="title function_">withRequestsMadeViaParent</span>() <span class="comment">// SSR æ”¯æ´</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-å¯¦éš›ç¯„ä¾‹"><a href="#ğŸ¯-å¯¦éš›ç¯„ä¾‹" class="headerlink" title="ğŸ¯ å¯¦éš›ç¯„ä¾‹"></a>ğŸ¯ å¯¦éš›ç¯„ä¾‹</h2><h3 id="å‰ç«¯å°ˆæ¡ˆé…ç½®ç¯„ä¾‹"><a href="#å‰ç«¯å°ˆæ¡ˆé…ç½®ç¯„ä¾‹" class="headerlink" title="å‰ç«¯å°ˆæ¡ˆé…ç½®ç¯„ä¾‹"></a>å‰ç«¯å°ˆæ¡ˆé…ç½®ç¯„ä¾‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/app.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideHttpClient, withInterceptorsFromDi &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideTransloco &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TranslocoHttpLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./core/services/transloco.config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; environment &#125; <span class="keyword">from</span> <span class="string">&#x27;../environments/environment&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="comment">// HTTP å®¢æˆ¶ç«¯é…ç½® - æ”¯æ´ DI interceptors</span></span><br><span class="line">        <span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDi</span>()),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Transloco åœ‹éš›åŒ–é…ç½®</span></span><br><span class="line">        <span class="title function_">provideTransloco</span>(&#123;</span><br><span class="line">            <span class="attr">config</span>: &#123;</span><br><span class="line">                <span class="attr">availableLangs</span>: [<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;zh-tw&#x27;</span>],</span><br><span class="line">                <span class="attr">defaultLang</span>: <span class="string">&#x27;zh-tw&#x27;</span>,</span><br><span class="line">                <span class="attr">fallbackLang</span>: <span class="string">&#x27;zh-tw&#x27;</span>,</span><br><span class="line">                <span class="attr">reRenderOnLangChange</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">prodMode</span>: environment.<span class="property">production</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">loader</span>: <span class="title class_">TranslocoHttpLoader</span>, <span class="comment">// ä¾è³´ HttpClient</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="TranslocoHttpLoader-ä½¿ç”¨ç¯„ä¾‹"><a href="#TranslocoHttpLoader-ä½¿ç”¨ç¯„ä¾‹" class="headerlink" title="TranslocoHttpLoader ä½¿ç”¨ç¯„ä¾‹"></a>TranslocoHttpLoader ä½¿ç”¨ç¯„ä¾‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/core/services/transloco.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpClient</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span>, inject &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Translation</span>, <span class="title class_">TranslocoLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@jsverse/transloco&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Observable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>(&#123; <span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TranslocoHttpLoader</span> <span class="keyword">implements</span> <span class="title class_">TranslocoLoader</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ inject() å‡½æ•¸æ³¨å…¥ HttpClient</span></span><br><span class="line">    <span class="keyword">private</span> http = <span class="title function_">inject</span>(<span class="title class_">HttpClient</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getTranslation</span>(<span class="attr">lang</span>: <span class="built_in">string</span>): <span class="title class_">Observable</span>&lt;<span class="title class_">Translation</span>&gt; &#123;</span><br><span class="line">        <span class="comment">// è¼‰å…¥ç¿»è­¯æª”æ¡ˆ - éœ€è¦ HttpClient æ”¯æ´</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="property">get</span>&lt;<span class="title class_">Translation</span>&gt;(<span class="string">`/assets/i18n/<span class="subst">$&#123;lang&#125;</span>.json`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ -Interceptors-ç¯„ä¾‹"><a href="#æ·»åŠ -Interceptors-ç¯„ä¾‹" class="headerlink" title="æ·»åŠ  Interceptors ç¯„ä¾‹"></a>æ·»åŠ  Interceptors ç¯„ä¾‹</h3><h4 id="æ–°å¼å‡½æ•¸-Interceptor"><a href="#æ–°å¼å‡½æ•¸-Interceptor" class="headerlink" title="æ–°å¼å‡½æ•¸ Interceptor"></a>æ–°å¼å‡½æ•¸ Interceptor</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/core/interceptors/auth.interceptor.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpInterceptorFn</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AuthService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../services/auth.service&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">authInterceptor</span>: <span class="title class_">HttpInterceptorFn</span> = <span class="function">(<span class="params">req, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> authService = <span class="title function_">inject</span>(<span class="title class_">AuthService</span>);</span><br><span class="line">    <span class="keyword">const</span> token = authService.<span class="title function_">getToken</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">        <span class="keyword">const</span> authReq = req.<span class="title function_">clone</span>(&#123;</span><br><span class="line">            <span class="attr">setHeaders</span>: &#123;</span><br><span class="line">                <span class="title class_">Authorization</span>: <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">next</span>(authReq);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">next</span>(req);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.config.ts</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptors</span>([authInterceptor]));</span><br></pre></td></tr></table></figure>

<h4 id="èˆŠå¼é¡åˆ¥-Interceptor"><a href="#èˆŠå¼é¡åˆ¥-Interceptor" class="headerlink" title="èˆŠå¼é¡åˆ¥ Interceptor"></a>èˆŠå¼é¡åˆ¥ Interceptor</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/core/interceptors/legacy-auth.interceptor.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HttpInterceptor</span>, <span class="title class_">HttpRequest</span>, <span class="title class_">HttpHandler</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common/http&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">LegacyAuthInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HttpInterceptor</span> &#123;</span><br><span class="line">    <span class="title function_">intercept</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">HttpRequest</span>&lt;<span class="built_in">any</span>&gt;, <span class="attr">next</span>: <span class="title class_">HttpHandler</span></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (token) &#123;</span><br><span class="line">            <span class="keyword">const</span> authReq = req.<span class="title function_">clone</span>(&#123;</span><br><span class="line">                <span class="attr">setHeaders</span>: &#123;</span><br><span class="line">                    <span class="title class_">Authorization</span>: <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> next.<span class="title function_">handle</span>(authReq);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> next.<span class="title function_">handle</span>(req);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.config.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDi</span>()),</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">HTTP_INTERCEPTORS</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">LegacyAuthInterceptor</span>,</span><br><span class="line">            <span class="attr">multi</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸš€-æœ€ä½³å¯¦è¸"><a href="#ğŸš€-æœ€ä½³å¯¦è¸" class="headerlink" title="ğŸš€ æœ€ä½³å¯¦è¸"></a>ğŸš€ æœ€ä½³å¯¦è¸</h2><h3 id="1-é¸æ“‡é©ç•¶çš„é…ç½®æ–¹å¼"><a href="#1-é¸æ“‡é©ç•¶çš„é…ç½®æ–¹å¼" class="headerlink" title="1. é¸æ“‡é©ç•¶çš„é…ç½®æ–¹å¼"></a>1. é¸æ“‡é©ç•¶çš„é…ç½®æ–¹å¼</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… æ¨è–¦ï¼šæ–°å°ˆæ¡ˆä½¿ç”¨æ–°å¼ interceptors</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptors</span>([authInterceptor, loggingInterceptor]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å¯æ¥å—ï¼šéœ€è¦å‘å¾Œå…¼å®¹æ™‚</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDI</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ é¿å…ï¼šä¸å¿…è¦çš„è¤‡é›œé…ç½®</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(</span><br><span class="line">    <span class="title function_">withInterceptors</span>([newInterceptor]),</span><br><span class="line">    <span class="title function_">withInterceptorsFromDI</span>() <span class="comment">// åŒæ™‚ä½¿ç”¨å…©ç¨®æ–¹å¼å¯èƒ½é€ æˆæ··æ·†</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="2-æ¼¸é€²å¼é·ç§»ç­–ç•¥"><a href="#2-æ¼¸é€²å¼é·ç§»ç­–ç•¥" class="headerlink" title="2. æ¼¸é€²å¼é·ç§»ç­–ç•¥"></a>2. æ¼¸é€²å¼é·ç§»ç­–ç•¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éšæ®µ1ï¼šæ·»åŠ  withInterceptorsFromDI æ”¯æ´</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptorsFromDI</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// éšæ®µ2ï¼šé€æ­¥å°‡ interceptors æ”¹ç‚ºå‡½æ•¸å¼</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(</span><br><span class="line">    <span class="title function_">withInterceptors</span>([newAuthInterceptor]), <span class="comment">// æ–°çš„</span></span><br><span class="line">    <span class="title function_">withInterceptorsFromDI</span>() <span class="comment">// ä¿ç•™èˆŠçš„</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éšæ®µ3ï¼šå®Œå…¨é·ç§»åˆ°æ–°å¼</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptors</span>([authInterceptor, loggingInterceptor, errorInterceptor]));</span><br></pre></td></tr></table></figure>

<h3 id="3-ç’°å¢ƒç‰¹å®šé…ç½®"><a href="#3-ç’°å¢ƒç‰¹å®šé…ç½®" class="headerlink" title="3. ç’°å¢ƒç‰¹å®šé…ç½®"></a>3. ç’°å¢ƒç‰¹å®šé…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/app/config/http.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; environment &#125; <span class="keyword">from</span> <span class="string">&#x27;../../environments/environment&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getHttpClientConfig</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> interceptors = [authInterceptor];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é–‹ç™¼ç’°å¢ƒæ·»åŠ æ—¥èªŒ interceptor</span></span><br><span class="line">    <span class="keyword">if</span> (!environment.<span class="property">production</span>) &#123;</span><br><span class="line">        interceptors.<span class="title function_">push</span>(loggingInterceptor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">provideHttpClient</span>(</span><br><span class="line">        <span class="title function_">withInterceptors</span>(interceptors),</span><br><span class="line">        <span class="title function_">withFetch</span>() <span class="comment">// ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ Fetch API</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.config.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title function_">getHttpClientConfig</span>(),</span><br><span class="line">        <span class="comment">// ... å…¶ä»– providers</span></span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="âš ï¸-å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#âš ï¸-å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>âš ï¸ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="å•é¡Œ-1ï¼šTransloco-è¼‰å…¥å¤±æ•—"><a href="#å•é¡Œ-1ï¼šTransloco-è¼‰å…¥å¤±æ•—" class="headerlink" title="å•é¡Œ 1ï¼šTransloco è¼‰å…¥å¤±æ•—"></a>å•é¡Œ 1ï¼šTransloco è¼‰å…¥å¤±æ•—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: NullInjectorError: No provider for HttpClient</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ±ºæ–¹æ¡ˆï¼š</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¢ºä¿æœ‰æä¾› HttpClient</span></span><br><span class="line"><span class="attr">providers</span>: [</span><br><span class="line">  <span class="title function_">provideHttpClient</span>(),  <span class="comment">// æˆ– withInterceptorsFromDI()</span></span><br><span class="line">  <span class="title function_">provideTransloco</span>(&#123;...&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="å•é¡Œ-2ï¼šç¬¬ä¸‰æ–¹åº«-Interceptor-ä¸èµ·ä½œç”¨"><a href="#å•é¡Œ-2ï¼šç¬¬ä¸‰æ–¹åº«-Interceptor-ä¸èµ·ä½œç”¨" class="headerlink" title="å•é¡Œ 2ï¼šç¬¬ä¸‰æ–¹åº« Interceptor ä¸èµ·ä½œç”¨"></a>å•é¡Œ 2ï¼šç¬¬ä¸‰æ–¹åº« Interceptor ä¸èµ·ä½œç”¨</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ éŒ¯èª¤ï¼šåªä½¿ç”¨æ–°å¼ interceptors</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptors</span>([myInterceptor]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¢ºï¼šæ·»åŠ  DI æ”¯æ´</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(<span class="title function_">withInterceptors</span>([myInterceptor]), <span class="title function_">withInterceptorsFromDI</span>());</span><br></pre></td></tr></table></figure>

<h3 id="å•é¡Œ-3ï¼šSSR-ç’°å¢ƒä¸‹çš„å•é¡Œ"><a href="#å•é¡Œ-3ï¼šSSR-ç’°å¢ƒä¸‹çš„å•é¡Œ" class="headerlink" title="å•é¡Œ 3ï¼šSSR ç’°å¢ƒä¸‹çš„å•é¡Œ"></a>å•é¡Œ 3ï¼šSSR ç’°å¢ƒä¸‹çš„å•é¡Œ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… SSR å‹å¥½é…ç½®</span></span><br><span class="line"><span class="title function_">provideHttpClient</span>(</span><br><span class="line">    <span class="title function_">withInterceptorsFromDI</span>(),</span><br><span class="line">    <span class="title function_">withRequestsMadeViaParent</span>() <span class="comment">// SSR æ”¯æ´</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”§-é™¤éŒ¯æŠ€å·§"><a href="#ğŸ”§-é™¤éŒ¯æŠ€å·§" class="headerlink" title="ğŸ”§ é™¤éŒ¯æŠ€å·§"></a>ğŸ”§ é™¤éŒ¯æŠ€å·§</h2><h3 id="1-æª¢æŸ¥-HTTP-è«‹æ±‚"><a href="#1-æª¢æŸ¥-HTTP-è«‹æ±‚" class="headerlink" title="1. æª¢æŸ¥ HTTP è«‹æ±‚"></a>1. æª¢æŸ¥ HTTP è«‹æ±‚</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ æ—¥èªŒ interceptor é€²è¡Œé™¤éŒ¯</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">loggingInterceptor</span>: <span class="title class_">HttpInterceptorFn</span> = <span class="function">(<span class="params">req, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;HTTP Request:&#x27;</span>, req.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">next</span>(req).<span class="title function_">pipe</span>(<span class="title function_">tap</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;HTTP Response:&#x27;</span>, response)));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-é©—è­‰é…ç½®"><a href="#2-é©—è­‰é…ç½®" class="headerlink" title="2. é©—è­‰é…ç½®"></a>2. é©—è­‰é…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å…ƒä»¶ä¸­æª¢æŸ¥ HttpClient æ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TestComponent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> http = <span class="title function_">inject</span>(<span class="title class_">HttpClient</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ngOnInit</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;HttpClient available:&#x27;</span>, !!<span class="variable language_">this</span>.<span class="property">http</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“š-ç›¸é—œè³‡æº"><a href="#ğŸ“š-ç›¸é—œè³‡æº" class="headerlink" title="ğŸ“š ç›¸é—œè³‡æº"></a>ğŸ“š ç›¸é—œè³‡æº</h2><ul>
<li><a target="_blank" rel="noopener" href="https://angular.io/guide/http">Angular HttpClient å®˜æ–¹æ–‡æª”</a></li>
<li><a target="_blank" rel="noopener" href="https://angular.io/guide/http-interceptors">Interceptors é·ç§»æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://angular.io/guide/standalone-components">Standalone API é…ç½®</a></li>
<li><a target="_blank" rel="noopener" href="https://ngneat.github.io/transloco/">Transloco å®˜æ–¹æ–‡æª”</a></li>
</ul>
<h2 id="ğŸ“-ç¸½çµ"><a href="#ğŸ“-ç¸½çµ" class="headerlink" title="ğŸ“ ç¸½çµ"></a>ğŸ“ ç¸½çµ</h2><p><code>provideHttpClient(withInterceptorsFromDi())</code> çš„æ ¸å¿ƒä½œç”¨ï¼š</p>
<ol>
<li><strong>ç¾ä»£åŒ–é…ç½®</strong>ï¼šä½¿ç”¨æ–°çš„å‡½æ•¸å¼ API é…ç½® HTTP å®¢æˆ¶ç«¯</li>
<li><strong>å‘å¾Œå…¼å®¹</strong>ï¼šæ”¯æ´å‚³çµ±çš„ DI-based interceptors</li>
<li><strong>æ•ˆèƒ½å„ªåŒ–</strong>ï¼šTree-shakableï¼Œæ¸›å°‘ bundle å¤§å°</li>
<li><strong>æ¼¸é€²å¼é·ç§»</strong>ï¼šå…è¨±é€æ­¥å¾èˆŠæ–¹å¼é·ç§»åˆ°æ–°æ–¹å¼</li>
</ol>
<p>åœ¨å‰ç«¯å°ˆæ¡ˆä¸­ï¼Œé€™å€‹é…ç½®ç¢ºä¿ï¼š</p>
<ul>
<li>âœ… Transloco èƒ½æ­£å¸¸è¼‰å…¥ç¿»è­¯æª”æ¡ˆ</li>
<li>âœ… æœªä¾†å¯ä»¥è¼•é¬†æ·»åŠ èªè­‰ã€æ—¥èªŒç­‰ interceptors</li>
<li>âœ… ä¿æŒèˆ‡ Angular æœ€æ–°ç‰ˆæœ¬çš„å…¼å®¹æ€§</li>
<li>âœ… æ”¯æ´ SSR å’Œå…¶ä»–é€²éšåŠŸèƒ½</li>
</ul>
<h2 id="ğŸ’¡-HttpClient-é…ç½®æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-HttpClient-é…ç½®æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ HttpClient é…ç½®æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ HttpClient é…ç½®æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[é¸æ“‡ HttpClient é…ç½®æ–¹å¼] --&gt; B&#123;æ˜¯å¦ç‚ºæ–°å°ˆæ¡ˆ?&#125;</span><br><span class="line">    </span><br><span class="line">    B --&gt;|æ˜¯| C[ä½¿ç”¨ provideHttpClient()]</span><br><span class="line">    B --&gt;|å¦| D&#123;æ˜¯å¦éœ€è¦ç›¸å®¹æ—¢æœ‰ interceptors?&#125;</span><br><span class="line">    </span><br><span class="line">    D --&gt;|æ˜¯| E[withInterceptorsFromDI]</span><br><span class="line">    D --&gt;|å¦| F[æ–°å¼å‡½æ•¸ interceptors]</span><br><span class="line">    </span><br><span class="line">    C --&gt; G&#123;éœ€è¦ç¬¬ä¸‰æ–¹åº«æ”¯æ´?&#125;</span><br><span class="line">    G --&gt;|æ˜¯| H[æ·»åŠ  withInterceptorsFromDI]</span><br><span class="line">    G --&gt;|å¦| I[ç´”æ–°å¼é…ç½®]</span><br><span class="line">    </span><br><span class="line">    E --&gt; J[æ¼¸é€²å¼é·ç§»ç­–ç•¥]</span><br><span class="line">    F --&gt; K[ç¾ä»£åŒ–æœ€ä½³å¯¦è¸]</span><br><span class="line">    H --&gt; L[æ··åˆé…ç½®æ¨¡å¼]</span><br><span class="line">    I --&gt; M[æœ€ä½³æ•ˆèƒ½é…ç½®]</span><br><span class="line">    </span><br><span class="line">    J --&gt; N&#123;é·ç§»å®Œæˆ?&#125;</span><br><span class="line">    N --&gt;|å¦| O[ä¿æŒæ··åˆæ¨¡å¼]</span><br><span class="line">    N --&gt;|æ˜¯| P[ç§»é™¤ DI æ”¯æ´]</span><br><span class="line">    </span><br><span class="line">    K --&gt; Q[åŠ å…¥ç’°å¢ƒç‰¹å®šé…ç½®]</span><br><span class="line">    L --&gt; Q</span><br><span class="line">    M --&gt; Q</span><br><span class="line">    O --&gt; Q</span><br><span class="line">    P --&gt; Q</span><br><span class="line">    </span><br><span class="line">    Q --&gt; R[éƒ¨ç½²èˆ‡ç›£æ§]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="ğŸ”-æŠ€è¡“æ±ºç­–é—œéµé»"><a href="#ğŸ”-æŠ€è¡“æ±ºç­–é—œéµé»" class="headerlink" title="ğŸ” æŠ€è¡“æ±ºç­–é—œéµé»"></a>ğŸ” æŠ€è¡“æ±ºç­–é—œéµé»</h3><ol>
<li><p><strong>é…ç½®æ¨¡å¼é¸æ“‡</strong></p>
<ul>
<li><strong>æ–°å°ˆæ¡ˆ</strong>ï¼šå„ªå…ˆä½¿ç”¨ <code>withInterceptors([])</code> æ–°å¼å‡½æ•¸é…ç½®</li>
<li><strong>æ—¢æœ‰å°ˆæ¡ˆ</strong>ï¼šæ¡ç”¨ <code>withInterceptorsFromDI()</code> ä¿æŒå‘å¾Œå…¼å®¹</li>
<li><strong>æ··åˆå°ˆæ¡ˆ</strong>ï¼šåŒæ™‚ä½¿ç”¨å…©ç¨®æ¨¡å¼ï¼Œæ¼¸é€²å¼é·ç§»</li>
</ul>
</li>
<li><p><strong>æ•ˆèƒ½å½±éŸ¿åˆ†æ</strong></p>
<ul>
<li><strong>Bundle å¤§å°</strong>ï¼šæ–°å¼é…ç½®å¹³å‡æ¸›å°‘ 15-20% HTTP ç›¸é—œä»£ç¢¼</li>
<li><strong>Tree-shaking</strong>ï¼šæœªä½¿ç”¨çš„ interceptor åŠŸèƒ½æœƒè¢«è‡ªå‹•ç§»é™¤</li>
<li><strong>é‹è¡Œæ™‚æ•ˆèƒ½</strong>ï¼šå‡½æ•¸å¼ interceptors æœ‰æ›´å¥½çš„åŸ·è¡Œæ•ˆç‡</li>
</ul>
</li>
<li><p><strong>ç¶­è­·æ€§è€ƒé‡</strong></p>
<ul>
<li><strong>ä¾è³´ç®¡ç†</strong>ï¼šæ¸›å°‘å° Module ç³»çµ±çš„ä¾è³´</li>
<li><strong>æ¸¬è©¦å‹å–„</strong>ï¼šå‡½æ•¸å¼é…ç½®æ›´å®¹æ˜“é€²è¡Œå–®å…ƒæ¸¬è©¦</li>
<li><strong>é¡å‹å®‰å…¨</strong>ï¼šæ›´å¥½çš„ TypeScript æ¨æ–·å’ŒéŒ¯èª¤æª¢æŸ¥</li>
</ul>
</li>
</ol>
<h3 id="ğŸš¨-é¿å…çš„å¸¸è¦‹é™·é˜±"><a href="#ğŸš¨-é¿å…çš„å¸¸è¦‹é™·é˜±" class="headerlink" title="ğŸš¨ é¿å…çš„å¸¸è¦‹é™·é˜±"></a>ğŸš¨ é¿å…çš„å¸¸è¦‹é™·é˜±</h3><ol>
<li><strong>éåº¦é…ç½®</strong>ï¼šä¸éœ€è¦åŒæ™‚ä½¿ç”¨æ–°èˆŠå…©ç¨®æ–¹å¼ï¼Œé™¤éæœ‰æ˜ç¢ºéœ€æ±‚</li>
<li><strong>å¿½ç•¥ç¬¬ä¸‰æ–¹åº«</strong>ï¼šä½¿ç”¨ Translocoã€Auth0 ç­‰åº«æ™‚å¿…é ˆå•Ÿç”¨ DI æ”¯æ´</li>
<li><strong>SSR å…¼å®¹æ€§</strong>ï¼šå¿˜è¨˜é…ç½® <code>withRequestsMadeViaParent()</code> å°è‡´ SSR å•é¡Œ</li>
</ol>
<h2 id="ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥"><a href="#ğŸš€-é€²éšæ‡‰ç”¨ç­–ç•¥" class="headerlink" title="ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥"></a>ğŸš€ é€²éšæ‡‰ç”¨ç­–ç•¥</h2><h3 id="ğŸ¯-ä¼æ¥­ç´šé…ç½®ç­–ç•¥"><a href="#ğŸ¯-ä¼æ¥­ç´šé…ç½®ç­–ç•¥" class="headerlink" title="ğŸ¯ ä¼æ¥­ç´šé…ç½®ç­–ç•¥"></a>ğŸ¯ ä¼æ¥­ç´šé…ç½®ç­–ç•¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼æ¥­ç´š HttpClient é…ç½®å·¥å» </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createEnterpriseHttpConfig</span>(<span class="params"><span class="attr">environment</span>: <span class="built_in">any</span></span>): <span class="title class_">Provider</span>[] &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">interceptors</span>: <span class="title class_">HttpInterceptorFn</span>[] = [</span><br><span class="line">        authTokenInterceptor,</span><br><span class="line">        correlationIdInterceptor,</span><br><span class="line">        retryInterceptor</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é–‹ç™¼ç’°å¢ƒæ·»åŠ é™¤éŒ¯å·¥å…·</span></span><br><span class="line">    <span class="keyword">if</span> (!environment.<span class="property">production</span>) &#123;</span><br><span class="line">        interceptors.<span class="title function_">push</span>(</span><br><span class="line">            requestLoggingInterceptor,</span><br><span class="line">            responseTimeInterceptor,</span><br><span class="line">            mockDataInterceptor</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="title function_">provideHttpClient</span>(</span><br><span class="line">            <span class="title function_">withInterceptors</span>(interceptors),</span><br><span class="line">            <span class="title function_">withInterceptorsFromDI</span>(), <span class="comment">// æ”¯æ´ç¬¬ä¸‰æ–¹åº«</span></span><br><span class="line">            <span class="title function_">withFetch</span>(), <span class="comment">// ç¾ä»£åŒ– HTTP å¯¦ç¾</span></span><br><span class="line">            <span class="title function_">withRequestsMadeViaParent</span>() <span class="comment">// SSR æ”¯æ´</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// ç’°å¢ƒç‰¹å®šçš„ HTTP é…ç½®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">HTTP_CONFIG</span>,</span><br><span class="line">            <span class="attr">useValue</span>: &#123;</span><br><span class="line">                <span class="attr">timeout</span>: environment.<span class="property">httpTimeout</span>,</span><br><span class="line">                <span class="attr">retryAttempts</span>: environment.<span class="property">httpRetryAttempts</span>,</span><br><span class="line">                <span class="attr">baseUrl</span>: environment.<span class="property">apiBaseUrl</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”„-è‡ªå‹•åŒ–é·ç§»å·¥å…·"><a href="#ğŸ”„-è‡ªå‹•åŒ–é·ç§»å·¥å…·" class="headerlink" title="ğŸ”„ è‡ªå‹•åŒ–é·ç§»å·¥å…·"></a>ğŸ”„ è‡ªå‹•åŒ–é·ç§»å·¥å…·</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå‹•æª¢æ¸¬ä¸¦å»ºè­°é·ç§»çš„å·¥å…·å‡½æ•¸</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">analyzeHttpConfigMigration</span>(<span class="params"><span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> analysis = &#123;</span><br><span class="line">        <span class="attr">hasHttpClientModule</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">hasProvideHttpClient</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">needsDIMigration</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">recommendations</span>: []</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†æç¾æœ‰é…ç½®</span></span><br><span class="line">    appConfig.<span class="property">providers</span>?.<span class="title function_">forEach</span>(<span class="function"><span class="params">provider</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isHttpClientModule</span>(provider)) &#123;</span><br><span class="line">            analysis.<span class="property">hasHttpClientModule</span> = <span class="literal">true</span>;</span><br><span class="line">            analysis.<span class="property">recommendations</span>.<span class="title function_">push</span>(<span class="string">&#x27;é·ç§»åˆ° provideHttpClient()&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">isLegacyInterceptor</span>(provider)) &#123;</span><br><span class="line">            analysis.<span class="property">needsDIMigration</span> = <span class="literal">true</span>;</span><br><span class="line">            analysis.<span class="property">recommendations</span>.<span class="title function_">push</span>(<span class="string">&#x27;æ·»åŠ  withInterceptorsFromDI() æ”¯æ´&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> analysis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ§ª-æ¸¬è©¦ç­–ç•¥å¢å¼·"><a href="#ğŸ§ª-æ¸¬è©¦ç­–ç•¥å¢å¼·" class="headerlink" title="ğŸ§ª æ¸¬è©¦ç­–ç•¥å¢å¼·"></a>ğŸ§ª æ¸¬è©¦ç­–ç•¥å¢å¼·</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å° HttpClient é…ç½®çš„æ¸¬è©¦å·¥å…·</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createHttpClientTestingConfig</span>(<span class="params"></span>): <span class="title class_">Provider</span>[] &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="title function_">provideHttpClient</span>(</span><br><span class="line">            <span class="title function_">withInterceptors</span>([</span><br><span class="line">                mockAuthInterceptor,</span><br><span class="line">                testLoggingInterceptor</span><br><span class="line">            ]),</span><br><span class="line">            <span class="title function_">withInterceptorsFromDI</span>()</span><br><span class="line">        ),</span><br><span class="line">        <span class="title function_">provideHttpClientTesting</span>(),</span><br><span class="line">        <span class="comment">// æ¸¬è©¦å°ˆç”¨çš„æ¨¡æ“¬æ•¸æ“šæä¾›è€…</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="variable constant_">TEST_HTTP_CONFIG</span>,</span><br><span class="line">            <span class="attr">useValue</span>: &#123;</span><br><span class="line">                <span class="attr">enableMocking</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">responseDelay</span>: <span class="number">100</span>,</span><br><span class="line">                <span class="attr">errorRate</span>: <span class="number">0.1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="ğŸ› ï¸-é–‹ç™¼å·¥å…·"><a href="#ğŸ› ï¸-é–‹ç™¼å·¥å…·" class="headerlink" title="ğŸ› ï¸ é–‹ç™¼å·¥å…·"></a>ğŸ› ï¸ é–‹ç™¼å·¥å…·</h3><ul>
<li><strong>Angular DevTools</strong>ï¼šç›£æ§ HTTP è«‹æ±‚å’Œ interceptors åŸ·è¡Œ</li>
<li><strong>Network Tab</strong>ï¼šæª¢æŸ¥å¯¦éš›çš„ HTTP è«‹æ±‚å’Œå›æ‡‰</li>
<li><strong>Angular CLI</strong>ï¼š<code>ng update</code> è‡ªå‹•åŒ–é·ç§»è¼”åŠ©</li>
</ul>
<h3 id="ğŸ“š-å®˜æ–¹æ–‡ä»¶"><a href="#ğŸ“š-å®˜æ–¹æ–‡ä»¶" class="headerlink" title="ğŸ“š å®˜æ–¹æ–‡ä»¶"></a>ğŸ“š å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><strong><a target="_blank" rel="noopener" href="https://angular.io/guide/http">Angular HttpClient Guide</a></strong>ï¼šå®˜æ–¹ HTTP å®¢æˆ¶ç«¯å®Œæ•´æŒ‡å—</li>
<li><strong><a target="_blank" rel="noopener" href="https://angular.io/guide/http-interceptors">HTTP Interceptors</a></strong>ï¼šæ””æˆªå™¨ä½¿ç”¨å’Œé…ç½®</li>
<li><strong><a target="_blank" rel="noopener" href="https://angular.io/guide/standalone-components#configuring-dependency-injection">Standalone Bootstrap</a></strong>ï¼šç¨ç«‹çµ„ä»¶é…ç½®æŒ‡å—</li>
<li><strong><a target="_blank" rel="noopener" href="https://update.angular.io/">Angular Update Guide</a></strong>ï¼šç‰ˆæœ¬å‡ç´šå’Œé·ç§»æŒ‡å—</li>
</ul>
<h3 id="ğŸŒ-ç¤¾ç¾¤è³‡æº"><a href="#ğŸŒ-ç¤¾ç¾¤è³‡æº" class="headerlink" title="ğŸŒ ç¤¾ç¾¤è³‡æº"></a>ğŸŒ ç¤¾ç¾¤è³‡æº</h3><ul>
<li><strong><a target="_blank" rel="noopener" href="https://blog.angular.io/">Angular Blog</a></strong>ï¼šå®˜æ–¹æŠ€è¡“éƒ¨è½æ ¼</li>
<li><strong><a target="_blank" rel="noopener" href="https://github.com/angular/angular/discussions">GitHub Discussion</a></strong>ï¼šæŠ€è¡“è¨è«–å’Œå•é¡Œè§£ç­”</li>
<li><strong><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/tagged/angular-httpclient">Stack Overflow</a></strong>ï¼šå¸¸è¦‹å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ</li>
<li><strong><a target="_blank" rel="noopener" href="https://www.angularjp.org/">Angular Community</a></strong>ï¼šç¤¾ç¾¤äº¤æµå’Œæœ€ä½³å¯¦è¸åˆ†äº«</li>
</ul>
<h3 id="ğŸ”—-ç›¸é—œå·¥å…·å’Œåº«"><a href="#ğŸ”—-ç›¸é—œå·¥å…·å’Œåº«" class="headerlink" title="ğŸ”— ç›¸é—œå·¥å…·å’Œåº«"></a>ğŸ”— ç›¸é—œå·¥å…·å’Œåº«</h3><ul>
<li><strong><a target="_blank" rel="noopener" href="https://ngneat.github.io/transloco/">Transloco</a></strong>ï¼šåœ‹éš›åŒ–è§£æ±ºæ–¹æ¡ˆ</li>
<li><strong><a target="_blank" rel="noopener" href="https://angular.io/guide/service-worker-intro">Angular PWA</a></strong>ï¼šProgressive Web App æ”¯æ´</li>
<li><strong><a target="_blank" rel="noopener" href="https://rxjs.dev/">RxJS</a></strong>ï¼šéŸ¿æ‡‰å¼ç¨‹å¼è¨­è¨ˆå·¥å…·</li>
<li><strong><a target="_blank" rel="noopener" href="https://github.com/Zak-C/ngx-loading">NGX-Loading</a></strong>ï¼šHTTP è«‹æ±‚è¼‰å…¥ç‹€æ…‹ç®¡ç†</li>
</ul>
<hr>
<p><strong>ä½œè€…</strong>ï¼šæŠ€è¡“åœ˜éšŠ<br><strong>ç‰ˆæœ¬</strong>ï¼šv1.0<br><strong>æœ€å¾Œæ›´æ–°</strong>ï¼š2025-01-31<br><strong>æ–‡ä»¶ç‹€æ…‹</strong>ï¼šâœ… å·²å®Œæˆ</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-httpclient-modern-configuration-guide/" data-id="cmg51yfqf0004anmzfkzb7sud" data-title="Angular HttpClient ç¾ä»£åŒ–é…ç½®èˆ‡ withInterceptorsFromDI å¯¦æˆ°æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-15/" rel="tag">Angular 15+</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-Configuration/" rel="tag">Angular Configuration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dependency-Injection/" rel="tag">Dependency Injection</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP-Interceptors/" rel="tag">HTTP Interceptors</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Migration-Guide/" rel="tag">Migration Guide</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Standalone-Components/" rel="tag">Standalone Components</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Transloco/" rel="tag">Transloco</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/provideHttpClient/" rel="tag">provideHttpClient</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/withInterceptorsFromDI/" rel="tag">withInterceptorsFromDI</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-eslint-configuration-best-practices-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/eslint-configuration-best-practices-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T06:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/eslint-configuration-best-practices-guide/">ESLint 9.x é©å‘½æ€§é…ç½®èˆ‡å‰ç«¯é–‹ç™¼æœ€ä½³åŒ–å¯¦æˆ°æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>ESLint 9.x é©å‘½</strong>ï¼šFlat Config å–ä»£è¤‡é›œå±¤ç´šé…ç½®ï¼Œå–®ä¸€æª”æ¡ˆç®¡ç†æ‰€æœ‰è¦å‰‡</li>
<li><strong>å‘½åè¦ç¯„ç§‘å­¸</strong>ï¼šTypeScript Interface PascalCase é™ä½èªçŸ¥è² è·</li>
<li><strong>â€“no-warn-ignored å„ªåŒ–</strong>ï¼šæ¶ˆé™¤å™ªéŸ³æé†’ï¼Œå°ˆæ³¨çœŸæ­£éœ€è¦ä¿®æ­£çš„å•é¡Œ</li>
<li><strong>å°ˆæ¡ˆé‡æ§‹æ€ç¶­</strong>ï¼šç³»çµ±æ€§æª¢æŸ¥å½±éŸ¿åŸŸï¼Œè‡ªå‹•åŒ–é©—è­‰ç¢ºä¿ä¸€è‡´æ€§</li>
<li><strong>Observable $ å¾Œç¶´</strong>ï¼šç¾ä»£åŒˆç‰™åˆ©å‘½åæ³•ï¼Œè¦–è¦ºåŒ–é¡å‹ç³»çµ±</li>
</ol>
<h2 id="ğŸ› ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ› ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ› ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ› ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æ–‡æ·±åº¦åˆ†æäº† ESLint 9.x åœ¨èƒ½æºç®¡ç†ç³»çµ± Angular å‰ç«¯å°ˆæ¡ˆä¸­çš„é…ç½®å¯¦æˆ°ï¼Œå±•ç¤ºå¦‚ä½•é€éç¾ä»£åŒ–å·¥å…·éˆæå‡é–‹ç™¼é«”é©—ï¼š</p>
<ul>
<li>âš¡ <strong>ESLint 9.x å‡ç´š</strong>ï¼šFlat Config ç°¡åŒ–é…ç½®ç®¡ç†</li>
<li>ğŸ¯ <strong>å‘½åè¦ç¯„å„ªåŒ–</strong>ï¼šTypeScript å’Œ Angular æœ€ä½³å¯¦è¸</li>
<li>ğŸ”§ <strong>é–‹ç™¼é«”é©—æ”¹å–„</strong>ï¼šæ¸›å°‘å™ªéŸ³ï¼Œæå‡ CI&#x2F;CD æ•ˆç‡</li>
<li>ğŸ”„ <strong>é‡æ§‹ç­–ç•¥</strong>ï¼šç³»çµ±æ€§æ–¹æ³•è™•ç†å°ˆæ¡ˆæ”¹åå’Œæ¶æ§‹èª¿æ•´</li>
<li>ğŸ“Š <strong>æ•ˆæœè©•ä¼°</strong>ï¼šé…ç½®å³æ–‡æª”çš„åœ˜éšŠå”ä½œå“²å­¸</li>
</ul>
<h2 id="ğŸ—ï¸-ESLint-9-x-é…ç½®æ¶æ§‹"><a href="#ğŸ—ï¸-ESLint-9-x-é…ç½®æ¶æ§‹" class="headerlink" title="ğŸ—ï¸ ESLint 9.x é…ç½®æ¶æ§‹"></a>ğŸ—ï¸ ESLint 9.x é…ç½®æ¶æ§‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ESLint 9.x] --&gt; B[Flat Config]</span><br><span class="line">    B --&gt; C[å–®ä¸€é…ç½®æª”æ¡ˆ]</span><br><span class="line">    B --&gt; D[æª”æ¡ˆé¡å‹åˆ†é›¢]</span><br><span class="line">    B --&gt; E[å…§å»ºå¿½ç•¥è¦å‰‡]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[eslint.config.js]</span><br><span class="line">    D --&gt; D1[TypeScript æª”æ¡ˆ]</span><br><span class="line">    D --&gt; D2[HTML æ¨¡æ¿]</span><br><span class="line">    D --&gt; D3[æ¸¬è©¦æª”æ¡ˆ]</span><br><span class="line">    </span><br><span class="line">    E --&gt; E1[å–ä»£ .eslintignore]</span><br><span class="line">    E --&gt; E2[ignores å±¬æ€§]</span><br><span class="line">    </span><br><span class="line">    C1 --&gt; F[é…ç½®ç‰©ä»¶é™£åˆ—]</span><br><span class="line">    F --&gt; F1[æª”æ¡ˆåŒ¹é…è¦å‰‡]</span><br><span class="line">    F --&gt; F2[èªè¨€é¸é …è¨­å®š]</span><br><span class="line">    F --&gt; F3[æ’ä»¶å’Œè¦å‰‡]</span><br><span class="line">    </span><br><span class="line">    F1 --&gt; G[é‡å°æ€§é…ç½®]</span><br><span class="line">    F2 --&gt; G</span><br><span class="line">    F3 --&gt; G</span><br><span class="line">    G --&gt; H[æœ€ä½³åŒ–é–‹ç™¼é«”é©—]</span><br></pre></td></tr></table></figure>



<h2 id="ğŸš€-ESLint-9-x-é©å‘½æ€§è®ŠåŒ–"><a href="#ğŸš€-ESLint-9-x-é©å‘½æ€§è®ŠåŒ–" class="headerlink" title="ğŸš€ ESLint 9.x é©å‘½æ€§è®ŠåŒ–"></a>ğŸš€ ESLint 9.x é©å‘½æ€§è®ŠåŒ–</h2><h3 id="ğŸ’¡-æ ¸å¿ƒæ”¹è®Š"><a href="#ğŸ’¡-æ ¸å¿ƒæ”¹è®Š" class="headerlink" title="ğŸ’¡ æ ¸å¿ƒæ”¹è®Š"></a>ğŸ’¡ æ ¸å¿ƒæ”¹è®Š</h3><ul>
<li><strong>Flat Config</strong>: å‘Šåˆ¥è¤‡é›œçš„å±¤ç´šé…ç½®ï¼Œæ“æŠ±æ‰å¹³åŒ–</li>
<li><strong>å–®ä¸€é…ç½®æ–‡ä»¶</strong>: <code>eslint.config.js</code> å–ä»£å¤šå€‹ <code>.eslintrc.*</code> æ–‡ä»¶</li>
<li><strong>æ›´å¼·çš„ TypeScript æ•´åˆ</strong>: åŸç”Ÿæ”¯æ´ ES æ¨¡çµ„</li>
</ul>
<h3 id="ğŸ¯-å¯¦æˆ°é…ç½®"><a href="#ğŸ¯-å¯¦æˆ°é…ç½®" class="headerlink" title="ğŸ¯ å¯¦æˆ°é…ç½®"></a>ğŸ¯ å¯¦æˆ°é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eslint.config.js - æ–°æ™‚ä»£çš„é…ç½®æ–¹å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&#x27;src/**/*.ts&#x27;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parser</span>: typescriptParser,</span><br><span class="line">      <span class="attr">parserOptions</span>: &#123; <span class="attr">project</span>: <span class="string">&#x27;./tsconfig.json&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123; <span class="string">&#x27;@typescript-eslint&#x27;</span>: typescriptEslint &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123; <span class="comment">/* é‡å°æ€§è¦å‰‡ */</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&#x27;src/**/*.html&#x27;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123; <span class="attr">parser</span>: angularTemplateParser &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123; <span class="string">&#x27;@angular-eslint/template&#x27;</span>: angularTemplateEslint &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">ignores</span>: [<span class="string">&#x27;dist/**&#x27;</span>, <span class="string">&#x27;node_modules/**&#x27;</span>] <span class="comment">// ç›´æ¥å…§å»ºå¿½ç•¥</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”§-é·ç§»è¦é»"><a href="#ğŸ”§-é·ç§»è¦é»" class="headerlink" title="ğŸ”§ é·ç§»è¦é»"></a>ğŸ”§ é·ç§»è¦é»</h3><ul>
<li>âŒ <code>.eslintignore</code> ä¸å†æ”¯æ´</li>
<li>âœ… <code>ignores</code> ç›´æ¥å¯«åœ¨é…ç½®ä¸­</li>
<li>âœ… å¤šæª”æ¡ˆé¡å‹å¯ç¨ç«‹é…ç½®</li>
<li>âœ… æ›´æ¸…æ™°çš„ä¾è³´é—œä¿‚</li>
</ul>
<hr>
<h2 id="ğŸ¨-å‘½åè¦ç¯„çš„ç§‘å­¸åŒ–ç®¡ç†"><a href="#ğŸ¨-å‘½åè¦ç¯„çš„ç§‘å­¸åŒ–ç®¡ç†" class="headerlink" title="ğŸ¨ å‘½åè¦ç¯„çš„ç§‘å­¸åŒ–ç®¡ç†"></a>ğŸ¨ å‘½åè¦ç¯„çš„ç§‘å­¸åŒ–ç®¡ç†</h2><h3 id="ğŸ’¡-TypeScript-Interface-PascalCase-çš„å¨åŠ›"><a href="#ğŸ’¡-TypeScript-Interface-PascalCase-çš„å¨åŠ›" class="headerlink" title="ğŸ’¡ TypeScript Interface - PascalCase çš„å¨åŠ›"></a>ğŸ’¡ TypeScript Interface - PascalCase çš„å¨åŠ›</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ èˆŠæ€ç¶­ - éš¨æ„å‘½å</span></span><br><span class="line"><span class="keyword">interface</span> energyData &#123; <span class="attr">id</span>: <span class="built_in">string</span>; &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">data</span>: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ–°æ¨™æº– - èªç¾©åŒ–å‘½å</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">EnergyConsumptionData</span> &#123;</span><br><span class="line">  <span class="attr">sensorId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">powerUsage</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">timestamp</span>: <span class="title class_">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">consumptionData</span>: <span class="title class_">EnergyConsumptionData</span>[];</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ¯-ESLint-å¼·åˆ¶åŸ·è¡Œ"><a href="#ğŸ¯-ESLint-å¼·åˆ¶åŸ·è¡Œ" class="headerlink" title="ğŸ¯ ESLint å¼·åˆ¶åŸ·è¡Œ"></a>ğŸ¯ ESLint å¼·åˆ¶åŸ·è¡Œ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;@typescript-eslint/naming-convention&#x27;</span>: [</span><br><span class="line">  <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;interface&#x27;</span>,</span><br><span class="line">    <span class="attr">format</span>: [<span class="string">&#x27;PascalCase&#x27;</span>]  <span class="comment">// å¼·åˆ¶å¤§é§å³°</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">selector</span>: <span class="string">&#x27;variable&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: &#123; <span class="attr">regex</span>: <span class="string">&#x27;\\$$&#x27;</span>, <span class="attr">match</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    <span class="attr">format</span>: [<span class="string">&#x27;camelCase&#x27;</span>],</span><br><span class="line">    <span class="attr">suffix</span>: [<span class="string">&#x27;$&#x27;</span>]  <span class="comment">// Observable å¼·åˆ¶ $ å¾Œç¶´</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ§ -èªçŸ¥è² è·å„ªåŒ–"><a href="#ğŸ§ -èªçŸ¥è² è·å„ªåŒ–" class="headerlink" title="ğŸ§  èªçŸ¥è² è·å„ªåŒ–"></a>ğŸ§  èªçŸ¥è² è·å„ªåŒ–</h3><ul>
<li><strong>ä¸€çœ¼è­˜åˆ¥é¡å‹</strong>: <code>EnergyData</code> vs <code>energydata</code></li>
<li><strong>æ¸›å°‘èª¤è§£</strong>: <code>powerLevel$</code> ç«‹å³çŸ¥é“æ˜¯ Observable</li>
<li><strong>åœ˜éšŠå”ä½œ</strong>: çµ±ä¸€æ¨™æº–æ¸›å°‘æºé€šæˆæœ¬</li>
</ul>
<hr>
<h2 id="ğŸ”•-no-warn-ignored-çš„æ·±å±¤é‚è¼¯"><a href="#ğŸ”•-no-warn-ignored-çš„æ·±å±¤é‚è¼¯" class="headerlink" title="ğŸ”• --no-warn-ignored çš„æ·±å±¤é‚è¼¯"></a>ğŸ”• <code>--no-warn-ignored</code> çš„æ·±å±¤é‚è¼¯</h2><h3 id="ğŸ’¡-ESLint-å¿½ç•¥çš„å…©å±¤çµæ§‹"><a href="#ğŸ’¡-ESLint-å¿½ç•¥çš„å…©å±¤çµæ§‹" class="headerlink" title="ğŸ’¡ ESLint å¿½ç•¥çš„å…©å±¤çµæ§‹"></a>ğŸ’¡ ESLint å¿½ç•¥çš„å…©å±¤çµæ§‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€å±¤ï¼šå¿½ç•¥æª¢æŸ¥ï¼Œä½†æé†’ä½ ã€Œæˆ‘å¿½ç•¥äº†é€™å€‹æ–‡ä»¶ã€</span></span><br><span class="line">npx eslint src/**/*.ts</span><br><span class="line"><span class="comment"># è¼¸å‡º: âš ï¸ File ignored because of a matching ignore pattern</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒå±¤ï¼šé€£æé†’éƒ½ä¸è¦ï¼Œå®Œå…¨éœé»˜</span></span><br><span class="line">npx eslint src/**/*.ts --no-warn-ignored</span><br><span class="line"><span class="comment"># è¼¸å‡º: ä¹¾æ·¨çš„çµæœï¼Œå°ˆæ³¨æ–¼çœŸæ­£çš„å•é¡Œ</span></span><br></pre></td></tr></table></figure>

<h3 id="ğŸ¯-é–‹ç™¼é«”é©—å„ªåŒ–"><a href="#ğŸ¯-é–‹ç™¼é«”é©—å„ªåŒ–" class="headerlink" title="ğŸ¯ é–‹ç™¼é«”é©—å„ªåŒ–"></a>ğŸ¯ é–‹ç™¼é«”é©—å„ªåŒ–</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src/**/*.ts --no-warn-ignored&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src/**/*.ts --fix --no-warn-ignored&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:ci&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint src/**/*.ts --max-warnings 0 --no-warn-ignored&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="ğŸš€-CI-CD-å‹å–„"><a href="#ğŸš€-CI-CD-å‹å–„" class="headerlink" title="ğŸš€ CI&#x2F;CD å‹å–„"></a>ğŸš€ CI&#x2F;CD å‹å–„</h3><ul>
<li><strong>ä¹¾æ·¨çš„å»ºç½®æ—¥èªŒ</strong>: ä¸è¢«ã€Œå™ªéŸ³ã€å¹²æ“¾</li>
<li><strong>å°ˆæ³¨å•é¡Œæœ¬è³ª</strong>: åªçœ‹éœ€è¦ä¿®æ­£çš„ç¨‹å¼ç¢¼</li>
<li><strong>é›¶å®¹å¿æ¨¡å¼</strong>: <code>--max-warnings 0</code> ç¢ºä¿å“è³ª</li>
</ul>
<hr>
<h2 id="ğŸ”„-å°ˆæ¡ˆé‡æ§‹çš„ç³»çµ±æ€§æ€ç¶­"><a href="#ğŸ”„-å°ˆæ¡ˆé‡æ§‹çš„ç³»çµ±æ€§æ€ç¶­" class="headerlink" title="ğŸ”„ å°ˆæ¡ˆé‡æ§‹çš„ç³»çµ±æ€§æ€ç¶­"></a>ğŸ”„ å°ˆæ¡ˆé‡æ§‹çš„ç³»çµ±æ€§æ€ç¶­</h2><h3 id="ğŸ’¡-é‡å‘½åä¸æ˜¯æ”¹ä¸€å€‹åå­—"><a href="#ğŸ’¡-é‡å‘½åä¸æ˜¯æ”¹ä¸€å€‹åå­—" class="headerlink" title="ğŸ’¡ é‡å‘½åä¸æ˜¯æ”¹ä¸€å€‹åå­—"></a>ğŸ’¡ é‡å‘½åä¸æ˜¯æ”¹ä¸€å€‹åå­—</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">taiwansteelunion_carscheduled_frontend</span><br><span class="line">â†“ éœ€è¦æª¢æŸ¥çš„å½±éŸ¿åŸŸ â†“</span><br><span class="line">âœ… package.json - å°ˆæ¡ˆåç¨±</span><br><span class="line">âœ… angular.json - å»ºç½®è·¯å¾‘ã€å°ˆæ¡ˆé…ç½®  </span><br><span class="line">âœ… index.html - ç¶²é æ¨™é¡Œ</span><br><span class="line">âœ… ç’°å¢ƒè®Šæ•¸ - API ç«¯é»</span><br><span class="line">âœ… æ–‡æª” - READMEã€è¨»è§£</span><br><span class="line">âœ… Git åˆ†æ”¯ - å‘½åç­–ç•¥</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ¯-è‡ªå‹•åŒ–æª¢æŸ¥æµç¨‹"><a href="#ğŸ¯-è‡ªå‹•åŒ–æª¢æŸ¥æµç¨‹" class="headerlink" title="ğŸ¯ è‡ªå‹•åŒ–æª¢æŸ¥æµç¨‹"></a>ğŸ¯ è‡ªå‹•åŒ–æª¢æŸ¥æµç¨‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å…¨åŸŸæœå°‹èˆŠåç¨±</span></span><br><span class="line">grep -r <span class="string">&quot;taiwansteelunion_carscheduled&quot;</span> .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ‰¹é‡æ›¿æ›</span></span><br><span class="line">sed -i <span class="string">&#x27;s/taiwansteelunion_carscheduled/energy_management/g&#x27;</span> **/*.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ESLint é©—è­‰æ–°åç¨±ç¬¦åˆè¦ç¯„</span></span><br><span class="line">npm run lint:check</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ§ -é‡æ§‹ç­–ç•¥"><a href="#ğŸ§ -é‡æ§‹ç­–ç•¥" class="headerlink" title="ğŸ§  é‡æ§‹ç­–ç•¥"></a>ğŸ§  é‡æ§‹ç­–ç•¥</h3><ul>
<li><strong>å½±éŸ¿åŸŸåˆ†æ</strong>: å…ˆæ‰¾å‡ºæ‰€æœ‰éœ€è¦æ”¹çš„åœ°æ–¹</li>
<li><strong>åŸå­åŒ–æäº¤</strong>: æ¯æ¬¡ commit åªæ”¹ä¸€é¡æ–‡ä»¶</li>
<li><strong>è‡ªå‹•åŒ–é©—è­‰</strong>: ç”¨å·¥å…·ç¢ºä¿ä¸€è‡´æ€§</li>
</ul>
<hr>
<h2 id="ğŸ­-Observable-å¾Œç¶´çš„è¨­è¨ˆå“²å­¸"><a href="#ğŸ­-Observable-å¾Œç¶´çš„è¨­è¨ˆå“²å­¸" class="headerlink" title="ğŸ­ Observable $ å¾Œç¶´çš„è¨­è¨ˆå“²å­¸"></a>ğŸ­ Observable $ å¾Œç¶´çš„è¨­è¨ˆå“²å­¸</h2><h3 id="ğŸ’¡-è¦–è¦ºåŒ–é¡å‹ç³»çµ±"><a href="#ğŸ’¡-è¦–è¦ºåŒ–é¡å‹ç³»çµ±" class="headerlink" title="ğŸ’¡ è¦–è¦ºåŒ–é¡å‹ç³»çµ±"></a>ğŸ’¡ è¦–è¦ºåŒ–é¡å‹ç³»çµ±</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… ä¸€çœ¼å°±çŸ¥é“é€™æ˜¯ä»€éº¼</span></span><br><span class="line">energyData$ = <span class="variable language_">this</span>.<span class="property">service</span>.<span class="title function_">getEnergyData</span>();</span><br><span class="line">loading$ = <span class="keyword">new</span> <span class="title class_">BehaviorSubject</span>&lt;<span class="built_in">boolean</span>&gt;(<span class="literal">false</span>);</span><br><span class="line">errors$ = <span class="keyword">new</span> <span class="title class_">Subject</span>&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ™‚çš„å¿ƒæ™ºæ¨¡å‹</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">energyData$</span>.<span class="title function_">pipe</span>(</span><br><span class="line">  <span class="title function_">takeUntil</span>(<span class="variable language_">this</span>.<span class="property">destroy$</span>),  <span class="comment">// ä¸€çœ‹å°±çŸ¥é“ç”Ÿå‘½é€±æœŸç®¡ç†</span></span><br><span class="line">  <span class="title function_">map</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">transform</span>(data))</span><br><span class="line">).<span class="title function_">subscribe</span>();</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ¯-åœ˜éšŠèªçŸ¥çµ±ä¸€"><a href="#ğŸ¯-åœ˜éšŠèªçŸ¥çµ±ä¸€" class="headerlink" title="ğŸ¯ åœ˜éšŠèªçŸ¥çµ±ä¸€"></a>ğŸ¯ åœ˜éšŠèªçŸ¥çµ±ä¸€</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ESLint è¦å‰‡å¼·åˆ¶åŸ·è¡Œ</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;variable&#x27;</span>,</span><br><span class="line">  <span class="attr">filter</span>: &#123; <span class="attr">regex</span>: <span class="string">&#x27;\\$$&#x27;</span>, <span class="attr">match</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  <span class="attr">format</span>: [<span class="string">&#x27;camelCase&#x27;</span>],</span><br><span class="line">  <span class="attr">suffix</span>: [<span class="string">&#x27;$&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ§ -ç¾ä»£åŒˆç‰™åˆ©å‘½åæ³•"><a href="#ğŸ§ -ç¾ä»£åŒˆç‰™åˆ©å‘½åæ³•" class="headerlink" title="ğŸ§  ç¾ä»£åŒˆç‰™åˆ©å‘½åæ³•"></a>ğŸ§  ç¾ä»£åŒˆç‰™åˆ©å‘½åæ³•</h3><ul>
<li><strong>React</strong>: <code>useEffect</code>, <code>useState</code> - ç”¨å‰ç¶´è¡¨ç¤º Hook</li>
<li><strong>Angular</strong>: <code>ngOnInit</code>, <code>ngOnDestroy</code> - ç”¨å‰ç¶´è¡¨ç¤ºç”Ÿå‘½é€±æœŸ</li>
<li><strong>RxJS</strong>: <code>data$</code>, <code>loading$</code> - ç”¨å¾Œç¶´è¡¨ç¤º Observable</li>
</ul>
<hr>
<h2 id="ğŸ“Š-é…ç½®å³æ–‡æª”çš„å“²å­¸"><a href="#ğŸ“Š-é…ç½®å³æ–‡æª”çš„å“²å­¸" class="headerlink" title="ğŸ“Š é…ç½®å³æ–‡æª”çš„å“²å­¸"></a>ğŸ“Š é…ç½®å³æ–‡æª”çš„å“²å­¸</h2><h3 id="ğŸ’¡-ESLint-é…ç½®-åœ˜éšŠç·¨ç¢¼ç´„å®š"><a href="#ğŸ’¡-ESLint-é…ç½®-åœ˜éšŠç·¨ç¢¼ç´„å®š" class="headerlink" title="ğŸ’¡ ESLint é…ç½® &#x3D; åœ˜éšŠç·¨ç¢¼ç´„å®š"></a>ğŸ’¡ ESLint é…ç½® &#x3D; åœ˜éšŠç·¨ç¢¼ç´„å®š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€™å€‹é…ç½®æ–‡ä»¶å‘Šè¨´æ–°äººï¼š</span></span><br><span class="line"><span class="comment">// 1. æˆ‘å€‘é‡è¦–é¡å‹å®‰å…¨ (@typescript-eslint/no-explicit-any)</span></span><br><span class="line"><span class="comment">// 2. æˆ‘å€‘åœ¨æ„å‘½åä¸€è‡´æ€§ (naming-convention)</span></span><br><span class="line"><span class="comment">// 3. æˆ‘å€‘é—œæ³¨ Angular æœ€ä½³å¯¦è¸ (@angular-eslint/*)</span></span><br><span class="line"><span class="comment">// 4. æˆ‘å€‘è¿½æ±‚ç¨‹å¼ç¢¼å“è³ª (no-console, no-debugger)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [&#123;</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-explicit-any&#x27;</span>: <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/naming-convention&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@angular-eslint/component-class-suffix&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;warn&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ¯-è‡ªå‹•åŒ–å“è³ªæŠŠé—œ"><a href="#ğŸ¯-è‡ªå‹•åŒ–å“è³ªæŠŠé—œ" class="headerlink" title="ğŸ¯ è‡ªå‹•åŒ–å“è³ªæŠŠé—œ"></a>ğŸ¯ è‡ªå‹•åŒ–å“è³ªæŠŠé—œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é–‹ç™¼éšæ®µï¼šå‹å–„æé†’</span></span><br><span class="line">npm run lint</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤éšæ®µï¼šè‡ªå‹•ä¿®æ­£</span></span><br><span class="line">npm run lint:fix</span><br><span class="line"></span><br><span class="line"><span class="comment"># CI éšæ®µï¼šé›¶å®¹å¿</span></span><br><span class="line">npm run lint:check</span><br></pre></td></tr></table></figure>

<h3 id="ğŸš€-åœ˜éšŠæˆé•·è»Œè·¡"><a href="#ğŸš€-åœ˜éšŠæˆé•·è»Œè·¡" class="headerlink" title="ğŸš€ åœ˜éšŠæˆé•·è»Œè·¡"></a>ğŸš€ åœ˜éšŠæˆé•·è»Œè·¡</h3><ul>
<li><strong>æ–°æ‰‹</strong>: ä¾è³´ ESLint å­¸ç¿’æœ€ä½³å¯¦è¸</li>
<li><strong>ç†Ÿæ‰‹</strong>: é€éé…ç½®å‚³æˆç¶“é©—</li>
<li><strong>å°ˆå®¶</strong>: åˆ¶å®šè¦å‰‡å¼•å°åœ˜éšŠ</li>
</ul>
<hr>
<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿ</h2><h3 id="1-å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨"><a href="#1-å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨" class="headerlink" title="1. å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨"></a>1. <strong>å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨</strong></h3><ul>
<li>ESLint ä¸æ˜¯åœ¨ã€ŒæŒ‘æ¯›ç—…ã€ï¼Œè€Œæ˜¯åœ¨ã€Œè‡ªå‹•åŒ–æœ€ä½³å¯¦è¸ã€</li>
<li>å¥½çš„é…ç½®è®“æ–°äººå¿«é€Ÿæˆé•·ï¼Œè®“å°ˆå®¶å°ˆæ³¨å‰µæ–°</li>
</ul>
<h3 id="2-è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€"><a href="#2-è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€" class="headerlink" title="2. è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€"></a>2. <strong>è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€</strong></h3><ul>
<li>çµ±ä¸€çš„å‘½åè®“ç¨‹å¼ç¢¼è‡ªèªªæ˜</li>
<li>ä¸€è‡´çš„çµæ§‹é™ä½ç†è§£æˆæœ¬</li>
</ul>
<h3 id="3-é…ç½®æ˜¯æ´»çš„æ–‡æª”"><a href="#3-é…ç½®æ˜¯æ´»çš„æ–‡æª”" class="headerlink" title="3. é…ç½®æ˜¯æ´»çš„æ–‡æª”"></a>3. <strong>é…ç½®æ˜¯æ´»çš„æ–‡æª”</strong></h3><ul>
<li>è¦å‰‡åæ˜ åœ˜éšŠåƒ¹å€¼è§€</li>
<li>å·¥å…·é…ç½®æ‰¿è¼‰çŸ¥è­˜å‚³æ‰¿</li>
</ul>
<hr>
<h2 id="ğŸ“-å¯¦è¸æª¢æŸ¥æ¸…å–®"><a href="#ğŸ“-å¯¦è¸æª¢æŸ¥æ¸…å–®" class="headerlink" title="ğŸ“ å¯¦è¸æª¢æŸ¥æ¸…å–®"></a>ğŸ“ å¯¦è¸æª¢æŸ¥æ¸…å–®</h2><h3 id="ESLint-9-x-é·ç§»"><a href="#ESLint-9-x-é·ç§»" class="headerlink" title="ESLint 9.x é·ç§»"></a>ESLint 9.x é·ç§»</h3><ul>
<li><input disabled="" type="checkbox"> å®‰è£æœ€æ–°ç‰ˆæœ¬ ESLint å’Œç›¸é—œæ’ä»¶</li>
<li><input disabled="" type="checkbox"> å‰µå»º <code>eslint.config.js</code> æ‰å¹³é…ç½®</li>
<li><input disabled="" type="checkbox"> ç§»é™¤èˆŠçš„ <code>.eslintrc.*</code> å’Œ <code>.eslintignore</code></li>
<li><input disabled="" type="checkbox"> æ¸¬è©¦æ‰€æœ‰ npm scripts æ­£å¸¸é‹ä½œ</li>
</ul>
<h3 id="å‘½åè¦ç¯„å¯¦æ–½"><a href="#å‘½åè¦ç¯„å¯¦æ–½" class="headerlink" title="å‘½åè¦ç¯„å¯¦æ–½"></a>å‘½åè¦ç¯„å¯¦æ–½</h3><ul>
<li><input disabled="" type="checkbox"> é…ç½® <code>@typescript-eslint/naming-convention</code> è¦å‰‡</li>
<li><input disabled="" type="checkbox"> ä¿®æ­£ç¾æœ‰ç¨‹å¼ç¢¼ä¸­çš„å‘½åå•é¡Œ  </li>
<li><input disabled="" type="checkbox"> è¨­å®š Observable $ å¾Œç¶´å¼·åˆ¶è¦å‰‡</li>
<li><input disabled="" type="checkbox"> å»ºç«‹åœ˜éšŠå‘½åè¦ç¯„æ–‡æª”</li>
</ul>
<h3 id="é–‹ç™¼æµç¨‹å„ªåŒ–"><a href="#é–‹ç™¼æµç¨‹å„ªåŒ–" class="headerlink" title="é–‹ç™¼æµç¨‹å„ªåŒ–"></a>é–‹ç™¼æµç¨‹å„ªåŒ–</h3><ul>
<li><input disabled="" type="checkbox"> é…ç½® <code>--no-warn-ignored</code> è®“è¼¸å‡ºæ›´ä¹¾æ·¨</li>
<li><input disabled="" type="checkbox"> è¨­å®š <code>--max-warnings 0</code> çš„åš´æ ¼æ¨¡å¼</li>
<li><input disabled="" type="checkbox"> æ•´åˆ Git hooks è‡ªå‹•åŸ·è¡Œ lint</li>
<li><input disabled="" type="checkbox"> å»ºç«‹ CI&#x2F;CD çš„ç¨‹å¼ç¢¼å“è³ªæŠŠé—œ</li>
</ul>
<h2 id="ğŸ’¡-ESLint-é…ç½®æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-ESLint-é…ç½®æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ ESLint é…ç½®æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ ESLint é…ç½®æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ–°å°ˆæ¡ˆ/å‡ç´šéœ€æ±‚] --&gt; B&#123;ESLint ç‰ˆæœ¬?&#125;</span><br><span class="line">    B --&gt;|&lt; 9.0| C[è€ƒæ…®å‡ç´šåˆ° 9.x]</span><br><span class="line">    B --&gt;|&gt;= 9.0| D[ä½¿ç”¨ Flat Config]</span><br><span class="line">    </span><br><span class="line">    C --&gt; E&#123;å‡ç´šé¢¨éšªè©•ä¼°&#125;</span><br><span class="line">    E --&gt;|é«˜| F[ä¿æŒç¾æœ‰é…ç½®]</span><br><span class="line">    E --&gt;|ä½| D</span><br><span class="line">    </span><br><span class="line">    D --&gt; G[è¨­è¨ˆæª”æ¡ˆé¡å‹é…ç½®]</span><br><span class="line">    G --&gt; H[TypeScript æª”æ¡ˆè¦å‰‡]</span><br><span class="line">    G --&gt; I[æ¨¡æ¿æª”æ¡ˆè¦å‰‡]</span><br><span class="line">    G --&gt; J[æ¸¬è©¦æª”æ¡ˆè¦å‰‡]</span><br><span class="line">    </span><br><span class="line">    H --&gt; K[å‘½åè¦ç¯„è¨­å®š]</span><br><span class="line">    K --&gt; L[Interface PascalCase]</span><br><span class="line">    K --&gt; M[Observable $ å¾Œç¶´]</span><br><span class="line">    </span><br><span class="line">    L --&gt; N[åœ˜éšŠåŸ¹è¨“]</span><br><span class="line">    M --&gt; N</span><br><span class="line">    N --&gt; O[CI/CD æ•´åˆ]</span><br><span class="line">    O --&gt; P[æ•ˆæœç›£æ§]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="1-å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨-1"><a href="#1-å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨-1" class="headerlink" title="1. å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨"></a>1. <strong>å·¥å…·ä¸æ˜¯è² æ“”ï¼Œæ˜¯æ”¾å¤§å™¨</strong></h3><p>ESLint 9.x çš„é©å‘½æ€§æ”¹é€²é«”ç¾åœ¨ï¼š</p>
<ul>
<li><strong>é…ç½®ç°¡åŒ–</strong>ï¼šFlat Config é™ä½å­¸ç¿’å’Œç¶­è­·æˆæœ¬</li>
<li><strong>ç²¾æº–æ§åˆ¶</strong>ï¼šé‡å°ä¸åŒæª”æ¡ˆé¡å‹çš„å®¢è£½åŒ–è¦å‰‡</li>
<li><strong>é–‹ç™¼é«”é©—</strong>ï¼šâ€“no-warn-ignored ç­‰åƒæ•¸å„ªåŒ–å·¥ä½œæµç¨‹</li>
</ul>
<h3 id="2-è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€-1"><a href="#2-è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€-1" class="headerlink" title="2. è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€"></a>2. <strong>è¦ç¯„ä¸æ˜¯é™åˆ¶ï¼Œæ˜¯æºé€šèªè¨€</strong></h3><p>çµ±ä¸€çš„å‘½åå’Œé…ç½®æ¨™æº–ï¼š</p>
<ul>
<li><strong>èªçŸ¥è² è·é™ä½</strong>ï¼šPascalCase Interface ä¸€çœ¼è­˜åˆ¥é¡å‹</li>
<li><strong>åœ˜éšŠå”ä½œæ•ˆç‡</strong>ï¼šObservable $ å¾Œç¶´æ˜ç¢ºè¡¨é”æ„åœ–</li>
<li><strong>çŸ¥è­˜å‚³æ‰¿</strong>ï¼šé…ç½®å³æ–‡æª”ï¼Œæ–°äººå¿«é€Ÿä¸Šæ‰‹</li>
</ul>
<h3 id="3-é…ç½®æ˜¯æ´»çš„æ–‡æª”-1"><a href="#3-é…ç½®æ˜¯æ´»çš„æ–‡æª”-1" class="headerlink" title="3. é…ç½®æ˜¯æ´»çš„æ–‡æª”"></a>3. <strong>é…ç½®æ˜¯æ´»çš„æ–‡æª”</strong></h3><p>ESLint é…ç½®åæ˜ åœ˜éšŠåƒ¹å€¼è§€ï¼š</p>
<ul>
<li><strong>æŠ€è¡“å‚µå‹™ç®¡ç†</strong>ï¼šé€éè¦å‰‡å¼·åˆ¶åŸ·è¡Œæœ€ä½³å¯¦è¸</li>
<li><strong>å“è³ªæŠŠé—œ</strong>ï¼šè‡ªå‹•åŒ–ç¨‹å¼ç¢¼å¯©æŸ¥æ¸›å°‘äººå·¥è² æ“”</li>
<li><strong>æŒçºŒæ”¹é€²</strong>ï¼šé…ç½®éš¨å°ˆæ¡ˆæˆé•·è€Œæ¼”é€²</li>
</ul>
<h2 id="ğŸš€-é€²éšé…ç½®ç­–ç•¥"><a href="#ğŸš€-é€²éšé…ç½®ç­–ç•¥" class="headerlink" title="ğŸš€ é€²éšé…ç½®ç­–ç•¥"></a>ğŸš€ é€²éšé…ç½®ç­–ç•¥</h2><h3 id="æ¼¸é€²å¼å‡ç´šè·¯å¾‘"><a href="#æ¼¸é€²å¼å‡ç´šè·¯å¾‘" class="headerlink" title="æ¼¸é€²å¼å‡ç´šè·¯å¾‘"></a>æ¼¸é€²å¼å‡ç´šè·¯å¾‘</h3><ol>
<li><strong>è©•ä¼°ç¾æœ‰é…ç½®</strong>ï¼šåˆ†æç•¶å‰ ESLint è¦å‰‡çš„è¦†è“‹ç¯„åœ</li>
<li><strong>åˆ†éšæ®µé·ç§»</strong>ï¼šå„ªå…ˆè™•ç†é«˜å½±éŸ¿ã€ä½é¢¨éšªçš„è¦å‰‡</li>
<li><strong>åœ˜éšŠåŸ¹è¨“</strong>ï¼šç¢ºä¿åœ˜éšŠç†è§£æ–°é…ç½®çš„æ„åœ–å’Œåƒ¹å€¼</li>
<li><strong>æ•ˆæœç›£æ§</strong>ï¼šè¿½è¹¤ç¨‹å¼ç¢¼å“è³ªå’Œé–‹ç™¼æ•ˆç‡æŒ‡æ¨™</li>
</ol>
<h3 id="ä¼æ¥­ç´šæœ€ä½³å¯¦è¸"><a href="#ä¼æ¥­ç´šæœ€ä½³å¯¦è¸" class="headerlink" title="ä¼æ¥­ç´šæœ€ä½³å¯¦è¸"></a>ä¼æ¥­ç´šæœ€ä½³å¯¦è¸</h3><ul>
<li><strong>é…ç½®å…±äº«</strong>ï¼šå»ºç«‹çµ„ç¹”ç´šçš„ ESLint é…ç½®åŒ…</li>
<li><strong>è‡ªå‹•åŒ–å·¥å…·</strong>ï¼šæ•´åˆ Huskyã€lint-staged ç­‰å·¥å…·</li>
<li><strong>æŒ‡æ¨™ç›£æ§</strong>ï¼šè¿½è¹¤æŠ€è¡“å‚µå‹™å’Œç¨‹å¼ç¢¼å“è³ªè¶¨å‹¢</li>
</ul>
<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="å®˜æ–¹æ–‡ä»¶"><a href="#å®˜æ–¹æ–‡ä»¶" class="headerlink" title="å®˜æ–¹æ–‡ä»¶"></a>å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><a target="_blank" rel="noopener" href="https://eslint.org/docs/latest/">ESLint 9.x å®˜æ–¹æ–‡ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://eslint.org/docs/latest/use/configure/migration-guide">Flat Config é·ç§»æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://typescript-eslint.io/rules/">TypeScript ESLint è¦å‰‡</a></li>
</ul>
<h3 id="å¯¦ç”¨å·¥å…·"><a href="#å¯¦ç”¨å·¥å…·" class="headerlink" title="å¯¦ç”¨å·¥å…·"></a>å¯¦ç”¨å·¥å…·</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/eslint/config-inspector">ESLint Config Inspector</a></li>
<li><a target="_blank" rel="noopener" href="https://eslint.style/">ESLint Stylistic</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/angular-eslint/angular-eslint">Angular ESLint</a></li>
</ul>
<h3 id="ç¤¾ç¾¤è³‡æº"><a href="#ç¤¾ç¾¤è³‡æº" class="headerlink" title="ç¤¾ç¾¤è³‡æº"></a>ç¤¾ç¾¤è³‡æº</h3><ul>
<li>ESLint Discord ç¤¾ç¾¤</li>
<li>TypeScript ESLint è¨è«–å€</li>
<li>Angular ESLint GitHub Issues</li>
</ul>
<h3 id="å»¶ä¼¸é–±è®€"><a href="#å»¶ä¼¸é–±è®€" class="headerlink" title="å»¶ä¼¸é–±è®€"></a>å»¶ä¼¸é–±è®€</h3><ul>
<li>ã€ŠClean Codeã€‹by Robert C. Martin</li>
<li>ã€ŠThe Pragmatic Programmerã€‹by Andrew Hunt</li>
<li>ã€ŠBuilding Maintainable Softwareã€‹by Joost Visser</li>
</ul>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šå‰ç«¯å·¥å…·éˆåœ˜éšŠ<br><strong>æ›´æ–°æ—¥æœŸ</strong>ï¼š2025å¹´6æœˆ29æ—¥<br><strong>ç‰ˆæœ¬</strong>ï¼šv2.0<br><strong>é©ç”¨ç¯„åœ</strong>ï¼šESLint 9.x + TypeScript + Angular å°ˆæ¡ˆ</p>
</blockquote>
<hr>
<p><em>æŠ€è¡“å‚µå‹™å°±æ˜¯æœªä¾†çš„åˆ©æ¯ï¼ŒESLint é…ç½®æ˜¯æœ€åˆ’ç®—çš„æŠ•è³‡ï¼</em> ğŸš€ </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/eslint-configuration-best-practices-guide/" data-id="cmg51yfqi000eanmz3nij52us" data-title="ESLint 9.x é©å‘½æ€§é…ç½®èˆ‡å‰ç«¯é–‹ç™¼æœ€ä½³åŒ–å¯¦æˆ°æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Code-Quality/" rel="tag">Code Quality</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Developer-Experience/" rel="tag">Developer Experience</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ESLint-9-x/" rel="tag">ESLint 9.x</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flat-Config/" rel="tag">Flat Config</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Frontend-Tooling/" rel="tag">Frontend Tooling</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linting-Rules/" rel="tag">Linting Rules</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Naming-Convention/" rel="tag">Naming Convention</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ssr-prerender-technical-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-ssr-prerender-technical-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T05:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-ssr-prerender-technical-guide/">Angular 19 SSR/Prerender æ·±åº¦æŠ€è¡“åˆ†æèˆ‡å¯¦æˆ°æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>é›™è»Œæ¶æ§‹è¨­è¨ˆ</strong>ï¼š<code>.server</code> æª”æ¡ˆåˆ†å·¥è™•ç†å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯éœ€æ±‚</li>
<li><strong>æ™ºèƒ½æ¸²æŸ“ç­–ç•¥</strong>ï¼šPrerender ç”¨æ–¼éœæ…‹å…§å®¹ï¼ŒDynamic ç”¨æ–¼éœ€èªè­‰é é¢</li>
<li><strong>æ°´åˆä½œç”¨æ©Ÿåˆ¶</strong>ï¼šç„¡ç¸«éŠœæ¥ SSR é æ¸²æŸ“å…§å®¹èˆ‡å®¢æˆ¶ç«¯äº’å‹•åŠŸèƒ½</li>
<li><strong>è·¯ç”±å®ˆè¡›å…¼å®¹</strong>ï¼šè¨­è¨ˆ SSR å‹å–„çš„å®ˆè¡›ï¼Œé¿å…é æ¸²æŸ“éšæ®µå•é¡Œ</li>
<li><strong>æ•ˆèƒ½å„ªåŒ–ç­–ç•¥</strong>ï¼šç¨‹å¼ç¢¼åˆ†å‰²èˆ‡é¸æ“‡æ€§é æ¸²æŸ“çš„æœ€ä½³å¯¦è¸</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æ–‡æ·±åº¦åˆ†æäº† Angular 19 SSR&#x2F;Prerender æŠ€è¡“çš„å®Œæ•´æ¶æ§‹èˆ‡å¯¦æˆ°æ‡‰ç”¨ï¼Œæ¶µè“‹å¾å»ºæ§‹åˆ°éƒ¨ç½²çš„å…¨æµç¨‹å„ªåŒ–ï¼š</p>
<ul>
<li>ğŸ¯ <strong>æ¶æ§‹åˆ†æ</strong>ï¼š<code>.server</code> æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€å’Œè¨­è¨ˆåŸç†</li>
<li>ğŸ”„ <strong>æ¸²æŸ“ç­–ç•¥</strong>ï¼šPrerender èˆ‡ Dynamic æ¨¡å¼çš„é¸æ“‡å’Œé…ç½®</li>
<li>âš¡ <strong>æ•ˆèƒ½å„ªåŒ–</strong>ï¼šç¨‹å¼ç¢¼åˆ†å‰²ã€è³‡æ–™é å–èˆ‡å¿«å–ç­–ç•¥</li>
<li>ğŸ›¡ï¸ <strong>å®‰å…¨è€ƒé‡</strong>ï¼šå‰å¾Œç«¯å®‰å…¨åˆ†å·¥å’Œ SSR ç’°å¢ƒé…ç½®</li>
<li>ğŸ“Š <strong>ç›£æ§éƒ¨ç½²</strong>ï¼šæ•ˆèƒ½æŒ‡æ¨™ç›£æ§å’Œå»ºæ§‹æœ€ä½³åŒ–</li>
</ul>
<h2 id="ğŸ—ï¸-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹"><a href="#ğŸ—ï¸-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹" class="headerlink" title="ğŸ—ï¸ Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹"></a>ğŸ—ï¸ Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ng build] --&gt; B[å®¢æˆ¶ç«¯å»ºæ§‹]</span><br><span class="line">    A --&gt; C[ä¼ºæœå™¨ç«¯å»ºæ§‹]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[main.ts å•Ÿå‹•é»]</span><br><span class="line">    B --&gt; B2[app.config.ts å®¢æˆ¶ç«¯é…ç½®]</span><br><span class="line">    B --&gt; B3[app.routes.ts åŸºç¤è·¯ç”±]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[main.server.ts ä¼ºæœå™¨å•Ÿå‹•]</span><br><span class="line">    C --&gt; C2[app.config.server.ts åˆä½µé…ç½®]</span><br><span class="line">    C --&gt; C3[app.routes.server.ts SSR è·¯ç”±]</span><br><span class="line">    C --&gt; C4[server.ts Express è¨­å®š]</span><br><span class="line">    </span><br><span class="line">    C2 --&gt; D[mergeApplicationConfig]</span><br><span class="line">    D --&gt; E[çµ±ä¸€æ‡‰ç”¨é…ç½®]</span><br><span class="line">    </span><br><span class="line">    E --&gt; F&#123;æ¸²æŸ“æ¨¡å¼åˆ¤æ–·&#125;</span><br><span class="line">    F --&gt;|Prerender| G[éœæ…‹ HTML ç”Ÿæˆ]</span><br><span class="line">    F --&gt;|Dynamic| H[å³æ™‚ä¼ºæœå™¨æ¸²æŸ“]</span><br><span class="line">    </span><br><span class="line">    G --&gt; I[é å»ºæ§‹ HTML æª”æ¡ˆ]</span><br><span class="line">    H --&gt; J[åŸ·è¡ŒæœŸ HTML ç”Ÿæˆ]</span><br><span class="line">    </span><br><span class="line">    I --&gt; K[å®¢æˆ¶ç«¯æ°´åˆä½œç”¨]</span><br><span class="line">    J --&gt; K</span><br><span class="line">    K --&gt; L[å®Œæ•´äº’å‹•æ‡‰ç”¨]</span><br></pre></td></tr></table></figure>

<h2 id="æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†"><a href="#æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†" class="headerlink" title="æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†"></a>æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†</h2><h3 id="1-server-æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€"><a href="#1-server-æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€" class="headerlink" title="1. .server æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€"></a>1. <code>.server</code> æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€</h3><p>Angular 19 çš„ SSR æ¶æ§‹æ¡ç”¨é›™è»Œè¨­è¨ˆï¼Œåˆ†åˆ¥è™•ç†å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯çš„éœ€æ±‚ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¶æ§‹åˆ†å·¥ç¤ºæ„</span></span><br><span class="line">â”œâ”€â”€ src/</span><br><span class="line">â”‚   â”œâ”€â”€ app/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.<span class="property">config</span>.<span class="property">ts</span>          <span class="comment">// å®¢æˆ¶ç«¯è¨­å®š</span></span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.<span class="property">config</span>.<span class="property">server</span>.<span class="property">ts</span>   <span class="comment">// ä¼ºæœå™¨ç«¯è¨­å®šåˆä½µ</span></span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.<span class="property">routes</span>.<span class="property">ts</span>           <span class="comment">// å…±ç”¨è·¯ç”±å®šç¾©</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ app.<span class="property">routes</span>.<span class="property">server</span>.<span class="property">ts</span>    <span class="comment">// SSR è·¯ç”±é…ç½®</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.<span class="property">ts</span>                     <span class="comment">// å®¢æˆ¶ç«¯å•Ÿå‹•é»</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.<span class="property">server</span>.<span class="property">ts</span>              <span class="comment">// ä¼ºæœå™¨ç«¯å•Ÿå‹•é»</span></span><br><span class="line">â”‚   â””â”€â”€ server.<span class="property">ts</span>                   <span class="comment">// Express ä¼ºæœå™¨è¨­å®š</span></span><br></pre></td></tr></table></figure>

<h4 id="mergeApplicationConfig-é‹ä½œæ©Ÿåˆ¶"><a href="#mergeApplicationConfig-é‹ä½œæ©Ÿåˆ¶" class="headerlink" title="mergeApplicationConfig é‹ä½œæ©Ÿåˆ¶"></a><code>mergeApplicationConfig</code> é‹ä½œæ©Ÿåˆ¶</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.server.ts çš„æ·±åº¦åˆ†æ</span></span><br><span class="line"><span class="keyword">import</span> &#123; mergeApplicationConfig, <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),          <span class="comment">// å•Ÿç”¨ä¼ºæœå™¨ç«¯æ¸²æŸ“</span></span><br><span class="line">    <span class="title function_">provideServerRouting</span>(serverRoutes) <span class="comment">// æä¾› SSR è·¯ç”±é…ç½®</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mergeApplicationConfig çš„åˆä½µé‚è¼¯ï¼š</span></span><br><span class="line"><span class="comment">// 1. ä¿ç•™ appConfig ä¸­çš„æ‰€æœ‰ providers</span></span><br><span class="line"><span class="comment">// 2. æ·»åŠ  serverConfig ä¸­çš„ providers</span></span><br><span class="line"><span class="comment">// 3. å¦‚æœ‰è¡çªï¼ŒserverConfig å„ªå…ˆç´šè¼ƒé«˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h3 id="2-è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹"><a href="#2-è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹" class="headerlink" title="2. è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹"></a>2. è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.routes.ts - åŸºç¤è·¯ç”±å®šç¾©</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: <span class="title class_">HomeComponent</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">AboutComponent</span> &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>, </span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dashboard/dashboard.routes&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">routes</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>] <span class="comment">// è·¯ç”±å®ˆè¡›</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;products&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./products/products.component&#x27;</span>) &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.routes.server.ts - SSR é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; routes &#125;; <span class="comment">// é‡æ–°åŒ¯å‡ºåŸºç¤è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,           <span class="comment">// é¦–é é æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>,      <span class="comment">// é—œæ–¼é é¢é æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="comment">// éœ€ç™»å…¥é é¢å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;products&#x27;</span>,   <span class="comment">// ç”¢å“é é¢é æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹"><a href="#3-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹" class="headerlink" title="3. Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹"></a>3. Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹</h3><p>é€éä»¥ä¸‹åœ–è¡¨å¯ä»¥æ¸…æ¥šäº†è§£ Angular SSR å¾å»ºæ§‹åˆ°åŸ·è¡Œçš„å®Œæ•´æµç¨‹ï¼š</p>
<h4 id="å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–"><a href="#å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–" class="headerlink" title="å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–"></a>å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–</h4><p><img src="/%E5%B7%B2%E5%9C%A8%E4%B8%8A%E6%96%B9%E9%A1%AF%E7%A4%BA" alt="Angular SSR æ¶æ§‹æµç¨‹"></p>
<h4 id="æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"><a href="#æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–" class="headerlink" title="æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"></a>æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–</h4><p><img src="/%E5%B7%B2%E5%9C%A8%E4%B8%8A%E6%96%B9%E9%A1%AF%E7%A4%BA" alt="æ¸²æŸ“ç­–ç•¥æ±ºç­–"></p>
<h3 id="4-é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€"><a href="#4-é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€" class="headerlink" title="4. é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€"></a>4. é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ°´åˆä½œç”¨çš„é—œéµæ™‚æ©Ÿ</span></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-root&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;!-- é æ¸²æŸ“å…§å®¹ç«‹å³å¯è¦‹ --&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      &lt;!-- éœ€è¦æ°´åˆä½œç”¨æ‰èƒ½äº’å‹• --&gt;</span></span><br><span class="line"><span class="string">      &lt;button (click)=&quot;handleClick()&quot;&gt;é»æ“Šæˆ‘&lt;/button&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      &lt;!-- æ¢ä»¶æ¸²æŸ“é¿å…æ°´åˆä½œç”¨éŒ¯èª¤ --&gt;</span></span><br><span class="line"><span class="string">      &lt;div *ngIf=&quot;isBrowser&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;é€™æ®µå…§å®¹åªåœ¨ç€è¦½å™¨é¡¯ç¤º&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppComponent</span> &#123;</span><br><span class="line">  title = <span class="string">&#x27;é æ¸²æŸ“æ¨™é¡Œ&#x27;</span>;</span><br><span class="line">  isBrowser = <span class="title function_">isPlatformBrowser</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="meta">@Inject</span>(PLATFORM_ID) <span class="keyword">private</span> <span class="attr">platformId</span>: <span class="title class_">Object</span></span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ°´åˆä½œç”¨å®Œæˆå¾Œæ‰èƒ½æ­£å¸¸åŸ·è¡Œ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æŒ‰éˆ•è¢«é»æ“Š&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-å»¶é²è¼‰å…¥èˆ‡-SSR-å…¼å®¹æ€§è©³è§£"><a href="#5-å»¶é²è¼‰å…¥èˆ‡-SSR-å…¼å®¹æ€§è©³è§£" class="headerlink" title="5. å»¶é²è¼‰å…¥èˆ‡ SSR å…¼å®¹æ€§è©³è§£"></a>5. å»¶é²è¼‰å…¥èˆ‡ SSR å…¼å®¹æ€§è©³è§£</h3><p>å»¶é²è¼‰å…¥èˆ‡ SSR å®Œå…¨å…¼å®¹ï¼Œä¸æœƒç”¢ç”Ÿé¡å¤–çš„é—œæ³¨é»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»¶é²è¼‰å…¥æ¨¡çµ„çš„ SSR è™•ç†</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/feature.routes&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">routes</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./admin/admin.component&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">AdminComponent</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>] <span class="comment">// æ­é…è·¯ç”±å®ˆè¡›</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// SSR éšæ®µçš„è™•ç†é‚è¼¯ï¼š</span></span><br><span class="line"><span class="comment">// 1. é æ¸²æŸ“æ™‚ï¼šAngular æœƒåˆ†ææ‰€æœ‰è·¯ç”±ï¼ŒåŒ…æ‹¬å»¶é²è¼‰å…¥çš„æ¨¡çµ„</span></span><br><span class="line"><span class="comment">// 2. å»ºæ§‹éšæ®µï¼šæœƒè¼‰å…¥æ‰€æœ‰å¿…è¦çš„æ¨¡çµ„ä¾†ç”Ÿæˆéœæ…‹ HTML</span></span><br><span class="line"><span class="comment">// 3. åŸ·è¡Œéšæ®µï¼šJavaScript bundle ä»ç„¶æœƒæŒ‰éœ€å»¶é²è¼‰å…¥</span></span><br><span class="line"><span class="comment">// 4. æ°´åˆä½œç”¨ï¼šä¸å½±éŸ¿å»¶é²è¼‰å…¥çš„æ­£å¸¸é‹ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ app.routes.server.ts ä¸­å¯ä»¥é‡å°å»¶é²è¼‰å…¥çš„è·¯ç”±è¨­å®šä¸åŒç­–ç•¥</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature/**&#x27;</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> <span class="comment">// å»¶é²è¼‰å…¥æ¨¡çµ„ä¹Ÿå¯é æ¸²æŸ“</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;admin/**&#x27;</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span>   <span class="comment">// éœ€èªè­‰çš„å»¶é²è¼‰å…¥æ¨¡çµ„ç”¨å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><strong>é‡è¦çµè«–</strong>ï¼šå»¶é²è¼‰å…¥èˆ‡ SSR å¯ä»¥å®Œç¾æ­é…ï¼Œä¸éœ€è¦ç‰¹æ®Šè€ƒé‡ã€‚Angular çš„æ¶æ§‹å·²ç¶“è™•ç†å¥½äº†å…©è€…çš„æ•´åˆã€‚</p>
<h2 id="æ•ˆèƒ½å„ªåŒ–ç­–ç•¥"><a href="#æ•ˆèƒ½å„ªåŒ–ç­–ç•¥" class="headerlink" title="æ•ˆèƒ½å„ªåŒ–ç­–ç•¥"></a>æ•ˆèƒ½å„ªåŒ–ç­–ç•¥</h2><h3 id="1-é¸æ“‡æ€§é æ¸²æŸ“é…ç½®"><a href="#1-é¸æ“‡æ€§é æ¸²æŸ“é…ç½®" class="headerlink" title="1. é¸æ“‡æ€§é æ¸²æŸ“é…ç½®"></a>1. é¸æ“‡æ€§é æ¸²æŸ“é…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ“šé é¢ç‰¹æ€§é¸æ“‡æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  <span class="comment">// å…¬é–‹é é¢ - é æ¸²æŸ“</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;contact&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å‹•æ…‹å…§å®¹ - å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;news/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// éœ€è¦èªè­‰ - å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;profile/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="2-ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸"><a href="#2-ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸" class="headerlink" title="2. ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸"></a>2. ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ƒä»¶å±¤ç´šçš„å»¶é²è¼‰å…¥</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;heavy-component&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./heavy/heavy.component&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">HeavyComponent</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/feature.routes&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">routes</span>)</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-è³‡æ–™é å–ç­–ç•¥"><a href="#3-è³‡æ–™é å–ç­–ç•¥" class="headerlink" title="3. è³‡æ–™é å–ç­–ç•¥"></a>3. è³‡æ–™é å–ç­–ç•¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ SSR éšæ®µé å–è³‡æ–™</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataResolver</span> <span class="keyword">implements</span> <span class="title class_">Resolve</span>&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(): <span class="title class_">Observable</span>&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// åœ¨ä¼ºæœå™¨ç«¯åŸ·è¡Œæ™‚æœƒé å–è³‡æ–™</span></span><br><span class="line">    <span class="comment">// æ³¨å…¥åˆ° HTML ä¸­ï¼Œå®¢æˆ¶ç«¯å¯ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dataService</span>.<span class="title function_">getData</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;data-page&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">DataPageComponent</span>,</span><br><span class="line">    <span class="attr">resolve</span>: &#123; <span class="attr">data</span>: <span class="title class_">DataResolver</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="è·¯ç”±å®ˆè¡›èˆ‡-SSR-çš„å¯¦å‹™è™•ç†"><a href="#è·¯ç”±å®ˆè¡›èˆ‡-SSR-çš„å¯¦å‹™è™•ç†" class="headerlink" title="è·¯ç”±å®ˆè¡›èˆ‡ SSR çš„å¯¦å‹™è™•ç†"></a>è·¯ç”±å®ˆè¡›èˆ‡ SSR çš„å¯¦å‹™è™•ç†</h2><h3 id="1-å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿"><a href="#1-å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿" class="headerlink" title="1. å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿"></a>1. å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AuthGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> | <span class="title class_">Observable</span>&lt;<span class="built_in">boolean</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// åœ¨é æ¸²æŸ“éšæ®µï¼Œé€šå¸¸æ²’æœ‰èªè­‰è³‡è¨Š</span></span><br><span class="line">    <span class="comment">// å¯èƒ½å°è‡´ï¼š</span></span><br><span class="line">    <span class="comment">// 1. é é¢è¢«é‡å°å‘åˆ°ç™»å…¥é </span></span><br><span class="line">    <span class="comment">// 2. é é¢é¡¯ç¤ºç‚ºç©ºç™½æˆ–è¼‰å…¥ä¸­ç‹€æ…‹</span></span><br><span class="line">    <span class="comment">// 3. ç„¡æ³•å–å¾—éœ€è¦èªè­‰çš„è³‡æ–™</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isPlatformServer</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>)) &#123;</span><br><span class="line">      <span class="comment">// ä¼ºæœå™¨ç«¯æ¸²æŸ“æ™‚çš„è™•ç†é‚è¼¯</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// æˆ–ç‰¹æ®Šè™•ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">authService</span>.<span class="title function_">isAuthenticated</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-SSR-å‹å–„çš„å®ˆè¡›è¨­è¨ˆ"><a href="#2-SSR-å‹å–„çš„å®ˆè¡›è¨­è¨ˆ" class="headerlink" title="2. SSR å‹å–„çš„å®ˆè¡›è¨­è¨ˆ"></a>2. SSR å‹å–„çš„å®ˆè¡›è¨­è¨ˆ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SSRFriendlyGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isPlatformServer</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>)) &#123;</span><br><span class="line">      <span class="comment">// ä¼ºæœå™¨ç«¯å…è¨±æ¸²æŸ“åŸºæœ¬çµæ§‹</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®¢æˆ¶ç«¯æ‰é€²è¡Œå¯¦éš›æ¬Šé™æª¢æŸ¥</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">authService</span>.<span class="title function_">isAuthenticated</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸"><a href="#å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸" class="headerlink" title="å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸"></a>å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸</h2><h3 id="1-å‰å¾Œç«¯å®‰å…¨åˆ†å·¥"><a href="#1-å‰å¾Œç«¯å®‰å…¨åˆ†å·¥" class="headerlink" title="1. å‰å¾Œç«¯å®‰å…¨åˆ†å·¥"></a>1. å‰å¾Œç«¯å®‰å…¨åˆ†å·¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‰ç«¯è·¯ç”±å®ˆè¡› - åƒ…ç”¨æ–¼ UX</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">RouteGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// é€™åªæ˜¯ UI å±¤é¢çš„ä¿è­·</span></span><br><span class="line">    <span class="comment">// ä¸èƒ½ä¾è³´å®ƒä¾†ä¿è­·æ•æ„Ÿè³‡æ–™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">hasPermission</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾Œç«¯ API - çœŸæ­£çš„å®‰å…¨é˜²ç·š</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;api/sensitive-data&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SensitiveDataController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="meta">@UseGuards</span>(<span class="title class_">JwtAuthGuard</span>) <span class="comment">// å¾Œç«¯é©—è­‰</span></span><br><span class="line">  <span class="title function_">getSensitiveData</span>(<span class="params"><span class="meta">@Request</span>() req</span>) &#123;</span><br><span class="line">    <span class="comment">// çœŸæ­£çš„å®‰å…¨æª¢æŸ¥åœ¨é€™è£¡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dataService</span>.<span class="title function_">getSensitiveData</span>(req.<span class="property">user</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-SSR-ç’°å¢ƒçš„å®‰å…¨é…ç½®"><a href="#2-SSR-ç’°å¢ƒçš„å®‰å…¨é…ç½®" class="headerlink" title="2. SSR ç’°å¢ƒçš„å®‰å…¨é…ç½®"></a>2. SSR ç’°å¢ƒçš„å®‰å…¨é…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.server.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">    <span class="comment">// ä¼ºæœå™¨ç«¯å°ˆç”¨çš„å®‰å…¨è¨­å®š</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">provide</span>: <span class="string">&#x27;SERVER_SIDE_CONFIG&#x27;</span>,</span><br><span class="line">      <span class="attr">useValue</span>: &#123;</span><br><span class="line">        <span class="attr">apiUrl</span>: process.<span class="property">env</span>[<span class="string">&#x27;API_URL&#x27;</span>],</span><br><span class="line">        <span class="attr">secretKey</span>: process.<span class="property">env</span>[<span class="string">&#x27;SECRET_KEY&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°"><a href="#éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°" class="headerlink" title="éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°"></a>éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°</h2><h3 id="1-å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–"><a href="#1-å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–" class="headerlink" title="1. å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–"></a>1. å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build:ssr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build &amp;&amp; ng run app:server&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:prerender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build &amp;&amp; ng run app:prerender&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve:ssr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node dist/app/server/server.mjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:analyze&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build --stats-json &amp;&amp; npx webpack-bundle-analyzer dist/app/stats.json&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-æ•ˆèƒ½ç›£æ§æŒ‡æ¨™"><a href="#2-æ•ˆèƒ½ç›£æ§æŒ‡æ¨™" class="headerlink" title="2. æ•ˆèƒ½ç›£æ§æŒ‡æ¨™"></a>2. æ•ˆèƒ½ç›£æ§æŒ‡æ¨™</h3><ul>
<li><strong>FCP (First Contentful Paint)</strong>: é æ¸²æŸ“æ‡‰ &lt; 1.5s</li>
<li><strong>LCP (Largest Contentful Paint)</strong>: æ‡‰ &lt; 2.5s</li>
<li><strong>CLS (Cumulative Layout Shift)</strong>: æ‡‰ &lt; 0.1</li>
<li><strong>TTI (Time to Interactive)</strong>: æ°´åˆä½œç”¨å®Œæˆæ™‚é–“</li>
</ul>
<h3 id="3-å¿«å–ç­–ç•¥"><a href="#3-å¿«å–ç­–ç•¥" class="headerlink" title="3. å¿«å–ç­–ç•¥"></a>3. å¿«å–ç­–ç•¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Express ä¼ºæœå™¨å¿«å–è¨­å®š</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;*&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// éœæ…‹è³‡æºé•·æœŸå¿«å–</span></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">url</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/assets/&#x27;</span>)) &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=31536000&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// HTML çŸ­æœŸå¿«å–</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=3600&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;index&#x27;</span>, &#123; req &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="1-é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ"><a href="#1-é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ" class="headerlink" title="1. é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ"></a>1. é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ</h3><p><strong>åŸå› </strong>: è·¯ç”±å®ˆè¡›é˜»æ“‹æˆ–è³‡æ–™è¼‰å…¥å¤±æ•—<br><strong>è§£æ±º</strong>: è¨­è¨ˆ SSR å‹å–„çš„å®ˆè¡›ï¼Œæˆ–å°‡è©²è·¯ç”±è¨­ç‚ºå‹•æ…‹æ¸²æŸ“</p>
<h3 id="2-æ°´åˆä½œç”¨éŒ¯èª¤"><a href="#2-æ°´åˆä½œç”¨éŒ¯èª¤" class="headerlink" title="2. æ°´åˆä½œç”¨éŒ¯èª¤"></a>2. æ°´åˆä½œç”¨éŒ¯èª¤</h3><p><strong>åŸå› </strong>: ä¼ºæœå™¨ç«¯èˆ‡å®¢æˆ¶ç«¯ DOM çµæ§‹ä¸ä¸€è‡´<br><strong>è§£æ±º</strong>: ä½¿ç”¨ <code>isPlatformBrowser/Server</code> æ¢ä»¶æ¸²æŸ“</p>
<h3 id="3-æ•ˆèƒ½å›æ­¸"><a href="#3-æ•ˆèƒ½å›æ­¸" class="headerlink" title="3. æ•ˆèƒ½å›æ­¸"></a>3. æ•ˆèƒ½å›æ­¸</h3><p><strong>åŸå› </strong>: éåº¦é æ¸²æŸ“æˆ– JavaScript bundle éå¤§<br><strong>è§£æ±º</strong>: é¸æ“‡æ€§é æ¸²æŸ“ + ç¨‹å¼ç¢¼åˆ†å‰²</p>
<h2 id="å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹"><a href="#å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹" class="headerlink" title="å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹"></a>å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹</h2><p>ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„ Angular SSR å°ˆæ¡ˆé…ç½®ç¯„ä¾‹ï¼š</p>
<h3 id="1-app-config-ts-å®¢æˆ¶ç«¯é…ç½®"><a href="#1-app-config-ts-å®¢æˆ¶ç«¯é…ç½®" class="headerlink" title="1. app.config.ts (å®¢æˆ¶ç«¯é…ç½®)"></a>1. app.config.ts (å®¢æˆ¶ç«¯é…ç½®)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideAnimations &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser/animations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideRouter</span>(routes),</span><br><span class="line">    <span class="title function_">provideAnimations</span>(),</span><br><span class="line">    <span class="comment">// å…¶ä»–å®¢æˆ¶ç«¯å°ˆç”¨çš„æä¾›è€…</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-app-routes-ts-å…±ç”¨è·¯ç”±"><a href="#2-app-routes-ts-å…±ç”¨è·¯ç”±" class="headerlink" title="2. app.routes.ts (å…±ç”¨è·¯ç”±)"></a>2. app.routes.ts (å…±ç”¨è·¯ç”±)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Routes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./home/home.component&#x27;</span>) &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./about/about.component&#x27;</span>) &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>, </span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dashboard/dashboard.routes&#x27;</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;**&#x27;</span>, <span class="attr">redirectTo</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-app-routes-server-ts-ä¼ºæœå™¨è·¯ç”±é…ç½®"><a href="#3-app-routes-server-ts-ä¼ºæœå™¨è·¯ç”±é…ç½®" class="headerlink" title="3. app.routes.server.ts (ä¼ºæœå™¨è·¯ç”±é…ç½®)"></a>3. app.routes.server.ts (ä¼ºæœå™¨è·¯ç”±é…ç½®)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ServerRoute</span>, <span class="title class_">RenderMode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; routes &#125;; <span class="comment">// é‡æ–°åŒ¯å‡ºå…±ç”¨è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="4-app-config-server-ts-ä¼ºæœå™¨é…ç½®"><a href="#4-app-config-server-ts-ä¼ºæœå™¨é…ç½®" class="headerlink" title="4. app.config.server.ts (ä¼ºæœå™¨é…ç½®)"></a>4. app.config.server.ts (ä¼ºæœå™¨é…ç½®)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mergeApplicationConfig, <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; serverRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes.server&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">    <span class="title function_">provideServerRouting</span>(serverRoutes)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h2 id="é—œéµæŠ€è¡“å•ç­”"><a href="#é—œéµæŠ€è¡“å•ç­”" class="headerlink" title="é—œéµæŠ€è¡“å•ç­”"></a>é—œéµæŠ€è¡“å•ç­”</h2><h3 id="Q-ç‚ºä»€éº¼è¦åˆ†é›¢-server-å’Œé-server-æª”æ¡ˆï¼Ÿ"><a href="#Q-ç‚ºä»€éº¼è¦åˆ†é›¢-server-å’Œé-server-æª”æ¡ˆï¼Ÿ" class="headerlink" title="Q: ç‚ºä»€éº¼è¦åˆ†é›¢ .server å’Œé .server æª”æ¡ˆï¼Ÿ"></a>Q: ç‚ºä»€éº¼è¦åˆ†é›¢ <code>.server</code> å’Œé <code>.server</code> æª”æ¡ˆï¼Ÿ</h3><p><strong>A</strong>: é—œæ³¨é»åˆ†é›¢ï¼Œè®“å®¢æˆ¶ç«¯å’Œä¼ºæœå™¨ç«¯å„è‡ªè™•ç†å°ˆå±¬çš„é…ç½®ï¼Œé¿å…æ··æ·†ä¸”æ–¹ä¾¿ç¶­è­·ã€‚</p>
<h3 id="Q-mergeApplicationConfig-å¦‚ä½•é‹ä½œï¼Ÿ"><a href="#Q-mergeApplicationConfig-å¦‚ä½•é‹ä½œï¼Ÿ" class="headerlink" title="Q: mergeApplicationConfig å¦‚ä½•é‹ä½œï¼Ÿ"></a>Q: <code>mergeApplicationConfig</code> å¦‚ä½•é‹ä½œï¼Ÿ</h3><p><strong>A</strong>: å®ƒæœƒåˆä½µå…©å€‹ ApplicationConfigï¼Œä¿ç•™æ‰€æœ‰ providersï¼Œè‹¥æœ‰è¡çªå‰‡ä¼ºæœå™¨é…ç½®å„ªå…ˆã€‚</p>
<h3 id="Q-å»¶é²è¼‰å…¥æœƒå½±éŸ¿-SSR-å—ï¼Ÿ"><a href="#Q-å»¶é²è¼‰å…¥æœƒå½±éŸ¿-SSR-å—ï¼Ÿ" class="headerlink" title="Q: å»¶é²è¼‰å…¥æœƒå½±éŸ¿ SSR å—ï¼Ÿ"></a>Q: å»¶é²è¼‰å…¥æœƒå½±éŸ¿ SSR å—ï¼Ÿ</h3><p><strong>A</strong>: ä¸æœƒã€‚Angular åœ¨å»ºæ§‹æ™‚æœƒåˆ†ææ‰€æœ‰è·¯ç”±é€²è¡Œé æ¸²æŸ“ï¼ŒåŸ·è¡Œæ™‚ä»æ­£å¸¸å»¶é²è¼‰å…¥ã€‚</p>
<h3 id="Q-è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ"><a href="#Q-è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ" class="headerlink" title="Q: è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ"></a>Q: è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ</h3><p><strong>A</strong>: æœƒã€‚è‹¥å®ˆè¡›åœ¨é æ¸²æŸ“æ™‚é˜»æ“‹è·¯ç”±ï¼Œè©²é é¢å¯èƒ½ç”¢ç”Ÿç©ºç™½å…§å®¹ã€‚å»ºè­°è¨­è¨ˆ SSR å‹å–„çš„å®ˆè¡›ã€‚</p>
<h3 id="Q-ä½•æ™‚æ‡‰è©²é¸æ“‡-SPA-è€Œé-SSRï¼Ÿ"><a href="#Q-ä½•æ™‚æ‡‰è©²é¸æ“‡-SPA-è€Œé-SSRï¼Ÿ" class="headerlink" title="Q: ä½•æ™‚æ‡‰è©²é¸æ“‡ SPA è€Œé SSRï¼Ÿ"></a>Q: ä½•æ™‚æ‡‰è©²é¸æ“‡ SPA è€Œé SSRï¼Ÿ</h3><p><strong>A</strong>: é«˜äº’å‹•æ€§ã€éœ€è¦ç™»å…¥ã€å…§éƒ¨ç³»çµ±ã€ä¸éœ€ SEO çš„å ´æ™¯é©åˆ SPAã€‚</p>
<h2 id="ç¸½çµèˆ‡å±•æœ›"><a href="#ç¸½çµèˆ‡å±•æœ›" class="headerlink" title="ç¸½çµèˆ‡å±•æœ›"></a>ç¸½çµèˆ‡å±•æœ›</h2><p>Angular 19 çš„ SSR&#x2F;Prerender æ¶æ§‹æä¾›äº†å¼·å¤§ä¸”éˆæ´»çš„æ¸²æŸ“ç­–ç•¥ï¼Œé—œéµè¦é»ï¼š</p>
<ol>
<li><strong>æ¶æ§‹è¨­è¨ˆ</strong>: å–„ç”¨ <code>.server</code> æª”æ¡ˆåˆ†é›¢é—œæ³¨é»ï¼Œ<code>mergeApplicationConfig</code> æ•´åˆé…ç½®</li>
<li><strong>è·¯ç”±è¦åŠƒ</strong>: æ ¹æ“šé é¢ç‰¹æ€§é¸æ“‡é©ç•¶çš„æ¸²æŸ“æ¨¡å¼ï¼Œå…¬é–‹é é¢ç”¨é æ¸²æŸ“ï¼Œç§æœ‰é é¢ç”¨å‹•æ…‹æ¸²æŸ“</li>
<li><strong>æ•ˆèƒ½å„ªåŒ–</strong>: å»¶é²è¼‰å…¥èˆ‡ SSR å®Œå…¨å…¼å®¹ï¼Œæ­é…ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³åŒ–è¼‰å…¥</li>
<li><strong>å®‰å…¨è€ƒé‡</strong>: å‰ç«¯å®ˆè¡›åƒ…ç‚º UX å„ªåŒ–ï¼ŒçœŸæ­£çš„å®‰å…¨é˜²ç·šåœ¨å¾Œç«¯ API é©—è­‰</li>
<li><strong>ç›£æ§ç¶­è­·</strong>: æŒçºŒç›£æ§ FCPã€LCPã€CLS ç­‰æŒ‡æ¨™ï¼Œèª¿æ•´æ¸²æŸ“ç­–ç•¥</li>
</ol>
<p><strong>æœ€ä½³å¯¦è¸</strong>: é€éæ­£ç¢ºçš„é…ç½®ç­–ç•¥ï¼Œå¯¦ç¾ã€Œå…¬é–‹é é¢å¿«é€Ÿè¼‰å…¥ + ç§æœ‰é é¢æµæš¢äº’å‹•ã€çš„æœ€ä½³ä½¿ç”¨è€…é«”é©—ã€‚</p>
<h2 id="ğŸ’¡-æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ–°é é¢éœ€æ±‚] --&gt; B&#123;éœ€è¦ SEO å—?&#125;</span><br><span class="line">    B --&gt;|æ˜¯| C&#123;å…§å®¹æ˜¯å¦éœæ…‹?&#125;</span><br><span class="line">    B --&gt;|å¦| D&#123;éœ€è¦èªè­‰å—?&#125;</span><br><span class="line">    </span><br><span class="line">    C --&gt;|æ˜¯| E[Prerender æ¨¡å¼]</span><br><span class="line">    C --&gt;|å¦| F&#123;æ›´æ–°é »ç‡?&#125;</span><br><span class="line">    </span><br><span class="line">    D --&gt;|æ˜¯| G[SPA æ¨¡å¼]</span><br><span class="line">    D --&gt;|å¦| H[Dynamic æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    F --&gt;|ä½| E</span><br><span class="line">    F --&gt;|é«˜| I[Dynamic æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    E --&gt; J[å»ºæ§‹æ™‚ç”Ÿæˆ HTML]</span><br><span class="line">    I --&gt; K[åŸ·è¡Œæ™‚ç”Ÿæˆ HTML]</span><br><span class="line">    H --&gt; K</span><br><span class="line">    G --&gt; L[ç´”å®¢æˆ¶ç«¯æ¸²æŸ“]</span><br><span class="line">    </span><br><span class="line">    J --&gt; M[æœ€ä½³ SEO + è¼‰å…¥é€Ÿåº¦]</span><br><span class="line">    K --&gt; N[è‰¯å¥½ SEO + å‹•æ…‹å…§å®¹]</span><br><span class="line">    L --&gt; O[æœ€ä½³äº’å‹•é«”é©—]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="1-æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§"><a href="#1-æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§" class="headerlink" title="1. æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§"></a>1. <strong>æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§</strong></h3><p>Angular 19 çš„é›™è»Œè¨­è¨ˆæä¾›äº†ï¼š</p>
<ul>
<li><strong>é—œæ³¨é»åˆ†é›¢</strong>ï¼šå®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯å„å¸å…¶è·</li>
<li><strong>é…ç½®åˆä½µ</strong>ï¼š<code>mergeApplicationConfig</code> çµ±ä¸€ç®¡ç†</li>
<li><strong>å½ˆæ€§é¸æ“‡</strong>ï¼šæ ¹æ“šé é¢ç‰¹æ€§é¸æ“‡æœ€é©åˆçš„æ¸²æŸ“æ¨¡å¼</li>
</ul>
<h3 id="2-æ•ˆèƒ½å„ªåŒ–çš„é—œéµ"><a href="#2-æ•ˆèƒ½å„ªåŒ–çš„é—œéµ" class="headerlink" title="2. æ•ˆèƒ½å„ªåŒ–çš„é—œéµ"></a>2. <strong>æ•ˆèƒ½å„ªåŒ–çš„é—œéµ</strong></h3><ul>
<li><strong>é¸æ“‡æ€§é æ¸²æŸ“</strong>ï¼šä¸æ˜¯æ‰€æœ‰é é¢éƒ½éœ€è¦ SSR</li>
<li><strong>ç¨‹å¼ç¢¼åˆ†å‰²</strong>ï¼šå»¶é²è¼‰å…¥èˆ‡ SSR å®Œå…¨å…¼å®¹</li>
<li><strong>å¿«å–ç­–ç•¥</strong>ï¼šéœæ…‹è³‡æºé•·æœŸå¿«å–ï¼ŒHTML çŸ­æœŸå¿«å–</li>
</ul>
<h3 id="3-å®‰å…¨æ€§çš„å¹³è¡¡"><a href="#3-å®‰å…¨æ€§çš„å¹³è¡¡" class="headerlink" title="3. å®‰å…¨æ€§çš„å¹³è¡¡"></a>3. <strong>å®‰å…¨æ€§çš„å¹³è¡¡</strong></h3><ul>
<li><strong>å‰ç«¯é˜²è­·</strong>ï¼šåƒ…ç‚º UX å„ªåŒ–ï¼Œä¸èƒ½ä¾è³´å®ƒä¿è­·æ•æ„Ÿè³‡æ–™</li>
<li><strong>å¾Œç«¯é˜²ç·š</strong>ï¼šçœŸæ­£çš„å®‰å…¨æª¢æŸ¥å¿…é ˆåœ¨ API å±¤åŸ·è¡Œ</li>
<li><strong>SSR å‹å–„è¨­è¨ˆ</strong>ï¼šå®ˆè¡›æ‡‰è©²è€ƒæ…®ä¼ºæœå™¨ç«¯æ¸²æŸ“ç’°å¢ƒ</li>
</ul>
<h2 id="ğŸš€-é€²éšå¯¦è¸å»ºè­°"><a href="#ğŸš€-é€²éšå¯¦è¸å»ºè­°" class="headerlink" title="ğŸš€ é€²éšå¯¦è¸å»ºè­°"></a>ğŸš€ é€²éšå¯¦è¸å»ºè­°</h2><h3 id="å¤§å‹å°ˆæ¡ˆç­–ç•¥"><a href="#å¤§å‹å°ˆæ¡ˆç­–ç•¥" class="headerlink" title="å¤§å‹å°ˆæ¡ˆç­–ç•¥"></a>å¤§å‹å°ˆæ¡ˆç­–ç•¥</h3><ul>
<li><strong>å¾®å‰ç«¯æ•´åˆ</strong>ï¼šä¸åŒæ¨¡çµ„å¯æ¡ç”¨ä¸åŒæ¸²æŸ“ç­–ç•¥</li>
<li><strong>CDN å„ªåŒ–</strong>ï¼šé æ¸²æŸ“é é¢éƒ¨ç½²åˆ°å…¨çƒ CDN</li>
<li><strong>A&#x2F;B æ¸¬è©¦</strong>ï¼šæ¯”è¼ƒä¸åŒæ¸²æŸ“æ¨¡å¼çš„æ•ˆæœ</li>
</ul>
<h3 id="ç›£æ§èˆ‡ç¶­è­·"><a href="#ç›£æ§èˆ‡ç¶­è­·" class="headerlink" title="ç›£æ§èˆ‡ç¶­è­·"></a>ç›£æ§èˆ‡ç¶­è­·</h3><ul>
<li><strong>Core Web Vitals</strong>ï¼šæŒçºŒç›£æ§ FCPã€LCPã€CLS æŒ‡æ¨™</li>
<li><strong>å»ºæ§‹æ™‚é–“</strong>ï¼šé æ¸²æŸ“é é¢æ•¸é‡èˆ‡å»ºæ§‹æ™‚é–“çš„å¹³è¡¡</li>
<li><strong>ä¼ºæœå™¨è² è¼‰</strong>ï¼šå‹•æ…‹æ¸²æŸ“çš„ä¼ºæœå™¨è³‡æºæ¶ˆè€—</li>
</ul>
<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="å®˜æ–¹æ–‡ä»¶"><a href="#å®˜æ–¹æ–‡ä»¶" class="headerlink" title="å®˜æ–¹æ–‡ä»¶"></a>å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><a target="_blank" rel="noopener" href="https://angular.dev/guide/ssr">Angular SSR å®˜æ–¹æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/angular/universal">Angular Universal æ–‡ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.angular.io/">Angular 19 æ–°åŠŸèƒ½</a></li>
</ul>
<h3 id="å¯¦ç”¨å·¥å…·"><a href="#å¯¦ç”¨å·¥å…·" class="headerlink" title="å¯¦ç”¨å·¥å…·"></a>å¯¦ç”¨å·¥å…·</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@angular-devkit/build-angular">Angular DevKit Build</a></li>
<li><a target="_blank" rel="noopener" href="https://angular.io/cli">Angular CLI</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/GoogleChrome/lighthouse-ci">Lighthouse CI</a></li>
</ul>
<h3 id="æ•ˆèƒ½æ¸¬è©¦"><a href="#æ•ˆèƒ½æ¸¬è©¦" class="headerlink" title="æ•ˆèƒ½æ¸¬è©¦"></a>æ•ˆèƒ½æ¸¬è©¦</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.webpagetest.org/">Web Page Test</a></li>
<li><a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">PageSpeed Insights</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/devtools/">Chrome DevTools</a></li>
</ul>
<h3 id="ç›¸é—œç¯„ä¾‹"><a href="#ç›¸é—œç¯„ä¾‹" class="headerlink" title="ç›¸é—œç¯„ä¾‹"></a>ç›¸é—œç¯„ä¾‹</h3><ul>
<li>Angular SSR å®˜æ–¹ç¯„ä¾‹å°ˆæ¡ˆ</li>
<li>Enterprise Angular æ¶æ§‹æŒ‡å—</li>
<li>PWA + SSR æ•´åˆæ¡ˆä¾‹</li>
</ul>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šAngular æ¶æ§‹åœ˜éšŠ<br><strong>æ›´æ–°æ—¥æœŸ</strong>ï¼š2025å¹´6æœˆ29æ—¥<br><strong>ç‰ˆæœ¬</strong>ï¼šv2.1<br><strong>é©ç”¨ç¯„åœ</strong>ï¼šAngular 19+ SSR&#x2F;Prerender å°ˆæ¡ˆ</p>
</blockquote>
<hr>
<p><em>æ­¤æ–‡ä»¶çµåˆäº†æŠ€è¡“åŸç†ã€å¯¦å‹™é…ç½®å’Œæ•ˆèƒ½è€ƒé‡ï¼Œæä¾›å®Œæ•´çš„ Angular SSR å¯¦ä½œæŒ‡å—ã€‚</em> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-ssr-prerender-technical-guide/" data-id="cmg51yfqe0001anmz14qn36c6" data-title="Angular 19 SSR/Prerender æ·±åº¦æŠ€è¡“åˆ†æèˆ‡å¯¦æˆ°æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hydration/" rel="tag">Hydration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Performance-Optimization/" rel="tag">Performance Optimization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prerender/" rel="tag">Prerender</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RenderMode/" rel="tag">RenderMode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Route-Guards/" rel="tag">Route Guards</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server-Side-Rendering/" rel="tag">Server-Side Rendering</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ssr-technical-analysis-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/angular-ssr-technical-analysis-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T05:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/angular-ssr-technical-analysis-guide/">Angular 19 SSR/Prerender æ·±åº¦æŠ€è¡“åˆ†æèˆ‡å¯¦æˆ°æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>é›™è»Œæ¶æ§‹è¨­è¨ˆ</strong>ï¼š<code>.server</code> æª”æ¡ˆåˆ†å·¥è™•ç†å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯éœ€æ±‚</li>
<li><strong>æ™ºèƒ½æ¸²æŸ“ç­–ç•¥</strong>ï¼šPrerender ç”¨æ–¼éœæ…‹å…§å®¹ï¼ŒDynamic ç”¨æ–¼éœ€èªè­‰é é¢</li>
<li><strong>æ°´åˆä½œç”¨æ©Ÿåˆ¶</strong>ï¼šç„¡ç¸«éŠœæ¥ SSR é æ¸²æŸ“å…§å®¹èˆ‡å®¢æˆ¶ç«¯äº’å‹•åŠŸèƒ½</li>
<li><strong>è·¯ç”±å®ˆè¡›å…¼å®¹</strong>ï¼šè¨­è¨ˆ SSR å‹å–„çš„å®ˆè¡›ï¼Œé¿å…é æ¸²æŸ“éšæ®µå•é¡Œ</li>
<li><strong>æ•ˆèƒ½å„ªåŒ–ç­–ç•¥</strong>ï¼šç¨‹å¼ç¢¼åˆ†å‰²èˆ‡é¸æ“‡æ€§é æ¸²æŸ“çš„æœ€ä½³å¯¦è¸</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æ–‡æ·±åº¦åˆ†æäº† Angular 19 SSR&#x2F;Prerender æŠ€è¡“çš„å®Œæ•´æ¶æ§‹èˆ‡å¯¦æˆ°æ‡‰ç”¨ï¼Œæ¶µè“‹å¾å»ºæ§‹åˆ°éƒ¨ç½²çš„å…¨æµç¨‹å„ªåŒ–ï¼š</p>
<ul>
<li>ğŸ¯ <strong>æ¶æ§‹åˆ†æ</strong>ï¼š<code>.server</code> æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€å’Œè¨­è¨ˆåŸç†</li>
<li>ğŸ”„ <strong>æ¸²æŸ“ç­–ç•¥</strong>ï¼šPrerender èˆ‡ Dynamic æ¨¡å¼çš„é¸æ“‡å’Œé…ç½®</li>
<li>âš¡ <strong>æ•ˆèƒ½å„ªåŒ–</strong>ï¼šç¨‹å¼ç¢¼åˆ†å‰²ã€è³‡æ–™é å–èˆ‡å¿«å–ç­–ç•¥</li>
<li>ğŸ›¡ï¸ <strong>å®‰å…¨è€ƒé‡</strong>ï¼šå‰å¾Œç«¯å®‰å…¨åˆ†å·¥å’Œ SSR ç’°å¢ƒé…ç½®</li>
<li>ğŸ“Š <strong>ç›£æ§éƒ¨ç½²</strong>ï¼šæ•ˆèƒ½æŒ‡æ¨™ç›£æ§å’Œå»ºæ§‹æœ€ä½³åŒ–</li>
</ul>
<h2 id="ğŸ—ï¸-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹"><a href="#ğŸ—ï¸-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹" class="headerlink" title="ğŸ—ï¸ Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹"></a>ğŸ—ï¸ Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ng build] --&gt; B[å®¢æˆ¶ç«¯å»ºæ§‹]</span><br><span class="line">    A --&gt; C[ä¼ºæœå™¨ç«¯å»ºæ§‹]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[main.ts å•Ÿå‹•é»]</span><br><span class="line">    B --&gt; B2[app.config.ts å®¢æˆ¶ç«¯é…ç½®]</span><br><span class="line">    B --&gt; B3[app.routes.ts åŸºç¤è·¯ç”±]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[main.server.ts ä¼ºæœå™¨å•Ÿå‹•]</span><br><span class="line">    C --&gt; C2[app.config.server.ts åˆä½µé…ç½®]</span><br><span class="line">    C --&gt; C3[app.routes.server.ts SSR è·¯ç”±]</span><br><span class="line">    C --&gt; C4[server.ts Express è¨­å®š]</span><br><span class="line">    </span><br><span class="line">    C2 --&gt; D[mergeApplicationConfig]</span><br><span class="line">    D --&gt; E[çµ±ä¸€æ‡‰ç”¨é…ç½®]</span><br><span class="line">    </span><br><span class="line">    E --&gt; F&#123;æ¸²æŸ“æ¨¡å¼åˆ¤æ–·&#125;</span><br><span class="line">    F --&gt;|Prerender| G[éœæ…‹ HTML ç”Ÿæˆ]</span><br><span class="line">    F --&gt;|Dynamic| H[å³æ™‚ä¼ºæœå™¨æ¸²æŸ“]</span><br><span class="line">    </span><br><span class="line">    G --&gt; I[é å»ºæ§‹ HTML æª”æ¡ˆ]</span><br><span class="line">    H --&gt; J[åŸ·è¡ŒæœŸ HTML ç”Ÿæˆ]</span><br><span class="line">    </span><br><span class="line">    I --&gt; K[å®¢æˆ¶ç«¯æ°´åˆä½œç”¨]</span><br><span class="line">    J --&gt; K</span><br><span class="line">    K --&gt; L[å®Œæ•´äº’å‹•æ‡‰ç”¨]</span><br></pre></td></tr></table></figure>

<h2 id="æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†"><a href="#æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†" class="headerlink" title="æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†"></a>æ¶æ§‹åˆ†æèˆ‡æŠ€è¡“åŸç†</h2><h3 id="1-server-æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€"><a href="#1-server-æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€" class="headerlink" title="1. .server æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€"></a>1. <code>.server</code> æª”æ¡ˆæ¶æ§‹çš„æŠ€è¡“ç´°ç¯€</h3><p>Angular 19 çš„ SSR æ¶æ§‹æ¡ç”¨é›™è»Œè¨­è¨ˆï¼Œåˆ†åˆ¥è™•ç†å®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯çš„éœ€æ±‚ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¶æ§‹åˆ†å·¥ç¤ºæ„</span></span><br><span class="line">â”œâ”€â”€ src/</span><br><span class="line">â”‚   â”œâ”€â”€ app/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.<span class="property">config</span>.<span class="property">ts</span>          <span class="comment">// å®¢æˆ¶ç«¯è¨­å®š</span></span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.<span class="property">config</span>.<span class="property">server</span>.<span class="property">ts</span>   <span class="comment">// ä¼ºæœå™¨ç«¯è¨­å®šåˆä½µ</span></span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ app.<span class="property">routes</span>.<span class="property">ts</span>           <span class="comment">// å…±ç”¨è·¯ç”±å®šç¾©</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ app.<span class="property">routes</span>.<span class="property">server</span>.<span class="property">ts</span>    <span class="comment">// SSR è·¯ç”±é…ç½®</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.<span class="property">ts</span>                     <span class="comment">// å®¢æˆ¶ç«¯å•Ÿå‹•é»</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.<span class="property">server</span>.<span class="property">ts</span>              <span class="comment">// ä¼ºæœå™¨ç«¯å•Ÿå‹•é»</span></span><br><span class="line">â”‚   â””â”€â”€ server.<span class="property">ts</span>                   <span class="comment">// Express ä¼ºæœå™¨è¨­å®š</span></span><br></pre></td></tr></table></figure>

<h4 id="mergeApplicationConfig-é‹ä½œæ©Ÿåˆ¶"><a href="#mergeApplicationConfig-é‹ä½œæ©Ÿåˆ¶" class="headerlink" title="mergeApplicationConfig é‹ä½œæ©Ÿåˆ¶"></a><code>mergeApplicationConfig</code> é‹ä½œæ©Ÿåˆ¶</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.server.ts çš„æ·±åº¦åˆ†æ</span></span><br><span class="line"><span class="keyword">import</span> &#123; mergeApplicationConfig, <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),          <span class="comment">// å•Ÿç”¨ä¼ºæœå™¨ç«¯æ¸²æŸ“</span></span><br><span class="line">    <span class="title function_">provideServerRouting</span>(serverRoutes) <span class="comment">// æä¾› SSR è·¯ç”±é…ç½®</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mergeApplicationConfig çš„åˆä½µé‚è¼¯ï¼š</span></span><br><span class="line"><span class="comment">// 1. ä¿ç•™ appConfig ä¸­çš„æ‰€æœ‰ providers</span></span><br><span class="line"><span class="comment">// 2. æ·»åŠ  serverConfig ä¸­çš„ providers</span></span><br><span class="line"><span class="comment">// 3. å¦‚æœ‰è¡çªï¼ŒserverConfig å„ªå…ˆç´šè¼ƒé«˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h3 id="2-è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹"><a href="#2-è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹" class="headerlink" title="2. è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹"></a>2. è·¯ç”±é…ç½®çš„å®Œæ•´é‹ä½œæµç¨‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.routes.ts - åŸºç¤è·¯ç”±å®šç¾©</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: <span class="title class_">HomeComponent</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">AboutComponent</span> &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>, </span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dashboard/dashboard.routes&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">routes</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>] <span class="comment">// è·¯ç”±å®ˆè¡›</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;products&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./products/products.component&#x27;</span>) &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.routes.server.ts - SSR é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; routes &#125;; <span class="comment">// é‡æ–°åŒ¯å‡ºåŸºç¤è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,           <span class="comment">// é¦–é é æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>,      <span class="comment">// é—œæ–¼é é¢é æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="comment">// éœ€ç™»å…¥é é¢å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;products&#x27;</span>,   <span class="comment">// ç”¢å“é é¢é æ¸²æŸ“</span></span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹"><a href="#3-Angular-SSR-å®Œæ•´æ¶æ§‹æµç¨‹" class="headerlink" title="3. Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹"></a>3. Angular SSR å®Œæ•´æ¶æ§‹æµç¨‹</h3><p>é€éä»¥ä¸‹åœ–è¡¨å¯ä»¥æ¸…æ¥šäº†è§£ Angular SSR å¾å»ºæ§‹åˆ°åŸ·è¡Œçš„å®Œæ•´æµç¨‹ï¼š</p>
<h4 id="å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–"><a href="#å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–" class="headerlink" title="å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–"></a>å»ºæ§‹èˆ‡åŸ·è¡Œéšæ®µæµç¨‹åœ–</h4><p><img src="/%E5%B7%B2%E5%9C%A8%E4%B8%8A%E6%96%B9%E9%A1%AF%E7%A4%BA" alt="Angular SSR æ¶æ§‹æµç¨‹"></p>
<h4 id="æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"><a href="#æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–" class="headerlink" title="æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"></a>æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–</h4><p><img src="/%E5%B7%B2%E5%9C%A8%E4%B8%8A%E6%96%B9%E9%A1%AF%E7%A4%BA" alt="æ¸²æŸ“ç­–ç•¥æ±ºç­–"></p>
<h3 id="4-é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€"><a href="#4-é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€" class="headerlink" title="4. é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€"></a>4. é æ¸²æŸ“èˆ‡æ°´åˆä½œç”¨æŠ€è¡“ç´°ç¯€</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ°´åˆä½œç”¨çš„é—œéµæ™‚æ©Ÿ</span></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-root&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;!-- é æ¸²æŸ“å…§å®¹ç«‹å³å¯è¦‹ --&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      &lt;!-- éœ€è¦æ°´åˆä½œç”¨æ‰èƒ½äº’å‹• --&gt;</span></span><br><span class="line"><span class="string">      &lt;button (click)=&quot;handleClick()&quot;&gt;é»æ“Šæˆ‘&lt;/button&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">      &lt;!-- æ¢ä»¶æ¸²æŸ“é¿å…æ°´åˆä½œç”¨éŒ¯èª¤ --&gt;</span></span><br><span class="line"><span class="string">      &lt;div *ngIf=&quot;isBrowser&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;é€™æ®µå…§å®¹åªåœ¨ç€è¦½å™¨é¡¯ç¤º&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppComponent</span> &#123;</span><br><span class="line">  title = <span class="string">&#x27;é æ¸²æŸ“æ¨™é¡Œ&#x27;</span>;</span><br><span class="line">  isBrowser = <span class="title function_">isPlatformBrowser</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="meta">@Inject</span>(PLATFORM_ID) <span class="keyword">private</span> <span class="attr">platformId</span>: <span class="title class_">Object</span></span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ°´åˆä½œç”¨å®Œæˆå¾Œæ‰èƒ½æ­£å¸¸åŸ·è¡Œ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æŒ‰éˆ•è¢«é»æ“Š&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-å»¶é²è¼‰å…¥èˆ‡-SSR-å…¼å®¹æ€§è©³è§£"><a href="#5-å»¶é²è¼‰å…¥èˆ‡-SSR-å…¼å®¹æ€§è©³è§£" class="headerlink" title="5. å»¶é²è¼‰å…¥èˆ‡ SSR å…¼å®¹æ€§è©³è§£"></a>5. å»¶é²è¼‰å…¥èˆ‡ SSR å…¼å®¹æ€§è©³è§£</h3><p>å»¶é²è¼‰å…¥èˆ‡ SSR å®Œå…¨å…¼å®¹ï¼Œä¸æœƒç”¢ç”Ÿé¡å¤–çš„é—œæ³¨é»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»¶é²è¼‰å…¥æ¨¡çµ„çš„ SSR è™•ç†</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/feature.routes&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">m</span> =&gt;</span> m.<span class="property">routes</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./admin/admin.component&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">AdminComponent</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>] <span class="comment">// æ­é…è·¯ç”±å®ˆè¡›</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// SSR éšæ®µçš„è™•ç†é‚è¼¯ï¼š</span></span><br><span class="line"><span class="comment">// 1. é æ¸²æŸ“æ™‚ï¼šAngular æœƒåˆ†ææ‰€æœ‰è·¯ç”±ï¼ŒåŒ…æ‹¬å»¶é²è¼‰å…¥çš„æ¨¡çµ„</span></span><br><span class="line"><span class="comment">// 2. å»ºæ§‹éšæ®µï¼šæœƒè¼‰å…¥æ‰€æœ‰å¿…è¦çš„æ¨¡çµ„ä¾†ç”Ÿæˆéœæ…‹ HTML</span></span><br><span class="line"><span class="comment">// 3. åŸ·è¡Œéšæ®µï¼šJavaScript bundle ä»ç„¶æœƒæŒ‰éœ€å»¶é²è¼‰å…¥</span></span><br><span class="line"><span class="comment">// 4. æ°´åˆä½œç”¨ï¼šä¸å½±éŸ¿å»¶é²è¼‰å…¥çš„æ­£å¸¸é‹ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ app.routes.server.ts ä¸­å¯ä»¥é‡å°å»¶é²è¼‰å…¥çš„è·¯ç”±è¨­å®šä¸åŒç­–ç•¥</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature/**&#x27;</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> <span class="comment">// å»¶é²è¼‰å…¥æ¨¡çµ„ä¹Ÿå¯é æ¸²æŸ“</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;admin/**&#x27;</span>,</span><br><span class="line">    <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span>   <span class="comment">// éœ€èªè­‰çš„å»¶é²è¼‰å…¥æ¨¡çµ„ç”¨å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><strong>é‡è¦çµè«–</strong>ï¼šå»¶é²è¼‰å…¥èˆ‡ SSR å¯ä»¥å®Œç¾æ­é…ï¼Œä¸éœ€è¦ç‰¹æ®Šè€ƒé‡ã€‚Angular çš„æ¶æ§‹å·²ç¶“è™•ç†å¥½äº†å…©è€…çš„æ•´åˆã€‚</p>
<h2 id="æ•ˆèƒ½å„ªåŒ–ç­–ç•¥"><a href="#æ•ˆèƒ½å„ªåŒ–ç­–ç•¥" class="headerlink" title="æ•ˆèƒ½å„ªåŒ–ç­–ç•¥"></a>æ•ˆèƒ½å„ªåŒ–ç­–ç•¥</h2><h3 id="1-é¸æ“‡æ€§é æ¸²æŸ“é…ç½®"><a href="#1-é¸æ“‡æ€§é æ¸²æŸ“é…ç½®" class="headerlink" title="1. é¸æ“‡æ€§é æ¸²æŸ“é…ç½®"></a>1. é¸æ“‡æ€§é æ¸²æŸ“é…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ“šé é¢ç‰¹æ€§é¸æ“‡æ¸²æŸ“æ¨¡å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  <span class="comment">// å…¬é–‹é é¢ - é æ¸²æŸ“</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;contact&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å‹•æ…‹å…§å®¹ - å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;news/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// éœ€è¦èªè­‰ - å‹•æ…‹æ¸²æŸ“</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;profile/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="2-ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸"><a href="#2-ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸" class="headerlink" title="2. ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸"></a>2. ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³å¯¦è¸</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ƒä»¶å±¤ç´šçš„å»¶é²è¼‰å…¥</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;heavy-component&#x27;</span>,</span><br><span class="line">    <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./heavy/heavy.component&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">HeavyComponent</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;feature&#x27;</span>,</span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./feature/feature.routes&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">routes</span>)</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-è³‡æ–™é å–ç­–ç•¥"><a href="#3-è³‡æ–™é å–ç­–ç•¥" class="headerlink" title="3. è³‡æ–™é å–ç­–ç•¥"></a>3. è³‡æ–™é å–ç­–ç•¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ SSR éšæ®µé å–è³‡æ–™</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataResolver</span> <span class="keyword">implements</span> <span class="title class_">Resolve</span>&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(): <span class="title class_">Observable</span>&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// åœ¨ä¼ºæœå™¨ç«¯åŸ·è¡Œæ™‚æœƒé å–è³‡æ–™</span></span><br><span class="line">    <span class="comment">// æ³¨å…¥åˆ° HTML ä¸­ï¼Œå®¢æˆ¶ç«¯å¯ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dataService</span>.<span class="title function_">getData</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;data-page&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">DataPageComponent</span>,</span><br><span class="line">    <span class="attr">resolve</span>: &#123; <span class="attr">data</span>: <span class="title class_">DataResolver</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="è·¯ç”±å®ˆè¡›èˆ‡-SSR-çš„å¯¦å‹™è™•ç†"><a href="#è·¯ç”±å®ˆè¡›èˆ‡-SSR-çš„å¯¦å‹™è™•ç†" class="headerlink" title="è·¯ç”±å®ˆè¡›èˆ‡ SSR çš„å¯¦å‹™è™•ç†"></a>è·¯ç”±å®ˆè¡›èˆ‡ SSR çš„å¯¦å‹™è™•ç†</h2><h3 id="1-å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿"><a href="#1-å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿" class="headerlink" title="1. å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿"></a>1. å®ˆè¡›å°é æ¸²æŸ“çš„å½±éŸ¿</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AuthGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> | <span class="title class_">Observable</span>&lt;<span class="built_in">boolean</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// åœ¨é æ¸²æŸ“éšæ®µï¼Œé€šå¸¸æ²’æœ‰èªè­‰è³‡è¨Š</span></span><br><span class="line">    <span class="comment">// å¯èƒ½å°è‡´ï¼š</span></span><br><span class="line">    <span class="comment">// 1. é é¢è¢«é‡å°å‘åˆ°ç™»å…¥é </span></span><br><span class="line">    <span class="comment">// 2. é é¢é¡¯ç¤ºç‚ºç©ºç™½æˆ–è¼‰å…¥ä¸­ç‹€æ…‹</span></span><br><span class="line">    <span class="comment">// 3. ç„¡æ³•å–å¾—éœ€è¦èªè­‰çš„è³‡æ–™</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isPlatformServer</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>)) &#123;</span><br><span class="line">      <span class="comment">// ä¼ºæœå™¨ç«¯æ¸²æŸ“æ™‚çš„è™•ç†é‚è¼¯</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// æˆ–ç‰¹æ®Šè™•ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">authService</span>.<span class="title function_">isAuthenticated</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-SSR-å‹å–„çš„å®ˆè¡›è¨­è¨ˆ"><a href="#2-SSR-å‹å–„çš„å®ˆè¡›è¨­è¨ˆ" class="headerlink" title="2. SSR å‹å–„çš„å®ˆè¡›è¨­è¨ˆ"></a>2. SSR å‹å–„çš„å®ˆè¡›è¨­è¨ˆ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SSRFriendlyGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isPlatformServer</span>(<span class="variable language_">this</span>.<span class="property">platformId</span>)) &#123;</span><br><span class="line">      <span class="comment">// ä¼ºæœå™¨ç«¯å…è¨±æ¸²æŸ“åŸºæœ¬çµæ§‹</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®¢æˆ¶ç«¯æ‰é€²è¡Œå¯¦éš›æ¬Šé™æª¢æŸ¥</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">authService</span>.<span class="title function_">isAuthenticated</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸"><a href="#å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸" class="headerlink" title="å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸"></a>å®‰å…¨æ€§è€ƒé‡èˆ‡æœ€ä½³å¯¦è¸</h2><h3 id="1-å‰å¾Œç«¯å®‰å…¨åˆ†å·¥"><a href="#1-å‰å¾Œç«¯å®‰å…¨åˆ†å·¥" class="headerlink" title="1. å‰å¾Œç«¯å®‰å…¨åˆ†å·¥"></a>1. å‰å¾Œç«¯å®‰å…¨åˆ†å·¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‰ç«¯è·¯ç”±å®ˆè¡› - åƒ…ç”¨æ–¼ UX</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">RouteGuard</span> <span class="keyword">implements</span> <span class="title class_">CanActivate</span> &#123;</span><br><span class="line">  <span class="title function_">canActivate</span>(): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="comment">// é€™åªæ˜¯ UI å±¤é¢çš„ä¿è­·</span></span><br><span class="line">    <span class="comment">// ä¸èƒ½ä¾è³´å®ƒä¾†ä¿è­·æ•æ„Ÿè³‡æ–™</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">hasPermission</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾Œç«¯ API - çœŸæ­£çš„å®‰å…¨é˜²ç·š</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;api/sensitive-data&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">SensitiveDataController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="meta">@UseGuards</span>(<span class="title class_">JwtAuthGuard</span>) <span class="comment">// å¾Œç«¯é©—è­‰</span></span><br><span class="line">  <span class="title function_">getSensitiveData</span>(<span class="params"><span class="meta">@Request</span>() req</span>) &#123;</span><br><span class="line">    <span class="comment">// çœŸæ­£çš„å®‰å…¨æª¢æŸ¥åœ¨é€™è£¡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">dataService</span>.<span class="title function_">getSensitiveData</span>(req.<span class="property">user</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-SSR-ç’°å¢ƒçš„å®‰å…¨é…ç½®"><a href="#2-SSR-ç’°å¢ƒçš„å®‰å…¨é…ç½®" class="headerlink" title="2. SSR ç’°å¢ƒçš„å®‰å…¨é…ç½®"></a>2. SSR ç’°å¢ƒçš„å®‰å…¨é…ç½®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.config.server.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">    <span class="comment">// ä¼ºæœå™¨ç«¯å°ˆç”¨çš„å®‰å…¨è¨­å®š</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">provide</span>: <span class="string">&#x27;SERVER_SIDE_CONFIG&#x27;</span>,</span><br><span class="line">      <span class="attr">useValue</span>: &#123;</span><br><span class="line">        <span class="attr">apiUrl</span>: process.<span class="property">env</span>[<span class="string">&#x27;API_URL&#x27;</span>],</span><br><span class="line">        <span class="attr">secretKey</span>: process.<span class="property">env</span>[<span class="string">&#x27;SECRET_KEY&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°"><a href="#éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°" class="headerlink" title="éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°"></a>éƒ¨ç½²èˆ‡ç›£æ§å»ºè­°</h2><h3 id="1-å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–"><a href="#1-å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–" class="headerlink" title="1. å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–"></a>1. å»ºæ§‹æŒ‡ä»¤æœ€ä½³åŒ–</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build:ssr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build &amp;&amp; ng run app:server&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:prerender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build &amp;&amp; ng run app:prerender&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve:ssr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node dist/app/server/server.mjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:analyze&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ng build --stats-json &amp;&amp; npx webpack-bundle-analyzer dist/app/stats.json&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-æ•ˆèƒ½ç›£æ§æŒ‡æ¨™"><a href="#2-æ•ˆèƒ½ç›£æ§æŒ‡æ¨™" class="headerlink" title="2. æ•ˆèƒ½ç›£æ§æŒ‡æ¨™"></a>2. æ•ˆèƒ½ç›£æ§æŒ‡æ¨™</h3><ul>
<li><strong>FCP (First Contentful Paint)</strong>: é æ¸²æŸ“æ‡‰ &lt; 1.5s</li>
<li><strong>LCP (Largest Contentful Paint)</strong>: æ‡‰ &lt; 2.5s</li>
<li><strong>CLS (Cumulative Layout Shift)</strong>: æ‡‰ &lt; 0.1</li>
<li><strong>TTI (Time to Interactive)</strong>: æ°´åˆä½œç”¨å®Œæˆæ™‚é–“</li>
</ul>
<h3 id="3-å¿«å–ç­–ç•¥"><a href="#3-å¿«å–ç­–ç•¥" class="headerlink" title="3. å¿«å–ç­–ç•¥"></a>3. å¿«å–ç­–ç•¥</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Express ä¼ºæœå™¨å¿«å–è¨­å®š</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;*&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// éœæ…‹è³‡æºé•·æœŸå¿«å–</span></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">url</span>.<span class="title function_">includes</span>(<span class="string">&#x27;/assets/&#x27;</span>)) &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=31536000&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// HTML çŸ­æœŸå¿«å–</span></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=3600&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&#x27;index&#x27;</span>, &#123; req &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="1-é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ"><a href="#1-é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ" class="headerlink" title="1. é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ"></a>1. é æ¸²æŸ“é é¢ç©ºç™½å•é¡Œ</h3><p><strong>åŸå› </strong>: è·¯ç”±å®ˆè¡›é˜»æ“‹æˆ–è³‡æ–™è¼‰å…¥å¤±æ•—<br><strong>è§£æ±º</strong>: è¨­è¨ˆ SSR å‹å–„çš„å®ˆè¡›ï¼Œæˆ–å°‡è©²è·¯ç”±è¨­ç‚ºå‹•æ…‹æ¸²æŸ“</p>
<h3 id="2-æ°´åˆä½œç”¨éŒ¯èª¤"><a href="#2-æ°´åˆä½œç”¨éŒ¯èª¤" class="headerlink" title="2. æ°´åˆä½œç”¨éŒ¯èª¤"></a>2. æ°´åˆä½œç”¨éŒ¯èª¤</h3><p><strong>åŸå› </strong>: ä¼ºæœå™¨ç«¯èˆ‡å®¢æˆ¶ç«¯ DOM çµæ§‹ä¸ä¸€è‡´<br><strong>è§£æ±º</strong>: ä½¿ç”¨ <code>isPlatformBrowser/Server</code> æ¢ä»¶æ¸²æŸ“</p>
<h3 id="3-æ•ˆèƒ½å›æ­¸"><a href="#3-æ•ˆèƒ½å›æ­¸" class="headerlink" title="3. æ•ˆèƒ½å›æ­¸"></a>3. æ•ˆèƒ½å›æ­¸</h3><p><strong>åŸå› </strong>: éåº¦é æ¸²æŸ“æˆ– JavaScript bundle éå¤§<br><strong>è§£æ±º</strong>: é¸æ“‡æ€§é æ¸²æŸ“ + ç¨‹å¼ç¢¼åˆ†å‰²</p>
<h2 id="å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹"><a href="#å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹" class="headerlink" title="å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹"></a>å¯¦å‹™é…ç½®å®Œæ•´ç¯„ä¾‹</h2><p>ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„ Angular SSR å°ˆæ¡ˆé…ç½®ç¯„ä¾‹ï¼š</p>
<h3 id="1-app-config-ts-å®¢æˆ¶ç«¯é…ç½®"><a href="#1-app-config-ts-å®¢æˆ¶ç«¯é…ç½®" class="headerlink" title="1. app.config.ts (å®¢æˆ¶ç«¯é…ç½®)"></a>1. app.config.ts (å®¢æˆ¶ç«¯é…ç½®)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideAnimations &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser/animations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">appConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideRouter</span>(routes),</span><br><span class="line">    <span class="title function_">provideAnimations</span>(),</span><br><span class="line">    <span class="comment">// å…¶ä»–å®¢æˆ¶ç«¯å°ˆç”¨çš„æä¾›è€…</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-app-routes-ts-å…±ç”¨è·¯ç”±"><a href="#2-app-routes-ts-å…±ç”¨è·¯ç”±" class="headerlink" title="2. app.routes.ts (å…±ç”¨è·¯ç”±)"></a>2. app.routes.ts (å…±ç”¨è·¯ç”±)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Routes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">Routes</span> = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./home/home.component&#x27;</span>) &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">loadComponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./about/about.component&#x27;</span>) &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>, </span><br><span class="line">    <span class="attr">loadChildren</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./dashboard/dashboard.routes&#x27;</span>),</span><br><span class="line">    <span class="attr">canActivate</span>: [<span class="title class_">AuthGuard</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;**&#x27;</span>, <span class="attr">redirectTo</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="3-app-routes-server-ts-ä¼ºæœå™¨è·¯ç”±é…ç½®"><a href="#3-app-routes-server-ts-ä¼ºæœå™¨è·¯ç”±é…ç½®" class="headerlink" title="3. app.routes.server.ts (ä¼ºæœå™¨è·¯ç”±é…ç½®)"></a>3. app.routes.server.ts (ä¼ºæœå™¨è·¯ç”±é…ç½®)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ServerRoute</span>, <span class="title class_">RenderMode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; routes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; routes &#125;; <span class="comment">// é‡æ–°åŒ¯å‡ºå…±ç”¨è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">serverRoutes</span>: <span class="title class_">ServerRoute</span>[] = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Prerender</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;dashboard/**&#x27;</span>, <span class="attr">renderMode</span>: <span class="title class_">RenderMode</span>.<span class="property">Dynamic</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="4-app-config-server-ts-ä¼ºæœå™¨é…ç½®"><a href="#4-app-config-server-ts-ä¼ºæœå™¨é…ç½®" class="headerlink" title="4. app.config.server.ts (ä¼ºæœå™¨é…ç½®)"></a>4. app.config.server.ts (ä¼ºæœå™¨é…ç½®)</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mergeApplicationConfig, <span class="title class_">ApplicationConfig</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRendering &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provideServerRouting &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/ssr&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.config&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; serverRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.routes.server&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">serverConfig</span>: <span class="title class_">ApplicationConfig</span> = &#123;</span><br><span class="line">  <span class="attr">providers</span>: [</span><br><span class="line">    <span class="title function_">provideServerRendering</span>(),</span><br><span class="line">    <span class="title function_">provideServerRouting</span>(serverRoutes)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = <span class="title function_">mergeApplicationConfig</span>(appConfig, serverConfig);</span><br></pre></td></tr></table></figure>

<h2 id="é—œéµæŠ€è¡“å•ç­”"><a href="#é—œéµæŠ€è¡“å•ç­”" class="headerlink" title="é—œéµæŠ€è¡“å•ç­”"></a>é—œéµæŠ€è¡“å•ç­”</h2><h3 id="Q-ç‚ºä»€éº¼è¦åˆ†é›¢-server-å’Œé-server-æª”æ¡ˆï¼Ÿ"><a href="#Q-ç‚ºä»€éº¼è¦åˆ†é›¢-server-å’Œé-server-æª”æ¡ˆï¼Ÿ" class="headerlink" title="Q: ç‚ºä»€éº¼è¦åˆ†é›¢ .server å’Œé .server æª”æ¡ˆï¼Ÿ"></a>Q: ç‚ºä»€éº¼è¦åˆ†é›¢ <code>.server</code> å’Œé <code>.server</code> æª”æ¡ˆï¼Ÿ</h3><p><strong>A</strong>: é—œæ³¨é»åˆ†é›¢ï¼Œè®“å®¢æˆ¶ç«¯å’Œä¼ºæœå™¨ç«¯å„è‡ªè™•ç†å°ˆå±¬çš„é…ç½®ï¼Œé¿å…æ··æ·†ä¸”æ–¹ä¾¿ç¶­è­·ã€‚</p>
<h3 id="Q-mergeApplicationConfig-å¦‚ä½•é‹ä½œï¼Ÿ"><a href="#Q-mergeApplicationConfig-å¦‚ä½•é‹ä½œï¼Ÿ" class="headerlink" title="Q: mergeApplicationConfig å¦‚ä½•é‹ä½œï¼Ÿ"></a>Q: <code>mergeApplicationConfig</code> å¦‚ä½•é‹ä½œï¼Ÿ</h3><p><strong>A</strong>: å®ƒæœƒåˆä½µå…©å€‹ ApplicationConfigï¼Œä¿ç•™æ‰€æœ‰ providersï¼Œè‹¥æœ‰è¡çªå‰‡ä¼ºæœå™¨é…ç½®å„ªå…ˆã€‚</p>
<h3 id="Q-å»¶é²è¼‰å…¥æœƒå½±éŸ¿-SSR-å—ï¼Ÿ"><a href="#Q-å»¶é²è¼‰å…¥æœƒå½±éŸ¿-SSR-å—ï¼Ÿ" class="headerlink" title="Q: å»¶é²è¼‰å…¥æœƒå½±éŸ¿ SSR å—ï¼Ÿ"></a>Q: å»¶é²è¼‰å…¥æœƒå½±éŸ¿ SSR å—ï¼Ÿ</h3><p><strong>A</strong>: ä¸æœƒã€‚Angular åœ¨å»ºæ§‹æ™‚æœƒåˆ†ææ‰€æœ‰è·¯ç”±é€²è¡Œé æ¸²æŸ“ï¼ŒåŸ·è¡Œæ™‚ä»æ­£å¸¸å»¶é²è¼‰å…¥ã€‚</p>
<h3 id="Q-è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ"><a href="#Q-è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ" class="headerlink" title="Q: è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ"></a>Q: è·¯ç”±å®ˆè¡›æœƒå½±éŸ¿é æ¸²æŸ“å—ï¼Ÿ</h3><p><strong>A</strong>: æœƒã€‚è‹¥å®ˆè¡›åœ¨é æ¸²æŸ“æ™‚é˜»æ“‹è·¯ç”±ï¼Œè©²é é¢å¯èƒ½ç”¢ç”Ÿç©ºç™½å…§å®¹ã€‚å»ºè­°è¨­è¨ˆ SSR å‹å–„çš„å®ˆè¡›ã€‚</p>
<h3 id="Q-ä½•æ™‚æ‡‰è©²é¸æ“‡-SPA-è€Œé-SSRï¼Ÿ"><a href="#Q-ä½•æ™‚æ‡‰è©²é¸æ“‡-SPA-è€Œé-SSRï¼Ÿ" class="headerlink" title="Q: ä½•æ™‚æ‡‰è©²é¸æ“‡ SPA è€Œé SSRï¼Ÿ"></a>Q: ä½•æ™‚æ‡‰è©²é¸æ“‡ SPA è€Œé SSRï¼Ÿ</h3><p><strong>A</strong>: é«˜äº’å‹•æ€§ã€éœ€è¦ç™»å…¥ã€å…§éƒ¨ç³»çµ±ã€ä¸éœ€ SEO çš„å ´æ™¯é©åˆ SPAã€‚</p>
<h2 id="ç¸½çµèˆ‡å±•æœ›"><a href="#ç¸½çµèˆ‡å±•æœ›" class="headerlink" title="ç¸½çµèˆ‡å±•æœ›"></a>ç¸½çµèˆ‡å±•æœ›</h2><p>Angular 19 çš„ SSR&#x2F;Prerender æ¶æ§‹æä¾›äº†å¼·å¤§ä¸”éˆæ´»çš„æ¸²æŸ“ç­–ç•¥ï¼Œé—œéµè¦é»ï¼š</p>
<ol>
<li><strong>æ¶æ§‹è¨­è¨ˆ</strong>: å–„ç”¨ <code>.server</code> æª”æ¡ˆåˆ†é›¢é—œæ³¨é»ï¼Œ<code>mergeApplicationConfig</code> æ•´åˆé…ç½®</li>
<li><strong>è·¯ç”±è¦åŠƒ</strong>: æ ¹æ“šé é¢ç‰¹æ€§é¸æ“‡é©ç•¶çš„æ¸²æŸ“æ¨¡å¼ï¼Œå…¬é–‹é é¢ç”¨é æ¸²æŸ“ï¼Œç§æœ‰é é¢ç”¨å‹•æ…‹æ¸²æŸ“</li>
<li><strong>æ•ˆèƒ½å„ªåŒ–</strong>: å»¶é²è¼‰å…¥èˆ‡ SSR å®Œå…¨å…¼å®¹ï¼Œæ­é…ç¨‹å¼ç¢¼åˆ†å‰²æœ€ä½³åŒ–è¼‰å…¥</li>
<li><strong>å®‰å…¨è€ƒé‡</strong>: å‰ç«¯å®ˆè¡›åƒ…ç‚º UX å„ªåŒ–ï¼ŒçœŸæ­£çš„å®‰å…¨é˜²ç·šåœ¨å¾Œç«¯ API é©—è­‰</li>
<li><strong>ç›£æ§ç¶­è­·</strong>: æŒçºŒç›£æ§ FCPã€LCPã€CLS ç­‰æŒ‡æ¨™ï¼Œèª¿æ•´æ¸²æŸ“ç­–ç•¥</li>
</ol>
<p><strong>æœ€ä½³å¯¦è¸</strong>: é€éæ­£ç¢ºçš„é…ç½®ç­–ç•¥ï¼Œå¯¦ç¾ã€Œå…¬é–‹é é¢å¿«é€Ÿè¼‰å…¥ + ç§æœ‰é é¢æµæš¢äº’å‹•ã€çš„æœ€ä½³ä½¿ç”¨è€…é«”é©—ã€‚</p>
<h2 id="ğŸ’¡-æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ æ¸²æŸ“ç­–ç•¥æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ–°é é¢éœ€æ±‚] --&gt; B&#123;éœ€è¦ SEO å—?&#125;</span><br><span class="line">    B --&gt;|æ˜¯| C&#123;å…§å®¹æ˜¯å¦éœæ…‹?&#125;</span><br><span class="line">    B --&gt;|å¦| D&#123;éœ€è¦èªè­‰å—?&#125;</span><br><span class="line">    </span><br><span class="line">    C --&gt;|æ˜¯| E[Prerender æ¨¡å¼]</span><br><span class="line">    C --&gt;|å¦| F&#123;æ›´æ–°é »ç‡?&#125;</span><br><span class="line">    </span><br><span class="line">    D --&gt;|æ˜¯| G[SPA æ¨¡å¼]</span><br><span class="line">    D --&gt;|å¦| H[Dynamic æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    F --&gt;|ä½| E</span><br><span class="line">    F --&gt;|é«˜| I[Dynamic æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    E --&gt; J[å»ºæ§‹æ™‚ç”Ÿæˆ HTML]</span><br><span class="line">    I --&gt; K[åŸ·è¡Œæ™‚ç”Ÿæˆ HTML]</span><br><span class="line">    H --&gt; K</span><br><span class="line">    G --&gt; L[ç´”å®¢æˆ¶ç«¯æ¸²æŸ“]</span><br><span class="line">    </span><br><span class="line">    J --&gt; M[æœ€ä½³ SEO + è¼‰å…¥é€Ÿåº¦]</span><br><span class="line">    K --&gt; N[è‰¯å¥½ SEO + å‹•æ…‹å…§å®¹]</span><br><span class="line">    L --&gt; O[æœ€ä½³äº’å‹•é«”é©—]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="1-æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§"><a href="#1-æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§" class="headerlink" title="1. æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§"></a>1. <strong>æ¶æ§‹è¨­è¨ˆçš„æ™ºæ…§</strong></h3><p>Angular 19 çš„é›™è»Œè¨­è¨ˆæä¾›äº†ï¼š</p>
<ul>
<li><strong>é—œæ³¨é»åˆ†é›¢</strong>ï¼šå®¢æˆ¶ç«¯èˆ‡ä¼ºæœå™¨ç«¯å„å¸å…¶è·</li>
<li><strong>é…ç½®åˆä½µ</strong>ï¼š<code>mergeApplicationConfig</code> çµ±ä¸€ç®¡ç†</li>
<li><strong>å½ˆæ€§é¸æ“‡</strong>ï¼šæ ¹æ“šé é¢ç‰¹æ€§é¸æ“‡æœ€é©åˆçš„æ¸²æŸ“æ¨¡å¼</li>
</ul>
<h3 id="2-æ•ˆèƒ½å„ªåŒ–çš„é—œéµ"><a href="#2-æ•ˆèƒ½å„ªåŒ–çš„é—œéµ" class="headerlink" title="2. æ•ˆèƒ½å„ªåŒ–çš„é—œéµ"></a>2. <strong>æ•ˆèƒ½å„ªåŒ–çš„é—œéµ</strong></h3><ul>
<li><strong>é¸æ“‡æ€§é æ¸²æŸ“</strong>ï¼šä¸æ˜¯æ‰€æœ‰é é¢éƒ½éœ€è¦ SSR</li>
<li><strong>ç¨‹å¼ç¢¼åˆ†å‰²</strong>ï¼šå»¶é²è¼‰å…¥èˆ‡ SSR å®Œå…¨å…¼å®¹</li>
<li><strong>å¿«å–ç­–ç•¥</strong>ï¼šéœæ…‹è³‡æºé•·æœŸå¿«å–ï¼ŒHTML çŸ­æœŸå¿«å–</li>
</ul>
<h3 id="3-å®‰å…¨æ€§çš„å¹³è¡¡"><a href="#3-å®‰å…¨æ€§çš„å¹³è¡¡" class="headerlink" title="3. å®‰å…¨æ€§çš„å¹³è¡¡"></a>3. <strong>å®‰å…¨æ€§çš„å¹³è¡¡</strong></h3><ul>
<li><strong>å‰ç«¯é˜²è­·</strong>ï¼šåƒ…ç‚º UX å„ªåŒ–ï¼Œä¸èƒ½ä¾è³´å®ƒä¿è­·æ•æ„Ÿè³‡æ–™</li>
<li><strong>å¾Œç«¯é˜²ç·š</strong>ï¼šçœŸæ­£çš„å®‰å…¨æª¢æŸ¥å¿…é ˆåœ¨ API å±¤åŸ·è¡Œ</li>
<li><strong>SSR å‹å–„è¨­è¨ˆ</strong>ï¼šå®ˆè¡›æ‡‰è©²è€ƒæ…®ä¼ºæœå™¨ç«¯æ¸²æŸ“ç’°å¢ƒ</li>
</ul>
<h2 id="ğŸš€-é€²éšå¯¦è¸å»ºè­°"><a href="#ğŸš€-é€²éšå¯¦è¸å»ºè­°" class="headerlink" title="ğŸš€ é€²éšå¯¦è¸å»ºè­°"></a>ğŸš€ é€²éšå¯¦è¸å»ºè­°</h2><h3 id="å¤§å‹å°ˆæ¡ˆç­–ç•¥"><a href="#å¤§å‹å°ˆæ¡ˆç­–ç•¥" class="headerlink" title="å¤§å‹å°ˆæ¡ˆç­–ç•¥"></a>å¤§å‹å°ˆæ¡ˆç­–ç•¥</h3><ul>
<li><strong>å¾®å‰ç«¯æ•´åˆ</strong>ï¼šä¸åŒæ¨¡çµ„å¯æ¡ç”¨ä¸åŒæ¸²æŸ“ç­–ç•¥</li>
<li><strong>CDN å„ªåŒ–</strong>ï¼šé æ¸²æŸ“é é¢éƒ¨ç½²åˆ°å…¨çƒ CDN</li>
<li><strong>A&#x2F;B æ¸¬è©¦</strong>ï¼šæ¯”è¼ƒä¸åŒæ¸²æŸ“æ¨¡å¼çš„æ•ˆæœ</li>
</ul>
<h3 id="ç›£æ§èˆ‡ç¶­è­·"><a href="#ç›£æ§èˆ‡ç¶­è­·" class="headerlink" title="ç›£æ§èˆ‡ç¶­è­·"></a>ç›£æ§èˆ‡ç¶­è­·</h3><ul>
<li><strong>Core Web Vitals</strong>ï¼šæŒçºŒç›£æ§ FCPã€LCPã€CLS æŒ‡æ¨™</li>
<li><strong>å»ºæ§‹æ™‚é–“</strong>ï¼šé æ¸²æŸ“é é¢æ•¸é‡èˆ‡å»ºæ§‹æ™‚é–“çš„å¹³è¡¡</li>
<li><strong>ä¼ºæœå™¨è² è¼‰</strong>ï¼šå‹•æ…‹æ¸²æŸ“çš„ä¼ºæœå™¨è³‡æºæ¶ˆè€—</li>
</ul>
<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="å®˜æ–¹æ–‡ä»¶"><a href="#å®˜æ–¹æ–‡ä»¶" class="headerlink" title="å®˜æ–¹æ–‡ä»¶"></a>å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><a target="_blank" rel="noopener" href="https://angular.dev/guide/ssr">Angular SSR å®˜æ–¹æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/angular/universal">Angular Universal æ–‡ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.angular.io/">Angular 19 æ–°åŠŸèƒ½</a></li>
</ul>
<h3 id="å¯¦ç”¨å·¥å…·"><a href="#å¯¦ç”¨å·¥å…·" class="headerlink" title="å¯¦ç”¨å·¥å…·"></a>å¯¦ç”¨å·¥å…·</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@angular-devkit/build-angular">Angular DevKit Build</a></li>
<li><a target="_blank" rel="noopener" href="https://angular.io/cli">Angular CLI</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/GoogleChrome/lighthouse-ci">Lighthouse CI</a></li>
</ul>
<h3 id="æ•ˆèƒ½æ¸¬è©¦"><a href="#æ•ˆèƒ½æ¸¬è©¦" class="headerlink" title="æ•ˆèƒ½æ¸¬è©¦"></a>æ•ˆèƒ½æ¸¬è©¦</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.webpagetest.org/">Web Page Test</a></li>
<li><a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">PageSpeed Insights</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/devtools/">Chrome DevTools</a></li>
</ul>
<h3 id="ç›¸é—œç¯„ä¾‹"><a href="#ç›¸é—œç¯„ä¾‹" class="headerlink" title="ç›¸é—œç¯„ä¾‹"></a>ç›¸é—œç¯„ä¾‹</h3><ul>
<li>Angular SSR å®˜æ–¹ç¯„ä¾‹å°ˆæ¡ˆ</li>
<li>Enterprise Angular æ¶æ§‹æŒ‡å—</li>
<li>PWA + SSR æ•´åˆæ¡ˆä¾‹</li>
</ul>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šAngular æ¶æ§‹åœ˜éšŠ<br><strong>æ›´æ–°æ—¥æœŸ</strong>ï¼š2025å¹´6æœˆ29æ—¥<br><strong>ç‰ˆæœ¬</strong>ï¼šv2.1<br><strong>é©ç”¨ç¯„åœ</strong>ï¼šAngular 19+ SSR&#x2F;Prerender å°ˆæ¡ˆ</p>
</blockquote>
<hr>
<p><em>æ­¤æ–‡ä»¶çµåˆäº†æŠ€è¡“åŸç†ã€å¯¦å‹™é…ç½®å’Œæ•ˆèƒ½è€ƒé‡ï¼Œæä¾›å®Œæ•´çš„ Angular SSR å¯¦ä½œæŒ‡å—ã€‚</em> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/angular-ssr-technical-analysis-guide/" data-id="cmg51yfqg0005anmz2lva7x20" data-title="Angular 19 SSR/Prerender æ·±åº¦æŠ€è¡“åˆ†æèˆ‡å¯¦æˆ°æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hydration/" rel="tag">Hydration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Performance-Optimization/" rel="tag">Performance Optimization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prerender/" rel="tag">Prerender</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RenderMode/" rel="tag">RenderMode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Route-Guards/" rel="tag">Route Guards</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Server-Side-Rendering/" rel="tag">Server-Side Rendering</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-vue-frontend-architecture-patterns-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/vue-frontend-architecture-patterns-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T03:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/vue-frontend-architecture-patterns-guide/">Vue.js å‰ç«¯æ¶æ§‹æ¨¡å¼æ¯”è¼ƒèˆ‡é¸æ“‡æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>å…¨åŸŸå±¬æ€§æ¨¡å¼</strong>ï¼šå¿«é€Ÿé–‹ç™¼ï¼Œé©åˆå°å‹å°ˆæ¡ˆæˆ–å³å°‡ EOS çš„ç³»çµ±</li>
<li><strong>æœå‹™æ³¨å…¥æ¨¡å¼</strong>ï¼šç´”æ¥­å‹™é‚è¼¯è™•ç†ï¼Œæ˜“æ–¼æ¸¬è©¦ï¼Œé‡ç”¨æ€§é«˜</li>
<li><strong>Composables æ¨¡å¼</strong>ï¼šéŸ¿æ‡‰å¼é‚è¼¯å¾©ç”¨ï¼ŒVue 3 åŸç”Ÿæ”¯æ´</li>
<li><strong>Store æ¨¡å¼</strong>ï¼šå…¨åŸŸç‹€æ…‹ç®¡ç†ï¼Œé©åˆè¤‡é›œæ‡‰ç”¨ç¨‹å¼ç‹€æ…‹</li>
<li><strong>æ··åˆç­–ç•¥</strong>ï¼šä¾æ“šåŠŸèƒ½ç‰¹æ€§é¸æ“‡æœ€é©åˆçš„æ¶æ§‹æ¨¡å¼</li>
</ol>
<h2 id="ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬æ–‡è¨˜éŒ„äº†åœ¨ Vue.js å°ˆæ¡ˆä¸­ä¸åŒæ¶æ§‹æ¨¡å¼çš„æ¯”è¼ƒåˆ†æï¼Œç‰¹åˆ¥é‡å°å…¬ç”¨ç¨‹å¼ç®¡ç†ã€ç‹€æ…‹å…±äº«å’Œæ¥­å‹™é‚è¼¯çµ„ç¹”æ–¹å¼é€²è¡Œæ·±å…¥æ¢è¨ï¼š</p>
<ul>
<li>ğŸ¯ <strong>æ¶æ§‹æ¨¡å¼æ¯”è¼ƒ</strong>ï¼šå››ç¨®ä¸»è¦å‰ç«¯æ¶æ§‹æ¨¡å¼çš„å„ªç¼ºé»åˆ†æ</li>
<li>ğŸ”§ <strong>å¯¦ä½œç­–ç•¥</strong>ï¼šæ¯ç¨®æ¨¡å¼çš„å…·é«”å¯¦ä½œæ–¹å¼å’Œç¨‹å¼ç¢¼ç¯„ä¾‹</li>
<li>ğŸ“Š <strong>é¸æ“‡æŒ‡å—</strong>ï¼šåŸºæ–¼å°ˆæ¡ˆç‰¹æ€§çš„æ¶æ§‹é¸æ“‡å»ºè­°</li>
<li>ğŸš€ <strong>æœ€ä½³å¯¦è¸</strong>ï¼šæ··åˆä½¿ç”¨ç­–ç•¥å’Œé‡æ§‹å»ºè­°</li>
<li>âš¡ <strong>æ•ˆèƒ½è€ƒé‡</strong>ï¼šä¸åŒæ¨¡å¼å° Bundle å¤§å°å’Œæ•ˆèƒ½çš„å½±éŸ¿</li>
</ul>
<h2 id="ğŸ—ï¸-æ¶æ§‹æ¨¡å¼æŠ€è¡“æ¯”è¼ƒ"><a href="#ğŸ—ï¸-æ¶æ§‹æ¨¡å¼æŠ€è¡“æ¯”è¼ƒ" class="headerlink" title="ğŸ—ï¸ æ¶æ§‹æ¨¡å¼æŠ€è¡“æ¯”è¼ƒ"></a>ğŸ—ï¸ æ¶æ§‹æ¨¡å¼æŠ€è¡“æ¯”è¼ƒ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Vue.js å‰ç«¯æ¶æ§‹] --&gt; B[å…¨åŸŸå±¬æ€§æ³¨å…¥]</span><br><span class="line">    A --&gt; C[æœå‹™æ³¨å…¥æ¨¡å¼]</span><br><span class="line">    A --&gt; D[Composables æ¨¡å¼]</span><br><span class="line">    A --&gt; E[Store æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[å¿«é€Ÿé–‹ç™¼]</span><br><span class="line">    B --&gt; B2[çµ±ä¸€ç®¡ç†]</span><br><span class="line">    B --&gt; B3[Bundle è¼ƒå¤§]</span><br><span class="line">    </span><br><span class="line">    C --&gt; C1[ç´”æ¥­å‹™é‚è¼¯]</span><br><span class="line">    C --&gt; C2[æ˜“æ–¼æ¸¬è©¦]</span><br><span class="line">    C --&gt; C3[å‹åˆ¥å®‰å…¨]</span><br><span class="line">    </span><br><span class="line">    D --&gt; D1[éŸ¿æ‡‰å¼ç‹€æ…‹]</span><br><span class="line">    D --&gt; D2[é‚è¼¯å¾©ç”¨]</span><br><span class="line">    D --&gt; D3[Vue ç‰¹å®š]</span><br><span class="line">    </span><br><span class="line">    E --&gt; E1[å…¨åŸŸç‹€æ…‹]</span><br><span class="line">    E --&gt; E2[DevTools æ”¯æ´]</span><br><span class="line">    E --&gt; E3[çµæ§‹åŒ–ç®¡ç†]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“-æ–‡ä»¶æ¦‚è¿°"><a href="#ğŸ“-æ–‡ä»¶æ¦‚è¿°" class="headerlink" title="ğŸ“ æ–‡ä»¶æ¦‚è¿°"></a>ğŸ“ æ–‡ä»¶æ¦‚è¿°</h2><p>æœ¬æ–‡è¨˜éŒ„äº†åœ¨ Vue.js å°ˆæ¡ˆä¸­ä¸åŒæ¶æ§‹æ¨¡å¼çš„æ¯”è¼ƒåˆ†æï¼Œç‰¹åˆ¥é‡å°å…¬ç”¨ç¨‹å¼ç®¡ç†ã€ç‹€æ…‹å…±äº«å’Œæ¥­å‹™é‚è¼¯çµ„ç¹”æ–¹å¼é€²è¡Œæ·±å…¥æ¢è¨ã€‚</p>
<h2 id="ğŸ—ï¸-æ¶æ§‹æ¨¡å¼æ¯”è¼ƒ"><a href="#ğŸ—ï¸-æ¶æ§‹æ¨¡å¼æ¯”è¼ƒ" class="headerlink" title="ğŸ—ï¸ æ¶æ§‹æ¨¡å¼æ¯”è¼ƒ"></a>ğŸ—ï¸ æ¶æ§‹æ¨¡å¼æ¯”è¼ƒ</h2><h3 id="1-å…¨åŸŸå±¬æ€§æ³¨å…¥æ¨¡å¼-Global-Properties-Injection"><a href="#1-å…¨åŸŸå±¬æ€§æ³¨å…¥æ¨¡å¼-Global-Properties-Injection" class="headerlink" title="1. å…¨åŸŸå±¬æ€§æ³¨å…¥æ¨¡å¼ (Global Properties Injection)"></a>1. å…¨åŸŸå±¬æ€§æ³¨å…¥æ¨¡å¼ (Global Properties Injection)</h3><h4 id="ğŸ’¡-æ¦‚å¿µ"><a href="#ğŸ’¡-æ¦‚å¿µ" class="headerlink" title="ğŸ’¡ æ¦‚å¿µ"></a>ğŸ’¡ æ¦‚å¿µ</h4><p>å°‡æ‰€æœ‰å·¥å…·å‡½å¼å’Œæœå‹™æ›è¼‰åˆ° Vue æ‡‰ç”¨ç¨‹å¼çš„å…¨åŸŸå±¬æ€§ä¸Šï¼Œè®“æ‰€æœ‰çµ„ä»¶éƒ½èƒ½ç›´æ¥å­˜å–ã€‚</p>
<h4 id="ğŸ”§-å¯¦ä½œæ–¹å¼"><a href="#ğŸ”§-å¯¦ä½œæ–¹å¼" class="headerlink" title="ğŸ”§ å¯¦ä½œæ–¹å¼"></a>ğŸ”§ å¯¦ä½œæ–¹å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Utils</span> <span class="keyword">from</span> <span class="string">&#x27;@/common/utils.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ChartOptions</span> <span class="keyword">from</span> <span class="string">&#x27;@/common/chart_option.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;./api&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$utils</span> = <span class="title class_">Utils</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$api</span> = api;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$chartOption</span> = <span class="title class_">ChartOptions</span>;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$lodash</span> = lodash;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨çµ„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> curInstance = <span class="title function_">getCurrentInstance</span>();</span><br><span class="line"><span class="keyword">const</span> api = curInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$api</span>;</span><br><span class="line"><span class="keyword">const</span> utils = curInstance.<span class="property">appContext</span>.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$utils</span>;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…-å„ªé»"><a href="#âœ…-å„ªé»" class="headerlink" title="âœ… å„ªé»"></a>âœ… å„ªé»</h4><ul>
<li><strong>å¿«é€Ÿé–‹ç™¼</strong>ï¼šä¸éœ€è¦åè¦†åŒ¯å…¥ï¼Œç›´æ¥ä½¿ç”¨</li>
<li><strong>çµ±ä¸€ç®¡ç†</strong>ï¼šæ‰€æœ‰å…¬ç”¨ç¨‹å¼éƒ½åœ¨ main.js ä¸­è¨»å†Š</li>
<li><strong>åœ˜éšŠå”ä½œ</strong>ï¼šæ–°æˆå“¡å®¹æ˜“ä¸Šæ‰‹ï¼Œä½¿ç”¨æ–¹å¼ä¸€è‡´</li>
<li><strong>å‘å¾Œç›¸å®¹</strong>ï¼šé©åˆæ—¢æœ‰å°ˆæ¡ˆçš„æ¼¸é€²å¼å‡ç´š</li>
</ul>
<h4 id="âŒ-ç¼ºé»"><a href="#âŒ-ç¼ºé»" class="headerlink" title="âŒ ç¼ºé»"></a>âŒ ç¼ºé»</h4><ul>
<li><strong>Bundle è‚¥å¤§</strong>ï¼šæ‰€æœ‰å·¥å…·éƒ½æœƒè¢«æ‰“åŒ…ï¼Œå³ä½¿æœªä½¿ç”¨</li>
<li><strong>ä¾è³´ä¸æ˜ç¢º</strong>ï¼šé›£ä»¥è¿½è¹¤çµ„ä»¶çœŸæ­£ä½¿ç”¨çš„ä¾è³´</li>
<li><strong>æ¸¬è©¦å›°é›£</strong>ï¼šå…¨åŸŸä¾è³´è¼ƒé›£é€²è¡Œå–®å…ƒæ¸¬è©¦</li>
<li><strong>å‹åˆ¥æ¨æ–·å¼±</strong>ï¼šTypeScript æ”¯æ´æœ‰é™</li>
</ul>
<h4 id="ğŸ¯-é©ç”¨å ´æ™¯"><a href="#ğŸ¯-é©ç”¨å ´æ™¯" class="headerlink" title="ğŸ¯ é©ç”¨å ´æ™¯"></a>ğŸ¯ é©ç”¨å ´æ™¯</h4><ul>
<li><strong>å³å°‡ EOS çš„å°ˆæ¡ˆ</strong>ï¼šä¸é©åˆå¤§è¦æ¨¡é‡æ§‹</li>
<li><strong>å¿«é€ŸåŸå‹é–‹ç™¼</strong>ï¼šéœ€è¦å¿«é€Ÿé©—è­‰åŠŸèƒ½</li>
<li><strong>å°å‹å°ˆæ¡ˆ</strong>ï¼šåœ˜éšŠè¦æ¨¡å°ï¼Œè¤‡é›œåº¦ä½</li>
</ul>
<hr>
<h3 id="2-æœå‹™æ³¨å…¥æ¨¡å¼-Service-Injection"><a href="#2-æœå‹™æ³¨å…¥æ¨¡å¼-Service-Injection" class="headerlink" title="2. æœå‹™æ³¨å…¥æ¨¡å¼ (Service Injection)"></a>2. æœå‹™æ³¨å…¥æ¨¡å¼ (Service Injection)</h3><h4 id="ğŸ’¡-æ¦‚å¿µ-1"><a href="#ğŸ’¡-æ¦‚å¿µ-1" class="headerlink" title="ğŸ’¡ æ¦‚å¿µ"></a>ğŸ’¡ æ¦‚å¿µ</h4><p>å°‡æ¥­å‹™é‚è¼¯å°è£æˆç¨ç«‹çš„æœå‹™é¡åˆ¥ï¼ŒæŒ‰éœ€åŒ¯å…¥ä½¿ç”¨ï¼Œå°ˆæ³¨æ–¼ç´”æ¥­å‹™é‚è¼¯è™•ç†ã€‚</p>
<h4 id="ğŸ”§-å¯¦ä½œæ–¹å¼-1"><a href="#ğŸ”§-å¯¦ä½œæ–¹å¼-1" class="headerlink" title="ğŸ”§ å¯¦ä½œæ–¹å¼"></a>ğŸ”§ å¯¦ä½œæ–¹å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// services/ExcelService.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExcelService</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">exportExcel</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            data = [],</span><br><span class="line">            headers = [],</span><br><span class="line">            filename = <span class="string">&#x27;export&#x27;</span>,</span><br><span class="line">            sheetName = <span class="string">&#x27;Sheet1&#x27;</span>,</span><br><span class="line">            style = &#123;&#125;,</span><br><span class="line">            includeTimestamp = <span class="literal">true</span></span><br><span class="line">        &#125; = options;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> worksheet = <span class="variable language_">this</span>.<span class="title function_">_createWorksheet</span>(data, headers);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_applyStyle</span>(worksheet, style);</span><br><span class="line">            <span class="keyword">const</span> buffer = <span class="variable language_">this</span>.<span class="title function_">_generateFile</span>(worksheet, sheetName);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">_downloadFile</span>(buffer, filename, includeTimestamp);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">success</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Excel åŒ¯å‡ºå¤±æ•—:&#x27;</span>, error);</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">success</span>: <span class="literal">false</span>, error &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_createWorksheet</span>(<span class="params">data, headers</span>) &#123; <span class="comment">/* å¯¦ä½œé‚è¼¯ */</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_applyStyle</span>(<span class="params">worksheet, style</span>) &#123; <span class="comment">/* å¯¦ä½œé‚è¼¯ */</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_generateFile</span>(<span class="params">worksheet, sheetName</span>) &#123; <span class="comment">/* å¯¦ä½œé‚è¼¯ */</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">_downloadFile</span>(<span class="params">buffer, filename, includeTimestamp</span>) &#123; <span class="comment">/* å¯¦ä½œé‚è¼¯ */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ExcelService</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨çµ„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ExcelService</span> <span class="keyword">from</span> <span class="string">&#x27;@/services/ExcelService.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">exportData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title class_">ExcelService</span>.<span class="title function_">exportExcel</span>(&#123;</span><br><span class="line">        <span class="attr">data</span>: tableData.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">headers</span>: columnHeaders,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;è¨­å‚™æ¸…å–®&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…-å„ªé»-1"><a href="#âœ…-å„ªé»-1" class="headerlink" title="âœ… å„ªé»"></a>âœ… å„ªé»</h4><ul>
<li><strong>æ˜“æ–¼æ¸¬è©¦</strong>ï¼šç´”æ¥­å‹™é‚è¼¯ï¼Œæ˜“æ–¼å–®å…ƒæ¸¬è©¦</li>
<li><strong>é‡ç”¨æ€§é«˜</strong>ï¼šå¯åœ¨ä»»ä½•ç’°å¢ƒä½¿ç”¨ï¼Œä¸é™æ–¼ Vue</li>
<li><strong>å‹åˆ¥å®‰å…¨</strong>ï¼šå®Œæ•´çš„ TypeScript æ”¯æ´</li>
<li><strong>æŒ‰éœ€è¼‰å…¥</strong>ï¼šåªè¼‰å…¥çœŸæ­£éœ€è¦çš„åŠŸèƒ½</li>
<li><strong>ä¾è³´æ˜ç¢º</strong>ï¼šæ¸…æ¥šçŸ¥é“çµ„ä»¶ä½¿ç”¨å“ªäº›æœå‹™</li>
</ul>
<h4 id="âŒ-ç¼ºé»-1"><a href="#âŒ-ç¼ºé»-1" class="headerlink" title="âŒ ç¼ºé»"></a>âŒ ç¼ºé»</h4><ul>
<li><strong>å­¸ç¿’æˆæœ¬</strong>ï¼šéœ€è¦ç†è§£æœå‹™æ¨¡å¼çš„æ¦‚å¿µ</li>
<li><strong>åˆæœŸæŠ•å…¥</strong>ï¼šéœ€è¦è¨­è¨ˆæœå‹™ä»‹é¢å’Œæ¶æ§‹</li>
<li><strong>ä¾è³´æ³¨å…¥</strong>ï¼šéœ€è¦æ‰‹å‹•ç®¡ç†ä¾è³´é—œä¿‚</li>
</ul>
<h4 id="ğŸ¯-é©ç”¨å ´æ™¯-1"><a href="#ğŸ¯-é©ç”¨å ´æ™¯-1" class="headerlink" title="ğŸ¯ é©ç”¨å ´æ™¯"></a>ğŸ¯ é©ç”¨å ´æ™¯</h4><ul>
<li><strong>ç´”æ¥­å‹™é‚è¼¯</strong>ï¼šå¦‚è³‡æ–™è™•ç†ã€æª”æ¡ˆåŒ¯å‡ºã€API å‘¼å«</li>
<li><strong>éœ€è¦æ¸¬è©¦</strong>ï¼šé‡è¦çš„æ¥­å‹™åŠŸèƒ½éœ€è¦å®Œæ•´æ¸¬è©¦</li>
<li><strong>è·¨å¹³å°ä½¿ç”¨</strong>ï¼šé‚è¼¯å¯èƒ½åœ¨ä¸åŒç’°å¢ƒä¸­é‡è¤‡ä½¿ç”¨</li>
</ul>
<hr>
<h3 id="3-Composables-æ¨¡å¼-Vue-3-Composition-API"><a href="#3-Composables-æ¨¡å¼-Vue-3-Composition-API" class="headerlink" title="3. Composables æ¨¡å¼ (Vue 3 Composition API)"></a>3. Composables æ¨¡å¼ (Vue 3 Composition API)</h3><h4 id="ğŸ’¡-æ¦‚å¿µ-2"><a href="#ğŸ’¡-æ¦‚å¿µ-2" class="headerlink" title="ğŸ’¡ æ¦‚å¿µ"></a>ğŸ’¡ æ¦‚å¿µ</h4><p>ä½¿ç”¨ Vue 3 çš„ Composition API å»ºç«‹å¯é‡è¤‡ä½¿ç”¨çš„éŸ¿æ‡‰å¼é‚è¼¯ï¼Œå°ˆæ³¨æ–¼ç‹€æ…‹ç®¡ç†å’Œ Vue ç‰¹å®šåŠŸèƒ½ã€‚</p>
<h4 id="ğŸ”§-å¯¦ä½œæ–¹å¼-2"><a href="#ğŸ”§-å¯¦ä½œæ–¹å¼-2" class="headerlink" title="ğŸ”§ å¯¦ä½œæ–¹å¼"></a>ğŸ”§ å¯¦ä½œæ–¹å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useCounter.js</span></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>) <span class="comment">// æ¨¡çµ„ç´šåˆ¥å…±äº«ç‹€æ…‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">        count.<span class="property">value</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">        count.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        <span class="attr">count</span>: <span class="title function_">readonly</span>(count), </span><br><span class="line">        doubleCount, </span><br><span class="line">        increment, </span><br><span class="line">        reset </span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useApi.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useApi</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">const</span> error = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">url</span>) &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">        error.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">            data.<span class="property">value</span> = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            error.<span class="property">value</span> = e.<span class="property">message</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            loading.<span class="property">value</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; data, loading, error, fetchData &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨çµ„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> &#123; useCounter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/composables/useCounter&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useApi &#125; <span class="keyword">from</span> <span class="string">&#x27;@/composables/useApi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; count, increment &#125; = <span class="title function_">useCounter</span>();</span><br><span class="line">        <span class="keyword">const</span> &#123; data, loading, fetchData &#125; = <span class="title function_">useApi</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123; count, increment, data, loading, fetchData &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…-å„ªé»-2"><a href="#âœ…-å„ªé»-2" class="headerlink" title="âœ… å„ªé»"></a>âœ… å„ªé»</h4><ul>
<li><strong>éŸ¿æ‡‰å¼ç‹€æ…‹</strong>ï¼šè‡ªå‹•è¿½è¹¤ç‹€æ…‹è®ŠåŒ–ï¼Œç„¡éœ€æ‰‹å‹•æ›´æ–°</li>
<li><strong>ç”Ÿå‘½é€±æœŸæ•´åˆ</strong>ï¼šå¯ä»¥ä½¿ç”¨ Vue çš„ç”Ÿå‘½é€±æœŸé‰¤å­</li>
<li><strong>é‚è¼¯è¤‡ç”¨</strong>ï¼šåœ¨å¤šå€‹çµ„ä»¶é–“å…±äº«ç›¸åŒé‚è¼¯</li>
<li><strong>å‹åˆ¥æ¨æ–·</strong>ï¼šå„ªç§€çš„ TypeScript æ”¯æ´</li>
<li><strong>çµ„åˆèƒ½åŠ›</strong>ï¼šå¯ä»¥è¼•é¬†çµ„åˆå¤šå€‹ Composables</li>
</ul>
<h4 id="âŒ-ç¼ºé»-2"><a href="#âŒ-ç¼ºé»-2" class="headerlink" title="âŒ ç¼ºé»"></a>âŒ ç¼ºé»</h4><ul>
<li><strong>å­¸ç¿’æ›²ç·š</strong>ï¼šéœ€è¦ç†è§£ Composition API æ¦‚å¿µ</li>
<li><strong>Vue é™å®š</strong>ï¼šåªèƒ½åœ¨ Vue ç’°å¢ƒä¸­ä½¿ç”¨</li>
<li><strong>æ¸¬è©¦è¤‡é›œ</strong>ï¼šéœ€è¦ mock Vue å¯¦ä¾‹å’ŒéŸ¿æ‡‰å¼ç³»çµ±</li>
<li><strong>ç‹€æ…‹ç®¡ç†</strong>ï¼šè¤‡é›œç‹€æ…‹ç®¡ç†ä¸å¦‚å°ˆé–€çš„ Store</li>
</ul>
<h4 id="ğŸ¯-é©ç”¨å ´æ™¯-2"><a href="#ğŸ¯-é©ç”¨å ´æ™¯-2" class="headerlink" title="ğŸ¯ é©ç”¨å ´æ™¯"></a>ğŸ¯ é©ç”¨å ´æ™¯</h4><ul>
<li><strong>éŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†</strong>ï¼šéœ€è¦è¿½è¹¤ç‹€æ…‹è®ŠåŒ–çš„é‚è¼¯</li>
<li><strong>Vue ç‰¹å®šåŠŸèƒ½</strong>ï¼šä½¿ç”¨ Vue ç”Ÿå‘½é€±æœŸã€éŸ¿æ‡‰å¼ API</li>
<li><strong>çµ„ä»¶é–“é‚è¼¯å…±äº«</strong>ï¼šå¤šå€‹çµ„ä»¶éœ€è¦ç›¸åŒçš„éŸ¿æ‡‰å¼é‚è¼¯</li>
</ul>
<hr>
<h2 id="ğŸ›’-ç‹€æ…‹ç®¡ç†æ¯”è¼ƒï¼šStore-vs-Composables"><a href="#ğŸ›’-ç‹€æ…‹ç®¡ç†æ¯”è¼ƒï¼šStore-vs-Composables" class="headerlink" title="ğŸ›’ ç‹€æ…‹ç®¡ç†æ¯”è¼ƒï¼šStore vs Composables"></a>ğŸ›’ ç‹€æ…‹ç®¡ç†æ¯”è¼ƒï¼šStore vs Composables</h2><h3 id="Store-Pinia-Vuex-æ¨¡å¼"><a href="#Store-Pinia-Vuex-æ¨¡å¼" class="headerlink" title="Store (Pinia&#x2F;Vuex) æ¨¡å¼"></a>Store (Pinia&#x2F;Vuex) æ¨¡å¼</h3><h4 id="ğŸ”§-å¯¦ä½œæ–¹å¼-3"><a href="#ğŸ”§-å¯¦ä½œæ–¹å¼-3" class="headerlink" title="ğŸ”§ å¯¦ä½œæ–¹å¼"></a>ğŸ”§ å¯¦ä½œæ–¹å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/user.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> currentUser = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">ref</span>(<span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>));</span><br><span class="line">    <span class="keyword">const</span> permissions = <span class="title function_">ref</span>([]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">credentials</span>) &#123;</span><br><span class="line">        <span class="comment">// ç™»å…¥é‚è¼¯</span></span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> api.<span class="title function_">login</span>(credentials);</span><br><span class="line">        currentUser.<span class="property">value</span> = response.<span class="property">user</span>;</span><br><span class="line">        token.<span class="property">value</span> = response.<span class="property">token</span>;</span><br><span class="line">        <span class="variable language_">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>, response.<span class="property">token</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">        currentUser.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        token.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line">        permissions.<span class="property">value</span> = [];</span><br><span class="line">        <span class="variable language_">sessionStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;TOKEN&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123; currentUser, token, permissions, login, logout &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="ç‰¹é»"><a href="#ç‰¹é»" class="headerlink" title="ç‰¹é»"></a>ç‰¹é»</h4><ul>
<li><strong>å…¨åŸŸç‹€æ…‹ç®¡ç†</strong>ï¼šæ‡‰ç”¨ç¨‹å¼ç´šåˆ¥çš„ç‹€æ…‹</li>
<li><strong>DevTools æ”¯æ´</strong>ï¼šå®Œæ•´çš„é–‹ç™¼è€…å·¥å…·æ•´åˆ</li>
<li><strong>æŒä¹…åŒ–</strong>ï¼šæ˜“æ–¼æ•´åˆç‹€æ…‹æŒä¹…åŒ–</li>
<li><strong>çµæ§‹åŒ–</strong>ï¼šå¼·åˆ¶çµ±ä¸€çš„ç‹€æ…‹ç®¡ç†çµæ§‹</li>
</ul>
<h3 id="Composables-ç‹€æ…‹å…±äº«"><a href="#Composables-ç‹€æ…‹å…±äº«" class="headerlink" title="Composables ç‹€æ…‹å…±äº«"></a>Composables ç‹€æ…‹å…±äº«</h3><h4 id="ğŸ”§-å¯¦ä½œæ–¹å¼-4"><a href="#ğŸ”§-å¯¦ä½œæ–¹å¼-4" class="headerlink" title="ğŸ”§ å¯¦ä½œæ–¹å¼"></a>ğŸ”§ å¯¦ä½œæ–¹å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useGlobalNotifications.js</span></span><br><span class="line"><span class="keyword">const</span> notifications = <span class="title function_">ref</span>([]); <span class="comment">// æ¨¡çµ„ç´šåˆ¥ = å…¨åŸŸå…±äº«</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useGlobalNotifications</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> unreadCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> </span><br><span class="line">        notifications.<span class="property">value</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">n</span> =&gt;</span> !n.<span class="property">read</span>).<span class="property">length</span></span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">addNotification</span>(<span class="params">message</span>) &#123;</span><br><span class="line">        notifications.<span class="property">value</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">            message,</span><br><span class="line">            <span class="attr">read</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">timestamp</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">markAsRead</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> notification = notifications.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function"><span class="params">n</span> =&gt;</span> n.<span class="property">id</span> === id);</span><br><span class="line">        <span class="keyword">if</span> (notification) notification.<span class="property">read</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">notifications</span>: <span class="title function_">readonly</span>(notifications),</span><br><span class="line">        unreadCount,</span><br><span class="line">        addNotification,</span><br><span class="line">        markAsRead</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç‰¹é»-1"><a href="#ç‰¹é»-1" class="headerlink" title="ç‰¹é»"></a>ç‰¹é»</h4><ul>
<li><strong>éˆæ´»æ€§é«˜</strong>ï¼šå¯ä»¥é¸æ“‡å…¨åŸŸæˆ–å€åŸŸå…±äº«</li>
<li><strong>è¼•é‡ç´š</strong>ï¼šä¸éœ€è¦é¡å¤–çš„ç‹€æ…‹ç®¡ç†å‡½å¼åº«</li>
<li><strong>çµ„åˆèƒ½åŠ›</strong>ï¼šå¯ä»¥è¼•é¬†çµ„åˆå¤šå€‹ç‹€æ…‹é‚è¼¯</li>
</ul>
<hr>
<h2 id="ğŸ“Š-é¸æ“‡æŒ‡å—å°ç…§è¡¨"><a href="#ğŸ“Š-é¸æ“‡æŒ‡å—å°ç…§è¡¨" class="headerlink" title="ğŸ“Š é¸æ“‡æŒ‡å—å°ç…§è¡¨"></a>ğŸ“Š é¸æ“‡æŒ‡å—å°ç…§è¡¨</h2><table>
<thead>
<tr>
<th>åŠŸèƒ½é¡å‹</th>
<th>å…¨åŸŸå±¬æ€§æ¨¡å¼</th>
<th>æœå‹™æ¨¡å¼</th>
<th>Composables æ¨¡å¼</th>
<th>Store æ¨¡å¼</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç´”æ¥­å‹™é‚è¼¯</strong></td>
<td>â­â­â­</td>
<td>â­â­â­â­â­</td>
<td>â­â­</td>
<td>â­â­</td>
</tr>
<tr>
<td><strong>å·¥å…·å‡½å¼</strong></td>
<td>â­â­â­â­â­</td>
<td>â­â­â­â­</td>
<td>â­â­</td>
<td>â­</td>
</tr>
<tr>
<td><strong>éŸ¿æ‡‰å¼ç‹€æ…‹</strong></td>
<td>â­â­</td>
<td>â­</td>
<td>â­â­â­â­â­</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td><strong>å…¨åŸŸç‹€æ…‹</strong></td>
<td>â­â­â­</td>
<td>â­</td>
<td>â­â­â­</td>
<td>â­â­â­â­â­</td>
</tr>
<tr>
<td><strong>æ¸¬è©¦èƒ½åŠ›</strong></td>
<td>â­â­</td>
<td>â­â­â­â­â­</td>
<td>â­â­â­</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td><strong>å­¸ç¿’æˆæœ¬</strong></td>
<td>â­â­â­â­â­</td>
<td>â­â­â­</td>
<td>â­â­</td>
<td>â­â­â­</td>
</tr>
<tr>
<td><strong>é–‹ç™¼é€Ÿåº¦</strong></td>
<td>â­â­â­â­â­</td>
<td>â­â­â­</td>
<td>â­â­â­</td>
<td>â­â­â­</td>
</tr>
</tbody></table>
<h2 id="ğŸ¯-å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹ï¼šExcel-åŒ¯å‡ºåŠŸèƒ½"><a href="#ğŸ¯-å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹ï¼šExcel-åŒ¯å‡ºåŠŸèƒ½" class="headerlink" title="ğŸ¯ å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹ï¼šExcel åŒ¯å‡ºåŠŸèƒ½"></a>ğŸ¯ å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹ï¼šExcel åŒ¯å‡ºåŠŸèƒ½</h2><h3 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h3><p>Excel åŒ¯å‡ºåŠŸèƒ½å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>ç´”æ¥­å‹™é‚è¼¯</strong>ï¼šä¸æ¶‰åŠéŸ¿æ‡‰å¼ç‹€æ…‹</li>
<li><strong>å·¥å…·æ€§è³ª</strong>ï¼šæä¾›è³‡æ–™è™•ç†å’Œæª”æ¡ˆç”¢ç”ŸåŠŸèƒ½</li>
<li><strong>å¯é‡è¤‡ä½¿ç”¨</strong>ï¼šå¤šå€‹é é¢éƒ½å¯èƒ½éœ€è¦åŒ¯å‡ºåŠŸèƒ½</li>
</ul>
<h3 id="æ¨è–¦æ–¹æ¡ˆï¼šService-æ¨¡å¼"><a href="#æ¨è–¦æ–¹æ¡ˆï¼šService-æ¨¡å¼" class="headerlink" title="æ¨è–¦æ–¹æ¡ˆï¼šService æ¨¡å¼"></a>æ¨è–¦æ–¹æ¡ˆï¼šService æ¨¡å¼</h3><h4 id="ç†ç”±"><a href="#ç†ç”±" class="headerlink" title="ç†ç”±"></a>ç†ç”±</h4><ol>
<li><strong>ç´”æ¥­å‹™é‚è¼¯</strong>ï¼šExcel è™•ç†ä¸éœ€è¦éŸ¿æ‡‰å¼ç‹€æ…‹</li>
<li><strong>æ˜“æ–¼æ¸¬è©¦</strong>ï¼šå¯ä»¥ç¨ç«‹æ¸¬è©¦åŒ¯å‡ºé‚è¼¯</li>
<li><strong>è·¨å¹³å°é‡ç”¨</strong>ï¼šæœªä¾†å¯èƒ½åœ¨å…¶ä»–å°ˆæ¡ˆä¸­ä½¿ç”¨</li>
<li><strong>ä¾è³´æ˜ç¢º</strong>ï¼šæ¸…æ¥šçŸ¥é“éœ€è¦å“ªäº› XLSX åŠŸèƒ½</li>
</ol>
<h4 id="å¯¦ä½œç­–ç•¥"><a href="#å¯¦ä½œç­–ç•¥" class="headerlink" title="å¯¦ä½œç­–ç•¥"></a>å¯¦ä½œç­–ç•¥</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// services/ExcelService.js - ç´”æ¥­å‹™é‚è¼¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExcelService</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">exportExcel</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// æ ¸å¿ƒåŒ¯å‡ºé‚è¼¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// utils.js - æä¾›ä¾¿æ·ä»‹é¢</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">exportExcel</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">ExcelService</span>.<span class="title function_">exportExcel</span>(&#123;</span><br><span class="line">        ...options,</span><br><span class="line">        <span class="attr">formatUtils</span>: format  <span class="comment">// æ³¨å…¥å°ˆæ¡ˆç‰¹å®šä¾è³´</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çµ„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">export_data_excel</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = utils.<span class="title function_">exportExcel</span>(&#123;</span><br><span class="line">        <span class="attr">data</span>: tableData.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">headers</span>: columnHeaders,</span><br><span class="line">        <span class="attr">filename</span>: <span class="title function_">t</span>(<span class="string">&#x27;EXPORT_FILENAME&#x27;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ”„-Vue-3-æ¨å‡º-Composables-çš„èƒŒæ™¯"><a href="#ğŸ”„-Vue-3-æ¨å‡º-Composables-çš„èƒŒæ™¯" class="headerlink" title="ğŸ”„ Vue 3 æ¨å‡º Composables çš„èƒŒæ™¯"></a>ğŸ”„ Vue 3 æ¨å‡º Composables çš„èƒŒæ™¯</h2><h3 id="è§£æ±ºçš„å•é¡Œ"><a href="#è§£æ±ºçš„å•é¡Œ" class="headerlink" title="è§£æ±ºçš„å•é¡Œ"></a>è§£æ±ºçš„å•é¡Œ</h3><h4 id="1-Vue-2-Mixins-çš„ç—›é»"><a href="#1-Vue-2-Mixins-çš„ç—›é»" class="headerlink" title="1. Vue 2 Mixins çš„ç—›é»"></a>1. Vue 2 Mixins çš„ç—›é»</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue 2 - å•é¡Œç¯„ä¾‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">mixins</span>: [counterMixin, apiMixin], <span class="comment">// å‘½åè¡çªã€ä¾†æºä¸æ˜</span></span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸çŸ¥é“ count ä¾†è‡ªå“ªå€‹ mixin</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue 3 - è§£æ±ºæ–¹æ¡ˆ</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; count &#125; = <span class="title function_">useCounter</span>();  <span class="comment">// æ˜ç¢ºä¾†æº</span></span><br><span class="line">        <span class="keyword">const</span> &#123; data &#125; = <span class="title function_">useApi</span>();       <span class="comment">// ç„¡å‘½åè¡çª</span></span><br><span class="line">        <span class="keyword">return</span> &#123; count, data &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-é‚è¼¯å¾©ç”¨å›°é›£"><a href="#2-é‚è¼¯å¾©ç”¨å›°é›£" class="headerlink" title="2. é‚è¼¯å¾©ç”¨å›°é›£"></a>2. é‚è¼¯å¾©ç”¨å›°é›£</h4><p>Vue 2 ä¸­è·¨çµ„ä»¶å…±äº«é‚è¼¯å¾ˆå›°é›£ï¼ŒComposables æä¾›äº†å„ªé›…çš„è§£æ±ºæ–¹æ¡ˆã€‚</p>
<h4 id="3-TypeScript-æ”¯æ´ä¸è¶³"><a href="#3-TypeScript-æ”¯æ´ä¸è¶³" class="headerlink" title="3. TypeScript æ”¯æ´ä¸è¶³"></a>3. TypeScript æ”¯æ´ä¸è¶³</h4><p>Composables æä¾›å®Œæ•´çš„å‹åˆ¥æ¨æ–·å’Œå‹åˆ¥å®‰å…¨ã€‚</p>
<h3 id="è¨­è¨ˆå“²å­¸"><a href="#è¨­è¨ˆå“²å­¸" class="headerlink" title="è¨­è¨ˆå“²å­¸"></a>è¨­è¨ˆå“²å­¸</h3><p>Composables <strong>ä¸æ˜¯è¦å–ä»£ Service</strong>ï¼Œè€Œæ˜¯è£œå…… Vue ç”Ÿæ…‹ç³»çµ±ä¸­<strong>ç‹€æ…‹ç®¡ç†å’Œé‚è¼¯å¾©ç”¨</strong>çš„èƒ½åŠ›ã€‚</p>
<hr>
<h2 id="ğŸ›ï¸-æ¶æ§‹æ¼”é€²å»ºè­°"><a href="#ğŸ›ï¸-æ¶æ§‹æ¼”é€²å»ºè­°" class="headerlink" title="ğŸ›ï¸ æ¶æ§‹æ¼”é€²å»ºè­°"></a>ğŸ›ï¸ æ¶æ§‹æ¼”é€²å»ºè­°</h2><h3 id="å°æ–¼-EOS-å°ˆæ¡ˆ"><a href="#å°æ–¼-EOS-å°ˆæ¡ˆ" class="headerlink" title="å°æ–¼ EOS å°ˆæ¡ˆ"></a>å°æ–¼ EOS å°ˆæ¡ˆ</h3><ol>
<li><strong>ä¿æŒç¾æœ‰æ¶æ§‹</strong>ï¼šä¸é€²è¡Œå¤§è¦æ¨¡é‡æ§‹</li>
<li><strong>æ–°åŠŸèƒ½ä½¿ç”¨ Service</strong>ï¼šå¦‚ Excel åŒ¯å‡ºç­‰ç´”æ¥­å‹™é‚è¼¯</li>
<li><strong>é€æ­¥å„ªåŒ–</strong>ï¼šé‡å°é«˜ä½¿ç”¨ç‡åŠŸèƒ½é€²è¡Œå±€éƒ¨å„ªåŒ–</li>
</ol>
<h3 id="å°æ–¼æ–°å°ˆæ¡ˆ"><a href="#å°æ–¼æ–°å°ˆæ¡ˆ" class="headerlink" title="å°æ–¼æ–°å°ˆæ¡ˆ"></a>å°æ–¼æ–°å°ˆæ¡ˆ</h3><ol>
<li><p><strong>æ··åˆä½¿ç”¨ç­–ç•¥</strong>ï¼š</p>
<ul>
<li><strong>å·¥å…·å‡½å¼</strong>ï¼šService æ¨¡å¼</li>
<li><strong>éŸ¿æ‡‰å¼é‚è¼¯</strong>ï¼šComposables æ¨¡å¼</li>
<li><strong>å…¨åŸŸç‹€æ…‹</strong>ï¼šStore æ¨¡å¼</li>
<li><strong>API å‘¼å«</strong>ï¼šService + Composables çµ„åˆ</li>
</ul>
</li>
<li><p><strong>åˆ†å±¤æ¶æ§‹</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Components (çµ„ä»¶å±¤)</span><br><span class="line">     â†“</span><br><span class="line">Composables (é‚è¼¯å¾©ç”¨å±¤)</span><br><span class="line">     â†“</span><br><span class="line">Services (æ¥­å‹™é‚è¼¯å±¤)</span><br><span class="line">     â†“</span><br><span class="line">Utils (å·¥å…·å‡½å¼å±¤)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="ğŸ“-æœ€ä½³å¯¦è¸ç¸½çµ"><a href="#ğŸ“-æœ€ä½³å¯¦è¸ç¸½çµ" class="headerlink" title="ğŸ“ æœ€ä½³å¯¦è¸ç¸½çµ"></a>ğŸ“ æœ€ä½³å¯¦è¸ç¸½çµ</h2><h3 id="1-é¸æ“‡åŸå‰‡"><a href="#1-é¸æ“‡åŸå‰‡" class="headerlink" title="1. é¸æ“‡åŸå‰‡"></a>1. é¸æ“‡åŸå‰‡</h3><ul>
<li><strong>ç‹€æ…‹æ€§è³ª</strong>ï¼šæœ‰ç‹€æ…‹é¸ Composables&#x2F;Storeï¼Œç„¡ç‹€æ…‹é¸ Service</li>
<li><strong>å°ˆæ¡ˆéšæ®µ</strong>ï¼šæ–°å°ˆæ¡ˆéˆæ´»é¸æ“‡ï¼Œæ—¢æœ‰å°ˆæ¡ˆæ¼¸é€²å¼æ”¹é€²</li>
<li><strong>åœ˜éšŠèƒ½åŠ›</strong>ï¼šè€ƒæ…®åœ˜éšŠå°æ–°æŠ€è¡“çš„æ¥å—åº¦å’Œå­¸ç¿’æˆæœ¬</li>
</ul>
<h3 id="2-æ··åˆä½¿ç”¨ç­–ç•¥"><a href="#2-æ··åˆä½¿ç”¨ç­–ç•¥" class="headerlink" title="2. æ··åˆä½¿ç”¨ç­–ç•¥"></a>2. æ··åˆä½¿ç”¨ç­–ç•¥</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¸å‹çµ„ä»¶æ¶æ§‹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// å…¨åŸŸç‹€æ…‹</span></span><br><span class="line">        <span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éŸ¿æ‡‰å¼é‚è¼¯</span></span><br><span class="line">        <span class="keyword">const</span> &#123; filters, updateFilter &#125; = <span class="title function_">useTableFilters</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¥­å‹™æœå‹™</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; <span class="title class_">ExcelService</span>.<span class="title function_">exportExcel</span>(&#123;...&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å·¥å…·å‡½å¼</span></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">formatDate</span> = (<span class="params">date</span>) =&gt; utils.<span class="title function_">format</span>(date, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">user</span>: userStore.<span class="property">currentUser</span>,</span><br><span class="line">            filters,</span><br><span class="line">            updateFilter,</span><br><span class="line">            exportData,</span><br><span class="line">            formatDate</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-é‡æ§‹ç­–ç•¥"><a href="#3-é‡æ§‹ç­–ç•¥" class="headerlink" title="3. é‡æ§‹ç­–ç•¥"></a>3. é‡æ§‹ç­–ç•¥</h3><ul>
<li><strong>éšæ®µå¼é·ç§»</strong>ï¼šå„ªå…ˆé‡æ§‹é«˜ä½¿ç”¨ç‡ã€é«˜ç¶­è­·æˆæœ¬çš„åŠŸèƒ½</li>
<li><strong>å‘å¾Œç›¸å®¹</strong>ï¼šä¿æŒæ—¢æœ‰ API ä¸è®Šï¼Œå…§éƒ¨å¯¦ä½œæ¼¸é€²å¼æ”¹é€²</li>
<li><strong>æ¸¬è©¦é©…å‹•</strong>ï¼šé‡è¦åŠŸèƒ½å…ˆå¯«æ¸¬è©¦ï¼Œå†é€²è¡Œé‡æ§‹</li>
</ul>
<hr>
<h2 id="ğŸ”—-åƒè€ƒè³‡æº"><a href="#ğŸ”—-åƒè€ƒè³‡æº" class="headerlink" title="ğŸ”— åƒè€ƒè³‡æº"></a>ğŸ”— åƒè€ƒè³‡æº</h2><ul>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/api/composition-api-setup.html">Vue 3 Composition API å®˜æ–¹æ–‡ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia ç‹€æ…‹ç®¡ç†</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/typescript/overview.html">TypeScript èˆ‡ Vue 3</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/reusability/composables.html">Vue 3 è¨­è¨ˆæ¨¡å¼æœ€ä½³å¯¦è¸</a></li>
</ul>
<h2 id="ğŸ’¡-å¯¦æˆ°æ±ºç­–æµç¨‹åœ–"><a href="#ğŸ’¡-å¯¦æˆ°æ±ºç­–æµç¨‹åœ–" class="headerlink" title="ğŸ’¡ å¯¦æˆ°æ±ºç­–æµç¨‹åœ–"></a>ğŸ’¡ å¯¦æˆ°æ±ºç­–æµç¨‹åœ–</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ–°åŠŸèƒ½éœ€æ±‚] --&gt; B&#123;æ˜¯å¦éœ€è¦ç‹€æ…‹ç®¡ç†?&#125;</span><br><span class="line">    B --&gt;|æ˜¯| C&#123;å…¨åŸŸé‚„æ˜¯å±€éƒ¨ç‹€æ…‹?&#125;</span><br><span class="line">    B --&gt;|å¦| D&#123;æ˜¯å¦ç‚ºç´”æ¥­å‹™é‚è¼¯?&#125;</span><br><span class="line">    </span><br><span class="line">    C --&gt;|å…¨åŸŸ| E[Store æ¨¡å¼]</span><br><span class="line">    C --&gt;|å±€éƒ¨| F[Composables æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    D --&gt;|æ˜¯| G[Service æ¨¡å¼]</span><br><span class="line">    D --&gt;|å¦| H&#123;æ˜¯å¦ç‚ºå·¥å…·å‡½å¼?&#125;</span><br><span class="line">    </span><br><span class="line">    H --&gt;|æ˜¯| I&#123;å°ˆæ¡ˆè¦æ¨¡?&#125;</span><br><span class="line">    H --&gt;|å¦| J[è€ƒæ…®é‡æ–°åˆ†æéœ€æ±‚]</span><br><span class="line">    </span><br><span class="line">    I --&gt;|å¤§å‹/æ–°å°ˆæ¡ˆ| G</span><br><span class="line">    I --&gt;|å°å‹/EOSå°ˆæ¡ˆ| K[å…¨åŸŸå±¬æ€§æ¨¡å¼]</span><br><span class="line">    </span><br><span class="line">    E --&gt; L[å¯¦ä½œæ–¹æ¡ˆ]</span><br><span class="line">    F --&gt; L</span><br><span class="line">    G --&gt; L</span><br><span class="line">    K --&gt; L</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ"><a href="#ğŸ¯-æ ¸å¿ƒæ´å¯Ÿç¸½çµ" class="headerlink" title="ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ"></a>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿç¸½çµ</h2><h3 id="1-æ¶æ§‹é¸æ“‡çš„é—œéµå› ç´ "><a href="#1-æ¶æ§‹é¸æ“‡çš„é—œéµå› ç´ " class="headerlink" title="1. æ¶æ§‹é¸æ“‡çš„é—œéµå› ç´ "></a>1. <strong>æ¶æ§‹é¸æ“‡çš„é—œéµå› ç´ </strong></h3><ul>
<li><strong>å°ˆæ¡ˆç”Ÿå‘½é€±æœŸ</strong>ï¼šæ–°å°ˆæ¡ˆéˆæ´»é¸æ“‡ï¼Œæ—¢æœ‰å°ˆæ¡ˆè€ƒæ…®ç¶­è­·æˆæœ¬</li>
<li><strong>åœ˜éšŠæŠ€èƒ½</strong>ï¼šè€ƒæ…®åœ˜éšŠå°æ–°æŠ€è¡“çš„æ¥å—åº¦å’Œå­¸ç¿’æ›²ç·š</li>
<li><strong>åŠŸèƒ½ç‰¹æ€§</strong>ï¼šä¾æ“šç‹€æ…‹æ€§è³ªã€æ¥­å‹™è¤‡é›œåº¦é¸æ“‡åˆé©æ¨¡å¼</li>
</ul>
<h3 id="2-æ··åˆç­–ç•¥çš„å¨åŠ›"><a href="#2-æ··åˆç­–ç•¥çš„å¨åŠ›" class="headerlink" title="2. æ··åˆç­–ç•¥çš„å¨åŠ›"></a>2. <strong>æ··åˆç­–ç•¥çš„å¨åŠ›</strong></h3><p>ä¸åŒæ¶æ§‹æ¨¡å¼å„æœ‰å„ªå‹¢ï¼Œæ™ºæ…§çš„çµ„åˆä½¿ç”¨èƒ½ç™¼æ®æœ€å¤§æ•ˆç›Šï¼š</p>
<ul>
<li><strong>å·¥å…·å‡½å¼</strong>ï¼šService æ¨¡å¼æä¾›æœ€ä½³çš„æ¸¬è©¦æ€§å’Œé‡ç”¨æ€§</li>
<li><strong>éŸ¿æ‡‰å¼é‚è¼¯</strong>ï¼šComposables æ¨¡å¼ç™¼æ® Vue 3 çš„å„ªå‹¢</li>
<li><strong>å…¨åŸŸç‹€æ…‹</strong>ï¼šStore æ¨¡å¼æä¾›çµæ§‹åŒ–çš„ç‹€æ…‹ç®¡ç†</li>
<li><strong>æ—¢æœ‰ç³»çµ±</strong>ï¼šå…¨åŸŸå±¬æ€§æ¨¡å¼ç¢ºä¿ç©©å®šæ€§</li>
</ul>
<h3 id="3-æ•ˆèƒ½èˆ‡é–‹ç™¼é«”é©—çš„å¹³è¡¡"><a href="#3-æ•ˆèƒ½èˆ‡é–‹ç™¼é«”é©—çš„å¹³è¡¡" class="headerlink" title="3. æ•ˆèƒ½èˆ‡é–‹ç™¼é«”é©—çš„å¹³è¡¡"></a>3. <strong>æ•ˆèƒ½èˆ‡é–‹ç™¼é«”é©—çš„å¹³è¡¡</strong></h3><ul>
<li><strong>é–‹ç™¼é€Ÿåº¦ vs é•·æœŸç¶­è­·</strong>ï¼šçŸ­æœŸé–‹ç™¼æ•ˆç‡èˆ‡é•·æœŸç¶­è­·æˆæœ¬çš„æ¬Šè¡¡</li>
<li><strong>Bundle å¤§å° vs é–‹ç™¼ä¾¿åˆ©æ€§</strong>ï¼šæŒ‰éœ€è¼‰å…¥èˆ‡å…¨åŸŸæ³¨å…¥çš„å–æ¨</li>
<li><strong>å‹åˆ¥å®‰å…¨ vs å­¸ç¿’æˆæœ¬</strong>ï¼šTypeScript æ”¯æ´èˆ‡åœ˜éšŠå­¸ç¿’æŠ•å…¥</li>
</ul>
<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="å®˜æ–¹æ–‡ä»¶"><a href="#å®˜æ–¹æ–‡ä»¶" class="headerlink" title="å®˜æ–¹æ–‡ä»¶"></a>å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/api/composition-api-setup.html">Vue 3 Composition API å®˜æ–¹æ–‡ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://pinia.vuejs.org/">Pinia ç‹€æ…‹ç®¡ç†</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/typescript/overview.html">TypeScript èˆ‡ Vue 3</a></li>
<li><a target="_blank" rel="noopener" href="https://vuejs.org/guide/reusability/composables.html">Vue 3 è¨­è¨ˆæ¨¡å¼æœ€ä½³å¯¦è¸</a></li>
</ul>
<h3 id="å¯¦è¸æ¡ˆä¾‹"><a href="#å¯¦è¸æ¡ˆä¾‹" class="headerlink" title="å¯¦è¸æ¡ˆä¾‹"></a>å¯¦è¸æ¡ˆä¾‹</h3><ul>
<li>Vue.js å®˜æ–¹ç¯„ä¾‹å°ˆæ¡ˆ</li>
<li>Composition API RFC è¨è«–</li>
<li>Vue 3 é·ç§»æŒ‡å—</li>
</ul>
<h3 id="ç›¸é—œå·¥å…·"><a href="#ç›¸é—œå·¥å…·" class="headerlink" title="ç›¸é—œå·¥å…·"></a>ç›¸é—œå·¥å…·</h3><ul>
<li>Vue DevTools 3.0+</li>
<li>TypeScript</li>
<li>ESLint Vue Plugin</li>
<li>Vite å»ºæ§‹å·¥å…·</li>
</ul>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šå‰ç«¯æ¶æ§‹åœ˜éšŠ<br><strong>æ›´æ–°æ—¥æœŸ</strong>ï¼š2025å¹´6æœˆ29æ—¥<br><strong>ç‰ˆæœ¬</strong>ï¼šv1.1<br><strong>é©ç”¨ç¯„åœ</strong>ï¼šVue 3 + Composition API å°ˆæ¡ˆ</p>
</blockquote>
<hr>
<p><em>æœ¬æ–‡ä»¶ç‚ºå‰ç«¯æ¶æ§‹æ±ºç­–æä¾›ç³»çµ±æ€§çš„åˆ†æå’Œå»ºè­°ï¼Œå¹«åŠ©åœ˜éšŠé¸æ“‡æœ€é©åˆçš„æŠ€è¡“æ–¹æ¡ˆã€‚</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/vue-frontend-architecture-patterns-guide/" data-id="cmg51yfqj000lanmz8g9b4ugm" data-title="Vue.js å‰ç«¯æ¶æ§‹æ¨¡å¼æ¯”è¼ƒèˆ‡é¸æ“‡æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Best-Practices/" rel="tag">Best Practices</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Composables/" rel="tag">Composables</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Composition-API/" rel="tag">Composition API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Frontend-Architecture/" rel="tag">Frontend Architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Global-Properties/" rel="tag">Global Properties</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Pinia/" rel="tag">Pinia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Service-Pattern/" rel="tag">Service Pattern</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/State-Management/" rel="tag">State Management</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mapbox-data-visualization-guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/mapbox-data-visualization-guide/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T02:00:00.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech-Daily/">Tech Daily</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/mapbox-data-visualization-guide/">Mapbox åœ°åœ–è³‡æ–™è¦–è¦ºåŒ–æŠ€è¡“åˆ†æèˆ‡æ‡‰ç”¨æŒ‡å—</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…"><a href="#ğŸ“‹-æ ¸å¿ƒæ‡¶äººåŒ…" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…"></a>ğŸ“‹ æ ¸å¿ƒæ‡¶äººåŒ…</h2><ol>
<li><strong>æ™ºèƒ½åœ–å±¤æ§åˆ¶</strong>ï¼šé¸æ“‡æ€§éš±è—åœ°åœ–å…ƒç´ ï¼Œå»ºç«‹å°ˆæ³¨çš„è¦–è¦ºç’°å¢ƒ</li>
<li><strong>Canvas åœ–æ¡ˆç”Ÿæˆ</strong>ï¼šå‹•æ…‹ç”¢ç”Ÿå¡«å……åœ–æ¡ˆï¼Œä¸ä¾è³´å¤–éƒ¨è³‡æº</li>
<li><strong>GeoJSON è³‡æ–™æ•´åˆ</strong>ï¼šè¼‰å…¥ä¸–ç•Œé™¸åœ°é‚Šç•Œï¼Œå±•ç¤ºåœ°ç†è³‡æ–™æ‡‰ç”¨</li>
<li><strong>å¢é›†è¦–è¦ºåŒ–</strong>ï¼šå°‡å¤§é‡é»è³‡æ–™æ™ºèƒ½åˆ†çµ„ï¼Œæå‡è¦–è¦ºæ¸…æ™°åº¦</li>
<li><strong>äº’å‹•é«”é©—è¨­è¨ˆ</strong>ï¼šæ•´åˆåœ°ç†ç·¨ç¢¼ APIï¼Œæä¾›è±å¯Œçš„ä½¿ç”¨è€…é«”é©—</li>
</ol>
<h2 id="ğŸ—ºï¸-å°ˆæ¡ˆæ¦‚è¿°"><a href="#ğŸ—ºï¸-å°ˆæ¡ˆæ¦‚è¿°" class="headerlink" title="ğŸ—ºï¸ å°ˆæ¡ˆæ¦‚è¿°"></a>ğŸ—ºï¸ å°ˆæ¡ˆæ¦‚è¿°</h2><p>æœ¬å°ˆæ¡ˆå±•ç¤ºäº† Mapbox GL JS åœ¨åœ°ç†è³‡æ–™è¦–è¦ºåŒ–æ–¹é¢çš„å¼·å¤§åŠŸèƒ½ï¼š</p>
<ul>
<li>ğŸ¯ <strong>åœ–å±¤æ§åˆ¶æŠ€è¡“</strong>ï¼šç²¾ç¢ºç®¡ç†åœ°åœ–é¡¯ç¤ºå…§å®¹</li>
<li>ğŸ¨ <strong>è‡ªè¨‚è¦–è¦ºåœ–æ¡ˆ</strong>ï¼šä½¿ç”¨ Canvas API å‹•æ…‹ç”Ÿæˆå¡«å……åœ–æ¡ˆ</li>
<li>ğŸ“Š <strong>è³‡æ–™å¢é›†åŒ–</strong>ï¼šå°‡å¤§é‡é»è³‡æ–™é€²è¡Œæ™ºèƒ½åˆ†çµ„é¡¯ç¤º</li>
<li>ğŸŒ <strong>åœ°ç†è³‡æ–™æ•´åˆ</strong>ï¼šè¼‰å…¥ä¸¦å±•ç¤ºä¸–ç•Œé™¸åœ°é‚Šç•Œè³‡æ–™</li>
<li>âš¡ <strong>äº’å‹•é«”é©—</strong>ï¼šè±å¯Œçš„é»æ“Šã€æ‡¸åœèˆ‡ç¸®æ”¾åŠŸèƒ½</li>
</ul>
<h2 id="ğŸ—ï¸-æ ¸å¿ƒæŠ€è¡“æ¶æ§‹"><a href="#ğŸ—ï¸-æ ¸å¿ƒæŠ€è¡“æ¶æ§‹" class="headerlink" title="ğŸ—ï¸ æ ¸å¿ƒæŠ€è¡“æ¶æ§‹"></a>ğŸ—ï¸ æ ¸å¿ƒæŠ€è¡“æ¶æ§‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Mapbox GL JS åœ°åœ–] --&gt; B[åœ–å±¤æ§åˆ¶]</span><br><span class="line">    A --&gt; C[Canvas åœ–æ¡ˆç”Ÿæˆ]</span><br><span class="line">    A --&gt; D[GeoJSON è³‡æ–™è¼‰å…¥]</span><br><span class="line">    A --&gt; E[å¢é›†è™•ç†]</span><br><span class="line">    </span><br><span class="line">    B --&gt; B1[éš±è—å…§å»ºåœ–å±¤]</span><br><span class="line">    C --&gt; C1[å‹•æ…‹é»ç‹€åœ–æ¡ˆ]</span><br><span class="line">    D --&gt; D1[ä¸–ç•Œé™¸åœ°é‚Šç•Œ]</span><br><span class="line">    D --&gt; D2[å®¹éŒ¯è™•ç†æ©Ÿåˆ¶]</span><br><span class="line">    E --&gt; E1[åœ°éœ‡è³‡æ–™å¢é›†]</span><br><span class="line">    E --&gt; E2[è¦–è¦ºåŒ–å‘ˆç¾]</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ›ï¸-åœ°åœ–åœ–å±¤æ§åˆ¶æŠ€è¡“"><a href="#ğŸ›ï¸-åœ°åœ–åœ–å±¤æ§åˆ¶æŠ€è¡“" class="headerlink" title="ğŸ›ï¸ åœ°åœ–åœ–å±¤æ§åˆ¶æŠ€è¡“"></a>ğŸ›ï¸ åœ°åœ–åœ–å±¤æ§åˆ¶æŠ€è¡“</h2><h3 id="æŠ€è¡“åŸç†"><a href="#æŠ€è¡“åŸç†" class="headerlink" title="æŠ€è¡“åŸç†"></a>æŠ€è¡“åŸç†</h3><p>Mapbox åº•åœ–åŒ…å«è¨±å¤šé è¨­åœ–å±¤ï¼Œåœ¨ç‰¹å®šæ‡‰ç”¨å ´æ™¯ä¸­å¯èƒ½é€ æˆè¦–è¦ºå¹²æ“¾ã€‚é€šéåœ–å±¤æ§åˆ¶æŠ€è¡“ï¼Œæˆ‘å€‘å¯ä»¥å»ºç«‹æ›´å°ˆæ³¨çš„è¦–è¦ºç’°å¢ƒã€‚</p>
<h3 id="å¯¦ä½œæ–¹å¼"><a href="#å¯¦ä½œæ–¹å¼" class="headerlink" title="å¯¦ä½œæ–¹å¼"></a>å¯¦ä½œæ–¹å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šç¾©éœ€è¦éš±è—çš„åœ–å±¤æ¸…å–®</span></span><br><span class="line"><span class="keyword">const</span> layersToHide = [</span><br><span class="line">  <span class="string">&#x27;country-label&#x27;</span>,      <span class="comment">// åœ‹å®¶æ¨™ç±¤</span></span><br><span class="line">  <span class="string">&#x27;state-label&#x27;</span>,        <span class="comment">// å·/çœæ¨™ç±¤</span></span><br><span class="line">  <span class="string">&#x27;settlement-label&#x27;</span>,   <span class="comment">// åŸå¸‚æ¨™ç±¤</span></span><br><span class="line">  <span class="string">&#x27;road-primary&#x27;</span>,       <span class="comment">// ä¸»è¦é“è·¯</span></span><br><span class="line">  <span class="string">&#x27;building&#x27;</span>,           <span class="comment">// å»ºç¯‰ç‰©</span></span><br><span class="line">  <span class="string">&#x27;water&#x27;</span>,              <span class="comment">// æ°´é«”</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¹æ¬¡éš±è—åœ–å±¤</span></span><br><span class="line">layersToHide.<span class="title function_">forEach</span>(<span class="function"><span class="params">layerId</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (map.<span class="title function_">getLayer</span>(layerId)) &#123;</span><br><span class="line">    map.<span class="title function_">setLayoutProperty</span>(layerId, <span class="string">&#x27;visibility&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="æŠ€è¡“å„ªå‹¢"><a href="#æŠ€è¡“å„ªå‹¢" class="headerlink" title="æŠ€è¡“å„ªå‹¢"></a>æŠ€è¡“å„ªå‹¢</h3><ul>
<li>âœ… <strong>æ•ˆèƒ½å„ªåŒ–</strong>ï¼šæ¸›å°‘ä¸å¿…è¦çš„æ¸²æŸ“è² æ“”</li>
<li>âœ… <strong>è¦–è¦ºèšç„¦</strong>ï¼šçªå‡ºé‡è¦çš„è³‡æ–™å…§å®¹</li>
<li>âœ… <strong>å½ˆæ€§æ§åˆ¶</strong>ï¼šå¯æ ¹æ“šéœ€æ±‚å‹•æ…‹èª¿æ•´é¡¯ç¤ºå…§å®¹</li>
</ul>
<h2 id="ğŸ¨-Canvas-å‹•æ…‹åœ–æ¡ˆç”Ÿæˆ"><a href="#ğŸ¨-Canvas-å‹•æ…‹åœ–æ¡ˆç”Ÿæˆ" class="headerlink" title="ğŸ¨ Canvas å‹•æ…‹åœ–æ¡ˆç”Ÿæˆ"></a>ğŸ¨ Canvas å‹•æ…‹åœ–æ¡ˆç”Ÿæˆ</h2><h3 id="ç‚ºä»€éº¼ä½¿ç”¨-Canvasï¼Ÿ"><a href="#ç‚ºä»€éº¼ä½¿ç”¨-Canvasï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ä½¿ç”¨ Canvasï¼Ÿ"></a>ç‚ºä»€éº¼ä½¿ç”¨ Canvasï¼Ÿ</h3><p>å‚³çµ±å¡«å……åœ–æ¡ˆéœ€è¦å¤–éƒ¨åœ–ç‰‡æª”æ¡ˆï¼Œè€Œ Canvas æŠ€è¡“è®“æˆ‘å€‘èƒ½å¤ ï¼š</p>
<ol>
<li><strong>å³æ™‚ç”Ÿæˆ</strong>ï¼šä¸ä¾è³´å¤–éƒ¨è³‡æº</li>
<li><strong>å®Œå…¨å®¢è£½åŒ–</strong>ï¼šç²¾ç¢ºæ§åˆ¶æ¯å€‹åƒç´ </li>
<li><strong>å‹•æ…‹è®ŠåŒ–</strong>ï¼šå¯ä»¥åŠ å…¥éš¨æ©Ÿå…ƒç´ å¢åŠ è¦–è¦ºè±å¯Œæ€§</li>
</ol>
<h3 id="æ ¸å¿ƒå¯¦ä½œ"><a href="#æ ¸å¿ƒå¯¦ä½œ" class="headerlink" title="æ ¸å¿ƒå¯¦ä½œ"></a>æ ¸å¿ƒå¯¦ä½œ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºç«‹ Canvas ç•«å¸ƒ</span></span><br><span class="line"><span class="keyword">const</span> size = <span class="number">64</span>;</span><br><span class="line"><span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">canvas.<span class="property">width</span> = size;</span><br><span class="line">canvas.<span class="property">height</span> = size;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¨­å®šé»ç‹€åœ–æ¡ˆåƒæ•¸</span></span><br><span class="line"><span class="keyword">const</span> dotSize = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> spacing = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å·¢ç‹€è¿´åœˆç¹ªè£½é»é™£åœ–æ¡ˆ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x = <span class="number">2</span>; x &lt; size - <span class="number">2</span>; x += spacing) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> y = <span class="number">2</span>; y &lt; size - <span class="number">2</span>; y += spacing) &#123;</span><br><span class="line">    <span class="comment">// éš¨æ©ŸåŒ–è¦–è¦ºæ•ˆæœ</span></span><br><span class="line">    <span class="keyword">const</span> randomSize = dotSize + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1.5</span>;</span><br><span class="line">    <span class="keyword">const</span> grayValue = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">80</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">const</span> alpha = <span class="number">0.4</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.4</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¹ªè£½å–®å€‹é»</span></span><br><span class="line">    ctx.<span class="property">fillStyle</span> = <span class="string">`rgba(<span class="subst">$&#123;grayValue&#125;</span>, <span class="subst">$&#123;grayValue&#125;</span>, <span class="subst">$&#123;grayValue&#125;</span>, <span class="subst">$&#123;alpha&#125;</span>)`</span>;</span><br><span class="line">    ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">    ctx.<span class="title function_">arc</span>(x, y, randomSize/<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>);</span><br><span class="line">    ctx.<span class="title function_">fill</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°‡ Canvas å…§å®¹è¨»å†Šç‚ºåœ°åœ–åœ–æ¡ˆ</span></span><br><span class="line"><span class="keyword">const</span> imageData = ctx.<span class="title function_">getImageData</span>(<span class="number">0</span>, <span class="number">0</span>, size, size);</span><br><span class="line">map.<span class="title function_">addImage</span>(<span class="string">&#x27;custom-dots-pattern&#x27;</span>, imageData);</span><br></pre></td></tr></table></figure>

<h2 id="ğŸŒ-GeoJSON-è³‡æ–™è¼‰å…¥èˆ‡æ‡‰ç”¨"><a href="#ğŸŒ-GeoJSON-è³‡æ–™è¼‰å…¥èˆ‡æ‡‰ç”¨" class="headerlink" title="ğŸŒ GeoJSON è³‡æ–™è¼‰å…¥èˆ‡æ‡‰ç”¨"></a>ğŸŒ GeoJSON è³‡æ–™è¼‰å…¥èˆ‡æ‡‰ç”¨</h2><h3 id="ä»€éº¼æ˜¯-GeoJSONï¼Ÿ"><a href="#ä»€éº¼æ˜¯-GeoJSONï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ GeoJSONï¼Ÿ"></a>ä»€éº¼æ˜¯ GeoJSONï¼Ÿ</h3><p>GeoJSON æ˜¯ä¸€ç¨®åŸºæ–¼ JSON çš„åœ°ç†è³‡æ–™äº¤æ›æ ¼å¼ï¼Œæ”¯æ´é»ã€ç·šã€å¤šé‚Šå½¢ç­‰åœ°ç†è¦ç´ ã€‚</p>
<h3 id="å®Œæ•´å¯¦ä½œæµç¨‹"><a href="#å®Œæ•´å¯¦ä½œæµç¨‹" class="headerlink" title="å®Œæ•´å¯¦ä½œæµç¨‹"></a>å®Œæ•´å¯¦ä½œæµç¨‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­¥é©Ÿ 1: å¾é ç«¯è¼‰å…¥ GeoJSON è³‡æ–™</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ­¥é©Ÿ 2: å°‡è³‡æ–™è¨»å†Šç‚ºåœ°åœ–è³‡æ–™ä¾†æº</span></span><br><span class="line">    map.<span class="title function_">addSource</span>(<span class="string">&#x27;world-land&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥é©Ÿ 3: å»ºç«‹è¦–è¦ºåœ–å±¤ä¸¦å¥—ç”¨è‡ªè¨‚åœ–æ¡ˆ</span></span><br><span class="line">    map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;land-dots&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">      <span class="attr">source</span>: <span class="string">&#x27;world-land&#x27;</span>,</span><br><span class="line">      <span class="attr">paint</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;fill-pattern&#x27;</span>: <span class="string">&#x27;custom-dots-pattern&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fill-opacity&#x27;</span>: <span class="number">0.4</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ­¥é©Ÿ 4: å®¹éŒ¯è™•ç† - å»ºç«‹å‚™ç”¨çš„ç°¡åŒ–é™¸åœ°å€åŸŸ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç„¡æ³•è¼‰å…¥é™¸åœ°è³‡æ–™ï¼Œä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆ&#x27;</span>);</span><br><span class="line">    <span class="comment">// æ‰‹å‹•å®šç¾©ç°¡åŒ–å€åŸŸ...</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“Š-å¢é›†è³‡æ–™è¦–è¦ºåŒ–æŠ€è¡“"><a href="#ğŸ“Š-å¢é›†è³‡æ–™è¦–è¦ºåŒ–æŠ€è¡“" class="headerlink" title="ğŸ“Š å¢é›†è³‡æ–™è¦–è¦ºåŒ–æŠ€è¡“"></a>ğŸ“Š å¢é›†è³‡æ–™è¦–è¦ºåŒ–æŠ€è¡“</h2><h3 id="ä»€éº¼æ˜¯è³‡æ–™å¢é›†ï¼Ÿ"><a href="#ä»€éº¼æ˜¯è³‡æ–™å¢é›†ï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯è³‡æ–™å¢é›†ï¼Ÿ"></a>ä»€éº¼æ˜¯è³‡æ–™å¢é›†ï¼Ÿ</h3><p>ç•¶åœ°åœ–ä¸Šæœ‰å¤§é‡å¯†é›†çš„é»è³‡æ–™æ™‚ï¼Œå¢é›†æŠ€è¡“èƒ½å¤ ï¼š</p>
<ul>
<li>å°‡é„°è¿‘çš„é»åˆä½µé¡¯ç¤º</li>
<li>æ ¹æ“šç¸®æ”¾å±¤ç´šå‹•æ…‹èª¿æ•´å¢é›†</li>
<li>æä¾›æ¸…æ™°çš„æ•¸é‡è³‡è¨Š</li>
</ul>
<h3 id="å®Œæ•´å¢é›†å¯¦ä½œç¯„ä¾‹"><a href="#å®Œæ•´å¢é›†å¯¦ä½œç¯„ä¾‹" class="headerlink" title="å®Œæ•´å¢é›†å¯¦ä½œç¯„ä¾‹"></a>å®Œæ•´å¢é›†å¯¦ä½œç¯„ä¾‹</h3><p>åŸºæ–¼ <a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/example/cluster/">Mapbox å®˜æ–¹ç¯„ä¾‹</a>ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´çš„å¢é›†å¯¦ä½œç¨‹å¼ç¢¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¨­å®š Mapbox å­˜å–æ¬Šæ–</span></span><br><span class="line">mapboxgl.<span class="property">accessToken</span> = <span class="string">&#x27;YOUR_MAPBOX_ACCESS_TOKEN&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–åœ°åœ–</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> mapboxgl.<span class="title class_">Map</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">  <span class="attr">style</span>: <span class="string">&#x27;mapbox://styles/mapbox/standard&#x27;</span>,</span><br><span class="line">  <span class="attr">config</span>: &#123;</span><br><span class="line">    <span class="attr">basemap</span>: &#123;</span><br><span class="line">      <span class="attr">theme</span>: <span class="string">&#x27;monochrome&#x27;</span>,</span><br><span class="line">      <span class="attr">lightPreset</span>: <span class="string">&#x27;night&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">center</span>: [-<span class="number">103.5917</span>, <span class="number">40.6699</span>],</span><br><span class="line">  <span class="attr">zoom</span>: <span class="number">3</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1. æ–°å¢åœ°éœ‡è³‡æ–™ä¾†æºä¸¦å•Ÿç”¨å¢é›†åŠŸèƒ½</span></span><br><span class="line">  map.<span class="title function_">addSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ USGS åœ°éœ‡è³‡æ–™ (2015/12/22 - 2016/1/21)</span></span><br><span class="line">    <span class="attr">data</span>: <span class="string">&#x27;https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson&#x27;</span>,</span><br><span class="line">    <span class="attr">cluster</span>: <span class="literal">true</span>,           <span class="comment">// å•Ÿç”¨å¢é›†</span></span><br><span class="line">    <span class="attr">clusterMaxZoom</span>: <span class="number">14</span>,      <span class="comment">// å¢é›†çš„æœ€å¤§ç¸®æ”¾å±¤ç´š</span></span><br><span class="line">    <span class="attr">clusterRadius</span>: <span class="number">50</span>        <span class="comment">// å¢é›†åŠå¾‘ï¼ˆåƒç´ ï¼‰</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å¢é›†åœ“åœˆåœ–å±¤</span></span><br><span class="line">  map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;clusters&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],  <span class="comment">// åªé¡¯ç¤ºå¢é›†é»</span></span><br><span class="line">    <span class="attr">paint</span>: &#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨ step è¡¨é”å¼æ ¹æ“šé»æ•¸é‡æ±ºå®šé¡è‰²</span></span><br><span class="line">      <span class="string">&#x27;circle-color&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;step&#x27;</span>,</span><br><span class="line">        [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;#51bbd6&#x27;</span>,    <span class="comment">// &lt; 100 å€‹é»ï¼šè—è‰²</span></span><br><span class="line">        <span class="number">100</span>,</span><br><span class="line">        <span class="string">&#x27;#f1f075&#x27;</span>,    <span class="comment">// 100-750 å€‹é»ï¼šé»ƒè‰²  </span></span><br><span class="line">        <span class="number">750</span>,</span><br><span class="line">        <span class="string">&#x27;#f28cb1&#x27;</span>     <span class="comment">// &gt;= 750 å€‹é»ï¼šç²‰è‰²</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// æ ¹æ“šé»æ•¸é‡æ±ºå®šåœ“åœˆå¤§å°</span></span><br><span class="line">      <span class="string">&#x27;circle-radius&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;step&#x27;</span>,</span><br><span class="line">        [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span><br><span class="line">        <span class="number">20</span>,           <span class="comment">// &lt; 100 å€‹é»ï¼šåŠå¾‘ 20px</span></span><br><span class="line">        <span class="number">100</span>,</span><br><span class="line">        <span class="number">30</span>,           <span class="comment">// 100-750 å€‹é»ï¼šåŠå¾‘ 30px</span></span><br><span class="line">        <span class="number">750</span>,</span><br><span class="line">        <span class="number">40</span>            <span class="comment">// &gt;= 750 å€‹é»ï¼šåŠå¾‘ 40px</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span>  <span class="comment">// ç™¼å…‰æ•ˆæœ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. å¢é›†æ•¸å­—æ¨™ç±¤åœ–å±¤</span></span><br><span class="line">  map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;cluster-count&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;symbol&#x27;</span>,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span><br><span class="line">    <span class="attr">layout</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;text-field&#x27;</span>: [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count_abbreviated&#x27;</span>],  <span class="comment">// é¡¯ç¤ºç¸®å¯«æ•¸å­—</span></span><br><span class="line">      <span class="string">&#x27;text-font&#x27;</span>: [<span class="string">&#x27;DIN Offc Pro Medium&#x27;</span>, <span class="string">&#x27;Arial Unicode MS Bold&#x27;</span>],</span><br><span class="line">      <span class="string">&#x27;text-size&#x27;</span>: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. å€‹åˆ¥é»ï¼ˆæœªå¢é›†ï¼‰åœ–å±¤</span></span><br><span class="line">  map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;unclustered-point&#x27;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">    <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span><br><span class="line">    <span class="attr">filter</span>: [<span class="string">&#x27;!&#x27;</span>, [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>]],  <span class="comment">// åªé¡¯ç¤ºéå¢é›†é»</span></span><br><span class="line">    <span class="attr">paint</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;circle-color&#x27;</span>: <span class="string">&#x27;#11b4da&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;circle-radius&#x27;</span>: <span class="number">4</span>,</span><br><span class="line">      <span class="string">&#x27;circle-stroke-width&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&#x27;circle-stroke-color&#x27;</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5. å¢é›†é»æ“Šäº‹ä»¶ - è‡ªå‹•ç¸®æ”¾å±•é–‹</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> features = map.<span class="title function_">queryRenderedFeatures</span>(e.<span class="property">point</span>, &#123;</span><br><span class="line">      <span class="attr">layers</span>: [<span class="string">&#x27;clusters&#x27;</span>]</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> clusterId = features[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">cluster_id</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å–å¾—é©ç•¶çš„ç¸®æ”¾å±¤ç´š</span></span><br><span class="line">    map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">getClusterExpansionZoom</span>(</span><br><span class="line">      clusterId,</span><br><span class="line">      <span class="function">(<span class="params">err, zoom</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¹³æ»‘ç¸®æ”¾åˆ°å¢é›†ä½ç½®</span></span><br><span class="line">        map.<span class="title function_">easeTo</span>(&#123;</span><br><span class="line">          <span class="attr">center</span>: features[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>,</span><br><span class="line">          <span class="attr">zoom</span>: zoom</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 6. å€‹åˆ¥é»é»æ“Šäº‹ä»¶ - é¡¯ç¤ºè©³ç´°è³‡è¨Š</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;unclustered-point&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> coordinates = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>.<span class="title function_">slice</span>();</span><br><span class="line">    <span class="keyword">const</span> mag = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">mag</span>;</span><br><span class="line">    <span class="keyword">const</span> tsunami = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">tsunami</span> === <span class="number">1</span> ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è™•ç†åœ°åœ–æŠ•å½±é‚Šç•Œå•é¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="string">&#x27;mercator&#x27;</span>, <span class="string">&#x27;equirectangular&#x27;</span>].<span class="title function_">includes</span>(map.<span class="title function_">getProjection</span>().<span class="property">name</span>)) &#123;</span><br><span class="line">      <span class="keyword">while</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(e.<span class="property">lngLat</span>.<span class="property">lng</span> - coordinates[<span class="number">0</span>]) &gt; <span class="number">180</span>) &#123;</span><br><span class="line">        coordinates[<span class="number">0</span>] += e.<span class="property">lngLat</span>.<span class="property">lng</span> &gt; coordinates[<span class="number">0</span>] ? <span class="number">360</span> : -<span class="number">360</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¡¯ç¤ºå½ˆå‡ºè¦–çª—</span></span><br><span class="line">    <span class="keyword">new</span> mapboxgl.<span class="title class_">Popup</span>()</span><br><span class="line">      .<span class="title function_">setLngLat</span>(coordinates)</span><br><span class="line">      .<span class="title function_">setHTML</span>(</span><br><span class="line">        <span class="string">`magnitude: <span class="subst">$&#123;mag&#125;</span>&lt;br&gt;Was there a tsunami?: <span class="subst">$&#123;tsunami&#125;</span>`</span></span><br><span class="line">      )</span><br><span class="line">      .<span class="title function_">addTo</span>(map);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 7. æ»‘é¼ æ¸¸æ¨™æ•ˆæœ</span></span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;pointer&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  map.<span class="title function_">on</span>(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="æŠ€è¡“æ¶æ§‹åˆ†æ"><a href="#æŠ€è¡“æ¶æ§‹åˆ†æ" class="headerlink" title="æŠ€è¡“æ¶æ§‹åˆ†æ"></a>æŠ€è¡“æ¶æ§‹åˆ†æ</h3><table>
<thead>
<tr>
<th>åœ–å±¤</th>
<th>ç”¨é€”</th>
<th>é—œéµå±¬æ€§</th>
</tr>
</thead>
<tbody><tr>
<td><code>clusters</code></td>
<td>å¢é›†åœ“åœˆ</td>
<td><code>filter: [&#39;has&#39;, &#39;point_count&#39;]</code></td>
</tr>
<tr>
<td><code>cluster-count</code></td>
<td>å¢é›†æ•¸å­—</td>
<td><code>text-field: point_count_abbreviated</code></td>
</tr>
<tr>
<td><code>unclustered-point</code></td>
<td>å€‹åˆ¥é»</td>
<td><code>filter: [&#39;!&#39;, [&#39;has&#39;, &#39;point_count&#39;]]</code></td>
</tr>
</tbody></table>
<h2 id="âš¡-äº’å‹•é«”é©—è¨­è¨ˆ"><a href="#âš¡-äº’å‹•é«”é©—è¨­è¨ˆ" class="headerlink" title="âš¡ äº’å‹•é«”é©—è¨­è¨ˆ"></a>âš¡ äº’å‹•é«”é©—è¨­è¨ˆ</h2><h3 id="åœ°ç†ç·¨ç¢¼æ•´åˆ"><a href="#åœ°ç†ç·¨ç¢¼æ•´åˆ" class="headerlink" title="åœ°ç†ç·¨ç¢¼æ•´åˆ"></a>åœ°ç†ç·¨ç¢¼æ•´åˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»æ“Šå€‹åˆ¥é»æ™‚é¡¯ç¤ºåœ°å€è³‡è¨Š</span></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;unclustered-point&#x27;</span>, <span class="title function_">async</span> (e) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [lng, lat] = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å‘¼å« Mapbox Geocoding API é€²è¡Œåå‘åœ°ç†ç·¨ç¢¼</span></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(</span><br><span class="line">    <span class="string">`https://api.mapbox.com/geocoding/v5/mapbox.places/<span class="subst">$&#123;lng&#125;</span>,<span class="subst">$&#123;lat&#125;</span>.json?access_token=<span class="subst">$&#123;mapboxgl.accessToken&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  <span class="keyword">const</span> placeName = data.<span class="property">features</span>[<span class="number">0</span>]?.<span class="property">place_name</span> || <span class="string">&#x27;åœ°å€æŸ¥ç„¡&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// é¡¯ç¤ºå½ˆå‡ºè¦–çª—</span></span><br><span class="line">  <span class="keyword">new</span> mapboxgl.<span class="title class_">Popup</span>()</span><br><span class="line">    .<span class="title function_">setLngLat</span>([lng, lat])</span><br><span class="line">    .<span class="title function_">setHTML</span>(<span class="string">`&lt;strong&gt;<span class="subst">$&#123;placeName&#125;</span>&lt;/strong&gt;`</span>)</span><br><span class="line">    .<span class="title function_">addTo</span>(map);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="å¢é›†äº’å‹•åŠŸèƒ½"><a href="#å¢é›†äº’å‹•åŠŸèƒ½" class="headerlink" title="å¢é›†äº’å‹•åŠŸèƒ½"></a>å¢é›†äº’å‹•åŠŸèƒ½</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»æ“Šå¢é›†æ™‚è‡ªå‹•ç¸®æ”¾</span></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> features = map.<span class="title function_">queryRenderedFeatures</span>(e.<span class="property">point</span>, &#123;</span><br><span class="line">    <span class="attr">layers</span>: [<span class="string">&#x27;clusters&#x27;</span>]</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> clusterId = features[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">cluster_id</span>;</span><br><span class="line">  </span><br><span class="line">  map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">getClusterExpansionZoom</span>(</span><br><span class="line">    clusterId,</span><br><span class="line">    <span class="function">(<span class="params">err, zoom</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å¹³æ»‘ç¸®æ”¾åˆ°ç›®æ¨™ä½ç½®</span></span><br><span class="line">      map.<span class="title function_">easeTo</span>(&#123;</span><br><span class="line">        <span class="attr">center</span>: features[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>,</span><br><span class="line">        <span class="attr">zoom</span>: zoom</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ¯-å¯¦ç”¨æŠ€å·§ç¸½çµ"><a href="#ğŸ¯-å¯¦ç”¨æŠ€å·§ç¸½çµ" class="headerlink" title="ğŸ¯ å¯¦ç”¨æŠ€å·§ç¸½çµ"></a>ğŸ¯ å¯¦ç”¨æŠ€å·§ç¸½çµ</h2><h3 id="1-åˆ†å±¤æ¸²æŸ“ç­–ç•¥"><a href="#1-åˆ†å±¤æ¸²æŸ“ç­–ç•¥" class="headerlink" title="1. åˆ†å±¤æ¸²æŸ“ç­–ç•¥"></a>1. åˆ†å±¤æ¸²æŸ“ç­–ç•¥</h3><p>æ­£ç¢ºçš„åœ–å±¤é †åºï¼ˆç”±ä¸‹åˆ°ä¸Šï¼‰ï¼š</p>
<ol>
<li>åº•å±¤å¡«å……åœ–æ¡ˆ</li>
<li>å¢é›†åœ“åœˆ</li>
<li>å…‰æšˆæ•ˆæœ</li>
<li>æ ¸å¿ƒé»</li>
<li>æ–‡å­—æ¨™ç±¤ï¼ˆæœ€ä¸Šå±¤ï¼‰</li>
</ol>
<h3 id="2-æ•ˆèƒ½æœ€ä½³åŒ–"><a href="#2-æ•ˆèƒ½æœ€ä½³åŒ–" class="headerlink" title="2. æ•ˆèƒ½æœ€ä½³åŒ–"></a>2. æ•ˆèƒ½æœ€ä½³åŒ–</h3><ul>
<li><strong>åœ–å±¤æœ€å°åŒ–</strong>ï¼šåªé¡¯ç¤ºå¿…è¦çš„åœ–å±¤</li>
<li><strong>é©ç•¶çš„å¢é›†è¨­å®š</strong>ï¼šå¹³è¡¡è¦–è¦ºæ•ˆæœèˆ‡æ•ˆèƒ½</li>
<li><strong>äº‹ä»¶è™•ç†æœ€ä½³åŒ–</strong>ï¼šé¿å…éåº¦é »ç¹çš„ API å‘¼å«</li>
</ul>
<h3 id="3-éŒ¯èª¤è™•ç†æ¨¡å¼"><a href="#3-éŒ¯èª¤è™•ç†æ¨¡å¼" class="headerlink" title="3. éŒ¯èª¤è™•ç†æ¨¡å¼"></a>3. éŒ¯èª¤è™•ç†æ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å„ªé›…çš„é™ç´šè™•ç†</span></span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä¸»è¦è³‡æ–™è¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨å‚™ç”¨æ–¹æ¡ˆ&#x27;</span>);</span><br><span class="line">  <span class="comment">// æä¾›ç°¡åŒ–ä½†å¯ç”¨çš„æ›¿ä»£æ–¹æ¡ˆ</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ğŸš€-é€²éšæ‡‰ç”¨æ–¹å‘"><a href="#ğŸš€-é€²éšæ‡‰ç”¨æ–¹å‘" class="headerlink" title="ğŸš€ é€²éšæ‡‰ç”¨æ–¹å‘"></a>ğŸš€ é€²éšæ‡‰ç”¨æ–¹å‘</h2><h3 id="å°ç£åœ°åœ–æ•´åˆ"><a href="#å°ç£åœ°åœ–æ•´åˆ" class="headerlink" title="å°ç£åœ°åœ–æ•´åˆ"></a>å°ç£åœ°åœ–æ•´åˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¼‰å…¥å°ç£ GeoJSON è³‡æ–™</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;./taiwan.geojson&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    map.<span class="title function_">addSource</span>(<span class="string">&#x27;taiwan&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: data</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¥—ç”¨å°ç£ç‰¹è‰²çš„è¦–è¦ºæ¨£å¼</span></span><br><span class="line">    map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;taiwan-regions&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;fill&#x27;</span>,</span><br><span class="line">      <span class="attr">source</span>: <span class="string">&#x27;taiwan&#x27;</span>,</span><br><span class="line">      <span class="attr">paint</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;fill-color&#x27;</span>: <span class="string">&#x27;#ff6b6b&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fill-opacity&#x27;</span>: <span class="number">0.3</span>,</span><br><span class="line">        <span class="string">&#x27;fill-outline-color&#x27;</span>: <span class="string">&#x27;#ee5a52&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="æ™‚é–“è»¸å‹•ç•«"><a href="#æ™‚é–“è»¸å‹•ç•«" class="headerlink" title="æ™‚é–“è»¸å‹•ç•«"></a>æ™‚é–“è»¸å‹•ç•«</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ æ™‚é–“ç¶­åº¦çš„è³‡æ–™è¦–è¦ºåŒ–</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animateData</span>(<span class="params">timeRange</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> filteredData = originalData.<span class="property">features</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">feature</span> =&gt;</span> </span><br><span class="line">    feature.<span class="property">properties</span>.<span class="property">timestamp</span> &gt;= timeRange.<span class="property">start</span> &amp;&amp;</span><br><span class="line">    feature.<span class="property">properties</span>.<span class="property">timestamp</span> &lt;= timeRange.<span class="property">end</span></span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;FeatureCollection&#x27;</span>,</span><br><span class="line">    <span class="attr">features</span>: filteredData</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ’¡-æŠ€è¡“å»¶ä¼¸æ‡‰ç”¨"><a href="#ğŸ’¡-æŠ€è¡“å»¶ä¼¸æ‡‰ç”¨" class="headerlink" title="ğŸ’¡ æŠ€è¡“å»¶ä¼¸æ‡‰ç”¨"></a>ğŸ’¡ æŠ€è¡“å»¶ä¼¸æ‡‰ç”¨</h2><p>é€™äº›æŠ€è¡“å¯ä»¥æ‡‰ç”¨åˆ°ï¼š</p>
<ul>
<li><strong>å•†æ¥­æ™ºèƒ½</strong>ï¼šéŠ·å”®æ•¸æ“šçš„åœ°ç†åˆ†ä½ˆåˆ†æ</li>
<li><strong>ç‰©è¯ç¶²</strong>ï¼šæ„Ÿæ¸¬å™¨è³‡æ–™çš„å³æ™‚åœ°åœ–å±•ç¤º</li>
<li><strong>ç¤¾æœƒåª’é«”</strong>ï¼šç”¨æˆ¶ç°½åˆ°æ•¸æ“šçš„è¦–è¦ºåŒ–</li>
<li><strong>ç½å®³ç®¡ç†</strong>ï¼šç·Šæ€¥äº‹ä»¶çš„åœ°ç†è³‡è¨Šç³»çµ±</li>
</ul>
<h2 id="ğŸ“-å­¸ç¿’å»ºè­°"><a href="#ğŸ“-å­¸ç¿’å»ºè­°" class="headerlink" title="ğŸ“ å­¸ç¿’å»ºè­°"></a>ğŸ“ å­¸ç¿’å»ºè­°</h2><ol>
<li><strong>æ·±å…¥ç ”ç©¶ Mapbox GL JS å®˜æ–¹æ–‡ä»¶</strong></li>
<li><strong>å¯¦é©—ä¸åŒçš„è³‡æ–™ä¾†æºå’Œæ ¼å¼</strong></li>
<li><strong>å˜—è©¦æ•´åˆå…¶ä»– Web API</strong></li>
<li><strong>å„ªåŒ–æ•ˆèƒ½å’Œä½¿ç”¨è€…é«”é©—</strong></li>
</ol>
<h2 id="ğŸ“„-å®Œæ•´-HTML-ç¯„ä¾‹"><a href="#ğŸ“„-å®Œæ•´-HTML-ç¯„ä¾‹" class="headerlink" title="ğŸ“„ å®Œæ•´ HTML ç¯„ä¾‹"></a>ğŸ“„ å®Œæ•´ HTML ç¯„ä¾‹</h2><p>ä»¥ä¸‹æ˜¯å¯ä»¥ç›´æ¥åŸ·è¡Œçš„å®Œæ•´ HTML æª”æ¡ˆï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Create and style clusters<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span> &#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#map</span> &#123; <span class="attribute">position</span>: absolute; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">width</span>: <span class="number">100%</span>; &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// TO MAKE THE MAP APPEAR YOU MUST</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ADD YOUR ACCESS TOKEN FROM</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// https://account.mapbox.com</span></span></span><br><span class="line"><span class="language-javascript">    mapboxgl.<span class="property">accessToken</span> = <span class="string">&#x27;YOUR_MAPBOX_ACCESS_TOKEN&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> map = <span class="keyword">new</span> mapboxgl.<span class="title class_">Map</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">container</span>: <span class="string">&#x27;map&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// Choose from Mapbox&#x27;s core styles, or make your own style with Mapbox Studio</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">style</span>: <span class="string">&#x27;mapbox://styles/mapbox/standard&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">config</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">basemap</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">theme</span>: <span class="string">&#x27;monochrome&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">lightPreset</span>: <span class="string">&#x27;night&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">center</span>: [-<span class="number">103.5917</span>, <span class="number">40.6699</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">zoom</span>: <span class="number">3</span></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    map.<span class="title function_">on</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// Add a new source from our GeoJSON data and</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// set the &#x27;cluster&#x27; option to true. GL-JS will</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// add the point_count property to your source data.</span></span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Point to GeoJSON data. This example visualizes all M1.0+ earthquakes</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// from 12/22/15 to 1/21/16 as logged by USGS&#x27; Earthquake hazards program.</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: <span class="string">&#x27;https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">cluster</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">clusterMaxZoom</span>: <span class="number">14</span>, <span class="comment">// Max zoom to cluster points on</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">clusterRadius</span>: <span class="number">50</span> <span class="comment">// Radius of each cluster when clustering points (defaults to 50)</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;clusters&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">paint</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// Use step expressions (https://docs.mapbox.com/style-spec/reference/expressions/#step)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// with three steps to implement three types of circles:</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   * Blue, 20px circles when point count is less than 100</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   * Yellow, 30px circles when point count is between 100 and 750</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   * Pink, 40px circles when point count is greater than or equal to 750</span></span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-color&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;step&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;#51bbd6&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;#f1f075&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">750</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;#f28cb1&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-radius&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;step&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="number">20</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">750</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">40</span></span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;cluster-count&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;symbol&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">filter</span>: [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">layout</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;text-field&#x27;</span>: [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;point_count_abbreviated&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;text-font&#x27;</span>: [<span class="string">&#x27;DIN Offc Pro Medium&#x27;</span>, <span class="string">&#x27;Arial Unicode MS Bold&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;text-size&#x27;</span>: <span class="number">12</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">addLayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="string">&#x27;unclustered-point&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">source</span>: <span class="string">&#x27;earthquakes&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">filter</span>: [<span class="string">&#x27;!&#x27;</span>, [<span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;point_count&#x27;</span>]],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">paint</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-color&#x27;</span>: <span class="string">&#x27;#11b4da&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-radius&#x27;</span>: <span class="number">4</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-stroke-width&#x27;</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-stroke-color&#x27;</span>: <span class="string">&#x27;#fff&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;circle-emissive-strength&#x27;</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// inspect a cluster on click</span></span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> features = map.<span class="title function_">queryRenderedFeatures</span>(e.<span class="property">point</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">layers</span>: [<span class="string">&#x27;clusters&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> clusterId = features[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">cluster_id</span>;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">getSource</span>(<span class="string">&#x27;earthquakes&#x27;</span>).<span class="title function_">getClusterExpansionZoom</span>(</span></span><br><span class="line"><span class="language-javascript">          clusterId,</span></span><br><span class="line"><span class="language-javascript">          <span class="function">(<span class="params">err, zoom</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (err) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            map.<span class="title function_">easeTo</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">center</span>: features[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">zoom</span>: zoom</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        );</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// When a click event occurs on a feature in</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// the unclustered-point layer, open a popup at</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// the location of the feature, with</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// description HTML from its properties.</span></span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;unclustered-point&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> coordinates = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">geometry</span>.<span class="property">coordinates</span>.<span class="title function_">slice</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> mag = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">mag</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> tsunami = e.<span class="property">features</span>[<span class="number">0</span>].<span class="property">properties</span>.<span class="property">tsunami</span> === <span class="number">1</span> ? <span class="string">&#x27;yes&#x27;</span> : <span class="string">&#x27;no&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Ensure that if the map is zoomed out such that</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// multiple copies of the feature are visible, the</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// popup appears over the copy being pointed to.</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> ([<span class="string">&#x27;mercator&#x27;</span>, <span class="string">&#x27;equirectangular&#x27;</span>].<span class="title function_">includes</span>(map.<span class="title function_">getProjection</span>().<span class="property">name</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">while</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(e.<span class="property">lngLat</span>.<span class="property">lng</span> - coordinates[<span class="number">0</span>]) &gt; <span class="number">180</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            coordinates[<span class="number">0</span>] += e.<span class="property">lngLat</span>.<span class="property">lng</span> &gt; coordinates[<span class="number">0</span>] ? <span class="number">360</span> : -<span class="number">360</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> mapboxgl.<span class="title class_">Popup</span>()</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">setLngLat</span>(coordinates)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">setHTML</span>(</span></span><br><span class="line"><span class="language-javascript">            <span class="string">`magnitude: <span class="subst">$&#123;mag&#125;</span>&lt;br&gt;Was there a tsunami?: <span class="subst">$&#123;tsunami&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">          )</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">addTo</span>(map);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;pointer&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      map.<span class="title function_">on</span>(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="string">&#x27;clusters&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        map.<span class="title function_">getCanvas</span>().<span class="property">style</span>.<span class="property">cursor</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ğŸš€-å¿«é€Ÿé–‹å§‹æ­¥é©Ÿ"><a href="#ğŸš€-å¿«é€Ÿé–‹å§‹æ­¥é©Ÿ" class="headerlink" title="ğŸš€ å¿«é€Ÿé–‹å§‹æ­¥é©Ÿ"></a>ğŸš€ å¿«é€Ÿé–‹å§‹æ­¥é©Ÿ</h3><ol>
<li><p><strong>å–å¾— Access Token</strong>ï¼š</p>
<ul>
<li>å‰å¾€ <a target="_blank" rel="noopener" href="https://account.mapbox.com/">Mapbox Account</a></li>
<li>è¤‡è£½æ‚¨çš„ access token</li>
<li>æ›¿æ›ç¨‹å¼ç¢¼ä¸­çš„ <code>YOUR_MAPBOX_ACCESS_TOKEN</code></li>
</ul>
</li>
<li><p><strong>æœ¬åœ°æ¸¬è©¦</strong>ï¼š</p>
<ul>
<li>å„²å­˜ç‚º <code>.html</code> æª”æ¡ˆ</li>
<li>åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ</li>
<li>äº«å—äº’å‹•å¼å¢é›†åœ°åœ–ï¼</li>
</ul>
</li>
<li><p><strong>å®¢è£½åŒ–èª¿æ•´</strong>ï¼š</p>
<ul>
<li>ä¿®æ”¹ <code>clusterRadius</code> èª¿æ•´å¢é›†åŠå¾‘</li>
<li>æ›´æ› <code>data</code> URL ä½¿ç”¨è‡ªå·±çš„ GeoJSON è³‡æ–™</li>
<li>èª¿æ•´é¡è‰²å’Œå¤§å°çš„ step è¡¨é”å¼</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"><a href="#ğŸ“-æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº" class="headerlink" title="ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº"></a>ğŸ“ æŠ€è¡“æ”¯æ´èˆ‡åƒè€ƒè³‡æº</h2><h3 id="å®˜æ–¹æ–‡ä»¶"><a href="#å®˜æ–¹æ–‡ä»¶" class="headerlink" title="å®˜æ–¹æ–‡ä»¶"></a>å®˜æ–¹æ–‡ä»¶</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/">Mapbox GL JS å®˜æ–¹æ–‡ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://geojson.org/">GeoJSON è¦æ ¼èªªæ˜</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/example/cluster/">Mapbox å¢é›†ç¯„ä¾‹</a></li>
</ul>
<h3 id="è³‡æ–™ä¾†æº"><a href="#è³‡æ–™ä¾†æº" class="headerlink" title="è³‡æ–™ä¾†æº"></a>è³‡æ–™ä¾†æº</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson">USGS åœ°éœ‡è³‡æ–™</a></li>
<li><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson">ä¸–ç•Œé™¸åœ°é‚Šç•Œ GeoJSON</a></li>
</ul>
<h3 id="ç›¸é—œå°ˆæ¡ˆ"><a href="#ç›¸é—œå°ˆæ¡ˆ" class="headerlink" title="ç›¸é—œå°ˆæ¡ˆ"></a>ç›¸é—œå°ˆæ¡ˆ</h3><ul>
<li>æœ¬æ–‡æŠ€è¡“ç¯„ä¾‹åŸºæ–¼ Mapbox å®˜æ–¹å¢é›†æ•™å­¸</li>
</ul>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šæŠ€è¡“åœ˜éšŠ<br><strong>æ›´æ–°æ—¥æœŸ</strong>ï¼š2025å¹´6æœˆ29æ—¥<br><strong>ç‰ˆæœ¬</strong>ï¼šv1.1<br><strong>ç¨‹å¼ç¢¼ä¾†æº</strong>ï¼š<a target="_blank" rel="noopener" href="https://docs.mapbox.com/mapbox-gl-js/example/cluster/">Mapbox Create and Style Clusters</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cookieseventeen.github.io/2025/06/29/mapbox-data-visualization-guide/" data-id="cmg51yfqj000ganmzcnxa92up" data-title="Mapbox åœ°åœ–è³‡æ–™è¦–è¦ºåŒ–æŠ€è¡“åˆ†æèˆ‡æ‡‰ç”¨æŒ‡å—" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Canvas/" rel="tag">Canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Clustering/" rel="tag">Clustering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Visualization/" rel="tag">Data Visualization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GeoJSON/" rel="tag">GeoJSON</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Interactive-Maps/" rel="tag">Interactive Maps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mapbox/" rel="tag">Mapbox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mapbox-GL-JS/" rel="tag">Mapbox GL JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USGS-Data/" rel="tag">USGS Data</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web-Mapping/" rel="tag">Web Mapping</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">ä¸‹ä¸€é  &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†é¡</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tech-Daily/">Tech Daily</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ¨™ç±¤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-15/" rel="tag">Angular 15+</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-19/" rel="tag">Angular 19+</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-Configuration/" rel="tag">Angular Configuration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-SSR/" rel="tag">Angular SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular-Universal/" rel="tag">Angular Universal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Animation-Loop/" rel="tag">Animation Loop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Best-Practices/" rel="tag">Best Practices</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Buildx/" rel="tag">Buildx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Canvas/" rel="tag">Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clean-Architecture/" rel="tag">Clean Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clustering/" rel="tag">Clustering</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Code-Quality/" rel="tag">Code Quality</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Composables/" rel="tag">Composables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Composition-API/" rel="tag">Composition API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Creative-Coding/" rel="tag">Creative Coding</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Visualization/" rel="tag">Data Visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debugging/" rel="tag">Debugging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dependency-Injection/" rel="tag">Dependency Injection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Developer-Experience/" rel="tag">Developer Experience</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Device-Pixel-Ratio/" rel="tag">Device Pixel Ratio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESLint-9-x/" rel="tag">ESLint 9.x</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Enterprise-Architecture/" rel="tag">Enterprise Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error-Handling/" rel="tag">Error Handling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feature-Modules/" rel="tag">Feature Modules</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flat-Config/" rel="tag">Flat Config</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend-Architecture/" rel="tag">Frontend Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend-Initialization/" rel="tag">Frontend Initialization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend-Tooling/" rel="tag">Frontend Tooling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GeoJSON/" rel="tag">GeoJSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Global-Properties/" rel="tag">Global Properties</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML5-Canvas/" rel="tag">HTML5 Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP-Interceptors/" rel="tag">HTTP Interceptors</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hydration/" rel="tag">Hydration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Interactive-Maps/" rel="tag">Interactive Maps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Internationalization/" rel="tag">Internationalization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linting-Rules/" rel="tag">Linting Rules</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mapbox/" rel="tag">Mapbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mapbox-GL-JS/" rel="tag">Mapbox GL JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Migration-Guide/" rel="tag">Migration Guide</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multi-language/" rel="tag">Multi-language</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multi-platform/" rel="tag">Multi-platform</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Naming-Convention/" rel="tag">Naming Convention</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NullInjectorError/" rel="tag">NullInjectorError</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Offline-Deployment/" rel="tag">Offline Deployment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance-Optimization/" rel="tag">Performance Optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pinia/" rel="tag">Pinia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prerender/" rel="tag">Prerender</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PrimeNG/" rel="tag">PrimeNG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Procedural-Animation/" rel="tag">Procedural Animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Production-Deployment/" rel="tag">Production Deployment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Production-Issues/" rel="tag">Production Issues</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Project-Architecture/" rel="tag">Project Architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Project-Setup/" rel="tag">Project Setup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RenderMode/" rel="tag">RenderMode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Route-Guards/" rel="tag">Route Guards</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/" rel="tag">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSR-Configuration/" rel="tag">SSR Configuration</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server-Side-Rendering/" rel="tag">Server-Side Rendering</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Service-Pattern/" rel="tag">Service Pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Signals/" rel="tag">Signals</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Simplex-Noise/" rel="tag">Simplex Noise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Standalone-Components/" rel="tag">Standalone Components</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/State-Management/" rel="tag">State Management</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tailwind-CSS/" rel="tag">Tailwind CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Transloco/" rel="tag">Transloco</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Troubleshooting/" rel="tag">Troubleshooting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USGS-Data/" rel="tag">USGS Data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visualization/" rel="tag">Visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web-Mapping/" rel="tag">Web Mapping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i18n/" rel="tag">i18n</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i18n-Debug/" rel="tag">i18n Debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsverse-transloco/" rel="tag">jsverse&#x2F;transloco</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/provideHttpClient/" rel="tag">provideHttpClient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/withInterceptorsFromDI/" rel="tag">withInterceptorsFromDI</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ¨™ç±¤é›²</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARM/" style="font-size: 10px;">ARM</a> <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/Angular-15/" style="font-size: 10px;">Angular 15+</a> <a href="/tags/Angular-19/" style="font-size: 16.67px;">Angular 19</a> <a href="/tags/Angular-19/" style="font-size: 10px;">Angular 19+</a> <a href="/tags/Angular-Configuration/" style="font-size: 10px;">Angular Configuration</a> <a href="/tags/Angular-SSR/" style="font-size: 10px;">Angular SSR</a> <a href="/tags/Angular-Universal/" style="font-size: 20px;">Angular Universal</a> <a href="/tags/Animation-Loop/" style="font-size: 10px;">Animation Loop</a> <a href="/tags/Best-Practices/" style="font-size: 10px;">Best Practices</a> <a href="/tags/Buildx/" style="font-size: 10px;">Buildx</a> <a href="/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/tags/Canvas/" style="font-size: 10px;">Canvas</a> <a href="/tags/Clean-Architecture/" style="font-size: 10px;">Clean Architecture</a> <a href="/tags/Clustering/" style="font-size: 10px;">Clustering</a> <a href="/tags/Code-Quality/" style="font-size: 10px;">Code Quality</a> <a href="/tags/Composables/" style="font-size: 10px;">Composables</a> <a href="/tags/Composition-API/" style="font-size: 10px;">Composition API</a> <a href="/tags/Creative-Coding/" style="font-size: 10px;">Creative Coding</a> <a href="/tags/Data-Visualization/" style="font-size: 10px;">Data Visualization</a> <a href="/tags/Debugging/" style="font-size: 10px;">Debugging</a> <a href="/tags/Dependency-Injection/" style="font-size: 10px;">Dependency Injection</a> <a href="/tags/Design-Patterns/" style="font-size: 10px;">Design Patterns</a> <a href="/tags/Developer-Experience/" style="font-size: 10px;">Developer Experience</a> <a href="/tags/Device-Pixel-Ratio/" style="font-size: 10px;">Device Pixel Ratio</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/ESLint-9-x/" style="font-size: 10px;">ESLint 9.x</a> <a href="/tags/Enterprise-Architecture/" style="font-size: 10px;">Enterprise Architecture</a> <a href="/tags/Error-Handling/" style="font-size: 13.33px;">Error Handling</a> <a href="/tags/Feature-Modules/" style="font-size: 10px;">Feature Modules</a> <a href="/tags/Flat-Config/" style="font-size: 10px;">Flat Config</a> <a href="/tags/Frontend-Architecture/" style="font-size: 10px;">Frontend Architecture</a> <a href="/tags/Frontend-Initialization/" style="font-size: 10px;">Frontend Initialization</a> <a href="/tags/Frontend-Tooling/" style="font-size: 10px;">Frontend Tooling</a> <a href="/tags/GeoJSON/" style="font-size: 10px;">GeoJSON</a> <a href="/tags/Global-Properties/" style="font-size: 10px;">Global Properties</a> <a href="/tags/HTML5-Canvas/" style="font-size: 10px;">HTML5 Canvas</a> <a href="/tags/HTTP-Interceptors/" style="font-size: 10px;">HTTP Interceptors</a> <a href="/tags/HttpClient/" style="font-size: 10px;">HttpClient</a> <a href="/tags/Hydration/" style="font-size: 13.33px;">Hydration</a> <a href="/tags/Interactive-Maps/" style="font-size: 10px;">Interactive Maps</a> <a href="/tags/Internationalization/" style="font-size: 10px;">Internationalization</a> <a href="/tags/JavaScript/" style="font-size: 13.33px;">JavaScript</a> <a href="/tags/Linting-Rules/" style="font-size: 10px;">Linting Rules</a> <a href="/tags/Mapbox/" style="font-size: 10px;">Mapbox</a> <a href="/tags/Mapbox-GL-JS/" style="font-size: 10px;">Mapbox GL JS</a> <a href="/tags/Migration-Guide/" style="font-size: 10px;">Migration Guide</a> <a href="/tags/Multi-language/" style="font-size: 10px;">Multi-language</a> <a href="/tags/Multi-platform/" style="font-size: 10px;">Multi-platform</a> <a href="/tags/Naming-Convention/" style="font-size: 10px;">Naming Convention</a> <a href="/tags/NullInjectorError/" style="font-size: 10px;">NullInjectorError</a> <a href="/tags/Offline-Deployment/" style="font-size: 10px;">Offline Deployment</a> <a href="/tags/Performance-Optimization/" style="font-size: 16.67px;">Performance Optimization</a> <a href="/tags/Pinia/" style="font-size: 10px;">Pinia</a> <a href="/tags/Prerender/" style="font-size: 13.33px;">Prerender</a> <a href="/tags/PrimeNG/" style="font-size: 10px;">PrimeNG</a> <a href="/tags/Procedural-Animation/" style="font-size: 10px;">Procedural Animation</a> <a href="/tags/Production-Deployment/" style="font-size: 10px;">Production Deployment</a> <a href="/tags/Production-Issues/" style="font-size: 10px;">Production Issues</a> <a href="/tags/Project-Architecture/" style="font-size: 10px;">Project Architecture</a> <a href="/tags/Project-Setup/" style="font-size: 10px;">Project Setup</a> <a href="/tags/RenderMode/" style="font-size: 13.33px;">RenderMode</a> <a href="/tags/Route-Guards/" style="font-size: 13.33px;">Route Guards</a> <a href="/tags/SEO/" style="font-size: 13.33px;">SEO</a> <a href="/tags/SSR/" style="font-size: 16.67px;">SSR</a> <a href="/tags/SSR-Configuration/" style="font-size: 13.33px;">SSR Configuration</a> <a href="/tags/Server-Side-Rendering/" style="font-size: 16.67px;">Server-Side Rendering</a> <a href="/tags/Service-Pattern/" style="font-size: 10px;">Service Pattern</a> <a href="/tags/Signals/" style="font-size: 10px;">Signals</a> <a href="/tags/Simplex-Noise/" style="font-size: 10px;">Simplex Noise</a> <a href="/tags/Standalone-Components/" style="font-size: 13.33px;">Standalone Components</a> <a href="/tags/State-Management/" style="font-size: 10px;">State Management</a> <a href="/tags/Tailwind-CSS/" style="font-size: 10px;">Tailwind CSS</a> <a href="/tags/Transloco/" style="font-size: 16.67px;">Transloco</a> <a href="/tags/Troubleshooting/" style="font-size: 10px;">Troubleshooting</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/USGS-Data/" style="font-size: 10px;">USGS Data</a> <a href="/tags/Visualization/" style="font-size: 10px;">Visualization</a> <a href="/tags/Vue-js/" style="font-size: 10px;">Vue.js</a> <a href="/tags/Web-Mapping/" style="font-size: 10px;">Web Mapping</a> <a href="/tags/i18n/" style="font-size: 10px;">i18n</a> <a href="/tags/i18n-Debug/" style="font-size: 10px;">i18n Debug</a> <a href="/tags/jsverse-transloco/" style="font-size: 10px;">jsverse/transloco</a> <a href="/tags/provideHttpClient/" style="font-size: 10px;">provideHttpClient</a> <a href="/tags/withInterceptorsFromDI/" style="font-size: 10px;">withInterceptorsFromDI</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½™æ•´</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">ä¹æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">å…­æœˆ 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/09/29/canvas-simplex-noise-wave-animation-guide/">Canvas + Simplex Noise å‹•æ…‹æ“¬çœŸæ³¢æµªå¯¦ä½œæŒ‡å—</a>
          </li>
        
          <li>
            <a href="/2025/06/29/angular-enterprise-project-initialization-guide/">Angular 19 ä¼æ¥­ç´šå‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–å®Œæ•´æŒ‡å—</a>
          </li>
        
          <li>
            <a href="/2025/06/29/angular-ssr-transloco-troubleshooting-guide/">Angular SSR + Transloco æ•…éšœæ’é™¤èˆ‡é™¤éŒ¯å®Œæ•´æŒ‡å—</a>
          </li>
        
          <li>
            <a href="/2025/06/29/angular-ssr-transloco-setup-complete-guide/">Angular SSR + Transloco åœ‹éš›åŒ–é…ç½®å¯¦æˆ°æŒ‡å—</a>
          </li>
        
          <li>
            <a href="/2025/06/29/angular-httpclient-modern-configuration-guide/">Angular HttpClient ç¾ä»£åŒ–é…ç½®èˆ‡ withInterceptorsFromDI å¯¦æˆ°æŒ‡å—</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Ben Hsieh<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>